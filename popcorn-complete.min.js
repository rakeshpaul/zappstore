/*92f0780b2a9f5b84753b3cc3cf16f1cd20a42f06*/(function(s,j){function b(a,g){return function(){if(e.plugin.debug){return a.apply(this,arguments)}try{return a.apply(this,arguments)}catch(k){e.plugin.errors.push({plugin:g,thrown:k,source:a.toString()});this.emit("pluginerror",e.plugin.errors)}}}if(j.addEventListener){var d=Array.prototype,c=Object.prototype,h=d.forEach,n=d.slice,p=c.hasOwnProperty,q=c.toString,i=s.Popcorn,r=[],f=false,o={events:{hash:{},apis:{}}},x=function(){return s.requestAnimationFrame||s.webkitRequestAnimationFrame||s.mozRequestAnimationFrame||s.oRequestAnimationFrame||s.msRequestAnimationFrame||function(a){s.setTimeout(a,16)}}(),e=function(a,g){return new e.p.init(a,g||null)};e.version="1.3";e.isSupported=true;e.instances=[];e.p=e.prototype={init:function(v,g){var a,t=this;if(typeof v==="function"){if(j.readyState==="complete"){v(j,e)}else{r.push(v);if(!f){f=true;var k=function(){j.removeEventListener("DOMContentLoaded",k,false);for(var w=0,z=r.length;w<z;w++){r[w].call(j,e)}r=null};j.addEventListener("DOMContentLoaded",k,false)}}}else{if(typeof v==="string"){try{a=j.querySelector(v)}catch(l){throw Error("Popcorn.js Error: Invalid media element selector: "+v)}}this.media=a||v;a=this.media.nodeName&&this.media.nodeName.toLowerCase()||"video";this[a]=this.media;this.options=g||{};this.id=this.options.id||e.guid(a);if(e.byId(this.id)){throw Error("Popcorn.js Error: Cannot use duplicate ID ("+this.id+")")}this.isDestroyed=false;this.data={running:{cue:[]},timeUpdate:e.nop,disabled:{},events:{},hooks:{},history:[],state:{volume:this.media.volume},trackRefs:{},trackEvents:{byStart:[{start:-1,end:-1}],byEnd:[{start:-1,end:-1}],animating:[],startIndex:0,endIndex:0,previousUpdateTime:-1}};e.instances.push(this);var u=function(){if(t.media.currentTime<0){t.media.currentTime=0}t.media.removeEventListener("loadeddata",u,false);var C,D,w,B,z;C=t.media.duration;C=C!=C?Number.MAX_VALUE:C+1;e.addTrackEvent(t,{start:C,end:C});if(t.options.frameAnimation){t.data.timeUpdate=function(){e.timeUpdate(t,{});e.forEach(e.manifest,function(E,F){if(D=t.data.running[F]){B=D.length;for(var G=0;G<B;G++){w=D[G];(z=w._natives)&&z.frame&&z.frame.call(t,{},w,t.currentTime())}}});t.emit("timeupdate");!t.isDestroyed&&x(t.data.timeUpdate)};!t.isDestroyed&&x(t.data.timeUpdate)}else{t.data.timeUpdate=function(E){e.timeUpdate(t,E)};t.isDestroyed||t.media.addEventListener("timeupdate",t.data.timeUpdate,false)}};Object.defineProperty(this,"error",{get:function(){return t.media.error}});t.media.readyState>=2?u():t.media.addEventListener("loadeddata",u,false);return this}}};e.p.init.prototype=e.p;e.byId=function(l){for(var g=e.instances,a=g.length,k=0;k<a;k++){if(g[k].id===l){return g[k]}}return null};e.forEach=function(t,g,a){if(!t||!g){return{}}a=a||this;var l,k;if(h&&t.forEach===h){return t.forEach(g,a)}if(q.call(t)==="[object NodeList]"){l=0;for(k=t.length;l<k;l++){g.call(a,t[l],l,t)}return t}for(l in t){p.call(t,l)&&g.call(a,t[l],l,t)}return t};e.extend=function(a){var g=n.call(arguments,1);e.forEach(g,function(l){for(var k in l){a[k]=l[k]}});return a};e.extend(e,{noConflict:function(a){if(a){s.Popcorn=i}return e},error:function(a){throw Error(a)},guid:function(a){e.guid.counter++;return(a?a:"")+(+new Date+e.guid.counter)},sizeOf:function(k){var g=0,a;for(a in k){g++}return g},isArray:Array.isArray||function(a){return q.call(a)==="[object Array]"},nop:function(){},position:function(w){w=w.getBoundingClientRect();var k={},a=j.documentElement,u=j.body,l,t,v;l=a.clientTop||u.clientTop||0;t=a.clientLeft||u.clientLeft||0;v=s.pageYOffset&&a.scrollTop||u.scrollTop;a=s.pageXOffset&&a.scrollLeft||u.scrollLeft;l=Math.ceil(w.top+v-l);t=Math.ceil(w.left+a-t);for(var g in w){k[g]=Math.round(w[g])}return e.extend({},k,{top:l,left:t})},disable:function(l,g){if(!l.data.disabled[g]){l.data.disabled[g]=true;for(var a=l.data.running[g].length-1,k;a>=0;a--){k=l.data.running[g][a];k._natives.end.call(l,null,k)}}return l},enable:function(l,g){if(l.data.disabled[g]){l.data.disabled[g]=false;for(var a=l.data.running[g].length-1,k;a>=0;a--){k=l.data.running[g][a];k._natives.start.call(l,null,k)}}return l},destroy:function(v){var g=v.data.events,a=v.data.trackEvents,t,k,l,u;for(k in g){t=g[k];for(l in t){delete t[l]}g[k]=null}for(u in e.registryByName){e.removePlugin(v,u)}a.byStart.length=0;a.byEnd.length=0;if(!v.isDestroyed){v.data.timeUpdate&&v.media.removeEventListener("timeupdate",v.data.timeUpdate,false);v.isDestroyed=true}}});e.guid.counter=1;e.extend(e.p,function(){var a={};e.forEach("load play pause currentTime playbackRate volume duration preload playbackRate autoplay loop controls muted buffered readyState seeking paused played seekable ended".split(/\s+/g),function(g){a[g]=function(l){var k;if(typeof this.media[g]==="function"){if(l!=null&&/play|pause/.test(g)){this.media.currentTime=e.util.toSeconds(l)}this.media[g]();return this}if(l!=null){k=this.media[g];this.media[g]=l;k!==l&&this.emit("attrchange",{attribute:g,previousValue:k,currentValue:l});return this}return this.media[g]}});return a}());e.forEach("enable disable".split(" "),function(a){e.p[a]=function(g){return e[a](this,g)}});e.extend(e.p,{roundTime:function(){return Math.round(this.media.currentTime)},exec:function(w,k,a){var u=arguments.length,l,t;try{t=e.util.toSeconds(w)}catch(v){}if(typeof t==="number"){w=t}if(typeof w==="number"&&u===2){a=k;k=w;w=e.guid("cue")}else{if(u===1){k=-1}else{if(l=this.getTrackEvent(w)){if(typeof w==="string"&&u===2){if(typeof k==="number"){a=l._natives.start}if(typeof k==="function"){a=k;k=l.start}}}else{if(u>=2){if(typeof k==="string"){try{t=e.util.toSeconds(k)}catch(g){}k=t}if(typeof k==="number"){a=e.nop()}if(typeof k==="function"){a=k;k=-1}}}}}e.addTrackEvent(this,{id:w,start:k,end:k+1,_running:false,_natives:{start:a||e.nop,end:e.nop,type:"cue"}});return this},mute:function(a){a=a==null||a===true?"muted":"unmuted";if(a==="unmuted"){this.media.muted=false;this.media.volume=this.data.state.volume}if(a==="muted"){this.data.state.volume=this.media.volume;this.media.muted=true}this.emit(a);return this},unmute:function(a){return this.mute(a==null?false:!a)},position:function(){return e.position(this.media)},toggle:function(a){return e[this.data.disabled[a]?"enable":"disable"](this,a)},defaults:function(a,g){if(e.isArray(a)){e.forEach(a,function(l){for(var k in l){this.defaults(k,l[k])}},this);return this}if(!this.options.defaults){this.options.defaults={}}this.options.defaults[a]||(this.options.defaults[a]={});e.extend(this.options.defaults[a],g);return this}});e.Events={UIEvents:"blur focus focusin focusout load resize scroll unload",MouseEvents:"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave click dblclick",Events:"loadstart progress suspend emptied stalled play pause error loadedmetadata loadeddata waiting playing canplay canplaythrough seeking seeked timeupdate ended ratechange durationchange volumechange"};e.Events.Natives=e.Events.UIEvents+" "+e.Events.MouseEvents+" "+e.Events.Events;o.events.apiTypes=["UIEvents","MouseEvents","Events"];(function(u,g){for(var a=o.events.apiTypes,t=u.Natives.split(/\s+/g),k=0,l=t.length;k<l;k++){g.hash[t[k]]=true}a.forEach(function(z){g.apis[z]={};for(var B=u[z].split(/\s+/g),v=B.length,w=0;w<v;w++){g.apis[z][B[w]]=true}})})(e.Events,o.events);e.events={isNative:function(a){return !!o.events.hash[a]},getInterface:function(v){if(!e.events.isNative(v)){return false}var g=o.events,a=g.apiTypes;g=g.apis;for(var t=0,k=a.length,l,u;t<k;t++){u=a[t];if(g[u][v]){l=u;break}}return l},all:e.Events.Natives.split(/\s+/g),fn:{trigger:function(k,g){var a;if(this.data.events[k]&&e.sizeOf(this.data.events[k])){if(a=e.events.getInterface(k)){a=j.createEvent(a);a.initEvent(k,true,true,s,1);this.media.dispatchEvent(a);return this}e.forEach(this.data.events[k],function(l){l.call(this,g)},this)}return this},listen:function(u,g){var a=this,t=true,k=e.events.hooks[u],l;if(!this.data.events[u]){this.data.events[u]={};t=false}if(k){k.add&&k.add.call(this,{},g);if(k.bind){u=k.bind}if(k.handler){l=g;g=function(v){k.handler.call(a,v,l)}}t=true;if(!this.data.events[u]){this.data.events[u]={};t=false}}this.data.events[u][g.name||g.toString()+e.guid()]=g;!t&&e.events.all.indexOf(u)>-1&&this.media.addEventListener(u,function(v){e.forEach(a.data.events[u],function(w){typeof w==="function"&&w.call(a,v)})},false);return this},unlisten:function(a,g){if(this.data.events[a]&&this.data.events[a][g]){delete this.data.events[a][g];return this}this.data.events[a]=null;return this}},hooks:{canplayall:{bind:"canplaythrough",add:function(k,g){var a=false;if(this.media.readyState){g.call(this,k);a=true}this.data.hooks.canplayall={fired:a}},handler:function(a,g){if(!this.data.hooks.canplayall.fired){g.call(this,a);this.data.hooks.canplayall.fired=true}}}}};e.forEach([["trigger","emit"],["listen","on"],["unlisten","off"]],function(a){e.p[a[0]]=e.p[a[1]]=e.events.fn[a[0]]});e.addTrackEvent=function(v,g){var a,t;if(g.id){a=v.getTrackEvent(g.id)}if(a){t=true;g=e.extend({},a,g);v.removeTrackEvent(g.id)}if(g&&g._natives&&g._natives.type&&v.options.defaults&&v.options.defaults[g._natives.type]){g=e.extend({},v.options.defaults[g._natives.type],g)}if(g._natives){g._id=g.id||g._id||e.guid(g._natives.type);v.data.history.push(g._id)}g.start=e.util.toSeconds(g.start,v.options.framerate);g.end=e.util.toSeconds(g.end,v.options.framerate);var k=v.data.trackEvents.byStart,l=v.data.trackEvents.byEnd,u;for(u=k.length-1;u>=0;u--){if(g.start>=k[u].start){k.splice(u+1,0,g);break}}for(k=l.length-1;k>=0;k--){if(g.end>l[k].end){l.splice(k+1,0,g);break}}if(g.end>v.media.currentTime&&g.start<=v.media.currentTime){g._running=true;v.data.running[g._natives.type].push(g);v.data.disabled[g._natives.type]||g._natives.start.call(v,null,g)}u<=v.data.trackEvents.startIndex&&g.start<=v.data.trackEvents.previousUpdateTime&&v.data.trackEvents.startIndex++;k<=v.data.trackEvents.endIndex&&g.end<v.data.trackEvents.previousUpdateTime&&v.data.trackEvents.endIndex++;this.timeUpdate(v,null,true);g._id&&e.addTrackEvent.ref(v,g);if(t){t=g._natives.type==="cue"?"cuechange":"trackchange";v.emit(t,{id:g.id,previousValue:{time:a.start,fn:a._natives.start},currentValue:{time:g.start,fn:g._natives.start}})}};e.addTrackEvent.ref=function(a,g){a.data.trackRefs[g._id]=g;return a};e.removeTrackEvent=function(u,w){for(var B,z,g=u.data.history.length,k=u.data.trackEvents.byStart.length,l=0,v=0,D=[],a=[],C=[],t=[];--k>-1;){B=u.data.trackEvents.byStart[l];z=u.data.trackEvents.byEnd[l];if(!B._id){D.push(B);a.push(z)}if(B._id){B._id!==w&&D.push(B);z._id!==w&&a.push(z);if(B._id===w){v=l;B._natives._teardown&&B._natives._teardown.call(u,B)}}l++}k=u.data.trackEvents.animating.length;l=0;if(k){for(;--k>-1;){B=u.data.trackEvents.animating[l];B._id||C.push(B);B._id&&B._id!==w&&C.push(B);l++}}v<=u.data.trackEvents.startIndex&&u.data.trackEvents.startIndex--;v<=u.data.trackEvents.endIndex&&u.data.trackEvents.endIndex--;u.data.trackEvents.byStart=D;u.data.trackEvents.byEnd=a;u.data.trackEvents.animating=C;for(k=0;k<g;k++){u.data.history[k]!==w&&t.push(u.data.history[k])}u.data.history=t;e.removeTrackEvent.ref(u,w)};e.removeTrackEvent.ref=function(a,g){delete a.data.trackRefs[g];return a};e.getTrackEvents=function(t){var g=[];t=t.data.trackEvents.byStart;for(var a=t.length,l=0,k;l<a;l++){k=t[l];k._id&&g.push(k)}return g};e.getTrackEvents.ref=function(a){return a.data.trackRefs};e.getTrackEvent=function(a,g){return a.data.trackRefs[g]};e.getTrackEvent.ref=function(a,g){return a.data.trackRefs[g]};e.getLastTrackEventId=function(a){return a.data.history[a.data.history.length-1]};e.timeUpdate=function(u,w){var B=u.media.currentTime,z=u.data.trackEvents.previousUpdateTime,g=u.data.trackEvents,k=g.endIndex,l=g.startIndex,v=g.byStart.length,D=g.byEnd.length,a=e.registryByName,C,t,E;if(z<=B){for(;g.byEnd[k]&&g.byEnd[k].end<=B;){C=g.byEnd[k];t=(z=C._natives)&&z.type;if(!z||a[t]||u[t]){if(C._running===true){C._running=false;E=u.data.running[t];E.splice(E.indexOf(C),1);if(!u.data.disabled[t]){z.end.call(u,w,C);u.emit("trackend",e.extend({},C,{plugin:t,type:"trackend"}))}}k++}else{e.removeTrackEvent(u,C._id);return}}for(;g.byStart[l]&&g.byStart[l].start<=B;){C=g.byStart[l];t=(z=C._natives)&&z.type;if(!z||a[t]||u[t]){if(C.end>B&&C._running===false){C._running=true;u.data.running[t].push(C);if(!u.data.disabled[t]){z.start.call(u,w,C);u.emit("trackstart",e.extend({},C,{plugin:t,type:"trackstart"}))}}l++}else{e.removeTrackEvent(u,C._id);return}}}else{if(z>B){for(;g.byStart[l]&&g.byStart[l].start>B;){C=g.byStart[l];t=(z=C._natives)&&z.type;if(!z||a[t]||u[t]){if(C._running===true){C._running=false;E=u.data.running[t];E.splice(E.indexOf(C),1);if(!u.data.disabled[t]){z.end.call(u,w,C);u.emit("trackend",e.extend({},C,{plugin:t,type:"trackend"}))}}l--}else{e.removeTrackEvent(u,C._id);return}}for(;g.byEnd[k]&&g.byEnd[k].end>B;){C=g.byEnd[k];t=(z=C._natives)&&z.type;if(!z||a[t]||u[t]){if(C.start<=B&&C._running===false){C._running=true;u.data.running[t].push(C);if(!u.data.disabled[t]){z.start.call(u,w,C);u.emit("trackstart",e.extend({},C,{plugin:t,type:"trackstart"}))}}k--}else{e.removeTrackEvent(u,C._id);return}}}}g.endIndex=k;g.startIndex=l;g.previousUpdateTime=B;g.byStart.length<v&&g.startIndex--;g.byEnd.length<D&&g.endIndex--};e.extend(e.p,{getTrackEvents:function(){return e.getTrackEvents.call(null,this)},getTrackEvent:function(a){return e.getTrackEvent.call(null,this,a)},getLastTrackEventId:function(){return e.getLastTrackEventId.call(null,this)},removeTrackEvent:function(a){e.removeTrackEvent.call(null,this,a);return this},removePlugin:function(a){e.removePlugin.call(null,this,a);return this},timeUpdate:function(a){e.timeUpdate.call(null,this,a);return this},destroy:function(){e.destroy.call(null,this);return this}});e.manifest={};e.registry=[];e.registryByName={};e.plugin=function(t,v,z){if(e.protect.natives.indexOf(t.toLowerCase())>=0){e.error("'"+t+"' is a protected function name")}else{var w=["start","end"],g={},k=typeof v==="function",l=["_setup","_teardown","start","end","frame"],u=function(C,D){C=C||e.nop;D=D||e.nop;return function(){C.apply(this,arguments);D.apply(this,arguments)}};e.manifest[t]=z=z||v.manifest||{};l.forEach(function(C){v[C]=b(v[C]||e.nop,t)});var B=function(C,G){if(!G){return this}if(G.ranges&&e.isArray(G.ranges)){e.forEach(G.ranges,function(H){H=e.extend({},G,H);delete H.ranges;this[t](H)},this);return this}var D=G._natives={},E="",F;e.extend(D,C);G._natives.type=t;G._running=false;D.start=D.start||D["in"];D.end=D.end||D.out;if(G.once){D.end=u(D.end,function(){this.removeTrackEvent(G._id)})}D._teardown=u(function(){var I=n.call(arguments),H=this.data.running[D.type];I.unshift(null);I[1]._running&&H.splice(H.indexOf(G),1)&&D.end.apply(this,I)},D._teardown);G.compose=G.compose&&G.compose.split(" ")||[];G.effect=G.effect&&G.effect.split(" ")||[];G.compose=G.compose.concat(G.effect);G.compose.forEach(function(H){E=e.compositions[H]||{};l.forEach(function(I){D[I]=u(D[I],E[I])})});G._natives.manifest=z;if(!("start" in G)){G.start=G["in"]||0}if(!G.end&&G.end!==0){G.end=G.out||Number.MAX_VALUE}if(!p.call(G,"toString")){G.toString=function(){var H=["start: "+G.start,"end: "+G.end,"id: "+(G.id||G._id)];G.target!=null&&H.push("target: "+G.target);return t+" ( "+H.join(", ")+" )"}}if(!G.target){F="options" in z&&z.options;G.target=F&&"target" in F&&F.target}if(G._natives){G._id=e.guid(G._natives.type)}G._natives._setup&&G._natives._setup.call(this,G);e.addTrackEvent(this,G);e.forEach(C,function(I,H){H!=="type"&&w.indexOf(H)===-1&&this.on(H,I)},this);return this};e.p[t]=g[t]=function(C,E){var D;if(C&&!E){E=C}else{if(D=this.getTrackEvent(C)){E=e.extend({},D,E);e.addTrackEvent(this,E);return this}else{E.id=C}}this.data.running[t]=this.data.running[t]||[];D=e.extend({},this.options.defaults&&this.options.defaults[t]||{},E);return B.call(this,k?v.call(this,D):v,D)};z&&e.extend(v,{manifest:z});var a={fn:g[t],definition:v,base:v,parents:[],name:t};e.registry.push(e.extend(g,a,{type:t}));e.registryByName[t]=a;return g}};e.plugin.errors=[];e.plugin.debug=e.version==="1.3";e.removePlugin=function(v,g){if(!g){g=v;v=e.p;if(e.protect.natives.indexOf(g.toLowerCase())>=0){e.error("'"+g+"' is a protected function name");return}var a=e.registry.length,t;for(t=0;t<a;t++){if(e.registry[t].name===g){e.registry.splice(t,1);delete e.registryByName[g];delete e.manifest[g];delete v[g];return}}}a=v.data.trackEvents.byStart;t=v.data.trackEvents.byEnd;var k=v.data.trackEvents.animating,l,u;l=0;for(u=a.length;l<u;l++){if(a[l]&&a[l]._natives&&a[l]._natives.type===g){a[l]._natives._teardown&&a[l]._natives._teardown.call(v,a[l]);a.splice(l,1);l--;u--;if(v.data.trackEvents.startIndex<=l){v.data.trackEvents.startIndex--;v.data.trackEvents.endIndex--}}t[l]&&t[l]._natives&&t[l]._natives.type===g&&t.splice(l,1)}l=0;for(u=k.length;l<u;l++){if(k[l]&&k[l]._natives&&k[l]._natives.type===g){k.splice(l,1);l--;u--}}};e.compositions={};e.compose=function(k,g,a){e.manifest[k]=a||g.manifest||{};e.compositions[k]=g};e.plugin.effect=e.effect=e.compose;var m=/^(?:\.|#|\[)/;e.dom={debug:false,find:function(l,g){var a=null;l=l.trim();g=g||j;if(l){if(!m.test(l)){a=j.getElementById(l);if(a!==null){return a}}try{a=g.querySelector(l)}catch(k){if(e.dom.debug){throw Error(k)}}}return a}};var A=/\?/,y={url:"",data:"",dataType:"",success:e.nop,type:"GET",async:true,xhr:function(){return new s.XMLHttpRequest}};e.xhr=function(a){a.dataType=a.dataType&&a.dataType.toLowerCase()||null;if(a.dataType&&(a.dataType==="jsonp"||a.dataType==="script")){e.xhr.getJSONP(a.url,a.success,a.dataType==="script")}else{a=e.extend({},y,a);a.ajax=a.xhr();if(a.ajax){if(a.type==="GET"&&a.data){a.url+=(A.test(a.url)?"&":"?")+a.data;a.data=null}a.ajax.open(a.type,a.url,a.async);a.ajax.send(a.data||null);return e.xhr.httpData(a)}}};e.xhr.httpData=function(t){var g,a=null,l,k=null;t.ajax.onreadystatechange=function(){if(t.ajax.readyState===4){try{a=JSON.parse(t.ajax.responseText)}catch(u){}g={xml:t.ajax.responseXML,text:t.ajax.responseText,json:a};if(!g.xml||!g.xml.documentElement){g.xml=null;try{l=new DOMParser;k=l.parseFromString(t.ajax.responseText,"text/xml");if(!k.getElementsByTagName("parsererror").length){g.xml=k}}catch(v){}}if(t.dataType){g=g[t.dataType]}t.success.call(t.ajax,g)}};return g};e.xhr.getJSONP=function(l,u,w){var v=j.head||j.getElementsByTagName("head")[0]||j.documentElement,a=j.createElement("script"),g=false,k=[];k=/(=)\?(?=&|$)|\?\?/;var t,z;if(!w){z=l.match(/(callback=[^&]*)/);if(z!==null&&z.length){k=z[1].split("=")[1];if(k==="?"){k="jsonp"}t=e.guid(k);l=l.replace(/(callback=[^&]*)/,"callback="+t)}else{t=e.guid("jsonp");if(k.test(l)){l=l.replace(k,"$1"+t)}k=l.split(/\?(.+)?/);l=k[0]+"?";if(k[1]){l+=k[1]+"&"}l+="callback="+t}window[t]=function(B){u&&u(B);g=true}}a.addEventListener("load",function(){w&&u&&u();g&&delete window[t];v.removeChild(a)},false);a.src=l;v.insertBefore(a,v.firstChild)};e.getJSONP=e.xhr.getJSONP;e.getScript=e.xhr.getScript=function(a,g){return e.xhr.getJSONP(a,g,true)};e.util={toSeconds:function(u,g){var a=/^([0-9]+:){0,2}[0-9]+([.;][0-9]+)?$/,t,k,l;if(typeof u==="number"){return u}typeof u==="string"&&!a.test(u)&&e.error("Invalid time format");a=u.split(":");t=a.length-1;k=a[t];if(k.indexOf(";")>-1){k=k.split(";");l=0;if(g&&typeof g==="number"){l=parseFloat(k[1],10)/g}a[t]=parseInt(k[0],10)+l}t=a[0];return{1:parseFloat(t,10),2:parseInt(t,10)*60+parseFloat(a[1],10),3:parseInt(t,10)*3600+parseInt(a[1],10)*60+parseFloat(a[2],10)}[a.length||1]}};e.p.cue=e.p.exec;e.protect={natives:function(a){return Object.keys?Object.keys(a):function(g){var l,k=[];for(l in g){p.call(g,l)&&k.push(l)}return k}(a)}(e.p).map(function(a){return a.toLowerCase()})};e.forEach({listen:"on",unlisten:"off",trigger:"emit",exec:"cue"},function(k,g){var a=e.p[g];e.p[g]=function(){if(typeof console!=="undefined"&&console.warn){console.warn("Deprecated method '"+g+"', "+(k==null?"do not use.":"use '"+k+"' instead."));e.p[g]=a}return e.p[k].apply(this,[].slice.call(arguments))}});s.Popcorn=e}else{s.Popcorn={isSupported:false};for(d="byId forEach extend effects error guid sizeOf isArray nop position disable enable destroyaddTrackEvent removeTrackEvent getTrackEvents getTrackEvent getLastTrackEventId timeUpdate plugin removePlugin compose effect xhr getJSONP getScript".split(/\s+/);d.length;){s.Popcorn[d.shift()]=function(){}}}})(window,window.document);(function(h,f){var p=h.document,b=h.location,e=/:\/\//,c=b.href.replace(b.href.split("/").slice(-1)[0],""),i=function(k,g,a){k=k||0;g=(g||k||0)+1;a=a||1;g=Math.ceil((g-k)/a)||0;var d=0,j=[];for(j.length=g;d<g;){j[d++]=k;k+=a}return j};f.sequence=function(a,d){return new f.sequence.init(a,d)};f.sequence.init=function(j,g){this.parent=p.getElementById(j);this.seqId=f.guid("__sequenced");this.queue=[];this.playlist=[];this.inOuts={ofVideos:[],ofClips:[]};this.dims={width:0,height:0};this.active=0;this.playing=this.cycling=false;this.times={last:0};this.events={};var a=this,d=0;f.forEach(g,function(q,k){var o=p.createElement("video");o.preload="auto";o.controls=true;o.style.display=k&&"none"||"";o.id=a.seqId+"-"+k;a.queue.push(o);var l=q["in"],m=q.out;a.inOuts.ofVideos.push({"in":l!==undefined&&l||1,out:m!==undefined&&m||0});a.inOuts.ofVideos[k].out=a.inOuts.ofVideos[k].out||a.inOuts.ofVideos[k]["in"]+2;o.src=!e.test(q.src)?c+q.src:q.src;o.setAttribute("data-sequence-owner",j);o.setAttribute("data-sequence-guid",a.seqId);o.setAttribute("data-sequence-id",k);o.setAttribute("data-sequence-clip",[a.inOuts.ofVideos[k]["in"],a.inOuts.ofVideos[k].out].join(":"));a.parent.appendChild(o);a.playlist.push(f("#"+o.id))});a.inOuts.ofVideos.forEach(function(k){k={"in":d,out:d+(k.out-k["in"])};a.inOuts.ofClips.push(k);d=k.out+1});f.forEach(this.queue,function(k,l){function m(){if(!l){a.dims.width=k.videoWidth;a.dims.height=k.videoHeight}k.currentTime=a.inOuts.ofVideos[l]["in"]-0.5;k.removeEventListener("canplaythrough",m,false);return true}k.addEventListener("canplaythrough",m,false);k.addEventListener("play",function(){a.playing=true},false);k.addEventListener("pause",function(){a.playing=false},false);k.addEventListener("timeupdate",function(r){r=r.srcElement||r.target;r=+(r.dataset&&r.dataset.sequenceId||r.getAttribute("data-sequence-id"));var o=Math.floor(k.currentTime);if(a.times.last!==o&&r===a.active){a.times.last=o;o===a.inOuts.ofVideos[r].out&&f.sequence.cycle.call(a,r)}},false)});return this};f.sequence.init.prototype=f.sequence.prototype;f.sequence.cycle=function(l){this.queue||f.error("Popcorn.sequence.cycle is not a public method");var g=this.queue,a=this.inOuts.ofVideos,d=g[l],j=0,k;if(g[l+1]){j=l+1}if(g[l+1]){g=g[j];a=a[j];f.extend(g,{width:this.dims.width,height:this.dims.height});k=this.playlist[j];d.pause();this.active=j;this.times.last=a["in"]-1;k.currentTime(a["in"]);k[j?"play":"pause"]();this.trigger("cycle",{position:{previous:l,current:j}});if(j){d.style.display="none";g.style.display=""}this.cycling=false}else{this.playlist[l].pause()}return this};var n=["timeupdate","play","pause"];f.extend(f.sequence.prototype,{eq:function(a){return this.playlist[a]},remove:function(){this.parent.innerHTML=null},clip:function(a){return this.inOuts.ofVideos[a]},duration:function(){for(var g=0,d=this.inOuts.ofClips,a=0;a<d.length;a++){g+=d[a].out-d[a]["in"]+1}return g-1},play:function(){this.playlist[this.active].play();return this},exec:function(g,d){var a=this.active;this.inOuts.ofClips.forEach(function(j,k){if(g>=j["in"]&&g<=j.out){a=k}});g+=this.inOuts.ofVideos[a]["in"]-this.inOuts.ofClips[a]["in"];f.addTrackEvent(this.playlist[a],{start:g-1,end:g,_running:false,_natives:{start:d||f.nop,end:f.nop,type:"exec"}});return this},listen:function(l,g){var a=this,d=this.playlist,j=d.length,k=0;if(!g){g=f.nop}if(f.Events.Natives.indexOf(l)>-1){f.forEach(d,function(m){m.listen(l,function(o){o.active=a;if(n.indexOf(l)>-1){g.call(m,o)}else{++k===j&&g.call(m,o)}})})}else{this.events[l]||(this.events[l]={});d=g.name||f.guid("__"+l);this.events[l][d]=g}return this},unlisten:function(){},trigger:function(g,d){var a=this;if(!(f.Events.Natives.indexOf(g)>-1)){this.events[g]&&f.forEach(this.events[g],function(j){j.call(a,{type:g},d)});return this}}});f.forEach(f.manifest,function(a,d){f.sequence.prototype[d]=function(l){var o={},q=[],s,k,m,j,v;for(s=0;s<this.inOuts.ofClips.length;s++){q=this.inOuts.ofClips[s];k=i(q["in"],q.out);m=k.indexOf(l.start);j=k.indexOf(l.end);if(m>-1){o[s]=f.extend({},q,{start:k[m],clipIdx:m})}if(j>-1){o[s]=f.extend({},q,{end:k[j],clipIdx:j})}}s=Object.keys(o).map(function(r){return +r});q=i(s[0],s[1]);for(s=0;s<q.length;s++){m={};j=q[s];var g=o[j];if(g){v=this.inOuts.ofVideos[j];k=g.clipIdx;v=i(v["in"],v.out);if(g.start){m.start=v[k];m.end=v[v.length-1]}if(g.end){m.start=v[0];m.end=v[k]}}else{m.start=this.inOuts.ofVideos[j]["in"];m.end=this.inOuts.ofVideos[j].out}this.playlist[j][d](f.extend({},l,m))}return this}})})(this,Popcorn);(function(b){document.addEventListener("DOMContentLoaded",function(){var a=document.querySelectorAll("[data-timeline-sources]");b.forEach(a,function(c,e){var n=a[e],h,i,m;if(!n.id){n.id=b.guid("__popcorn")}if(n.nodeType&&n.nodeType===1){m=b("#"+n.id);h=(n.getAttribute("data-timeline-sources")||"").split(",");h[0]&&b.forEach(h,function(d){i=d.split("!");if(i.length===1){i=d.match(/(.*)[\/\\]([^\/\\]+\.\w+)$/)[2].split(".");i[0]="parse"+i[1].toUpperCase();i[1]=d}h[0]&&m[i[0]]&&m[i[0]](i[1])});m.autoplay()&&m.play()}})},false)})(Popcorn);(function(j,i){function c(d){d=typeof d==="string"?d:[d.language,d.region].join("-");var a=d.split("-");return{iso6391:d,language:a[0]||"",region:a[1]||""}}var f=j.navigator,b=c(f.userLanguage||f.language);i.locale={get:function(){return b},set:function(a){b=c(a);i.locale.broadcast();return b},broadcast:function(d){var g=i.instances,h=g.length,a=0,e;for(d=d||"locale:changed";a<h;a++){e=g[a];d in e.data.events&&e.trigger(d)}}}})(this,this.Popcorn);(function(d){var c=Object.prototype.hasOwnProperty;d.parsers={};d.parser=function(a,b,i){if(d.protect.natives.indexOf(a.toLowerCase())>=0){d.error("'"+a+"' is a protected function name")}else{if(typeof b==="function"&&!i){i=b;b=""}if(!(typeof i!=="function"||typeof b!=="string")){var e={};e[a]=function(f,g){if(!f){return this}var h=this;d.xhr({url:f,dataType:b,success:function(q){var o,p,k=0;q=i(q).data||[];if(o=q.length){for(;k<o;k++){p=q[k];for(var m in p){c.call(p,m)&&h[m]&&h[m](p[m])}}g&&g()}}});return this};d.extend(d.p,e);return e}}}})(Popcorn);(function(f){var c=function(b,a){b=b||f.nop;a=a||f.nop;return function(){b.apply(this,arguments);a.apply(this,arguments)}},g=/^.*\.(ogg|oga|aac|mp3|wav)($|\?)/,h=/^.*\.(ogg|oga|aac|mp3|wav|ogg|ogv|mp4|webm)($|\?)/;f.player=function(d,a){if(!f[d]){a=a||{};var b=function(s,x,o){o=o||{};var G=new Date/1000,i=G,p=0,A=0,l=1,m=false,j={},H=typeof s==="string"?f.dom.find(s):s,e={};Object.prototype.__defineGetter__||(e=H||document.createElement("div"));for(var q in H){if(!(q in e)){if(typeof H[q]==="object"){e[q]=H[q]}else{if(typeof H[q]==="function"){e[q]=function(k){return"length" in H[k]&&!H[k].call?H[k]:function(){return H[k].apply(H,arguments)}}(q)}else{f.player.defineProperty(e,q,{get:function(k){return function(){return H[k]}}(q),set:f.nop,configurable:true})}}}}var y=function(){G=new Date/1000;if(!e.paused){e.currentTime+=G-i;e.dispatchEvent("timeupdate");setTimeout(y,10)}i=G};e.play=function(){this.paused=false;if(e.readyState>=4){i=new Date/1000;e.dispatchEvent("play");y()}};e.pause=function(){this.paused=true;e.dispatchEvent("pause")};f.player.defineProperty(e,"currentTime",{get:function(){return p},set:function(k){p=+k;e.dispatchEvent("timeupdate");return p},configurable:true});f.player.defineProperty(e,"volume",{get:function(){return l},set:function(k){l=+k;e.dispatchEvent("volumechange");return l},configurable:true});f.player.defineProperty(e,"muted",{get:function(){return m},set:function(k){m=+k;e.dispatchEvent("volumechange");return m},configurable:true});f.player.defineProperty(e,"readyState",{get:function(){return A},set:function(k){return A=k},configurable:true});e.addEventListener=function(n,k){j[n]||(j[n]=[]);j[n].push(k);return k};e.removeEventListener=function(r,k){var n,t=j[r];if(t){for(n=j[r].length-1;n>=0;n--){k===t[n]&&t.splice(n,1)}return k}};e.dispatchEvent=function(r){var k,n=r.type;if(!n){n=r;if(r=f.events.getInterface(n)){k=document.createEvent(r);k.initEvent(n,true,true,window,1)}}if(j[n]){for(r=j[n].length-1;r>=0;r--){j[n][r].call(this,k,this)}}};e.src=x||"";e.duration=0;e.paused=true;e.ended=0;o&&o.events&&f.forEach(o.events,function(n,k){e.addEventListener(k,n,false)});if(a._canPlayType(H.nodeName,x)!==false){if(a._setup){a._setup.call(e,o)}else{e.readyState=4;e.dispatchEvent("loadedmetadata");e.dispatchEvent("loadeddata");e.dispatchEvent("canplaythrough")}}else{setTimeout(function(){e.dispatchEvent("error")},0)}s=new f.p.init(e,o);if(a._teardown){s.destroy=c(s.destroy,function(){a._teardown.call(e,o)})}return s};b.canPlayType=a._canPlayType=a._canPlayType||f.nop;f[d]=f.player.registry[d]=b}};f.player.registry={};f.player.defineProperty=Object.defineProperty||function(d,a,b){d.__defineGetter__(a,b.get||f.nop);d.__defineSetter__(a,b.set||f.nop)};f.player.playerQueue=function(){var b=[],a=false;return{next:function(){a=false;b.shift();b[0]&&b[0]()},add:function(d){b.push(function(){a=true;d&&d()});!a&&b[0]()}}};f.smart=function(o,p,a){var b=["AUDIO","VIDEO"],d,j=f.dom.find(o),e;d=document.createElement("video");var i={ogg:"video/ogg",ogv:"video/ogg",oga:"audio/ogg",webm:"video/webm",mp4:"video/mp4",mp3:"audio/mp3"};if(j){if(b.indexOf(j.nodeName)>-1&&!p){if(typeof p==="object"){a=p}return f(j,a)}if(typeof p==="string"){p=[p]}o=0;for(srcLength=p.length;o<srcLength;o++){e=h.exec(p[o]);e=!e||!e[1]?false:d.canPlayType(i[e[1]]);if(e){p=p[o];break}for(var m in f.player.registry){if(f.player.registry.hasOwnProperty(m)){if(f.player.registry[m].canPlayType(j.nodeName,p[o])){return f[m](j,p[o],a)}}}}if(b.indexOf(j.nodeName)===-1){d=typeof p==="string"?p:p.length?p[0]:p;o=document.createElement(g.exec(d)?b[0]:b[1]);o.controls=true;j.appendChild(o);j=o}a&&a.events&&a.events.error&&j.addEventListener("error",a.events.error,false);j.src=p;return f(j,a)}else{f.error("Specified target "+o+" was not found.")}}})(Popcorn);(function(d){var c=function(a,b){var k=0,e=0,h;d.forEach(b.classes,function(f,g){h=[];if(f==="parent"){h[0]=document.querySelectorAll("#"+b.target)[0].parentNode}else{h=document.querySelectorAll("#"+b.target+" "+f)}k=0;for(e=h.length;k<e;k++){h[k].classList.toggle(g)}})};d.compose("applyclass",{manifest:{about:{name:"Popcorn applyclass Effect",version:"0.1",author:"@scottdowne",website:"scottdowne.wordpress.com"},options:{}},_setup:function(a){a.classes={};a.applyclass=a.applyclass||"";for(var b=a.applyclass.replace(/\s/g,"").split(","),k=[],e=0,h=b.length;e<h;e++){k=b[e].split(":");if(k[0]){a.classes[k[0]]=k[1]||""}}},start:c,end:c})})(Popcorn);(function(f){var c=/(?:http:\/\/www\.|http:\/\/|www\.|\.|^)(youtu|vimeo|soundcloud|baseplayer)/,g={},h={vimeo:false,youtube:false,soundcloud:false,module:false};Object.defineProperty(g,void 0,{get:function(){return h[void 0]},set:function(a){h[void 0]=a}});f.plugin("mediaspawner",{manifest:{about:{name:"Popcorn Media Spawner Plugin",version:"0.1",author:"Matthew Schranz, @mjschranz",website:"mschranz.wordpress.com"},options:{source:{elem:"input",type:"text",label:"Media Source","default":"http://www.youtube.com/watch?v=CXDstfD9eJ0"},caption:{elem:"input",type:"text",label:"Media Caption","default":"Popcorn Popping",optional:true},target:"mediaspawner-container",start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},autoplay:{elem:"input",type:"checkbox",label:"Autoplay Video",optional:true},width:{elem:"input",type:"number",label:"Media Width","default":400,units:"px",optional:true},height:{elem:"input",type:"number",label:"Media Height","default":200,units:"px",optional:true}}},_setup:function(e){function i(){function k(){if(d!=="HTML5"&&!window.Popcorn[d]){setTimeout(function(){k()},300)}else{e.id=e._container.id;e._container.style.width=e.width+"px";e._container.style.height=e.height+"px";e.popcorn=f.smart("#"+e.id,e.source);d==="HTML5"&&e.popcorn.controls(true);e._container.style.width="0px";e._container.style.height="0px";e._container.style.visibility="hidden";e._container.style.overflow="hidden"}}if(d!=="HTML5"&&!window.Popcorn[d]&&!g[d]){g[d]=true;f.getScript("http://popcornjs.org/code/players/"+d+"/popcorn."+d+".js",function(){k()})}else{k()}}function a(){window.Popcorn.player?i():setTimeout(function(){a()},300)}var b=document.getElementById(e.target)||{},d,m,j;if(m=c.exec(e.source)){d=m[1];if(d==="youtu"){d="youtube"}}else{d="HTML5"}e._type=d;e._container=document.createElement("div");m=e._container;m.id="mediaSpawnerdiv-"+f.guid();e.width=e.width||400;e.height=e.height||200;if(e.caption){j=document.createElement("div");j.innerHTML=e.caption;j.style.display="none";e._capCont=j;m.appendChild(j)}b&&b.appendChild(m);if(!window.Popcorn.player&&!g.module){g.module=true;f.getScript("http://popcornjs.org/code/modules/player/popcorn.player.js",a)}else{a()}},start:function(b,a){if(a._capCont){a._capCont.style.display=""}a._container.style.width=a.width+"px";a._container.style.height=a.height+"px";a._container.style.visibility="visible";a._container.style.overflow="visible";a.autoplay&&a.popcorn.play()},end:function(b,a){if(a._capCont){a._capCont.style.display="none"}a._container.style.width="0px";a._container.style.height="0px";a._container.style.visibility="hidden";a._container.style.overflow="hidden";a.popcorn.pause()},_teardown:function(a){a.popcorn&&a.popcorn.destory&&a.popcorn.destroy();document.getElementById(a.target)&&document.getElementById(a.target).removeChild(a._container)}})})(Popcorn,this);(function(b){b.plugin("code",function(f){var a=false,c=this,i=function(){var d=function(e){return function(h,j){var g=function(){a&&h.call(c,j);a&&e(g)};g()}};return window.webkitRequestAnimationFrame?d(window.webkitRequestAnimationFrame):window.mozRequestAnimationFrame?d(window.mozRequestAnimationFrame):d(function(e){window.setTimeout(e,16)})}();if(!f.onStart||typeof f.onStart!=="function"){f.onStart=b.nop}if(f.onEnd&&typeof f.onEnd!=="function"){f.onEnd=undefined}if(f.onFrame&&typeof f.onFrame!=="function"){f.onFrame=undefined}return{start:function(e,d){d.onStart.call(c,d);if(d.onFrame){a=true;i(d.onFrame,d)}},end:function(e,d){if(d.onFrame){a=false}d.onEnd&&d.onEnd.call(c,d)}}},{about:{name:"Popcorn Code Plugin",version:"0.1",author:"David Humphrey (@humphd)",website:"http://vocamus.net/dave"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},onStart:{elem:"input",type:"function",label:"onStart"},onFrame:{elem:"input",type:"function",label:"onFrame",optional:true},onEnd:{elem:"input",type:"function",label:"onEnd"}}})})(Popcorn);(function(d){var c=0;d.plugin("flickr",function(a){var n,e=document.getElementById(a.target),p,q,s,A,j=a.numberofimages||4,D=a.height||"50px",h=a.width||"50px",m=a.padding||"5px",b=a.border||"0px";n=document.createElement("div");n.id="flickr"+c;n.style.width="100%";n.style.height="100%";n.style.display="none";c++;e&&e.appendChild(n);var o=function(){if(p){setTimeout(function(){o()},5)}else{q="http://api.flickr.com/services/rest/?method=flickr.people.findByUsername&";q+="username="+a.username+"&api_key="+a.apikey+"&format=json&jsoncallback=flickr";d.getJSONP(q,function(f){p=f.user.nsid;i()})}},i=function(){q="http://api.flickr.com/services/feeds/photos_public.gne?";if(p){q+="id="+p+"&"}if(a.tags){q+="tags="+a.tags+"&"}q+="lang=en-us&format=json&jsoncallback=flickr";d.xhr.getJSONP(q,function(f){var g=document.createElement("div");g.innerHTML="<p style='padding:"+m+";'>"+f.title+"<p/>";d.forEach(f.items,function(l,k){if(k<j){s=document.createElement("a");s.setAttribute("href",l.link);s.setAttribute("target","_blank");A=document.createElement("img");A.setAttribute("src",l.media.m);A.setAttribute("height",D);A.setAttribute("width",h);A.setAttribute("style","border:"+b+";padding:"+m);s.appendChild(A);g.appendChild(s)}else{return false}});n.appendChild(g)})};if(a.username&&a.apikey){o()}else{p=a.userid;i()}return{start:function(){n.style.display="inline"},end:function(){n.style.display="none"},_teardown:function(f){document.getElementById(f.target)&&document.getElementById(f.target).removeChild(n)}}},{about:{name:"Popcorn Flickr Plugin",version:"0.2",author:"Scott Downe, Steven Weerdenburg, Annasob",website:"http://scottdowne.wordpress.com/"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},userid:{elem:"input",type:"text",label:"User ID",optional:true},tags:{elem:"input",type:"text",label:"Tags"},username:{elem:"input",type:"text",label:"Username",optional:true},apikey:{elem:"input",type:"text",label:"API Key",optional:true},target:"flickr-container",height:{elem:"input",type:"text",label:"Height","default":"50px",optional:true},width:{elem:"input",type:"text",label:"Width","default":"50px",optional:true},padding:{elem:"input",type:"text",label:"Padding",optional:true},border:{elem:"input",type:"text",label:"Border","default":"5px",optional:true},numberofimages:{elem:"input",type:"number","default":4,label:"Number of Images"}}})})(Popcorn);(function(b){b.plugin("footnote",{manifest:{about:{name:"Popcorn Footnote Plugin",version:"0.2",author:"@annasob, @rwaldron",website:"annasob.wordpress.com"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},text:{elem:"input",type:"text",label:"Text"},target:"footnote-container"}},_setup:function(a){var d=b.dom.find(a.target);a._container=document.createElement("div");a._container.style.display="none";a._container.innerHTML=a.text;d.appendChild(a._container)},start:function(a,d){d._container.style.display="inline"},end:function(a,d){d._container.style.display="none"},_teardown:function(a){var d=b.dom.find(a.target);d&&d.removeChild(a._container)}})})(Popcorn);(function(f){function c(a){return String(a).replace(/&(?!\w+;)|[<>"']/g,function(b){return h[b]||b})}function g(j,a){var d=j.container=document.createElement("div"),e=d.style,i=j.media,b=function(){var k=j.position();e.fontSize="18px";e.width=i.offsetWidth+"px";e.top=k.top+i.offsetHeight-d.offsetHeight-40+"px";e.left=k.left+"px";setTimeout(b,10)};d.id=a||"";e.position="absolute";e.color="white";e.textShadow="black 2px 2px 6px";e.fontWeight="bold";e.textAlign="center";b();j.media.parentNode.appendChild(d);return d}var h={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};f.plugin("text",{manifest:{about:{name:"Popcorn Text Plugin",version:"0.1",author:"@humphd"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},text:{elem:"input",type:"text",label:"Text","default":"Popcorn.js"},escape:{elem:"input",type:"checkbox",label:"Escape"},multiline:{elem:"input",type:"checkbox",label:"Multiline"}}},_setup:function(e){var a,b,d=e._container=document.createElement("div");d.style.display="none";if(e.target){if(a=f.dom.find(e.target)){if(["VIDEO","AUDIO"].indexOf(a.nodeName)>-1){a=g(this,e.target+"-overlay")}}else{a=g(this,e.target)}}else{a=this.container?this.container:g(this)}e._target=a;b=e.escape?c(e.text):e.text;b=e.multiline?b.replace(/\r?\n/gm,"<br>"):b;d.innerHTML=b||"";a.appendChild(d)},start:function(b,a){a._container.style.display="inline"},end:function(b,a){a._container.style.display="none"},_teardown:function(b){var a=b._target;a&&a.removeChild(b._container)}})})(Popcorn);var googleCallback;(function(m){function h(g,i,d){g=g.type?g.type.toUpperCase():"HYBRID";var a;if(g==="STAMEN-WATERCOLOR"||g==="STAMEN-TERRAIN"||g==="STAMEN-TONER"){a=g.replace("STAMEN-","").toLowerCase()}d=new google.maps.Map(d,{mapTypeId:a?a:google.maps.MapTypeId[g],mapTypeControlOptions:{mapTypeIds:[]}});a&&d.mapTypes.set(a,new google.maps.StamenMapType(a));d.getDiv().style.display="none";return d}var c=1,e=false,b=false,f,n;googleCallback=function(a){if(typeof google!=="undefined"&&google.maps&&google.maps.Geocoder&&google.maps.LatLng){f=new google.maps.Geocoder;m.getScript("//maps.stamen.com/js/tile.stamen.js",function(){b=true})}else{setTimeout(function(){googleCallback(a)},1)}};n=function(){if(document.body){e=true;m.getScript("//maps.google.com/maps/api/js?sensor=false&callback=googleCallback")}else{setTimeout(function(){n()},1)}};m.plugin("googlemap",function(i){var k,d,a,j=document.getElementById(i.target);i.type=i.type||"ROADMAP";i.zoom=i.zoom||1;i.lat=i.lat||0;i.lng=i.lng||0;e||n();k=document.createElement("div");k.id="actualmap"+c;k.style.width=i.width||"100%";k.style.height=i.height?i.height:j&&j.clientHeight?j.clientHeight+"px":"100%";c++;j&&j.appendChild(k);var g=function(){if(b){if(k){if(i.location){f.geocode({address:i.location},function(l,p){if(k&&p===google.maps.GeocoderStatus.OK){i.lat=l[0].geometry.location.lat();i.lng=l[0].geometry.location.lng();a=new google.maps.LatLng(i.lat,i.lng);d=h(i,a,k)}})}else{a=new google.maps.LatLng(i.lat,i.lng);d=h(i,a,k)}}}else{setTimeout(function(){g()},5)}};g();return{start:function(u,t){var v=this,s,l=function(){if(d){t._map=d;d.getDiv().style.display="block";google.maps.event.trigger(d,"resize");d.setCenter(a);if(t.zoom&&typeof t.zoom!=="number"){t.zoom=+t.zoom}d.setZoom(t.zoom);if(t.heading&&typeof t.heading!=="number"){t.heading=+t.heading}if(t.pitch&&typeof t.pitch!=="number"){t.pitch=+t.pitch}if(t.type==="STREETVIEW"){d.setStreetView(s=new google.maps.StreetViewPanorama(k,{position:a,pov:{heading:t.heading=t.heading||0,pitch:t.pitch=t.pitch||0,zoom:t.zoom}}));var q=function(w,x){var y=google.maps.geometry.spherical.computeHeading;setTimeout(function(){var z=v.media.currentTime;if(typeof t.tween==="object"){for(var F=0,A=w.length;F<A;F++){var B=w[F];if(z>=B.interval*(F+1)/1000&&(z<=B.interval*(F+2)/1000||z>=B.interval*A/1000)){C.setPosition(new google.maps.LatLng(B.position.lat,B.position.lng));C.setPov({heading:B.pov.heading||y(B,w[F+1])||0,zoom:B.pov.zoom||0,pitch:B.pov.pitch||0})}}q(w,w[0].interval)}else{F=0;for(A=w.length;F<A;F++){B=t.interval;if(z>=B*(F+1)/1000&&(z<=B*(F+2)/1000||z>=B*A/1000)){E.setPov({heading:y(w[F],w[F+1])||0,zoom:t.zoom,pitch:t.pitch||0});E.setPosition(r[F])}}q(r,t.interval)}},x)};if(t.location&&typeof t.tween==="string"){var E=s,r=[],D=new google.maps.DirectionsService,p=new google.maps.DirectionsRenderer(E);D.route({origin:t.location,destination:t.tween,travelMode:google.maps.TravelMode.DRIVING},function(A,w){if(w==google.maps.DirectionsStatus.OK){p.setDirections(A);for(var x=A.routes[0].overview_path,z=0,y=x.length;z<y;z++){r.push(new google.maps.LatLng(x[z].lat(),x[z].lng()))}t.interval=t.interval||1000;q(r,10)}})}else{if(typeof t.tween==="object"){var C=s;D=0;for(var o=t.tween.length;D<o;D++){t.tween[D].interval=t.tween[D].interval||1000;q(t.tween,10)}}}}t.onmaploaded&&t.onmaploaded(t,d)}else{setTimeout(function(){l()},13)}};l()},end:function(){if(d){d.getDiv().style.display="none"}},_teardown:function(l){var p=document.getElementById(l.target);p&&p.removeChild(k);k=d=a=null;l._map=null}}},{about:{name:"Popcorn Google Map Plugin",version:"0.1",author:"@annasob",website:"annasob.wordpress.com"},options:{start:{elem:"input",type:"start",label:"Start"},end:{elem:"input",type:"start",label:"End"},target:"map-container",type:{elem:"select",options:["ROADMAP","SATELLITE","STREETVIEW","HYBRID","TERRAIN","STAMEN-WATERCOLOR","STAMEN-TERRAIN","STAMEN-TONER"],label:"Map Type",optional:true},zoom:{elem:"input",type:"text",label:"Zoom","default":0,optional:true},lat:{elem:"input",type:"text",label:"Lat",optional:true},lng:{elem:"input",type:"text",label:"Lng",optional:true},location:{elem:"input",type:"text",label:"Location","default":"Toronto, Ontario, Canada"},heading:{elem:"input",type:"text",label:"Heading","default":0,optional:true},pitch:{elem:"input",type:"text",label:"Pitch","default":1,optional:true}}})})(Popcorn);(function(f){function c(i){function a(){var j=i.getBoundingClientRect(),k=d.getBoundingClientRect();if(k.left!==j.left){d.style.left=j.left+"px"}if(k.top!==j.top){d.style.top=j.top+"px"}}var b=-1,d=document.createElement("div"),e=getComputedStyle(i).zIndex;d.setAttribute("data-popcorn-helper-container",true);d.style.position="absolute";d.style.zIndex=isNaN(e)?g:e+1;document.body.appendChild(d);return{element:d,start:function(){b=setInterval(a,h)},stop:function(){clearInterval(b);b=-1},destroy:function(){document.body.removeChild(d);b!==-1&&clearInterval(b)}}}var g=2000,h=10;f.plugin("image",{manifest:{about:{name:"Popcorn image Plugin",version:"0.1",author:"Scott Downe",website:"http://scottdowne.wordpress.com/"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},src:{elem:"input",type:"url",label:"Image URL","default":"http://mozillapopcorn.org/wp-content/themes/popcorn/images/for_developers.png"},href:{elem:"input",type:"url",label:"Link","default":"http://mozillapopcorn.org/wp-content/themes/popcorn/images/for_developers.png",optional:true},target:"image-container",text:{elem:"input",type:"text",label:"Caption","default":"Popcorn.js",optional:true}}},_setup:function(d){var a=document.createElement("img"),b=document.getElementById(d.target);d.anchor=document.createElement("a");d.anchor.style.position="relative";d.anchor.style.textDecoration="none";d.anchor.style.display="none";if(b){if(["VIDEO","AUDIO"].indexOf(b.nodeName)>-1){d.trackedContainer=c(b);d.trackedContainer.element.appendChild(d.anchor)}else{b&&b.appendChild(d.anchor)}}a.addEventListener("load",function(){a.style.borderStyle="none";d.anchor.href=d.href||d.src||"#";d.anchor.target="_blank";var e,i;a.style.height=b.style.height;a.style.width=b.style.width;d.anchor.appendChild(a);if(d.text){e=a.height/12+"px";i=document.createElement("div");f.extend(i.style,{color:"black",fontSize:e,fontWeight:"bold",position:"relative",textAlign:"center",width:a.style.width||a.width+"px",zIndex:"10"});i.innerHTML=d.text||"";i.style.top=(a.style.height.replace("px","")||a.height)/2-i.offsetHeight/2+"px";d.anchor.insertBefore(i,a)}},false);a.src=d.src},start:function(b,a){a.anchor.style.display="inline";a.trackedContainer&&a.trackedContainer.start()},end:function(b,a){a.anchor.style.display="none";a.trackedContainer&&a.trackedContainer.stop()},_teardown:function(a){if(a.trackedContainer){a.trackedContainer.destroy()}else{a.anchor.parentNode&&a.anchor.parentNode.removeChild(a.anchor)}}})})(Popcorn);(function(e){var d=1,f=false;e.plugin("googlefeed",function(a){var i=function(){var k=false,p=0,o=document.getElementsByTagName("link"),m=o.length,g=document.head||document.getElementsByTagName("head")[0],j=document.createElement("link");if(window.GFdynamicFeedControl){f=true}else{e.getScript("//www.google.com/uds/solutions/dynamicfeed/gfdynamicfeedcontrol.js",function(){f=true})}for(;p<m;p++){if(o[p].href==="//www.google.com/uds/solutions/dynamicfeed/gfdynamicfeedcontrol.css"){k=true}}if(!k){j.type="text/css";j.rel="stylesheet";j.href="//www.google.com/uds/solutions/dynamicfeed/gfdynamicfeedcontrol.css";g.insertBefore(j,g.firstChild)}};window.google?i():e.getScript("//www.google.com/jsapi",function(){google.load("feeds","1",{callback:function(){i()}})});var b=document.createElement("div"),c=document.getElementById(a.target),h=function(){if(f){a.feed=new GFdynamicFeedControl(a.url,b,{vertical:a.orientation.toLowerCase()==="vertical"?true:false,horizontal:a.orientation.toLowerCase()==="horizontal"?true:false,title:a.title=a.title||"Blog"})}else{setTimeout(function(){h()},5)}};if(!a.orientation||a.orientation.toLowerCase()!=="vertical"&&a.orientation.toLowerCase()!=="horizontal"){a.orientation="vertical"}b.style.display="none";b.id="_feed"+d;b.style.width="100%";b.style.height="100%";d++;c&&c.appendChild(b);h();return{start:function(){b.setAttribute("style","display:inline")},end:function(){b.setAttribute("style","display:none")},_teardown:function(g){document.getElementById(g.target)&&document.getElementById(g.target).removeChild(b);delete g.feed}}},{about:{name:"Popcorn Google Feed Plugin",version:"0.1",author:"David Seifried",website:"dseifried.wordpress.com"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},target:"feed-container",url:{elem:"input",type:"url",label:"Feed URL","default":"http://planet.mozilla.org/rss20.xml"},title:{elem:"input",type:"text",label:"Title","default":"Planet Mozilla",optional:true},orientation:{elem:"select",options:["Vertical","Horizontal"],label:"Orientation","default":"Vertical",optional:true}}})})(Popcorn);(function(e){var d=0,f=function(a,j){var b=a.container=document.createElement("div"),c=b.style,h=a.media,i=function(){var g=a.position();c.fontSize="18px";c.width=h.offsetWidth+"px";c.top=g.top+h.offsetHeight-b.offsetHeight-40+"px";c.left=g.left+"px";setTimeout(i,10)};b.id=j||e.guid();c.position="absolute";c.color="white";c.textShadow="black 2px 2px 6px";c.fontWeight="bold";c.textAlign="center";i();a.media.parentNode.appendChild(b);return b};e.plugin("subtitle",{manifest:{about:{name:"Popcorn Subtitle Plugin",version:"0.1",author:"Scott Downe",website:"http://scottdowne.wordpress.com/"},options:{start:{elem:"input",type:"text",label:"Start"},end:{elem:"input",type:"text",label:"End"},target:"subtitle-container",text:{elem:"input",type:"text",label:"Text"}}},_setup:function(a){var b=document.createElement("div");b.id="subtitle-"+d++;b.style.display="none";!this.container&&(!a.target||a.target==="subtitle-container")&&f(this);a.container=a.target&&a.target!=="subtitle-container"?document.getElementById(a.target)||f(this,a.target):this.container;document.getElementById(a.container.id)&&document.getElementById(a.container.id).appendChild(b);a.innerContainer=b;a.showSubtitle=function(){a.innerContainer.innerHTML=a.text||""}},start:function(a,b){b.innerContainer.style.display="inline";b.showSubtitle(b,b.text)},end:function(a,b){b.innerContainer.style.display="none";b.innerContainer.innerHTML=""},_teardown:function(a){a.container.removeChild(a.innerContainer)}})})(Popcorn);(function(d){var c=false;d.plugin("twitter",{manifest:{about:{name:"Popcorn Twitter Plugin",version:"0.1",author:"Scott Downe",website:"http://scottdowne.wordpress.com/"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},src:{elem:"input",type:"text",label:"Tweet Source (# or @)","default":"@popcornjs"},target:"twitter-container",height:{elem:"input",type:"number",label:"Height","default":"200",optional:true},width:{elem:"input",type:"number",label:"Width","default":"250",optional:true}}},_setup:function(n){if(!window.TWTR&&!c){c=true;d.getScript("//widgets.twimg.com/j/2/widget.js")}var a=document.getElementById(n.target);n.container=document.createElement("div");n.container.setAttribute("id",d.guid());n.container.style.display="none";a&&a.appendChild(n.container);var j=n.src||"";a=n.width||250;var b=n.height||200,e=/^@/.test(j),h={version:2,id:n.container.getAttribute("id"),rpp:30,width:a,height:b,interval:6000,theme:{shell:{background:"#ffffff",color:"#000000"},tweets:{background:"#ffffff",color:"#444444",links:"#1985b5"}},features:{loop:true,timestamp:true,avatars:true,hashtags:true,toptweets:true,live:true,scrollbar:false,behavior:"default"}},i=function(f){if(window.TWTR){if(e){h.type="profile";(new TWTR.Widget(h)).render().setUser(j).start()}else{h.type="search";h.search=j;h.subject=j;(new TWTR.Widget(h)).render().start()}}else{setTimeout(function(){i(f)},1)}};i(this)},start:function(a,b){b.container.style.display="inline"},end:function(a,b){b.container.style.display="none"},_teardown:function(a){document.getElementById(a.target)&&document.getElementById(a.target).removeChild(a.container)}})})(Popcorn);(function(b){b.plugin("webpage",{manifest:{about:{name:"Popcorn Webpage Plugin",version:"0.1",author:"@annasob",website:"annasob.wordpress.com"},options:{id:{elem:"input",type:"text",label:"Id",optional:true},start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},src:{elem:"input",type:"url",label:"Webpage URL","default":"http://mozillapopcorn.org"},target:"iframe-container"}},_setup:function(a){var d=document.getElementById(a.target);a.src=a.src.replace(/^(https?:)?(\/\/)?/,"//");a._iframe=document.createElement("iframe");a._iframe.setAttribute("width","100%");a._iframe.setAttribute("height","100%");a._iframe.id=a.id;a._iframe.src=a.src;a._iframe.style.display="none";d&&d.appendChild(a._iframe)},start:function(a,d){d._iframe.src=d.src;d._iframe.style.display="inline"},end:function(a,d){d._iframe.style.display="none"},_teardown:function(a){document.getElementById(a.target)&&document.getElementById(a.target).removeChild(a._iframe)}})})(Popcorn);var wikiCallback;(function(b){b.plugin("wikipedia",{manifest:{about:{name:"Popcorn Wikipedia Plugin",version:"0.1",author:"@annasob",website:"annasob.wordpress.com"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},lang:{elem:"input",type:"text",label:"Language","default":"english",optional:true},src:{elem:"input",type:"url",label:"Wikipedia URL","default":"http://en.wikipedia.org/wiki/Cat"},title:{elem:"input",type:"text",label:"Title","default":"Cats",optional:true},numberofwords:{elem:"input",type:"number",label:"Number of Words","default":"200",optional:true},target:"wikipedia-container"}},_setup:function(a){var c,f=b.guid();if(!a.lang){a.lang="en"}a.numberofwords=a.numberofwords||200;window["wikiCallback"+f]=function(d){a._link=document.createElement("a");a._link.setAttribute("href",a.src);a._link.setAttribute("target","_blank");a._link.innerHTML=a.title||d.parse.displaytitle;a._desc=document.createElement("p");c=d.parse.text["*"].substr(d.parse.text["*"].indexOf("<p>"));c=c.replace(/((<(.|\n)+?>)|(\((.*?)\) )|(\[(.*?)\]))/g,"");c=c.split(" ");a._desc.innerHTML=c.slice(0,c.length>=a.numberofwords?a.numberofwords:c.length).join(" ")+" ...";a._fired=true};a.src&&b.getScript("//"+a.lang+".wikipedia.org/w/api.php?action=parse&props=text&redirects&page="+a.src.slice(a.src.lastIndexOf("/")+1)+"&format=json&callback=wikiCallback"+f)},start:function(a,c){var f=function(){if(c._fired){if(c._link&&c._desc){if(document.getElementById(c.target)){document.getElementById(c.target).appendChild(c._link);document.getElementById(c.target).appendChild(c._desc);c._added=true}}}else{setTimeout(function(){f()},13)}};f()},end:function(a,d){if(d._added){document.getElementById(d.target).removeChild(d._link);document.getElementById(d.target).removeChild(d._desc)}},_teardown:function(a){if(a._added){a._link.parentNode&&document.getElementById(a.target).removeChild(a._link);a._desc.parentNode&&document.getElementById(a.target).removeChild(a._desc);delete a.target}}})})(Popcorn);(function(b){b.plugin("mustache",function(e){var j,a,p,c;b.getScript("http://mustache.github.com/extras/mustache.js");var f=!!e.dynamic,h=typeof e.template,i=typeof e.data,n=document.getElementById(e.target);e.container=n||document.createElement("div");if(h==="function"){if(f){p=e.template}else{c=e.template(e)}}else{c=h==="string"?e.template:""}if(i==="function"){if(f){j=e.data}else{a=e.data(e)}}else{a=i==="string"?JSON.parse(e.data):i==="object"?e.data:""}return{start:function(d,g){var k=function(){if(window.Mustache){if(j){a=j(g)}if(p){c=p(g)}var l=Mustache.to_html(c,a).replace(/^\s*/mg,"");g.container.innerHTML=l}else{setTimeout(function(){k()},10)}};k()},end:function(d,g){g.container.innerHTML=""},_teardown:function(){j=a=p=c=null}}},{about:{name:"Popcorn Mustache Plugin",version:"0.1",author:"David Humphrey (@humphd)",website:"http://vocamus.net/dave"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},target:"mustache-container",template:{elem:"input",type:"text",label:"Template"},data:{elem:"input",type:"text",label:"Data"},dynamic:{elem:"input",type:"checkbox",label:"Dynamic","default":true}}})})(Popcorn);(function(e){function d(a,b){if(a.map){a.map.div.style.display=b}else{setTimeout(function(){d(a,b)},10)}}var f=1;e.plugin("openmap",function(p){var o,q,a,b,c,j,h,i,m=document.getElementById(p.target);o=document.createElement("div");o.id="openmapdiv"+f;o.style.width="100%";o.style.height="100%";f++;m&&m.appendChild(o);i=function(){if(window.OpenLayers&&window.OpenLayers.Layer.Stamen){if(p.location){location=new OpenLayers.LonLat(0,0);e.getJSONP("//tinygeocoder.com/create-api.php?q="+p.location+"&callback=jsonp",function(k){q=new OpenLayers.LonLat(k[1],k[0])})}else{q=new OpenLayers.LonLat(p.lng,p.lat)}p.type=p.type||"ROADMAP";switch(p.type){case"SATELLITE":p.map=new OpenLayers.Map({div:o,maxResolution:0.28125,tileSize:new OpenLayers.Size(512,512)});var g=new OpenLayers.Layer.WorldWind("LANDSAT","//worldwind25.arc.nasa.gov/tile/tile.aspx",2.25,4,{T:"105"});p.map.addLayer(g);b=new OpenLayers.Projection("EPSG:4326");a=new OpenLayers.Projection("EPSG:4326");break;case"TERRAIN":b=new OpenLayers.Projection("EPSG:4326");a=new OpenLayers.Projection("EPSG:4326");p.map=new OpenLayers.Map({div:o,projection:a});g=new OpenLayers.Layer.WMS("USGS Terraserver","//terraserver-usa.org/ogcmap.ashx?",{layers:"DRG"});p.map.addLayer(g);break;case"STAMEN-TONER":case"STAMEN-WATERCOLOR":case"STAMEN-TERRAIN":g=p.type.replace("STAMEN-","").toLowerCase();g=new OpenLayers.Layer.Stamen(g);b=new OpenLayers.Projection("EPSG:4326");a=new OpenLayers.Projection("EPSG:900913");q=q.transform(b,a);p.map=new OpenLayers.Map({div:o,projection:a,displayProjection:b,controls:[new OpenLayers.Control.Navigation,new OpenLayers.Control.PanPanel,new OpenLayers.Control.ZoomPanel]});p.map.addLayer(g);break;default:a=new OpenLayers.Projection("EPSG:900913");b=new OpenLayers.Projection("EPSG:4326");q=q.transform(b,a);p.map=new OpenLayers.Map({div:o,projection:a,displayProjection:b});g=new OpenLayers.Layer.OSM;p.map.addLayer(g)}if(p.map){p.map.setCenter(q,p.zoom||10);p.map.div.style.display="none"}}else{setTimeout(function(){i()},50)}};i();return{_setup:function(k){window.OpenLayers||e.getScript("//openlayers.org/api/OpenLayers.js",function(){e.getScript("//maps.stamen.com/js/tile.stamen.js")});var g=function(){if(k.map){k.zoom=k.zoom||2;if(k.zoom&&typeof k.zoom!=="number"){k.zoom=+k.zoom}k.map.setCenter(q,k.zoom);if(k.markers){var u=OpenLayers.Util.extend({},OpenLayers.Feature.Vector.style["default"]),n=function(v){clickedFeature=v.feature;if(clickedFeature.attributes.text){h=new OpenLayers.Popup.FramedCloud("featurePopup",clickedFeature.geometry.getBounds().getCenterLonLat(),new OpenLayers.Size(120,250),clickedFeature.attributes.text,null,true,function(){j.unselect(this.feature)});clickedFeature.popup=h;h.feature=clickedFeature;k.map.addPopup(h)}},A=function(v){feature=v.feature;if(feature.popup){h.feature=null;k.map.removePopup(feature.popup);feature.popup.destroy();feature.popup=null}},l=function(v){e.getJSONP("//tinygeocoder.com/create-api.php?q="+v.location+"&callback=jsonp",function(w){w=(new OpenLayers.Geometry.Point(w[1],w[0])).transform(b,a);var z=OpenLayers.Util.extend({},u);if(!v.size||isNaN(v.size)){v.size=14}z.pointRadius=v.size;z.graphicOpacity=1;z.externalGraphic=v.icon;w=new OpenLayers.Feature.Vector(w,null,z);if(v.text){w.attributes={text:v.text}}c.addFeatures([w])})};c=new OpenLayers.Layer.Vector("Point Layer",{style:u});k.map.addLayer(c);for(var r=0,t=k.markers.length;r<t;r++){var s=k.markers[r];if(s.text){if(!j){j=new OpenLayers.Control.SelectFeature(c);k.map.addControl(j);j.activate();c.events.on({featureselected:n,featureunselected:A})}}if(s.location){l(s)}else{var x=(new OpenLayers.Geometry.Point(s.lng,s.lat)).transform(b,a),y=OpenLayers.Util.extend({},u);if(!s.size||isNaN(s.size)){s.size=14}y.pointRadius=s.size;y.graphicOpacity=1;y.externalGraphic=s.icon;x=new OpenLayers.Feature.Vector(x,null,y);if(s.text){x.attributes={text:s.text}}c.addFeatures([x])}}}}else{setTimeout(function(){g()},13)}};g()},start:function(k,g){d(g,"block")},end:function(k,g){d(g,"none")},_teardown:function(){m&&m.removeChild(o);o=map=q=a=b=c=j=h=null}}},{about:{name:"Popcorn OpenMap Plugin",version:"0.3",author:"@mapmeld",website:"mapadelsur.blogspot.com"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},target:"map-container",type:{elem:"select",options:["ROADMAP","SATELLITE","TERRAIN"],label:"Map Type",optional:true},zoom:{elem:"input",type:"number",label:"Zoom","default":2},lat:{elem:"input",type:"text",label:"Lat",optional:true},lng:{elem:"input",type:"text",label:"Lng",optional:true},location:{elem:"input",type:"text",label:"Location","default":"Toronto, Ontario, Canada"},markers:{elem:"input",type:"text",label:"List Markers",optional:true}}})})(Popcorn);document.addEventListener("click",function(b){b=b.target;if(b.nodeName==="A"||b.parentNode&&b.parentNode.nodeName==="A"){Popcorn.instances.forEach(function(a){a.options.pauseOnLinkClicked&&a.pause()})}},false);(function(i){var o={},e=0,m=document.createElement("span"),j=["webkit","Moz","ms","O",""],n=["Transform","TransitionDuration","TransitionTimingFunction"],p={},r;document.getElementsByTagName("head")[0].appendChild(m);for(var b=0,h=n.length;b<h;b++){for(var c=0,f=j.length;c<f;c++){r=j[c]+n[b];if(r in m.style){p[n[b].toLowerCase()]=r;break}}}document.getElementsByTagName("head")[0].appendChild(m);i.plugin("wordriver",{manifest:{about:{name:"Popcorn WordRiver Plugin"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},target:"wordriver-container",text:{elem:"input",type:"text",label:"Text","default":"Popcorn.js"},color:{elem:"input",type:"text",label:"Color","default":"Green",optional:true}}},_setup:function(g){g._duration=g.end-g.start;var a;if(!(a=o[g.target])){a=g.target;o[a]=document.createElement("div");var d=document.getElementById(a);d&&d.appendChild(o[a]);o[a].style.height="100%";o[a].style.position="relative";a=o[a]}g._container=a;g.word=document.createElement("span");g.word.style.position="absolute";g.word.style.whiteSpace="nowrap";g.word.style.opacity=0;g.word.style.MozTransitionProperty="opacity, -moz-transform";g.word.style.webkitTransitionProperty="opacity, -webkit-transform";g.word.style.OTransitionProperty="opacity, -o-transform";g.word.style.transitionProperty="opacity, transform";g.word.style[p.transitionduration]="1s, "+g._duration+"s";g.word.style[p.transitiontimingfunction]="linear";g.word.innerHTML=g.text;g.word.style.color=g.color||"black"},start:function(d,a){a._container.appendChild(a.word);a.word.style[p.transform]="";a.word.style.fontSize=~~(30+20*Math.random())+"px";e%=a._container.offsetWidth-a.word.offsetWidth;a.word.style.left=e+"px";e+=a.word.offsetWidth+10;a.word.style[p.transform]="translateY("+(a._container.offsetHeight-a.word.offsetHeight)+"px)";a.word.style.opacity=1;setTimeout(function(){a.word.style.opacity=0},(a.end-a.start-1||1)*1000)},end:function(d,a){a.word.style.opacity=0},_teardown:function(d){var a=document.getElementById(d.target);d.word.parentNode&&d._container.removeChild(d.word);o[d.target]&&!o[d.target].childElementCount&&a&&a.removeChild(o[d.target])&&delete o[d.target]}})})(Popcorn);(function(d){var c=1;d.plugin("timeline",function(a){var b=document.getElementById(a.target),k=document.createElement("div"),e,h=true;if(b&&!b.firstChild){b.appendChild(e=document.createElement("div"));e.style.width="inherit";e.style.height="inherit";e.style.overflow="auto"}else{e=b.firstChild}k.style.display="none";k.id="timelineDiv"+c;a.direction=a.direction||"up";if(a.direction.toLowerCase()==="down"){h=false}if(b&&e){h?e.insertBefore(k,e.firstChild):e.appendChild(k)}c++;k.innerHTML="<p><span id='big' style='font-size:24px; line-height: 130%;' >"+a.title+"</span><br /><span id='mid' style='font-size: 16px;'>"+a.text+"</span><br />"+a.innerHTML;return{start:function(f,g){k.style.display="block";if(g.direction==="down"){e.scrollTop=e.scrollHeight}},end:function(){k.style.display="none"},_teardown:function(){e&&k&&e.removeChild(k)&&!e.firstChild&&b.removeChild(e)}}},{about:{name:"Popcorn Timeline Plugin",version:"0.1",author:"David Seifried @dcseifried",website:"dseifried.wordpress.com"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},target:"feed-container",title:{elem:"input",type:"text",label:"Title"},text:{elem:"input",type:"text",label:"Text"},innerHTML:{elem:"input",type:"text",label:"HTML Code",optional:true},direction:{elem:"select",options:["DOWN","UP"],label:"Direction",optional:true}}})})(Popcorn);(function(e,d){var f={};e.plugin("documentcloud",{manifest:{about:{name:"Popcorn Document Cloud Plugin",version:"0.1",author:"@humphd, @ChrisDeCairos",website:"http://vocamus.net/dave"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},target:"documentcloud-container",width:{elem:"input",type:"text",label:"Width",optional:true},height:{elem:"input",type:"text",label:"Height",optional:true},src:{elem:"input",type:"url",label:"PDF URL","default":"http://www.documentcloud.org/documents/70050-urbina-day-1-in-progress.html"},preload:{elem:"input",type:"checkbox",label:"Preload","default":true},page:{elem:"input",type:"number",label:"Page Number",optional:true},aid:{elem:"input",type:"number",label:"Annotation Id",optional:true}}},_setup:function(o){function j(){function q(p){o._key=p.api.getId();o._changeView=function(r){o.aid?r.pageSet.showAnnotation(r.api.getAnnotation(o.aid)):r.api.setCurrentPage(o.page)}}function t(){f[o._key]={num:1,id:o._containerId};c.loaded=true}c.loaded=false;var u=o.url.replace(/\.html$/,".js"),G=o.target,y=d.getElementById(G),s=d.createElement("div"),x=e.position(y),l=o.width||x.width;x=o.height||x.height;var n=o.sidebar||true,A=o.text||true,m=o.pdf||true,k=o.showAnnotations||true,H=o.zoom||700,g=o.search||true;if(!function(r){var p=false;e.forEach(c.viewers,function(v){if(v.api.getSchema().canonicalURL===r){q(v);v=f[o._key];o._containerId=v.id;v.num+=1;p=true;c.loaded=true}});return p}(o.url)){s.id=o._containerId=e.guid(G);G="#"+s.id;y.appendChild(s);h.trigger("documentready");c.load(u,{width:l,height:x,sidebar:n,text:A,pdf:m,showAnnotations:k,zoom:H,search:g,container:G,afterLoad:o.page||o.aid?function(p){q(p);o._changeView(p);s.style.visibility="hidden";p.elements.pages.hide();t()}:function(p){q(p);t();s.style.visibility="hidden";p.elements.pages.hide()}})}}function a(){window.DV.loaded?j():setTimeout(a,25)}var c=window.DV=window.DV||{},h=this;if(c.loading){a()}else{c.loading=true;c.recordHit="//www.documentcloud.org/pixel.gif";var i=d.createElement("link"),b=d.getElementsByTagName("head")[0];i.rel="stylesheet";i.type="text/css";i.media="screen";i.href="//s3.documentcloud.org/viewer/viewer-datauri.css";b.appendChild(i);c.loaded=false;e.getScript("http://s3.documentcloud.org/viewer/viewer.js",function(){c.loading=false;j()})}},start:function(a,h){var b=d.getElementById(h._containerId),c=DV.viewers[h._key];(h.page||h.aid)&&c&&h._changeView(c);if(b&&c){b.style.visibility="visible";c.elements.pages.show()}},end:function(a,c){var b=d.getElementById(c._containerId);if(b&&DV.viewers[c._key]){b.style.visibility="hidden";DV.viewers[c._key].elements.pages.hide()}},_teardown:function(a){var b=d.getElementById(a._containerId);if((a=a._key)&&DV.viewers[a]&&--f[a].num===0){for(DV.viewers[a].api.unload();b.hasChildNodes();){b.removeChild(b.lastChild)}b.parentNode.removeChild(b)}}})})(Popcorn,window.document);(function(b){b.parser("parseJSON","JSON",function(a){var d={title:"",remote:"",data:[]};b.forEach(a.data,function(c){d.data.push(c)});return d})})(Popcorn);(function(b){b.parser("parseSBV",function(o){var f={title:"",remote:"",data:[]},m=[],j=0,n=0,p=function(k){k=k.split(":");var l=k.length-1,g;try{g=parseInt(k[l-1],10)*60+parseFloat(k[l],10);if(l===2){g+=parseInt(k[0],10)*3600}}catch(d){throw"Bad cue"}return g},a=function(k,d){var g={};g[k]=d;return g};o=o.text.split(/(?:\r\n|\r|\n)/gm);for(n=o.length;j<n;){var c={},i=[],e=o[j++].split(",");try{c.start=p(e[0]);for(c.end=p(e[1]);j<n&&o[j];){i.push(o[j++])}c.text=i.join("<br />");m.push(a("subtitle",c))}catch(h){for(;j<n&&o[j];){j++}}for(;j<n&&!o[j];){j++}}f.data=m;return f})})(Popcorn);(function(e){function d(a,c){var b={};b[a]=c;return b}function f(a){a=a.split(":");try{var c=a[2].split(",");if(c.length===1){c=a[2].split(".")}return parseFloat(a[0],10)*3600+parseFloat(a[1],10)*60+parseFloat(c[0],10)+parseFloat(c[1],10)/1000}catch(b){return 0}}e.parser("parseSRT",function(a){var p={title:"",remote:"",data:[]},b=[],c=0,h=0,i,o,j,m;a=a.text.split(/(?:\r\n|\r|\n)/gm);for(c=a.length-1;c>=0&&!a[c];){c--}j=c+1;for(c=0;c<j;c++){m={};o=[];m.id=parseInt(a[c++],10);i=a[c++].split(/[\t ]*--\>[\t ]*/);m.start=f(i[0]);h=i[1].indexOf(" ");if(h!==-1){i[1]=i[1].substr(0,h)}for(m.end=f(i[1]);c<j&&a[c];){o.push(a[c++])}m.text=o.join("\\N").replace(/\{(\\[\w]+\(?([\w\d]+,?)+\)?)+\}/gi,"");m.text=m.text.replace(/</g,"&lt;").replace(/>/g,"&gt;");m.text=m.text.replace(/&lt;(\/?(font|b|u|i|s))((\s+(\w|\w[\w\-]*\w)(\s*=\s*(?:\".*?\"|'.*?'|[^'\">\s]+))?)+\s*|\s*)(\/?)&gt;/gi,"<$1$3$7>");m.text=m.text.replace(/\\N/gi,"<br />");b.push(d("subtitle",m))}p.data=b;return p})})(Popcorn);(function(f){function c(o,p){var a=o.substr(10).split(","),b;b={start:g(a[p.start]),end:g(a[p.end])};if(b.start===-1||b.end===-1){throw"Invalid time"}var d=m.call(e,/\{(\\[\w]+\(?([\w\d]+,?)+\)?)+\}/gi,""),j=d.replace,e;e=a.length;m=[];for(var i=p.text;i<e;i++){m.push(a[i])}e=m.join(",");var m=e.replace;b.text=j.call(d,/\\N/gi,"<br />");return b}function g(b){var a=b.split(":");if(b.length!==10||a.length<3){return -1}return parseInt(a[0],10)*3600+parseInt(a[1],10)*60+parseFloat(a[2],10)}function h(d,a){var b={};b[d]=a;return b}f.parser("parseSSA",function(p){var q={title:"",remote:"",data:[]},a=[],b=0,d;p=p.text.split(/(?:\r\n|\r|\n)/gm);for(d=p.length;b<d&&p[b]!=="[Events]";){b++}var j=p[++b].substr(8).split(", "),e={},i,m;m=0;for(i=j.length;m<i;m++){if(j[m]==="Start"){e.start=m}else{if(j[m]==="End"){e.end=m}else{if(j[m]==="Text"){e.text=m}}}}for(;++b<d&&p[b]&&p[b][0]!=="[";){try{a.push(h("subtitle",c(p[b],e)))}catch(o){}}q.data=a;return q})})(Popcorn);(function(m){function h(i,j,g){var a=i.firstChild;i=c(i,g);g=[];for(var d;a;){if(a.nodeType===1){if(a.nodeName==="p"){g.push(e(a,j,i))}else{if(a.nodeName==="div"){d=b(a.getAttribute("begin"));if(d<0){d=j}g.push.apply(g,h(a,d,i))}}}a=a.nextSibling}return g}function c(g,a){var d=g.getAttribute("region");return d!==null?d:a||""}function e(g,i,d){var a={};a.text=(g.textContent||g.text).replace(f,"").replace(n,"<br />");a.id=g.getAttribute("xml:id")||g.getAttribute("id");a.start=b(g.getAttribute("begin"),i);a.end=b(g.getAttribute("end"),i);a.target=c(g,d);if(a.end<0){a.end=b(g.getAttribute("duration"),0);if(a.end>=0){a.end+=a.start}else{a.end=Number.MAX_VALUE}}return{subtitle:a}}function b(i,j){var g;if(!i){return -1}try{return m.util.toSeconds(i)}catch(a){for(var d=i.length-1;d>=0&&i[d]<="9"&&i[d]>="0";){d--}g=d;d=parseFloat(i.substring(0,g));g=i.substring(g);return d*({h:3600,m:60,s:1,ms:0.001}[g]||-1)+(j||0)}}var f=/^[\s]+|[\s]+$/gm,n=/(?:\r\n|\r|\n)/gm;m.parser("parseTTML",function(d){var a={title:"",remote:"",data:[]};if(!d.xml||!d.xml.documentElement){return a}d=d.xml.documentElement.firstChild;if(!d){return a}for(;d.nodeName!=="body";){d=d.nextSibling}if(d){a.data=h(d,0)}return a})})(Popcorn);(function(b){b.parser("parseTTXT",function(e){var n={title:"",remote:"",data:[]},a=function(j){j=j.split(":");var g=0;try{return parseFloat(j[0],10)*60*60+parseFloat(j[1],10)*60+parseFloat(j[2],10)}catch(d){g=0}return g},i=function(j,g){var d={};d[j]=g;return d};e=e.xml.lastChild.lastChild;for(var c=Number.MAX_VALUE,f=[];e;){if(e.nodeType===1&&e.nodeName==="TextSample"){var h={};h.start=a(e.getAttribute("sampleTime"));h.text=e.getAttribute("text");if(h.text){h.end=c-0.001;f.push(i("subtitle",h))}c=h.start}e=e.previousSibling}n.data=f.reverse();return n})})(Popcorn);(function(e){function d(a){var h=a.split(":");a=a.length;var b;if(a!==12&&a!==9){throw"Bad cue"}a=h.length-1;try{b=parseInt(h[a-1],10)*60+parseFloat(h[a],10);if(a===2){b+=parseInt(h[0],10)*3600}}catch(c){throw"Bad cue"}return b}function f(a,c){var b={};b[a]=c;return b}e.parser("parseVTT",function(q){var p={title:"",remote:"",data:[]},s=[],a=0,b=0,c,j;q=q.text.split(/(?:\r\n|\r|\n)/gm);b=q.length;if(b===0||q[0]!=="WEBVTT"){return p}for(a++;a<b;){c=[];try{for(var h=a;h<b&&!q[h];){h++}a=h;var i=q[a++];h=void 0;var m={};if(!i||i.indexOf("-->")===-1){throw"Bad cue"}h=i.replace(/--\>/," --> ").split(/[\t ]+/);if(h.length<2){throw"Bad cue"}m.id=i;m.start=d(h[0]);m.end=d(h[2]);for(j=m;a<b&&q[a];){c.push(q[a++])}j.text=c.join("<br />");s.push(f("subtitle",j))}catch(o){for(a=a;a<b&&q[a];){a++}a=a}}p.data=s;return p})})(Popcorn);(function(b){b.parser("parseXML","XML",function(e){var j={title:"",remote:"",data:[]},a={},p=function(d){d=d.split(":");if(d.length===1){return parseFloat(d[0],10)}else{if(d.length===2){return parseFloat(d[0],10)+parseFloat(d[1]/12,10)}else{if(d.length===3){return parseInt(d[0]*60,10)+parseFloat(d[1],10)+parseFloat(d[2]/12,10)}else{if(d.length===4){return parseInt(d[0]*3600,10)+parseInt(d[1]*60,10)+parseFloat(d[2],10)+parseFloat(d[3]/12,10)}}}}},c=function(o){for(var g={},l=0,m=o.length;l<m;l++){var k=o.item(l).nodeName,r=o.item(l).nodeValue,q=a[r];if(k==="in"){g.start=p(r)}else{if(k==="out"){g.end=p(r)}else{if(k==="resourceid"){for(var d in q){if(q.hasOwnProperty(d)){if(!g[d]&&d!=="id"){g[d]=q[d]}}}}else{g[k]=r}}}}return g},f=function(d,g){var k={};k[d]=g;return k},h=function(d,g,k){var l={};b.extend(l,g,c(d.attributes),{text:d.textContent||d.text});g=d.childNodes;if(g.length<1||g.length===1&&g[0].nodeType===3){if(k){a[l.id]=l}else{j.data.push(f(d.nodeName,l))}}else{for(d=0;d<g.length;d++){g[d].nodeType===1&&h(g[d],l,k)}}};e=e.documentElement.childNodes;for(var i=0,n=e.length;i<n;i++){if(e[i].nodeType===1){e[i].nodeName==="manifest"?h(e[i],{},true):h(e[i],{},false)}}return j})})(Popcorn);(function(){var d=false,c=false;Popcorn.player("soundcloud",{_canPlayType:function(a,b){return/(?:http:\/\/www\.|http:\/\/|www\.|\.|^)(soundcloud)/.test(b)&&a.toLowerCase()!=="video"},_setup:function(e){function n(){d=true;SC.initialize({client_id:"PRaNFlda6Bhf5utPjUsptg"});SC.get("/resolve",{url:p.src},function(f){p.width=p.style.width?""+p.offsetWidth:"560";p.height=p.style.height?""+p.offsetHeight:"315";q.scrolling="no";q.frameborder="no";q.id="soundcloud-"+Popcorn.guid();q.src="http://w.soundcloud.com/player/?url="+f.uri+"&show_artwork=false&buying=false&liking=false&sharing=false";q.width="100%";q.height="100%";e.loadListener=function(){e.widget=h=SC.Widget(q.id);h.bind(SC.Widget.Events.FINISH,function(){p.pause();p.dispatchEvent("ended")});h.bind(SC.Widget.Events.PLAY_PROGRESS,function(g){B=g.currentPosition/1000;p.dispatchEvent("timeupdate")});h.bind(SC.Widget.Events.PLAY,function(){i=a=false;p.dispatchEvent("play");p.dispatchEvent("playing");p.currentTime=B;o.next()});h.bind(SC.Widget.Events.PAUSE,function(){i=a=true;p.dispatchEvent("pause");o.next()});h.bind(SC.Widget.Events.READY,function(){h.getDuration(function(g){j=g/1000;p.style.visibility="visible";p.dispatchEvent("durationchange");p.readyState=4;p.dispatchEvent("readystatechange");p.dispatchEvent("loadedmetadata");p.dispatchEvent("loadeddata");p.dispatchEvent("canplaythrough");p.dispatchEvent("load");!p.paused&&p.play()});h.getVolume(function(g){s=g/100})})};q.addEventListener("load",e.loadListener,false);p.appendChild(q)})}function m(){if(c){(function f(){setTimeout(function(){d?n():f()},100)})()}else{c=true;Popcorn.getScript("http://w.soundcloud.com/player/api.js",function(){Popcorn.getScript("http://connect.soundcloud.com/sdk.js",function(){n()})})}}var p=this,q=document.createElement("iframe"),s=1,B=0,i=true,a=true,h,j=0,b=false,o=Popcorn.player.playerQueue();e._container=q;p.style.visibility="hidden";p.play=function(){i=false;o.add(function(){if(a){h&&h.play()}else{o.next()}})};p.pause=function(){i=true;o.add(function(){if(a){o.next()}else{h&&h.pause()}})};Object.defineProperties(p,{muted:{set:function(f){if(f){h&&h.getVolume(function(g){s=g/100});h&&h.setVolume(0);b=true}else{h&&h.setVolume(s*100);b=false}p.dispatchEvent("volumechange")},get:function(){return b}},volume:{set:function(f){h&&h.setVolume(f*100);s=f;p.dispatchEvent("volumechange")},get:function(){return b?0:s}},currentTime:{set:function(f){B=f;h&&h.seekTo(f*1000);p.dispatchEvent("seeked");p.dispatchEvent("timeupdate")},get:function(){return B}},duration:{get:function(){return j}},paused:{get:function(){return i}}});d?n():m()},_teardown:function(a){var b=a.widget,k=SC.Widget.Events,e=a._container;a.destroyed=true;if(b){for(var h in k){b&&b.unbind(k[h])}}else{e.removeEventListener("load",a.loadEventListener,false)}}})})();(function(){function d(a){var b=d.options;a=b.parser[b.strictMode?"strict":"loose"].exec(a);for(var i={},e=14;e--;){i[b.key[e]]=a[e]||""}i[b.q.name]={};i[b.key[12]].replace(b.q.parser,function(f,g,h){if(g){i[b.q.name][g]=h}});return i}function c(a,b){return/player.vimeo.com\/video\/\d+/.test(b)||/vimeo.com\/\d+/.test(b)}d.options={strictMode:false,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}};Popcorn.player("vimeo",{_canPlayType:c,_setup:function(h){function g(r,l){var f=L.src.split("?")[0],k=JSON.stringify({method:r,value:l});if(f.substr(0,2)==="//"){f=window.location.protocol+f}L.contentWindow?L.contentWindow.postMessage(k,f):j.unload()}function e(l){if(l.origin==="http://player.vimeo.com"){var k;try{k=JSON.parse(l.data)}catch(f){console.warn(f)}if(k.player_id==a){k.method&&b[k.method]&&b[k.method](k);k.event&&o[k.event]&&o[k.event](k)}}}function m(){i||(i=setInterval(function(){j.dispatchEvent("timeupdate")},s));A||(A=setInterval(function(){g("getCurrentTime")},y))}function q(){if(i){clearInterval(i);i=0}if(A){clearInterval(A);A=0}}var s=250,y=16,n={MEDIA_ERR_ABORTED:1,MEDIA_ERR_NETWORK:2,MEDIA_ERR_DECODE:3,MEDIA_ERR_SRC_NOT_SUPPORTED:4},a,j=this,x={q:[],queue:function(f){this.q.push(f);this.process()},process:function(){if(p){for(;this.q.length;){this.q.shift()()}}}},A,i,p,L=document.createElement("iframe"),K={error:null,src:j.src,NETWORK_EMPTY:0,NETWORK_IDLE:1,NETWORK_LOADING:2,NETWORK_NO_SOURCE:3,networkState:0,HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4,readyState:0,seeking:false,currentTime:0,duration:NaN,paused:true,ended:false,autoplay:false,loop:false,volume:1,muted:false,width:0,height:0};Popcorn.forEach("error networkState readyState seeking duration paused ended".split(" "),function(f){Object.defineProperty(j,f,{get:function(){return K[f]}})});Object.defineProperties(j,{src:{get:function(){return K.src},set:function(f){K.src=f;j.load()}},currentTime:{get:function(){return K.currentTime},set:function(f){x.queue(function(){g("seekTo",f)});K.seeking=true;j.dispatchEvent("seeking")}},autoplay:{get:function(){return K.autoplay},set:function(f){K.autoplay=!!f}},loop:{get:function(){return K.loop},set:function(f){K.loop=!!f;x.queue(function(){g("setLoop",loop)})}},volume:{get:function(){return K.volume},set:function(f){K.volume=f;x.queue(function(){g("setVolume",K.muted?0:K.volume)});j.dispatchEvent("volumechange")}},muted:{get:function(){return K.muted},set:function(f){K.muted=!!f;x.queue(function(){g("setVolume",K.muted?0:K.volume)});j.dispatchEvent("volumechange")}},width:{get:function(){return L.width},set:function(f){L.width=f}},height:{get:function(){return L.height},set:function(f){L.height=f}}});var b={getCurrentTime:function(f){K.currentTime=parseFloat(f.value)},getDuration:function(f){K.duration=parseFloat(f.value);if(!isNaN(K.duration)){K.readyState=4;j.dispatchEvent("durationchange");j.dispatchEvent("loadedmetadata");j.dispatchEvent("loadeddata");j.dispatchEvent("canplay");j.dispatchEvent("canplaythrough")}},getVolume:function(f){K.volume=parseFloat(f.value)}},o={ready:function(){g("addEventListener","loadProgress");g("addEventListener","playProgress");g("addEventListener","play");g("addEventListener","pause");g("addEventListener","finish");g("addEventListener","seek");g("getDuration");p=true;x.process();j.dispatchEvent("loadstart")},loadProgress:function(f){j.dispatchEvent("progress");K.duration=parseFloat(f.data.duration)},playProgress:function(f){K.currentTime=parseFloat(f.data.seconds)},play:function(){if(K.seeking){K.seeking=false;j.dispatchEvent("seeked")}K.paused=false;K.ended=false;m();j.dispatchEvent("play")},pause:function(){K.paused=true;q();j.dispatchEvent("pause")},finish:function(){K.ended=true;q();j.dispatchEvent("ended")},seek:function(f){K.currentTime=parseFloat(f.data.seconds);K.seeking=false;K.ended=false;j.dispatchEvent("timeupdate");j.dispatchEvent("seeked")}};j.load=function(){p=false;a=Popcorn.guid();var t=d(K.src),l={},f=[],k={api:1,player_id:a};if(c(j.nodeName,t.source)){Popcorn.extend(l,h);Popcorn.extend(l,t.queryKey);Popcorn.extend(l,k);t="http://player.vimeo.com/video/"+/\d+$/.exec(t.path)+"?";for(var r in l){l.hasOwnProperty(r)&&f.push(encodeURIComponent(r)+"="+encodeURIComponent(l[r]))}t+=f.join("&");K.loop=!!t.match(/loop=1/);K.autoplay=!!t.match(/autoplay=1/);L.width=j.style.width?j.style.width:500;L.height=j.style.height?j.style.height:281;L.frameBorder=0;L.webkitAllowFullScreen=true;L.mozAllowFullScreen=true;L.allowFullScreen=true;L.src=t;j.appendChild(L)}else{t=K.MEDIA_ERR_SRC_NOT_SUPPORTED;K.error={};Popcorn.extend(K.error,n);K.error.code=t;j.dispatchEvent("error")}};j.unload=function(){q();window.removeEventListener("message",e,false)};j.play=function(){x.queue(function(){g("play")})};j.pause=function(){x.queue(function(){g("pause")})};setTimeout(function(){window.addEventListener("message",e,false);j.load()},0)},_teardown:function(){this.unload&&this.unload()}})})();(function(e,d){e.onYouTubePlayerAPIReady=function(){onYouTubePlayerAPIReady.ready=true;for(var a=0;a<onYouTubePlayerAPIReady.waiting.length;a++){onYouTubePlayerAPIReady.waiting[a]()}};if(e.YT){e.quarantineYT=e.YT;e.YT=null}onYouTubePlayerAPIReady.waiting=[];var f=false;d.player("youtube",{_canPlayType:function(a,b){return typeof b==="string"&&/(?:http:\/\/www\.|http:\/\/|www\.|\.|^)(youtu)/.test(b)&&a.toLowerCase()!=="video"},_setup:function(p){if(!e.YT&&!f){f=true;d.getScript("//youtube.com/player_api")}var o=this,s=false,A=document.createElement("div"),B=0,a=true,i=false,b=0,c=false,j=100,m=d.player.playerQueue(),q=function(){d.player.defineProperty(o,"currentTime",{set:function(g){if(!p.destroyed){i=true;B=Math.round(+g*100)/100}},get:function(){return B}});d.player.defineProperty(o,"paused",{get:function(){return a}});d.player.defineProperty(o,"muted",{set:function(g){if(p.destroyed){return g}if(p.youtubeObject.isMuted()!==g){g?p.youtubeObject.mute():p.youtubeObject.unMute();c=p.youtubeObject.isMuted();o.dispatchEvent("volumechange")}return p.youtubeObject.isMuted()},get:function(){if(p.destroyed){return 0}return p.youtubeObject.isMuted()}});d.player.defineProperty(o,"volume",{set:function(g){if(p.destroyed){return g}if(p.youtubeObject.getVolume()/100!==g){p.youtubeObject.setVolume(g*100);j=p.youtubeObject.getVolume();o.dispatchEvent("volumechange")}return p.youtubeObject.getVolume()/100},get:function(){if(p.destroyed){return 0}return p.youtubeObject.getVolume()/100}});o.play=function(){if(!p.destroyed){a=false;m.add(function(){if(p.youtubeObject.getPlayerState()!==1){i=false;p.youtubeObject.playVideo()}else{m.next()}})}};o.pause=function(){if(!p.destroyed){a=true;m.add(function(){p.youtubeObject.getPlayerState()!==2?p.youtubeObject.pauseVideo():m.next()})}}};A.id=o.id+d.guid();p._container=A;o.appendChild(A);var h=function(){var t,n,r,u,w=true,v=function(){if(!p.destroyed){if(i){if(B===p.youtubeObject.getCurrentTime()){i=false;o.dispatchEvent("seeked");o.dispatchEvent("timeupdate")}else{p.youtubeObject.seekTo(B)}}else{B=p.youtubeObject.getCurrentTime();o.dispatchEvent("timeupdate")}setTimeout(v,250)}},g=function(x){var y=p.youtubeObject.getDuration();if(isNaN(y)||y===0){setTimeout(function(){g(x*2)},x*1000)}else{o.duration=y;o.dispatchEvent("durationchange");o.dispatchEvent("loadedmetadata");o.dispatchEvent("loadeddata");o.readyState=4;v();o.dispatchEvent("canplaythrough")}};p.controls=+p.controls===0||+p.controls===1?p.controls:1;p.annotations=+p.annotations===1||+p.annotations===3?p.annotations:1;t=/^.*(?:\/|v=)(.{11})/.exec(o.src)[1];n=(o.src.split("?")[1]||"").replace(/v=.{11}/,"");n=n.replace(/&t=(?:(\d+)m)?(?:(\d+)s)?/,function(z,x,y){x|=0;y|=0;b=+y+x*60;return""});n=n.replace(/&start=(\d+)?/,function(x,y){y|=0;b=y;return""});s=/autoplay=1/.test(n);n=n.split(/[\&\?]/g);r={wmode:"transparent"};for(var k=0;k<n.length;k++){u=n[k].split("=");r[u[0]]=u[1]}p.youtubeObject=new YT.Player(A.id,{height:"100%",width:"100%",wmode:"transparent",playerVars:r,videoId:t,events:{onReady:function(){j=o.volume;c=o.muted;l();a=o.paused;q();p.youtubeObject.playVideo();o.currentTime=b},onStateChange:function(x){if(!(p.destroyed||x.data===-1)){if(x.data===2){a=true;o.dispatchEvent("pause");m.next()}else{if(x.data===1&&!w){a=false;o.dispatchEvent("play");o.dispatchEvent("playing");m.next()}else{if(x.data===0){o.dispatchEvent("ended")}else{if(x.data===1&&w){w=false;if(s||!o.paused){a=false}a&&p.youtubeObject.pauseVideo();g(0.025)}}}}}},onError:function(x){if([2,100,101,150].indexOf(x.data)!==-1){o.error={customCode:x.data};o.dispatchEvent("error")}}}});var l=function(){if(!p.destroyed){if(c!==p.youtubeObject.isMuted()){c=p.youtubeObject.isMuted();o.dispatchEvent("volumechange")}if(j!==p.youtubeObject.getVolume()){j=p.youtubeObject.getVolume();o.dispatchEvent("volumechange")}setTimeout(l,250)}}};onYouTubePlayerAPIReady.ready?h():onYouTubePlayerAPIReady.waiting.push(h)},_teardown:function(a){a.destroyed=true;var b=a.youtubeObject;if(b){b.stopVideo();b.clearVideo&&b.clearVideo()}this.removeChild(document.getElementById(a._container.id))}})})(window,Popcorn);