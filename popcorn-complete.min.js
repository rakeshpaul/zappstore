/*ac3af47694061f1d0223c6ba27e3ee60564880e2*/(function(s,o){function b(a,g){return function(){if(e.plugin.debug){return a.apply(this,arguments)}try{return a.apply(this,arguments)}catch(k){e.plugin.errors.push({plugin:g,thrown:k,source:a.toString()});this.emit("pluginerror",e.plugin.errors)}}}if(o.addEventListener){var d=Array.prototype,j=Object.prototype,h=d.forEach,n=d.slice,p=j.hasOwnProperty,f=j.toString,i=s.Popcorn,r=[],q=false,y={events:{hash:{},apis:{}}},x=function(){return s.requestAnimationFrame||s.webkitRequestAnimationFrame||s.mozRequestAnimationFrame||s.oRequestAnimationFrame||s.msRequestAnimationFrame||function(a){s.setTimeout(a,16)}}(),e=function(a,g){return new e.p.init(a,g||null)};e.version="1.3";e.isSupported=true;e.instances=[];e.p=e.prototype={init:function(k,g){var t,l=this;if(typeof k==="function"){if(o.readyState==="complete"){k(o,e)}else{r.push(k);if(!q){q=true;var v=function(){o.removeEventListener("DOMContentLoaded",v,false);for(var w=0,z=r.length;w<z;w++){r[w].call(o,e)}r=null};o.addEventListener("DOMContentLoaded",v,false)}}}else{if(typeof k==="string"){try{t=o.querySelector(k)}catch(u){throw Error("Popcorn.js Error: Invalid media element selector: "+k)}}this.media=t||k;t=this.media.nodeName&&this.media.nodeName.toLowerCase()||"video";this[t]=this.media;this.options=g||{};this.id=this.options.id||e.guid(t);if(e.byId(this.id)){throw Error("Popcorn.js Error: Cannot use duplicate ID ("+this.id+")")}this.isDestroyed=false;this.data={running:{cue:[]},timeUpdate:e.nop,disabled:{},events:{},hooks:{},history:[],state:{volume:this.media.volume},trackRefs:{},trackEvents:{byStart:[{start:-1,end:-1}],byEnd:[{start:-1,end:-1}],animating:[],startIndex:0,endIndex:0,previousUpdateTime:-1}};e.instances.push(this);var a=function(){if(l.media.currentTime<0){l.media.currentTime=0}l.media.removeEventListener("loadeddata",a,false);var C,D,w,B,z;C=l.media.duration;C=C!=C?Number.MAX_VALUE:C+1;e.addTrackEvent(l,{start:C,end:C});if(l.options.frameAnimation){l.data.timeUpdate=function(){e.timeUpdate(l,{});e.forEach(e.manifest,function(E,F){if(D=l.data.running[F]){B=D.length;for(var G=0;G<B;G++){w=D[G];(z=w._natives)&&z.frame&&z.frame.call(l,{},w,l.currentTime())}}});l.emit("timeupdate");!l.isDestroyed&&x(l.data.timeUpdate)};!l.isDestroyed&&x(l.data.timeUpdate)}else{l.data.timeUpdate=function(E){e.timeUpdate(l,E)};l.isDestroyed||l.media.addEventListener("timeupdate",l.data.timeUpdate,false)}};Object.defineProperty(this,"error",{get:function(){return l.media.error}});l.media.readyState>=2?a():l.media.addEventListener("loadeddata",a,false);return this}}};e.p.init.prototype=e.p;e.byId=function(l){for(var g=e.instances,a=g.length,k=0;k<a;k++){if(g[k].id===l){return g[k]}}return null};e.forEach=function(t,g,l){if(!t||!g){return{}}l=l||this;var k,a;if(h&&t.forEach===h){return t.forEach(g,l)}if(f.call(t)==="[object NodeList]"){k=0;for(a=t.length;k<a;k++){g.call(l,t[k],k,t)}return t}for(k in t){p.call(t,k)&&g.call(l,t[k],k,t)}return t};e.extend=function(a){var g=n.call(arguments,1);e.forEach(g,function(l){for(var k in l){a[k]=l[k]}});return a};e.extend(e,{noConflict:function(a){if(a){s.Popcorn=i}return e},error:function(a){throw Error(a)},guid:function(a){e.guid.counter++;return(a?a:"")+(+new Date+e.guid.counter)},sizeOf:function(k){var g=0,a;for(a in k){g++}return g},isArray:Array.isArray||function(a){return f.call(a)==="[object Array]"},nop:function(){},position:function(t){t=t.getBoundingClientRect();var k={},u=o.documentElement,v=o.body,l,w,a;l=u.clientTop||v.clientTop||0;w=u.clientLeft||v.clientLeft||0;a=s.pageYOffset&&u.scrollTop||v.scrollTop;u=s.pageXOffset&&u.scrollLeft||v.scrollLeft;l=Math.ceil(t.top+a-l);w=Math.ceil(t.left+u-w);for(var g in t){k[g]=Math.round(t[g])}return e.extend({},k,{top:l,left:w})},disable:function(l,g){if(!l.data.disabled[g]){l.data.disabled[g]=true;for(var a=l.data.running[g].length-1,k;a>=0;a--){k=l.data.running[g][a];k._natives.end.call(l,null,k)}}return l},enable:function(l,g){if(l.data.disabled[g]){l.data.disabled[g]=false;for(var a=l.data.running[g].length-1,k;a>=0;a--){k=l.data.running[g][a];k._natives.start.call(l,null,k)}}return l},destroy:function(k){var g=k.data.events,t=k.data.trackEvents,l,v,u,a;for(v in g){l=g[v];for(u in l){delete l[u]}g[v]=null}for(a in e.registryByName){e.removePlugin(k,a)}t.byStart.length=0;t.byEnd.length=0;if(!k.isDestroyed){k.data.timeUpdate&&k.media.removeEventListener("timeupdate",k.data.timeUpdate,false);k.isDestroyed=true}}});e.guid.counter=1;e.extend(e.p,function(){var a={};e.forEach("load play pause currentTime playbackRate volume duration preload playbackRate autoplay loop controls muted buffered readyState seeking paused played seekable ended".split(/\s+/g),function(g){a[g]=function(l){var k;if(typeof this.media[g]==="function"){if(l!=null&&/play|pause/.test(g)){this.media.currentTime=e.util.toSeconds(l)}this.media[g]();return this}if(l!=null){k=this.media[g];this.media[g]=l;k!==l&&this.emit("attrchange",{attribute:g,previousValue:k,currentValue:l});return this}return this.media[g]}});return a}());e.forEach("enable disable".split(" "),function(a){e.p[a]=function(g){return e[a](this,g)}});e.extend(e.p,{roundTime:function(){return Math.round(this.media.currentTime)},exec:function(t,k,u){var v=arguments.length,l,w;try{w=e.util.toSeconds(t)}catch(a){}if(typeof w==="number"){t=w}if(typeof t==="number"&&v===2){u=k;k=t;t=e.guid("cue")}else{if(v===1){k=-1}else{if(l=this.getTrackEvent(t)){if(typeof t==="string"&&v===2){if(typeof k==="number"){u=l._natives.start}if(typeof k==="function"){u=k;k=l.start}}}else{if(v>=2){if(typeof k==="string"){try{w=e.util.toSeconds(k)}catch(g){}k=w}if(typeof k==="number"){u=e.nop()}if(typeof k==="function"){u=k;k=-1}}}}}e.addTrackEvent(this,{id:t,start:k,end:k+1,_running:false,_natives:{start:u||e.nop,end:e.nop,type:"cue"}});return this},mute:function(a){a=a==null||a===true?"muted":"unmuted";if(a==="unmuted"){this.media.muted=false;this.media.volume=this.data.state.volume}if(a==="muted"){this.data.state.volume=this.media.volume;this.media.muted=true}this.emit(a);return this},unmute:function(a){return this.mute(a==null?false:!a)},position:function(){return e.position(this.media)},toggle:function(a){return e[this.data.disabled[a]?"enable":"disable"](this,a)},defaults:function(a,g){if(e.isArray(a)){e.forEach(a,function(l){for(var k in l){this.defaults(k,l[k])}},this);return this}if(!this.options.defaults){this.options.defaults={}}this.options.defaults[a]||(this.options.defaults[a]={});e.extend(this.options.defaults[a],g);return this}});e.Events={UIEvents:"blur focus focusin focusout load resize scroll unload",MouseEvents:"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave click dblclick",Events:"loadstart progress suspend emptied stalled play pause error loadedmetadata loadeddata waiting playing canplay canplaythrough seeking seeked timeupdate ended ratechange durationchange volumechange"};e.Events.Natives=e.Events.UIEvents+" "+e.Events.MouseEvents+" "+e.Events.Events;y.events.apiTypes=["UIEvents","MouseEvents","Events"];(function(u,g){for(var l=y.events.apiTypes,t=u.Natives.split(/\s+/g),k=0,a=t.length;k<a;k++){g.hash[t[k]]=true}l.forEach(function(z){g.apis[z]={};for(var B=u[z].split(/\s+/g),v=B.length,w=0;w<v;w++){g.apis[z][B[w]]=true}})})(e.Events,y.events);e.events={isNative:function(a){return !!y.events.hash[a]},getInterface:function(k){if(!e.events.isNative(k)){return false}var g=y.events,t=g.apiTypes;g=g.apis;for(var l=0,v=t.length,u,a;l<v;l++){a=t[l];if(g[a][k]){u=a;break}}return u},all:e.Events.Natives.split(/\s+/g),fn:{trigger:function(k,g){var a;if(this.data.events[k]&&e.sizeOf(this.data.events[k])){if(a=e.events.getInterface(k)){a=o.createEvent(a);a.initEvent(k,true,true,s,1);this.media.dispatchEvent(a);return this}e.forEach(this.data.events[k],function(l){l.call(this,g)},this)}return this},listen:function(u,g){var l=this,t=true,k=e.events.hooks[u],a;if(!this.data.events[u]){this.data.events[u]={};t=false}if(k){k.add&&k.add.call(this,{},g);if(k.bind){u=k.bind}if(k.handler){a=g;g=function(v){k.handler.call(l,v,a)}}t=true;if(!this.data.events[u]){this.data.events[u]={};t=false}}this.data.events[u][g.name||g.toString()+e.guid()]=g;!t&&e.events.all.indexOf(u)>-1&&this.media.addEventListener(u,function(v){e.forEach(l.data.events[u],function(w){typeof w==="function"&&w.call(l,v)})},false);return this},unlisten:function(a,g){if(this.data.events[a]&&this.data.events[a][g]){delete this.data.events[a][g];return this}this.data.events[a]=null;return this}},hooks:{canplayall:{bind:"canplaythrough",add:function(k,g){var a=false;if(this.media.readyState){g.call(this,k);a=true}this.data.hooks.canplayall={fired:a}},handler:function(a,g){if(!this.data.hooks.canplayall.fired){g.call(this,a);this.data.hooks.canplayall.fired=true}}}}};e.forEach([["trigger","emit"],["listen","on"],["unlisten","off"]],function(a){e.p[a[0]]=e.p[a[1]]=e.events.fn[a[0]]});e.addTrackEvent=function(k,g){var t,l;if(g.id){t=k.getTrackEvent(g.id)}if(t){l=true;g=e.extend({},t,g);k.removeTrackEvent(g.id)}if(g&&g._natives&&g._natives.type&&k.options.defaults&&k.options.defaults[g._natives.type]){g=e.extend({},k.options.defaults[g._natives.type],g)}if(g._natives){g._id=g.id||g._id||e.guid(g._natives.type);k.data.history.push(g._id)}g.start=e.util.toSeconds(g.start,k.options.framerate);g.end=e.util.toSeconds(g.end,k.options.framerate);var v=k.data.trackEvents.byStart,u=k.data.trackEvents.byEnd,a;for(a=v.length-1;a>=0;a--){if(g.start>=v[a].start){v.splice(a+1,0,g);break}}for(v=u.length-1;v>=0;v--){if(g.end>u[v].end){u.splice(v+1,0,g);break}}if(g.end>k.media.currentTime&&g.start<=k.media.currentTime){g._running=true;k.data.running[g._natives.type].push(g);k.data.disabled[g._natives.type]||g._natives.start.call(k,null,g)}a<=k.data.trackEvents.startIndex&&g.start<=k.data.trackEvents.previousUpdateTime&&k.data.trackEvents.startIndex++;v<=k.data.trackEvents.endIndex&&g.end<k.data.trackEvents.previousUpdateTime&&k.data.trackEvents.endIndex++;this.timeUpdate(k,null,true);g._id&&e.addTrackEvent.ref(k,g);if(l){l=g._natives.type==="cue"?"cuechange":"trackchange";k.emit(l,{id:g.id,previousValue:{time:t.start,fn:t._natives.start},currentValue:{time:g.start,fn:g._natives.start}})}};e.addTrackEvent.ref=function(a,g){a.data.trackRefs[g._id]=g;return a};e.removeTrackEvent=function(z,k){for(var B,l,u=z.data.history.length,v=z.data.trackEvents.byStart.length,w=0,g=0,D=[],a=[],C=[],t=[];--v>-1;){B=z.data.trackEvents.byStart[w];l=z.data.trackEvents.byEnd[w];if(!B._id){D.push(B);a.push(l)}if(B._id){B._id!==k&&D.push(B);l._id!==k&&a.push(l);if(B._id===k){g=w;B._natives._teardown&&B._natives._teardown.call(z,B)}}w++}v=z.data.trackEvents.animating.length;w=0;if(v){for(;--v>-1;){B=z.data.trackEvents.animating[w];B._id||C.push(B);B._id&&B._id!==k&&C.push(B);w++}}g<=z.data.trackEvents.startIndex&&z.data.trackEvents.startIndex--;g<=z.data.trackEvents.endIndex&&z.data.trackEvents.endIndex--;z.data.trackEvents.byStart=D;z.data.trackEvents.byEnd=a;z.data.trackEvents.animating=C;for(v=0;v<u;v++){z.data.history[v]!==k&&t.push(z.data.history[v])}z.data.history=t;e.removeTrackEvent.ref(z,k)};e.removeTrackEvent.ref=function(a,g){delete a.data.trackRefs[g];return a};e.getTrackEvents=function(t){var g=[];t=t.data.trackEvents.byStart;for(var l=t.length,k=0,a;k<l;k++){a=t[k];a._id&&g.push(a)}return g};e.getTrackEvents.ref=function(a){return a.data.trackRefs};e.getTrackEvent=function(a,g){return a.data.trackRefs[g]};e.getTrackEvent.ref=function(a,g){return a.data.trackRefs[g]};e.getLastTrackEventId=function(a){return a.data.history[a.data.history.length-1]};e.timeUpdate=function(C,w){var k=C.media.currentTime,E=C.data.trackEvents.previousUpdateTime,g=C.data.trackEvents,D=g.endIndex,u=g.startIndex,a=g.byStart.length,v=g.byEnd.length,B=e.registryByName,z,t,l;if(E<=k){for(;g.byEnd[D]&&g.byEnd[D].end<=k;){z=g.byEnd[D];t=(E=z._natives)&&E.type;if(!E||B[t]||C[t]){if(z._running===true){z._running=false;l=C.data.running[t];l.splice(l.indexOf(z),1);if(!C.data.disabled[t]){E.end.call(C,w,z);C.emit("trackend",e.extend({},z,{plugin:t,type:"trackend"}))}}D++}else{e.removeTrackEvent(C,z._id);return}}for(;g.byStart[u]&&g.byStart[u].start<=k;){z=g.byStart[u];t=(E=z._natives)&&E.type;if(!E||B[t]||C[t]){if(z.end>k&&z._running===false){z._running=true;C.data.running[t].push(z);if(!C.data.disabled[t]){E.start.call(C,w,z);C.emit("trackstart",e.extend({},z,{plugin:t,type:"trackstart"}))}}u++}else{e.removeTrackEvent(C,z._id);return}}}else{if(E>k){for(;g.byStart[u]&&g.byStart[u].start>k;){z=g.byStart[u];t=(E=z._natives)&&E.type;if(!E||B[t]||C[t]){if(z._running===true){z._running=false;l=C.data.running[t];l.splice(l.indexOf(z),1);if(!C.data.disabled[t]){E.end.call(C,w,z);C.emit("trackend",e.extend({},z,{plugin:t,type:"trackend"}))}}u--}else{e.removeTrackEvent(C,z._id);return}}for(;g.byEnd[D]&&g.byEnd[D].end>k;){z=g.byEnd[D];t=(E=z._natives)&&E.type;if(!E||B[t]||C[t]){if(z.start<=k&&z._running===false){z._running=true;C.data.running[t].push(z);if(!C.data.disabled[t]){E.start.call(C,w,z);C.emit("trackstart",e.extend({},z,{plugin:t,type:"trackstart"}))}}D--}else{e.removeTrackEvent(C,z._id);return}}}}g.endIndex=D;g.startIndex=u;g.previousUpdateTime=k;g.byStart.length<a&&g.startIndex--;g.byEnd.length<v&&g.endIndex--};e.extend(e.p,{getTrackEvents:function(){return e.getTrackEvents.call(null,this)},getTrackEvent:function(a){return e.getTrackEvent.call(null,this,a)},getLastTrackEventId:function(){return e.getLastTrackEventId.call(null,this)},removeTrackEvent:function(a){e.removeTrackEvent.call(null,this,a);return this},removePlugin:function(a){e.removePlugin.call(null,this,a);return this},timeUpdate:function(a){e.timeUpdate.call(null,this,a);return this},destroy:function(){e.destroy.call(null,this);return this}});e.manifest={};e.registry=[];e.registryByName={};e.plugin=function(t,g,l){if(e.protect.natives.indexOf(t.toLowerCase())>=0){e.error("'"+t+"' is a protected function name")}else{var k=["start","end"],u={},v=typeof g==="function",w=["_setup","_teardown","start","end","frame"],z=function(C,D){C=C||e.nop;D=D||e.nop;return function(){C.apply(this,arguments);D.apply(this,arguments)}};e.manifest[t]=l=l||g.manifest||{};w.forEach(function(C){g[C]=b(g[C]||e.nop,t)});var B=function(C,G){if(!G){return this}if(G.ranges&&e.isArray(G.ranges)){e.forEach(G.ranges,function(H){H=e.extend({},G,H);delete H.ranges;this[t](H)},this);return this}var D=G._natives={},E="",F;e.extend(D,C);G._natives.type=t;G._running=false;D.start=D.start||D["in"];D.end=D.end||D.out;if(G.once){D.end=z(D.end,function(){this.removeTrackEvent(G._id)})}D._teardown=z(function(){var I=n.call(arguments),H=this.data.running[D.type];I.unshift(null);I[1]._running&&H.splice(H.indexOf(G),1)&&D.end.apply(this,I)},D._teardown);G.compose=G.compose&&G.compose.split(" ")||[];G.effect=G.effect&&G.effect.split(" ")||[];G.compose=G.compose.concat(G.effect);G.compose.forEach(function(H){E=e.compositions[H]||{};w.forEach(function(I){D[I]=z(D[I],E[I])})});G._natives.manifest=l;if(!("start" in G)){G.start=G["in"]||0}if(!G.end&&G.end!==0){G.end=G.out||Number.MAX_VALUE}if(!p.call(G,"toString")){G.toString=function(){var H=["start: "+G.start,"end: "+G.end,"id: "+(G.id||G._id)];G.target!=null&&H.push("target: "+G.target);return t+" ( "+H.join(", ")+" )"}}if(!G.target){F="options" in l&&l.options;G.target=F&&"target" in F&&F.target}if(G._natives){G._id=e.guid(G._natives.type)}G._natives._setup&&G._natives._setup.call(this,G);e.addTrackEvent(this,G);e.forEach(C,function(I,H){H!=="type"&&k.indexOf(H)===-1&&this.on(H,I)},this);return this};e.p[t]=u[t]=function(C,E){var D;if(C&&!E){E=C}else{if(D=this.getTrackEvent(C)){E=e.extend({},D,E);e.addTrackEvent(this,E);return this}else{E.id=C}}this.data.running[t]=this.data.running[t]||[];D=e.extend({},this.options.defaults&&this.options.defaults[t]||{},E);return B.call(this,v?g.call(this,D):g,D)};l&&e.extend(g,{manifest:l});var a={fn:u[t],definition:g,base:g,parents:[],name:t};e.registry.push(e.extend(u,a,{type:t}));e.registryByName[t]=a;return u}};e.plugin.errors=[];e.plugin.debug=e.version==="1.3";e.removePlugin=function(k,g){if(!g){g=k;k=e.p;if(e.protect.natives.indexOf(g.toLowerCase())>=0){e.error("'"+g+"' is a protected function name");return}var t=e.registry.length,l;for(l=0;l<t;l++){if(e.registry[l].name===g){e.registry.splice(l,1);delete e.registryByName[g];delete e.manifest[g];delete k[g];return}}}t=k.data.trackEvents.byStart;l=k.data.trackEvents.byEnd;var v=k.data.trackEvents.animating,u,a;u=0;for(a=t.length;u<a;u++){if(t[u]&&t[u]._natives&&t[u]._natives.type===g){t[u]._natives._teardown&&t[u]._natives._teardown.call(k,t[u]);t.splice(u,1);u--;a--;if(k.data.trackEvents.startIndex<=u){k.data.trackEvents.startIndex--;k.data.trackEvents.endIndex--}}l[u]&&l[u]._natives&&l[u]._natives.type===g&&l.splice(u,1)}u=0;for(a=v.length;u<a;u++){if(v[u]&&v[u]._natives&&v[u]._natives.type===g){v.splice(u,1);u--;a--}}};e.compositions={};e.compose=function(k,g,a){e.manifest[k]=a||g.manifest||{};e.compositions[k]=g};e.plugin.effect=e.effect=e.compose;var m=/^(?:\.|#|\[)/;e.dom={debug:false,find:function(l,g){var a=null;l=l.trim();g=g||o;if(l){if(!m.test(l)){a=o.getElementById(l);if(a!==null){return a}}try{a=g.querySelector(l)}catch(k){if(e.dom.debug){throw Error(k)}}}return a}};var A=/\?/,c={url:"",data:"",dataType:"",success:e.nop,type:"GET",async:true,xhr:function(){return new s.XMLHttpRequest}};e.xhr=function(a){a.dataType=a.dataType&&a.dataType.toLowerCase()||null;if(a.dataType&&(a.dataType==="jsonp"||a.dataType==="script")){e.xhr.getJSONP(a.url,a.success,a.dataType==="script")}else{a=e.extend({},c,a);a.ajax=a.xhr();if(a.ajax){if(a.type==="GET"&&a.data){a.url+=(A.test(a.url)?"&":"?")+a.data;a.data=null}a.ajax.open(a.type,a.url,a.async);a.ajax.send(a.data||null);return e.xhr.httpData(a)}}};e.xhr.httpData=function(t){var g,l=null,k,a=null;t.ajax.onreadystatechange=function(){if(t.ajax.readyState===4){try{l=JSON.parse(t.ajax.responseText)}catch(u){}g={xml:t.ajax.responseXML,text:t.ajax.responseText,json:l};if(!g.xml||!g.xml.documentElement){g.xml=null;try{k=new DOMParser;a=k.parseFromString(t.ajax.responseText,"text/xml");if(!a.getElementsByTagName("parsererror").length){g.xml=a}}catch(v){}}if(t.dataType){g=g[t.dataType]}t.success.call(t.ajax,g)}};return g};e.xhr.getJSONP=function(w,z,k){var g=o.head||o.getElementsByTagName("head")[0]||o.documentElement,a=o.createElement("script"),u=false,v=[];v=/(=)\?(?=&|$)|\?\?/;var t,l;if(!k){l=w.match(/(callback=[^&]*)/);if(l!==null&&l.length){v=l[1].split("=")[1];if(v==="?"){v="jsonp"}t=e.guid(v);w=w.replace(/(callback=[^&]*)/,"callback="+t)}else{t=e.guid("jsonp");if(v.test(w)){w=w.replace(v,"$1"+t)}v=w.split(/\?(.+)?/);w=v[0]+"?";if(v[1]){w+=v[1]+"&"}w+="callback="+t}window[t]=function(B){z&&z(B);u=true}}a.addEventListener("load",function(){k&&z&&z();u&&delete window[t];g.removeChild(a)},false);a.src=w;g.insertBefore(a,g.firstChild)};e.getJSONP=e.xhr.getJSONP;e.getScript=e.xhr.getScript=function(a,g){return e.xhr.getJSONP(a,g,true)};e.util={toSeconds:function(u,g){var l=/^([0-9]+:){0,2}[0-9]+([.;][0-9]+)?$/,t,k,a;if(typeof u==="number"){return u}typeof u==="string"&&!l.test(u)&&e.error("Invalid time format");l=u.split(":");t=l.length-1;k=l[t];if(k.indexOf(";")>-1){k=k.split(";");a=0;if(g&&typeof g==="number"){a=parseFloat(k[1],10)/g}l[t]=parseInt(k[0],10)+a}t=l[0];return{1:parseFloat(t,10),2:parseInt(t,10)*60+parseFloat(l[1],10),3:parseInt(t,10)*3600+parseInt(l[1],10)*60+parseFloat(l[2],10)}[l.length||1]}};e.p.cue=e.p.exec;e.protect={natives:function(a){return Object.keys?Object.keys(a):function(g){var l,k=[];for(l in g){p.call(g,l)&&k.push(l)}return k}(a)}(e.p).map(function(a){return a.toLowerCase()})};e.forEach({listen:"on",unlisten:"off",trigger:"emit",exec:"cue"},function(k,g){var a=e.p[g];e.p[g]=function(){if(typeof console!=="undefined"&&console.warn){console.warn("Deprecated method '"+g+"', "+(k==null?"do not use.":"use '"+k+"' instead."));e.p[g]=a}return e.p[k].apply(this,[].slice.call(arguments))}});s.Popcorn=e}else{s.Popcorn={isSupported:false};for(d="byId forEach extend effects error guid sizeOf isArray nop position disable enable destroyaddTrackEvent removeTrackEvent getTrackEvents getTrackEvent getLastTrackEventId timeUpdate plugin removePlugin compose effect xhr getJSONP getScript".split(/\s+/);d.length;){s.Popcorn[d.shift()]=function(){}}}})(window,window.document);(function(e,i){var p=e.document,h=e.location,f=/:\/\//,n=h.href.replace(h.href.split("/").slice(-1)[0],""),b=function(k,g,a){k=k||0;g=(g||k||0)+1;a=a||1;g=Math.ceil((g-k)/a)||0;var d=0,j=[];for(j.length=g;d<g;){j[d++]=k;k+=a}return j};i.sequence=function(a,d){return new i.sequence.init(a,d)};i.sequence.init=function(j,g){this.parent=p.getElementById(j);this.seqId=i.guid("__sequenced");this.queue=[];this.playlist=[];this.inOuts={ofVideos:[],ofClips:[]};this.dims={width:0,height:0};this.active=0;this.playing=this.cycling=false;this.times={last:0};this.events={};var a=this,d=0;i.forEach(g,function(o,q){var m=p.createElement("video");m.preload="auto";m.controls=true;m.style.display=q&&"none"||"";m.id=a.seqId+"-"+q;a.queue.push(m);var k=o["in"],l=o.out;a.inOuts.ofVideos.push({"in":k!==undefined&&k||1,out:l!==undefined&&l||0});a.inOuts.ofVideos[q].out=a.inOuts.ofVideos[q].out||a.inOuts.ofVideos[q]["in"]+2;m.src=!f.test(o.src)?n+o.src:o.src;m.setAttribute("data-sequence-owner",j);m.setAttribute("data-sequence-guid",a.seqId);m.setAttribute("data-sequence-id",q);m.setAttribute("data-sequence-clip",[a.inOuts.ofVideos[q]["in"],a.inOuts.ofVideos[q].out].join(":"));a.parent.appendChild(m);a.playlist.push(i("#"+m.id))});a.inOuts.ofVideos.forEach(function(k){k={"in":d,out:d+(k.out-k["in"])};a.inOuts.ofClips.push(k);d=k.out+1});i.forEach(this.queue,function(k,l){function m(){if(!l){a.dims.width=k.videoWidth;a.dims.height=k.videoHeight}k.currentTime=a.inOuts.ofVideos[l]["in"]-0.5;k.removeEventListener("canplaythrough",m,false);return true}k.addEventListener("canplaythrough",m,false);k.addEventListener("play",function(){a.playing=true},false);k.addEventListener("pause",function(){a.playing=false},false);k.addEventListener("timeupdate",function(r){r=r.srcElement||r.target;r=+(r.dataset&&r.dataset.sequenceId||r.getAttribute("data-sequence-id"));var o=Math.floor(k.currentTime);if(a.times.last!==o&&r===a.active){a.times.last=o;o===a.inOuts.ofVideos[r].out&&i.sequence.cycle.call(a,r)}},false)});return this};i.sequence.init.prototype=i.sequence.prototype;i.sequence.cycle=function(l){this.queue||i.error("Popcorn.sequence.cycle is not a public method");var g=this.queue,a=this.inOuts.ofVideos,d=g[l],j=0,k;if(g[l+1]){j=l+1}if(g[l+1]){g=g[j];a=a[j];i.extend(g,{width:this.dims.width,height:this.dims.height});k=this.playlist[j];d.pause();this.active=j;this.times.last=a["in"]-1;k.currentTime(a["in"]);k[j?"play":"pause"]();this.trigger("cycle",{position:{previous:l,current:j}});if(j){d.style.display="none";g.style.display=""}this.cycling=false}else{this.playlist[l].pause()}return this};var c=["timeupdate","play","pause"];i.extend(i.sequence.prototype,{eq:function(a){return this.playlist[a]},remove:function(){this.parent.innerHTML=null},clip:function(a){return this.inOuts.ofVideos[a]},duration:function(){for(var g=0,d=this.inOuts.ofClips,a=0;a<d.length;a++){g+=d[a].out-d[a]["in"]+1}return g-1},play:function(){this.playlist[this.active].play();return this},exec:function(g,d){var a=this.active;this.inOuts.ofClips.forEach(function(j,k){if(g>=j["in"]&&g<=j.out){a=k}});g+=this.inOuts.ofVideos[a]["in"]-this.inOuts.ofClips[a]["in"];i.addTrackEvent(this.playlist[a],{start:g-1,end:g,_running:false,_natives:{start:d||i.nop,end:i.nop,type:"exec"}});return this},listen:function(l,g){var a=this,d=this.playlist,j=d.length,k=0;if(!g){g=i.nop}if(i.Events.Natives.indexOf(l)>-1){i.forEach(d,function(m){m.listen(l,function(o){o.active=a;if(c.indexOf(l)>-1){g.call(m,o)}else{++k===j&&g.call(m,o)}})})}else{this.events[l]||(this.events[l]={});d=g.name||i.guid("__"+l);this.events[l][d]=g}return this},unlisten:function(){},trigger:function(g,d){var a=this;if(!(i.Events.Natives.indexOf(g)>-1)){this.events[g]&&i.forEach(this.events[g],function(j){j.call(a,{type:g},d)});return this}}});i.forEach(i.manifest,function(a,d){i.sequence.prototype[d]=function(l){var o={},q=[],s,k,m,j,v;for(s=0;s<this.inOuts.ofClips.length;s++){q=this.inOuts.ofClips[s];k=b(q["in"],q.out);m=k.indexOf(l.start);j=k.indexOf(l.end);if(m>-1){o[s]=i.extend({},q,{start:k[m],clipIdx:m})}if(j>-1){o[s]=i.extend({},q,{end:k[j],clipIdx:j})}}s=Object.keys(o).map(function(r){return +r});q=b(s[0],s[1]);for(s=0;s<q.length;s++){m={};j=q[s];var g=o[j];if(g){v=this.inOuts.ofVideos[j];k=g.clipIdx;v=b(v["in"],v.out);if(g.start){m.start=v[k];m.end=v[v.length-1]}if(g.end){m.start=v[0];m.end=v[k]}}else{m.start=this.inOuts.ofVideos[j]["in"];m.end=this.inOuts.ofVideos[j].out}this.playlist[j][d](i.extend({},l,m))}return this}})})(this,Popcorn);(function(b){document.addEventListener("DOMContentLoaded",function(){var a=document.querySelectorAll("[data-timeline-sources]");b.forEach(a,function(c,h){var e=a[h],i,m,n;if(!e.id){e.id=b.guid("__popcorn")}if(e.nodeType&&e.nodeType===1){n=b("#"+e.id);i=(e.getAttribute("data-timeline-sources")||"").split(",");i[0]&&b.forEach(i,function(d){m=d.split("!");if(m.length===1){m=d.match(/(.*)[\/\\]([^\/\\]+\.\w+)$/)[2].split(".");m[0]="parse"+m[1].toUpperCase();m[1]=d}i[0]&&n[m[0]]&&n[m[0]](m[1])});n.autoplay()&&n.play()}})},false)})(Popcorn);(function(j,i){function c(d){d=typeof d==="string"?d:[d.language,d.region].join("-");var a=d.split("-");return{iso6391:d,language:a[0]||"",region:a[1]||""}}var f=j.navigator,b=c(f.userLanguage||f.language);i.locale={get:function(){return b},set:function(a){b=c(a);i.locale.broadcast();return b},broadcast:function(d){var g=i.instances,h=g.length,a=0,e;for(d=d||"locale:changed";a<h;a++){e=g[a];d in e.data.events&&e.trigger(d)}}}})(this,this.Popcorn);(function(d){var c=Object.prototype.hasOwnProperty;d.parsers={};d.parser=function(a,b,h){if(d.protect.natives.indexOf(a.toLowerCase())>=0){d.error("'"+a+"' is a protected function name")}else{if(typeof b==="function"&&!h){h=b;b=""}if(!(typeof h!=="function"||typeof b!=="string")){var e={};e[a]=function(f,g){if(!f){return this}var j=this;d.xhr({url:f,dataType:b,success:function(o){var i,m,p=0;o=h(o).data||[];if(i=o.length){for(;p<i;p++){m=o[p];for(var r in m){c.call(m,r)&&j[r]&&j[r](m[r])}}g&&g()}}});return this};d.extend(d.p,e);return e}}}})(Popcorn);(function(f){var c=function(b,a){b=b||f.nop;a=a||f.nop;return function(){b.apply(this,arguments);a.apply(this,arguments)}},g=/^.*\.(ogg|oga|aac|mp3|wav)($|\?)/,h=/^.*\.(ogg|oga|aac|mp3|wav|ogg|ogv|mp4|webm)($|\?)/;f.player=function(d,a){if(!f[d]){a=a||{};var b=function(o,x,G){G=G||{};var i=new Date/1000,H=i,e=0,s=0,l=1,p=false,j={},q=typeof o==="string"?f.dom.find(o):o,m={};Object.prototype.__defineGetter__||(m=q||document.createElement("div"));for(var A in q){if(!(A in m)){if(typeof q[A]==="object"){m[A]=q[A]}else{if(typeof q[A]==="function"){m[A]=function(k){return"length" in q[k]&&!q[k].call?q[k]:function(){return q[k].apply(q,arguments)}}(A)}else{f.player.defineProperty(m,A,{get:function(k){return function(){return q[k]}}(A),set:f.nop,configurable:true})}}}}var y=function(){i=new Date/1000;if(!m.paused){m.currentTime+=i-H;m.dispatchEvent("timeupdate");setTimeout(y,10)}H=i};m.play=function(){this.paused=false;if(m.readyState>=4){H=new Date/1000;m.dispatchEvent("play");y()}};m.pause=function(){this.paused=true;m.dispatchEvent("pause")};f.player.defineProperty(m,"currentTime",{get:function(){return e},set:function(k){e=+k;m.dispatchEvent("timeupdate");return e},configurable:true});f.player.defineProperty(m,"volume",{get:function(){return l},set:function(k){l=+k;m.dispatchEvent("volumechange");return l},configurable:true});f.player.defineProperty(m,"muted",{get:function(){return p},set:function(k){p=+k;m.dispatchEvent("volumechange");return p},configurable:true});f.player.defineProperty(m,"readyState",{get:function(){return s},set:function(k){return s=k},configurable:true});m.addEventListener=function(n,k){j[n]||(j[n]=[]);j[n].push(k);return k};m.removeEventListener=function(k,r){var t,n=j[k];if(n){for(t=j[k].length-1;t>=0;t--){r===n[t]&&n.splice(t,1)}return r}};m.dispatchEvent=function(r){var k,n=r.type;if(!n){n=r;if(r=f.events.getInterface(n)){k=document.createEvent(r);k.initEvent(n,true,true,window,1)}}if(j[n]){for(r=j[n].length-1;r>=0;r--){j[n][r].call(this,k,this)}}};m.src=x||"";m.duration=0;m.paused=true;m.ended=0;G&&G.events&&f.forEach(G.events,function(n,k){m.addEventListener(k,n,false)});if(a._canPlayType(q.nodeName,x)!==false){if(a._setup){a._setup.call(m,G)}else{m.readyState=4;m.dispatchEvent("loadedmetadata");m.dispatchEvent("loadeddata");m.dispatchEvent("canplaythrough")}}else{setTimeout(function(){m.dispatchEvent("error")},0)}o=new f.p.init(m,G);if(a._teardown){o.destroy=c(o.destroy,function(){a._teardown.call(m,G)})}return o};b.canPlayType=a._canPlayType=a._canPlayType||f.nop;f[d]=f.player.registry[d]=b}};f.player.registry={};f.player.defineProperty=Object.defineProperty||function(d,a,b){d.__defineGetter__(a,b.get||f.nop);d.__defineSetter__(a,b.set||f.nop)};f.player.playerQueue=function(){var b=[],a=false;return{next:function(){a=false;b.shift();b[0]&&b[0]()},add:function(d){b.push(function(){a=true;d&&d()});!a&&b[0]()}}};f.smart=function(o,p,a){var b=["AUDIO","VIDEO"],d,j=f.dom.find(o),e;d=document.createElement("video");var i={ogg:"video/ogg",ogv:"video/ogg",oga:"audio/ogg",webm:"video/webm",mp4:"video/mp4",mp3:"audio/mp3"};if(j){if(b.indexOf(j.nodeName)>-1&&!p){if(typeof p==="object"){a=p}return f(j,a)}if(typeof p==="string"){p=[p]}o=0;for(srcLength=p.length;o<srcLength;o++){e=h.exec(p[o]);e=!e||!e[1]?false:d.canPlayType(i[e[1]]);if(e){p=p[o];break}for(var m in f.player.registry){if(f.player.registry.hasOwnProperty(m)){if(f.player.registry[m].canPlayType(j.nodeName,p[o])){return f[m](j,p[o],a)}}}}if(b.indexOf(j.nodeName)===-1){d=typeof p==="string"?p:p.length?p[0]:p;o=document.createElement(g.exec(d)?b[0]:b[1]);o.controls=true;j.appendChild(o);j=o}a&&a.events&&a.events.error&&j.addEventListener("error",a.events.error,false);j.src=p;return f(j,a)}else{f.error("Specified target "+o+" was not found.")}}})(Popcorn);(function(d){var c=function(h,j){var e=0,a=0,b;d.forEach(j.classes,function(f,g){b=[];if(f==="parent"){b[0]=document.querySelectorAll("#"+j.target)[0].parentNode}else{b=document.querySelectorAll("#"+j.target+" "+f)}e=0;for(a=b.length;e<a;e++){b[e].classList.toggle(g)}})};d.compose("applyclass",{manifest:{about:{name:"Popcorn applyclass Effect",version:"0.1",author:"@scottdowne",website:"scottdowne.wordpress.com"},options:{}},_setup:function(h){h.classes={};h.applyclass=h.applyclass||"";for(var j=h.applyclass.replace(/\s/g,"").split(","),e=[],a=0,b=j.length;a<b;a++){e=j[a].split(":");if(e[0]){h.classes[e[0]]=e[1]||""}}},start:c,end:c})})(Popcorn);(function(f){var c=/(?:http:\/\/www\.|http:\/\/|www\.|\.|^)(youtu|vimeo|soundcloud|baseplayer)/,g={},h={vimeo:false,youtube:false,soundcloud:false,module:false};Object.defineProperty(g,void 0,{get:function(){return h[void 0]},set:function(a){h[void 0]=a}});f.plugin("mediaspawner",{manifest:{about:{name:"Popcorn Media Spawner Plugin",version:"0.1",author:"Matthew Schranz, @mjschranz",website:"mschranz.wordpress.com"},options:{source:{elem:"input",type:"text",label:"Media Source","default":"http://www.youtube.com/watch?v=CXDstfD9eJ0"},caption:{elem:"input",type:"text",label:"Media Caption","default":"Popcorn Popping",optional:true},target:"mediaspawner-container",start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},autoplay:{elem:"input",type:"checkbox",label:"Autoplay Video",optional:true},width:{elem:"input",type:"number",label:"Media Width","default":400,units:"px",optional:true},height:{elem:"input",type:"number",label:"Media Height","default":200,units:"px",optional:true}}},_setup:function(e){function i(){function k(){if(m!=="HTML5"&&!window.Popcorn[m]){setTimeout(function(){k()},300)}else{e.id=e._container.id;e._container.style.width=e.width+"px";e._container.style.height=e.height+"px";e.popcorn=f.smart("#"+e.id,e.source);m==="HTML5"&&e.popcorn.controls(true);e._container.style.width="0px";e._container.style.height="0px";e._container.style.visibility="hidden";e._container.style.overflow="hidden"}}if(m!=="HTML5"&&!window.Popcorn[m]&&!g[m]){g[m]=true;f.getScript("http://popcornjs.org/code/players/"+m+"/popcorn."+m+".js",function(){k()})}else{k()}}function a(){window.Popcorn.player?i():setTimeout(function(){a()},300)}var b=document.getElementById(e.target)||{},m,d,j;if(d=c.exec(e.source)){m=d[1];if(m==="youtu"){m="youtube"}}else{m="HTML5"}e._type=m;e._container=document.createElement("div");d=e._container;d.id="mediaSpawnerdiv-"+f.guid();e.width=e.width||400;e.height=e.height||200;if(e.caption){j=document.createElement("div");j.innerHTML=e.caption;j.style.display="none";e._capCont=j;d.appendChild(j)}b&&b.appendChild(d);if(!window.Popcorn.player&&!g.module){g.module=true;f.getScript("http://popcornjs.org/code/modules/player/popcorn.player.js",a)}else{a()}},start:function(b,a){if(a._capCont){a._capCont.style.display=""}a._container.style.width=a.width+"px";a._container.style.height=a.height+"px";a._container.style.visibility="visible";a._container.style.overflow="visible";a.autoplay&&a.popcorn.play()},end:function(b,a){if(a._capCont){a._capCont.style.display="none"}a._container.style.width="0px";a._container.style.height="0px";a._container.style.visibility="hidden";a._container.style.overflow="hidden";a.popcorn.pause()},_teardown:function(a){a.popcorn&&a.popcorn.destory&&a.popcorn.destroy();document.getElementById(a.target)&&document.getElementById(a.target).removeChild(a._container)}})})(Popcorn,this);(function(b){b.plugin("code",function(f){var a=false,c=this,h=function(){var d=function(e){return function(j,l){var g=function(){a&&j.call(c,l);a&&e(g)};g()}};return window.webkitRequestAnimationFrame?d(window.webkitRequestAnimationFrame):window.mozRequestAnimationFrame?d(window.mozRequestAnimationFrame):d(function(e){window.setTimeout(e,16)})}();if(!f.onStart||typeof f.onStart!=="function"){f.onStart=b.nop}if(f.onEnd&&typeof f.onEnd!=="function"){f.onEnd=undefined}if(f.onFrame&&typeof f.onFrame!=="function"){f.onFrame=undefined}return{start:function(e,d){d.onStart.call(c,d);if(d.onFrame){a=true;h(d.onFrame,d)}},end:function(e,d){if(d.onFrame){a=false}d.onEnd&&d.onEnd.call(c,d)}}},{about:{name:"Popcorn Code Plugin",version:"0.1",author:"David Humphrey (@humphd)",website:"http://vocamus.net/dave"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},onStart:{elem:"input",type:"function",label:"onStart"},onFrame:{elem:"input",type:"function",label:"onFrame",optional:true},onEnd:{elem:"input",type:"function",label:"onEnd"}}})})(Popcorn);(function(d){var c=0;d.plugin("flickr",function(p){var q,A=document.getElementById(p.target),b,B,e,i,n=p.numberofimages||4,m=p.height||"50px",s=p.width||"50px",a=p.padding||"5px",j=p.border||"0px";q=document.createElement("div");q.id="flickr"+c;q.style.width="100%";q.style.height="100%";q.style.display="none";c++;A&&A.appendChild(q);var h=function(){if(b){setTimeout(function(){h()},5)}else{B="http://api.flickr.com/services/rest/?method=flickr.people.findByUsername&";B+="username="+p.username+"&api_key="+p.apikey+"&format=json&jsoncallback=flickr";d.getJSONP(B,function(f){b=f.user.nsid;o()})}},o=function(){B="http://api.flickr.com/services/feeds/photos_public.gne?";if(b){B+="id="+b+"&"}if(p.tags){B+="tags="+p.tags+"&"}B+="lang=en-us&format=json&jsoncallback=flickr";d.xhr.getJSONP(B,function(f){var g=document.createElement("div");g.innerHTML="<p style='padding:"+a+";'>"+f.title+"<p/>";d.forEach(f.items,function(l,k){if(k<n){e=document.createElement("a");e.setAttribute("href",l.link);e.setAttribute("target","_blank");i=document.createElement("img");i.setAttribute("src",l.media.m);i.setAttribute("height",m);i.setAttribute("width",s);i.setAttribute("style","border:"+j+";padding:"+a);e.appendChild(i);g.appendChild(e)}else{return false}});q.appendChild(g)})};if(p.username&&p.apikey){h()}else{b=p.userid;o()}return{start:function(){q.style.display="inline"},end:function(){q.style.display="none"},_teardown:function(f){document.getElementById(f.target)&&document.getElementById(f.target).removeChild(q)}}},{about:{name:"Popcorn Flickr Plugin",version:"0.2",author:"Scott Downe, Steven Weerdenburg, Annasob",website:"http://scottdowne.wordpress.com/"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},userid:{elem:"input",type:"text",label:"User ID",optional:true},tags:{elem:"input",type:"text",label:"Tags"},username:{elem:"input",type:"text",label:"Username",optional:true},apikey:{elem:"input",type:"text",label:"API Key",optional:true},target:"flickr-container",height:{elem:"input",type:"text",label:"Height","default":"50px",optional:true},width:{elem:"input",type:"text",label:"Width","default":"50px",optional:true},padding:{elem:"input",type:"text",label:"Padding",optional:true},border:{elem:"input",type:"text",label:"Border","default":"5px",optional:true},numberofimages:{elem:"input",type:"number","default":4,label:"Number of Images"}}})})(Popcorn);(function(b){b.plugin("footnote",{manifest:{about:{name:"Popcorn Footnote Plugin",version:"0.2",author:"@annasob, @rwaldron",website:"annasob.wordpress.com"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},text:{elem:"input",type:"text",label:"Text"},target:"footnote-container"}},_setup:function(a){var d=b.dom.find(a.target);a._container=document.createElement("div");a._container.style.display="none";a._container.innerHTML=a.text;d.appendChild(a._container)},start:function(a,d){d._container.style.display="inline"},end:function(a,d){d._container.style.display="none"},_teardown:function(a){var d=b.dom.find(a.target);d&&d.removeChild(a._container)}})})(Popcorn);(function(f){function c(a){return String(a).replace(/&(?!\w+;)|[<>"']/g,function(b){return h[b]||b})}function g(j,a){var d=j.container=document.createElement("div"),e=d.style,i=j.media,b=function(){var k=j.position();e.fontSize="18px";e.width=i.offsetWidth+"px";e.top=k.top+i.offsetHeight-d.offsetHeight-40+"px";e.left=k.left+"px";setTimeout(b,10)};d.id=a||"";e.position="absolute";e.color="white";e.textShadow="black 2px 2px 6px";e.fontWeight="bold";e.textAlign="center";b();j.media.parentNode.appendChild(d);return d}var h={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};f.plugin("text",{manifest:{about:{name:"Popcorn Text Plugin",version:"0.1",author:"@humphd"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},text:{elem:"input",type:"text",label:"Text","default":"Popcorn.js"},escape:{elem:"input",type:"checkbox",label:"Escape"},multiline:{elem:"input",type:"checkbox",label:"Multiline"}}},_setup:function(e){var a,b,d=e._container=document.createElement("div");d.style.display="none";if(e.target){if(a=f.dom.find(e.target)){if(["VIDEO","AUDIO"].indexOf(a.nodeName)>-1){a=g(this,e.target+"-overlay")}}else{a=g(this,e.target)}}else{a=this.container?this.container:g(this)}e._target=a;b=e.escape?c(e.text):e.text;b=e.multiline?b.replace(/\r?\n/gm,"<br>"):b;d.innerHTML=b||"";a.appendChild(d)},start:function(b,a){a._container.style.display="inline"},end:function(b,a){a._container.style.display="none"},_teardown:function(b){var a=b._target;a&&a.removeChild(b._container)}})})(Popcorn);var googleCallback;(function(c){function m(g,i,d){g=g.type?g.type.toUpperCase():"HYBRID";var a;if(g==="STAMEN-WATERCOLOR"||g==="STAMEN-TERRAIN"||g==="STAMEN-TONER"){a=g.replace("STAMEN-","").toLowerCase()}d=new google.maps.Map(d,{mapTypeId:a?a:google.maps.MapTypeId[g],mapTypeControlOptions:{mapTypeIds:[]}});a&&d.mapTypes.set(a,new google.maps.StamenMapType(a));d.getDiv().style.display="none";return d}var n=1,f=false,h=false,e,b;googleCallback=function(a){if(typeof google!=="undefined"&&google.maps&&google.maps.Geocoder&&google.maps.LatLng){e=new google.maps.Geocoder;c.getScript("//maps.stamen.com/js/tile.stamen.js",function(){h=true})}else{setTimeout(function(){googleCallback(a)},1)}};b=function(){if(document.body){f=true;c.getScript("//maps.google.com/maps/api/js?sensor=false&callback=googleCallback")}else{setTimeout(function(){b()},1)}};c.plugin("googlemap",function(i){var k,d,a,j=document.getElementById(i.target);i.type=i.type||"ROADMAP";i.zoom=i.zoom||1;i.lat=i.lat||0;i.lng=i.lng||0;f||b();k=document.createElement("div");k.id="actualmap"+n;k.style.width=i.width||"100%";k.style.height=i.height?i.height:j&&j.clientHeight?j.clientHeight+"px":"100%";n++;j&&j.appendChild(k);var g=function(){if(h){if(k){if(i.location){e.geocode({address:i.location},function(l,p){if(k&&p===google.maps.GeocoderStatus.OK){i.lat=l[0].geometry.location.lat();i.lng=l[0].geometry.location.lng();a=new google.maps.LatLng(i.lat,i.lng);d=m(i,a,k)}})}else{a=new google.maps.LatLng(i.lat,i.lng);d=m(i,a,k)}}}else{setTimeout(function(){g()},5)}};g();return{start:function(t,s){var u=this,l,v=function(){if(d){s._map=d;d.getDiv().style.display="block";google.maps.event.trigger(d,"resize");d.setCenter(a);if(s.zoom&&typeof s.zoom!=="number"){s.zoom=+s.zoom}d.setZoom(s.zoom);if(s.heading&&typeof s.heading!=="number"){s.heading=+s.heading}if(s.pitch&&typeof s.pitch!=="number"){s.pitch=+s.pitch}if(s.type==="STREETVIEW"){d.setStreetView(l=new google.maps.StreetViewPanorama(k,{position:a,pov:{heading:s.heading=s.heading||0,pitch:s.pitch=s.pitch||0,zoom:s.zoom}}));var o=function(w,x){var y=google.maps.geometry.spherical.computeHeading;setTimeout(function(){var H=u.media.currentTime;if(typeof s.tween==="object"){for(var I=0,J=w.length;I<J;I++){var F=w[I];if(H>=F.interval*(I+1)/1000&&(H<=F.interval*(I+2)/1000||H>=F.interval*J/1000)){B.setPosition(new google.maps.LatLng(F.position.lat,F.position.lng));B.setPov({heading:F.pov.heading||y(F,w[I+1])||0,zoom:F.pov.zoom||0,pitch:F.pov.pitch||0})}}o(w,w[0].interval)}else{I=0;for(J=w.length;I<J;I++){F=s.interval;if(H>=F*(I+1)/1000&&(H<=F*(I+2)/1000||H>=F*J/1000)){z.setPov({heading:y(w[I],w[I+1])||0,zoom:s.zoom,pitch:s.pitch||0});z.setPosition(A[I])}}o(A,s.interval)}},x)};if(s.location&&typeof s.tween==="string"){var z=l,A=[],q=new google.maps.DirectionsService,r=new google.maps.DirectionsRenderer(z);q.route({origin:s.location,destination:s.tween,travelMode:google.maps.TravelMode.DRIVING},function(E,x){if(x==google.maps.DirectionsStatus.OK){r.setDirections(E);for(var F=E.routes[0].overview_path,y=0,w=F.length;y<w;y++){A.push(new google.maps.LatLng(F[y].lat(),F[y].lng()))}s.interval=s.interval||1000;o(A,10)}})}else{if(typeof s.tween==="object"){var B=l;q=0;for(var p=s.tween.length;q<p;q++){s.tween[q].interval=s.tween[q].interval||1000;o(s.tween,10)}}}}s.onmaploaded&&s.onmaploaded(s,d)}else{setTimeout(function(){v()},13)}};v()},end:function(){if(d){d.getDiv().style.display="none"}},_teardown:function(l){var p=document.getElementById(l.target);p&&p.removeChild(k);k=d=a=null;l._map=null}}},{about:{name:"Popcorn Google Map Plugin",version:"0.1",author:"@annasob",website:"annasob.wordpress.com"},options:{start:{elem:"input",type:"start",label:"Start"},end:{elem:"input",type:"start",label:"End"},target:"map-container",type:{elem:"select",options:["ROADMAP","SATELLITE","STREETVIEW","HYBRID","TERRAIN","STAMEN-WATERCOLOR","STAMEN-TERRAIN","STAMEN-TONER"],label:"Map Type",optional:true},zoom:{elem:"input",type:"text",label:"Zoom","default":0,optional:true},lat:{elem:"input",type:"text",label:"Lat",optional:true},lng:{elem:"input",type:"text",label:"Lng",optional:true},location:{elem:"input",type:"text",label:"Location","default":"Toronto, Ontario, Canada"},heading:{elem:"input",type:"text",label:"Heading","default":0,optional:true},pitch:{elem:"input",type:"text",label:"Pitch","default":1,optional:true}}})})(Popcorn);(function(f){function c(d){function e(){var j=d.getBoundingClientRect(),k=a.getBoundingClientRect();if(k.left!==j.left){a.style.left=j.left+"px"}if(k.top!==j.top){a.style.top=j.top+"px"}}var i=-1,a=document.createElement("div"),b=getComputedStyle(d).zIndex;a.setAttribute("data-popcorn-helper-container",true);a.style.position="absolute";a.style.zIndex=isNaN(b)?g:b+1;document.body.appendChild(a);return{element:a,start:function(){i=setInterval(e,h)},stop:function(){clearInterval(i);i=-1},destroy:function(){document.body.removeChild(a);i!==-1&&clearInterval(i)}}}var g=2000,h=10;f.plugin("image",{manifest:{about:{name:"Popcorn image Plugin",version:"0.1",author:"Scott Downe",website:"http://scottdowne.wordpress.com/"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},src:{elem:"input",type:"url",label:"Image URL","default":"http://mozillapopcorn.org/wp-content/themes/popcorn/images/for_developers.png"},href:{elem:"input",type:"url",label:"Link","default":"http://mozillapopcorn.org/wp-content/themes/popcorn/images/for_developers.png",optional:true},target:"image-container",text:{elem:"input",type:"text",label:"Caption","default":"Popcorn.js",optional:true}}},_setup:function(d){var a=document.createElement("img"),b=document.getElementById(d.target);d.anchor=document.createElement("a");d.anchor.style.position="relative";d.anchor.style.textDecoration="none";d.anchor.style.display="none";if(b){if(["VIDEO","AUDIO"].indexOf(b.nodeName)>-1){d.trackedContainer=c(b);d.trackedContainer.element.appendChild(d.anchor)}else{b&&b.appendChild(d.anchor)}}a.addEventListener("load",function(){a.style.borderStyle="none";d.anchor.href=d.href||d.src||"#";d.anchor.target="_blank";var e,i;a.style.height=b.style.height;a.style.width=b.style.width;d.anchor.appendChild(a);if(d.text){e=a.height/12+"px";i=document.createElement("div");f.extend(i.style,{color:"black",fontSize:e,fontWeight:"bold",position:"relative",textAlign:"center",width:a.style.width||a.width+"px",zIndex:"10"});i.innerHTML=d.text||"";i.style.top=(a.style.height.replace("px","")||a.height)/2-i.offsetHeight/2+"px";d.anchor.insertBefore(i,a)}},false);a.src=d.src},start:function(b,a){a.anchor.style.display="inline";a.trackedContainer&&a.trackedContainer.start()},end:function(b,a){a.anchor.style.display="none";a.trackedContainer&&a.trackedContainer.stop()},_teardown:function(a){if(a.trackedContainer){a.trackedContainer.destroy()}else{a.anchor.parentNode&&a.anchor.parentNode.removeChild(a.anchor)}}})})(Popcorn);(function(e){var d=1,f=false;e.plugin("googlefeed",function(h){var c=function(){var k=false,p=0,o=document.getElementsByTagName("link"),m=o.length,g=document.head||document.getElementsByTagName("head")[0],j=document.createElement("link");if(window.GFdynamicFeedControl){f=true}else{e.getScript("//www.google.com/uds/solutions/dynamicfeed/gfdynamicfeedcontrol.js",function(){f=true})}for(;p<m;p++){if(o[p].href==="//www.google.com/uds/solutions/dynamicfeed/gfdynamicfeedcontrol.css"){k=true}}if(!k){j.type="text/css";j.rel="stylesheet";j.href="//www.google.com/uds/solutions/dynamicfeed/gfdynamicfeedcontrol.css";g.insertBefore(j,g.firstChild)}};window.google?c():e.getScript("//www.google.com/jsapi",function(){google.load("feeds","1",{callback:function(){c()}})});var i=document.createElement("div"),a=document.getElementById(h.target),b=function(){if(f){h.feed=new GFdynamicFeedControl(h.url,i,{vertical:h.orientation.toLowerCase()==="vertical"?true:false,horizontal:h.orientation.toLowerCase()==="horizontal"?true:false,title:h.title=h.title||"Blog"})}else{setTimeout(function(){b()},5)}};if(!h.orientation||h.orientation.toLowerCase()!=="vertical"&&h.orientation.toLowerCase()!=="horizontal"){h.orientation="vertical"}i.style.display="none";i.id="_feed"+d;i.style.width="100%";i.style.height="100%";d++;a&&a.appendChild(i);b();return{start:function(){i.setAttribute("style","display:inline")},end:function(){i.setAttribute("style","display:none")},_teardown:function(g){document.getElementById(g.target)&&document.getElementById(g.target).removeChild(i);delete g.feed}}},{about:{name:"Popcorn Google Feed Plugin",version:"0.1",author:"David Seifried",website:"dseifried.wordpress.com"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},target:"feed-container",url:{elem:"input",type:"url",label:"Feed URL","default":"http://planet.mozilla.org/rss20.xml"},title:{elem:"input",type:"text",label:"Title","default":"Planet Mozilla",optional:true},orientation:{elem:"select",options:["Vertical","Horizontal"],label:"Orientation","default":"Vertical",optional:true}}})})(Popcorn);(function(e){var d=0,f=function(a,j){var b=a.container=document.createElement("div"),c=b.style,h=a.media,i=function(){var g=a.position();c.fontSize="18px";c.width=h.offsetWidth+"px";c.top=g.top+h.offsetHeight-b.offsetHeight-40+"px";c.left=g.left+"px";setTimeout(i,10)};b.id=j||e.guid();c.position="absolute";c.color="white";c.textShadow="black 2px 2px 6px";c.fontWeight="bold";c.textAlign="center";i();a.media.parentNode.appendChild(b);return b};e.plugin("subtitle",{manifest:{about:{name:"Popcorn Subtitle Plugin",version:"0.1",author:"Scott Downe",website:"http://scottdowne.wordpress.com/"},options:{start:{elem:"input",type:"text",label:"Start"},end:{elem:"input",type:"text",label:"End"},target:"subtitle-container",text:{elem:"input",type:"text",label:"Text"}}},_setup:function(a){var b=document.createElement("div");b.id="subtitle-"+d++;b.style.display="none";!this.container&&(!a.target||a.target==="subtitle-container")&&f(this);a.container=a.target&&a.target!=="subtitle-container"?document.getElementById(a.target)||f(this,a.target):this.container;document.getElementById(a.container.id)&&document.getElementById(a.container.id).appendChild(b);a.innerContainer=b;a.showSubtitle=function(){a.innerContainer.innerHTML=a.text||""}},start:function(a,b){b.innerContainer.style.display="inline";b.showSubtitle(b,b.text)},end:function(a,b){b.innerContainer.style.display="none";b.innerContainer.innerHTML=""},_teardown:function(a){a.container.removeChild(a.innerContainer)}})})(Popcorn);(function(d){var c=false;d.plugin("twitter",{manifest:{about:{name:"Popcorn Twitter Plugin",version:"0.1",author:"Scott Downe",website:"http://scottdowne.wordpress.com/"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},src:{elem:"input",type:"text",label:"Tweet Source (# or @)","default":"@popcornjs"},target:"twitter-container",height:{elem:"input",type:"number",label:"Height","default":"200",optional:true},width:{elem:"input",type:"number",label:"Width","default":"250",optional:true}}},_setup:function(b){if(!window.TWTR&&!c){c=true;d.getScript("//widgets.twimg.com/j/2/widget.js")}var n=document.getElementById(b.target);b.container=document.createElement("div");b.container.setAttribute("id",d.guid());b.container.style.display="none";n&&n.appendChild(b.container);var a=b.src||"";n=b.width||250;var e=b.height||200,h=/^@/.test(a),i={version:2,id:b.container.getAttribute("id"),rpp:30,width:n,height:e,interval:6000,theme:{shell:{background:"#ffffff",color:"#000000"},tweets:{background:"#ffffff",color:"#444444",links:"#1985b5"}},features:{loop:true,timestamp:true,avatars:true,hashtags:true,toptweets:true,live:true,scrollbar:false,behavior:"default"}},j=function(f){if(window.TWTR){if(h){i.type="profile";(new TWTR.Widget(i)).render().setUser(a).start()}else{i.type="search";i.search=a;i.subject=a;(new TWTR.Widget(i)).render().start()}}else{setTimeout(function(){j(f)},1)}};j(this)},start:function(a,b){b.container.style.display="inline"},end:function(a,b){b.container.style.display="none"},_teardown:function(a){document.getElementById(a.target)&&document.getElementById(a.target).removeChild(a.container)}})})(Popcorn);(function(b){b.plugin("webpage",{manifest:{about:{name:"Popcorn Webpage Plugin",version:"0.1",author:"@annasob",website:"annasob.wordpress.com"},options:{id:{elem:"input",type:"text",label:"Id",optional:true},start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},src:{elem:"input",type:"url",label:"Webpage URL","default":"http://mozillapopcorn.org"},target:"iframe-container"}},_setup:function(a){var d=document.getElementById(a.target);a.src=a.src.replace(/^(https?:)?(\/\/)?/,"//");a._iframe=document.createElement("iframe");a._iframe.setAttribute("width","100%");a._iframe.setAttribute("height","100%");a._iframe.id=a.id;a._iframe.src=a.src;a._iframe.style.display="none";d&&d.appendChild(a._iframe)},start:function(a,d){d._iframe.src=d.src;d._iframe.style.display="inline"},end:function(a,d){d._iframe.style.display="none"},_teardown:function(a){document.getElementById(a.target)&&document.getElementById(a.target).removeChild(a._iframe)}})})(Popcorn);var wikiCallback;(function(b){b.plugin("wikipedia",{manifest:{about:{name:"Popcorn Wikipedia Plugin",version:"0.1",author:"@annasob",website:"annasob.wordpress.com"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},lang:{elem:"input",type:"text",label:"Language","default":"english",optional:true},src:{elem:"input",type:"url",label:"Wikipedia URL","default":"http://en.wikipedia.org/wiki/Cat"},title:{elem:"input",type:"text",label:"Title","default":"Cats",optional:true},numberofwords:{elem:"input",type:"number",label:"Number of Words","default":"200",optional:true},target:"wikipedia-container"}},_setup:function(a){var c,f=b.guid();if(!a.lang){a.lang="en"}a.numberofwords=a.numberofwords||200;window["wikiCallback"+f]=function(d){a._link=document.createElement("a");a._link.setAttribute("href",a.src);a._link.setAttribute("target","_blank");a._link.innerHTML=a.title||d.parse.displaytitle;a._desc=document.createElement("p");c=d.parse.text["*"].substr(d.parse.text["*"].indexOf("<p>"));c=c.replace(/((<(.|\n)+?>)|(\((.*?)\) )|(\[(.*?)\]))/g,"");c=c.split(" ");a._desc.innerHTML=c.slice(0,c.length>=a.numberofwords?a.numberofwords:c.length).join(" ")+" ...";a._fired=true};a.src&&b.getScript("//"+a.lang+".wikipedia.org/w/api.php?action=parse&props=text&redirects&page="+a.src.slice(a.src.lastIndexOf("/")+1)+"&format=json&callback=wikiCallback"+f)},start:function(a,c){var f=function(){if(c._fired){if(c._link&&c._desc){if(document.getElementById(c.target)){document.getElementById(c.target).appendChild(c._link);document.getElementById(c.target).appendChild(c._desc);c._added=true}}}else{setTimeout(function(){f()},13)}};f()},end:function(a,d){if(d._added){document.getElementById(d.target).removeChild(d._link);document.getElementById(d.target).removeChild(d._desc)}},_teardown:function(a){if(a._added){a._link.parentNode&&document.getElementById(a.target).removeChild(a._link);a._desc.parentNode&&document.getElementById(a.target).removeChild(a._desc);delete a.target}}})})(Popcorn);(function(b){b.plugin("mustache",function(e){var j,a,p,c;b.getScript("http://mustache.github.com/extras/mustache.js");var f=!!e.dynamic,h=typeof e.template,i=typeof e.data,n=document.getElementById(e.target);e.container=n||document.createElement("div");if(h==="function"){if(f){p=e.template}else{c=e.template(e)}}else{c=h==="string"?e.template:""}if(i==="function"){if(f){j=e.data}else{a=e.data(e)}}else{a=i==="string"?JSON.parse(e.data):i==="object"?e.data:""}return{start:function(d,g){var k=function(){if(window.Mustache){if(j){a=j(g)}if(p){c=p(g)}var l=Mustache.to_html(c,a).replace(/^\s*/mg,"");g.container.innerHTML=l}else{setTimeout(function(){k()},10)}};k()},end:function(d,g){g.container.innerHTML=""},_teardown:function(){j=a=p=c=null}}},{about:{name:"Popcorn Mustache Plugin",version:"0.1",author:"David Humphrey (@humphd)",website:"http://vocamus.net/dave"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},target:"mustache-container",template:{elem:"input",type:"text",label:"Template"},data:{elem:"input",type:"text",label:"Data"},dynamic:{elem:"input",type:"checkbox",label:"Dynamic","default":true}}})})(Popcorn);(function(e){function d(a,b){if(a.map){a.map.div.style.display=b}else{setTimeout(function(){d(a,b)},10)}}var f=1;e.plugin("openmap",function(m){var j,o,p,q,a,h,b,c,i=document.getElementById(m.target);j=document.createElement("div");j.id="openmapdiv"+f;j.style.width="100%";j.style.height="100%";f++;i&&i.appendChild(j);c=function(){if(window.OpenLayers&&window.OpenLayers.Layer.Stamen){if(m.location){location=new OpenLayers.LonLat(0,0);e.getJSONP("//tinygeocoder.com/create-api.php?q="+m.location+"&callback=jsonp",function(k){o=new OpenLayers.LonLat(k[1],k[0])})}else{o=new OpenLayers.LonLat(m.lng,m.lat)}m.type=m.type||"ROADMAP";switch(m.type){case"SATELLITE":m.map=new OpenLayers.Map({div:j,maxResolution:0.28125,tileSize:new OpenLayers.Size(512,512)});var g=new OpenLayers.Layer.WorldWind("LANDSAT","//worldwind25.arc.nasa.gov/tile/tile.aspx",2.25,4,{T:"105"});m.map.addLayer(g);q=new OpenLayers.Projection("EPSG:4326");p=new OpenLayers.Projection("EPSG:4326");break;case"TERRAIN":q=new OpenLayers.Projection("EPSG:4326");p=new OpenLayers.Projection("EPSG:4326");m.map=new OpenLayers.Map({div:j,projection:p});g=new OpenLayers.Layer.WMS("USGS Terraserver","//terraserver-usa.org/ogcmap.ashx?",{layers:"DRG"});m.map.addLayer(g);break;case"STAMEN-TONER":case"STAMEN-WATERCOLOR":case"STAMEN-TERRAIN":g=m.type.replace("STAMEN-","").toLowerCase();g=new OpenLayers.Layer.Stamen(g);q=new OpenLayers.Projection("EPSG:4326");p=new OpenLayers.Projection("EPSG:900913");o=o.transform(q,p);m.map=new OpenLayers.Map({div:j,projection:p,displayProjection:q,controls:[new OpenLayers.Control.Navigation,new OpenLayers.Control.PanPanel,new OpenLayers.Control.ZoomPanel]});m.map.addLayer(g);break;default:p=new OpenLayers.Projection("EPSG:900913");q=new OpenLayers.Projection("EPSG:4326");o=o.transform(q,p);m.map=new OpenLayers.Map({div:j,projection:p,displayProjection:q});g=new OpenLayers.Layer.OSM;m.map.addLayer(g)}if(m.map){m.map.setCenter(o,m.zoom||10);m.map.div.style.display="none"}}else{setTimeout(function(){c()},50)}};c();return{_setup:function(k){window.OpenLayers||e.getScript("//openlayers.org/api/OpenLayers.js",function(){e.getScript("//maps.stamen.com/js/tile.stamen.js")});var g=function(){if(k.map){k.zoom=k.zoom||2;if(k.zoom&&typeof k.zoom!=="number"){k.zoom=+k.zoom}k.map.setCenter(o,k.zoom);if(k.markers){var l=OpenLayers.Util.extend({},OpenLayers.Feature.Vector.style["default"]),r=function(v){clickedFeature=v.feature;if(clickedFeature.attributes.text){b=new OpenLayers.Popup.FramedCloud("featurePopup",clickedFeature.geometry.getBounds().getCenterLonLat(),new OpenLayers.Size(120,250),clickedFeature.attributes.text,null,true,function(){h.unselect(this.feature)});clickedFeature.popup=b;b.feature=clickedFeature;k.map.addPopup(b)}},A=function(v){feature=v.feature;if(feature.popup){b.feature=null;k.map.removePopup(feature.popup);feature.popup.destroy();feature.popup=null}},u=function(v){e.getJSONP("//tinygeocoder.com/create-api.php?q="+v.location+"&callback=jsonp",function(w){w=(new OpenLayers.Geometry.Point(w[1],w[0])).transform(q,p);var z=OpenLayers.Util.extend({},l);if(!v.size||isNaN(v.size)){v.size=14}z.pointRadius=v.size;z.graphicOpacity=1;z.externalGraphic=v.icon;w=new OpenLayers.Feature.Vector(w,null,z);if(v.text){w.attributes={text:v.text}}a.addFeatures([w])})};a=new OpenLayers.Layer.Vector("Point Layer",{style:l});k.map.addLayer(a);for(var y=0,t=k.markers.length;y<t;y++){var s=k.markers[y];if(s.text){if(!h){h=new OpenLayers.Control.SelectFeature(a);k.map.addControl(h);h.activate();a.events.on({featureselected:r,featureunselected:A})}}if(s.location){u(s)}else{var x=(new OpenLayers.Geometry.Point(s.lng,s.lat)).transform(q,p),n=OpenLayers.Util.extend({},l);if(!s.size||isNaN(s.size)){s.size=14}n.pointRadius=s.size;n.graphicOpacity=1;n.externalGraphic=s.icon;x=new OpenLayers.Feature.Vector(x,null,n);if(s.text){x.attributes={text:s.text}}a.addFeatures([x])}}}}else{setTimeout(function(){g()},13)}};g()},start:function(k,g){d(g,"block")},end:function(k,g){d(g,"none")},_teardown:function(){i&&i.removeChild(j);j=map=o=p=q=a=h=b=null}}},{about:{name:"Popcorn OpenMap Plugin",version:"0.3",author:"@mapmeld",website:"mapadelsur.blogspot.com"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},target:"map-container",type:{elem:"select",options:["ROADMAP","SATELLITE","TERRAIN"],label:"Map Type",optional:true},zoom:{elem:"input",type:"number",label:"Zoom","default":2},lat:{elem:"input",type:"text",label:"Lat",optional:true},lng:{elem:"input",type:"text",label:"Lng",optional:true},location:{elem:"input",type:"text",label:"Location","default":"Toronto, Ontario, Canada"},markers:{elem:"input",type:"text",label:"List Markers",optional:true}}})})(Popcorn);document.addEventListener("click",function(b){b=b.target;if(b.nodeName==="A"||b.parentNode&&b.parentNode.nodeName==="A"){Popcorn.instances.forEach(function(a){a.options.pauseOnLinkClicked&&a.pause()})}},false);(function(i){var o={},e=0,m=document.createElement("span"),j=["webkit","Moz","ms","O",""],n=["Transform","TransitionDuration","TransitionTimingFunction"],p={},b;document.getElementsByTagName("head")[0].appendChild(m);for(var r=0,h=n.length;r<h;r++){for(var c=0,f=j.length;c<f;c++){b=j[c]+n[r];if(b in m.style){p[n[r].toLowerCase()]=b;break}}}document.getElementsByTagName("head")[0].appendChild(m);i.plugin("wordriver",{manifest:{about:{name:"Popcorn WordRiver Plugin"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},target:"wordriver-container",text:{elem:"input",type:"text",label:"Text","default":"Popcorn.js"},color:{elem:"input",type:"text",label:"Color","default":"Green",optional:true}}},_setup:function(g){g._duration=g.end-g.start;var a;if(!(a=o[g.target])){a=g.target;o[a]=document.createElement("div");var d=document.getElementById(a);d&&d.appendChild(o[a]);o[a].style.height="100%";o[a].style.position="relative";a=o[a]}g._container=a;g.word=document.createElement("span");g.word.style.position="absolute";g.word.style.whiteSpace="nowrap";g.word.style.opacity=0;g.word.style.MozTransitionProperty="opacity, -moz-transform";g.word.style.webkitTransitionProperty="opacity, -webkit-transform";g.word.style.OTransitionProperty="opacity, -o-transform";g.word.style.transitionProperty="opacity, transform";g.word.style[p.transitionduration]="1s, "+g._duration+"s";g.word.style[p.transitiontimingfunction]="linear";g.word.innerHTML=g.text;g.word.style.color=g.color||"black"},start:function(d,a){a._container.appendChild(a.word);a.word.style[p.transform]="";a.word.style.fontSize=~~(30+20*Math.random())+"px";e%=a._container.offsetWidth-a.word.offsetWidth;a.word.style.left=e+"px";e+=a.word.offsetWidth+10;a.word.style[p.transform]="translateY("+(a._container.offsetHeight-a.word.offsetHeight)+"px)";a.word.style.opacity=1;setTimeout(function(){a.word.style.opacity=0},(a.end-a.start-1||1)*1000)},end:function(d,a){a.word.style.opacity=0},_teardown:function(d){var a=document.getElementById(d.target);d.word.parentNode&&d._container.removeChild(d.word);o[d.target]&&!o[d.target].childElementCount&&a&&a.removeChild(o[d.target])&&delete o[d.target]}})})(Popcorn);(function(d){var c=1;d.plugin("timeline",function(h){var j=document.getElementById(h.target),e=document.createElement("div"),a,b=true;if(j&&!j.firstChild){j.appendChild(a=document.createElement("div"));a.style.width="inherit";a.style.height="inherit";a.style.overflow="auto"}else{a=j.firstChild}e.style.display="none";e.id="timelineDiv"+c;h.direction=h.direction||"up";if(h.direction.toLowerCase()==="down"){b=false}if(j&&a){b?a.insertBefore(e,a.firstChild):a.appendChild(e)}c++;e.innerHTML="<p><span id='big' style='font-size:24px; line-height: 130%;' >"+h.title+"</span><br /><span id='mid' style='font-size: 16px;'>"+h.text+"</span><br />"+h.innerHTML;return{start:function(f,g){e.style.display="block";if(g.direction==="down"){a.scrollTop=a.scrollHeight}},end:function(){e.style.display="none"},_teardown:function(){a&&e&&a.removeChild(e)&&!a.firstChild&&j.removeChild(a)}}},{about:{name:"Popcorn Timeline Plugin",version:"0.1",author:"David Seifried @dcseifried",website:"dseifried.wordpress.com"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},target:"feed-container",title:{elem:"input",type:"text",label:"Title"},text:{elem:"input",type:"text",label:"Text"},innerHTML:{elem:"input",type:"text",label:"HTML Code",optional:true},direction:{elem:"select",options:["DOWN","UP"],label:"Direction",optional:true}}})})(Popcorn);(function(e,d){var f={};e.plugin("documentcloud",{manifest:{about:{name:"Popcorn Document Cloud Plugin",version:"0.1",author:"@humphd, @ChrisDeCairos",website:"http://vocamus.net/dave"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},target:"documentcloud-container",width:{elem:"input",type:"text",label:"Width",optional:true},height:{elem:"input",type:"text",label:"Height",optional:true},src:{elem:"input",type:"url",label:"PDF URL","default":"http://www.documentcloud.org/documents/70050-urbina-day-1-in-progress.html"},preload:{elem:"input",type:"checkbox",label:"Preload","default":true},page:{elem:"input",type:"number",label:"Page Number",optional:true},aid:{elem:"input",type:"number",label:"Annotation Id",optional:true}}},_setup:function(h){function i(){function s(o){h._key=o.api.getId();h._changeView=function(p){h.aid?p.pageSet.showAnnotation(p.api.getAnnotation(h.aid)):p.api.setCurrentPage(h.page)}}function q(){f[h._key]={num:1,id:h._containerId};a.loaded=true}a.loaded=false;var t=h.url.replace(/\.html$/,".js"),k=h.target,m=d.getElementById(k),y=d.createElement("div"),g=e.position(m),F=h.width||g.width;g=h.height||g.height;var x=h.sidebar||true,H=h.text||true,l=h.pdf||true,u=h.showAnnotations||true,A=h.zoom||700,G=h.search||true;if(!function(p){var o=false;e.forEach(a.viewers,function(r){if(r.api.getSchema().canonicalURL===p){s(r);r=f[h._key];h._containerId=r.id;r.num+=1;o=true;a.loaded=true}});return o}(h.url)){y.id=h._containerId=e.guid(k);k="#"+y.id;m.appendChild(y);c.trigger("documentready");a.load(t,{width:F,height:g,sidebar:x,text:H,pdf:l,showAnnotations:u,zoom:A,search:G,container:k,afterLoad:h.page||h.aid?function(o){s(o);h._changeView(o);y.style.visibility="hidden";o.elements.pages.hide();q()}:function(o){s(o);q();y.style.visibility="hidden";o.elements.pages.hide()}})}}function j(){window.DV.loaded?i():setTimeout(j,25)}var a=window.DV=window.DV||{},c=this;if(a.loading){j()}else{a.loading=true;a.recordHit="//www.documentcloud.org/pixel.gif";var n=d.createElement("link"),b=d.getElementsByTagName("head")[0];n.rel="stylesheet";n.type="text/css";n.media="screen";n.href="//s3.documentcloud.org/viewer/viewer-datauri.css";b.appendChild(n);a.loaded=false;e.getScript("http://s3.documentcloud.org/viewer/viewer.js",function(){a.loading=false;i()})}},start:function(a,h){var b=d.getElementById(h._containerId),c=DV.viewers[h._key];(h.page||h.aid)&&c&&h._changeView(c);if(b&&c){b.style.visibility="visible";c.elements.pages.show()}},end:function(a,c){var b=d.getElementById(c._containerId);if(b&&DV.viewers[c._key]){b.style.visibility="hidden";DV.viewers[c._key].elements.pages.hide()}},_teardown:function(a){var b=d.getElementById(a._containerId);if((a=a._key)&&DV.viewers[a]&&--f[a].num===0){for(DV.viewers[a].api.unload();b.hasChildNodes();){b.removeChild(b.lastChild)}b.parentNode.removeChild(b)}}})})(Popcorn,window.document);(function(b){b.parser("parseJSON","JSON",function(a){var d={title:"",remote:"",data:[]};b.forEach(a.data,function(c){d.data.push(c)});return d})})(Popcorn);(function(b){b.parser("parseSBV",function(m){var c={title:"",remote:"",data:[]},i=[],h=0,j=0,n=function(k){k=k.split(":");var l=k.length-1,g;try{g=parseInt(k[l-1],10)*60+parseFloat(k[l],10);if(l===2){g+=parseInt(k[0],10)*3600}}catch(d){throw"Bad cue"}return g},o=function(k,d){var g={};g[k]=d;return g};m=m.text.split(/(?:\r\n|\r|\n)/gm);for(j=m.length;h<j;){var p={},f=[],a=m[h++].split(",");try{p.start=n(a[0]);for(p.end=n(a[1]);h<j&&m[h];){f.push(m[h++])}p.text=f.join("<br />");i.push(o("subtitle",p))}catch(e){for(;h<j&&m[h];){h++}}for(;h<j&&!m[h];){h++}}c.data=i;return c})})(Popcorn);(function(e){function d(a,c){var b={};b[a]=c;return b}function f(a){a=a.split(":");try{var c=a[2].split(",");if(c.length===1){c=a[2].split(".")}return parseFloat(a[0],10)*3600+parseFloat(a[1],10)*60+parseFloat(c[0],10)+parseFloat(c[1],10)/1000}catch(b){return 0}}e.parser("parseSRT",function(a){var p={title:"",remote:"",data:[]},b=[],c=0,h=0,i,o,j,m;a=a.text.split(/(?:\r\n|\r|\n)/gm);for(c=a.length-1;c>=0&&!a[c];){c--}j=c+1;for(c=0;c<j;c++){m={};o=[];m.id=parseInt(a[c++],10);i=a[c++].split(/[\t ]*--\>[\t ]*/);m.start=f(i[0]);h=i[1].indexOf(" ");if(h!==-1){i[1]=i[1].substr(0,h)}for(m.end=f(i[1]);c<j&&a[c];){o.push(a[c++])}m.text=o.join("\\N").replace(/\{(\\[\w]+\(?([\w\d]+,?)+\)?)+\}/gi,"");m.text=m.text.replace(/</g,"&lt;").replace(/>/g,"&gt;");m.text=m.text.replace(/&lt;(\/?(font|b|u|i|s))((\s+(\w|\w[\w\-]*\w)(\s*=\s*(?:\".*?\"|'.*?'|[^'\">\s]+))?)+\s*|\s*)(\/?)&gt;/gi,"<$1$3$7>");m.text=m.text.replace(/\\N/gi,"<br />");b.push(d("subtitle",m))}p.data=b;return p})})(Popcorn);(function(f){function c(o,p){var a=o.substr(10).split(","),b;b={start:g(a[p.start]),end:g(a[p.end])};if(b.start===-1||b.end===-1){throw"Invalid time"}var d=m.call(e,/\{(\\[\w]+\(?([\w\d]+,?)+\)?)+\}/gi,""),j=d.replace,e;e=a.length;m=[];for(var i=p.text;i<e;i++){m.push(a[i])}e=m.join(",");var m=e.replace;b.text=j.call(d,/\\N/gi,"<br />");return b}function g(b){var a=b.split(":");if(b.length!==10||a.length<3){return -1}return parseInt(a[0],10)*3600+parseInt(a[1],10)*60+parseFloat(a[2],10)}function h(d,a){var b={};b[d]=a;return b}f.parser("parseSSA",function(m){var o={title:"",remote:"",data:[]},p=[],q=0,a;m=m.text.split(/(?:\r\n|\r|\n)/gm);for(a=m.length;q<a&&m[q]!=="[Events]";){q++}var e=m[++q].substr(8).split(", "),b={},d,i;i=0;for(d=e.length;i<d;i++){if(e[i]==="Start"){b.start=i}else{if(e[i]==="End"){b.end=i}else{if(e[i]==="Text"){b.text=i}}}}for(;++q<a&&m[q]&&m[q][0]!=="[";){try{p.push(h("subtitle",c(m[q],b)))}catch(j){}}o.data=p;return o})})(Popcorn);(function(c){function m(i,j,g){var a=i.firstChild;i=n(i,g);g=[];for(var d;a;){if(a.nodeType===1){if(a.nodeName==="p"){g.push(f(a,j,i))}else{if(a.nodeName==="div"){d=h(a.getAttribute("begin"));if(d<0){d=j}g.push.apply(g,m(a,d,i))}}}a=a.nextSibling}return g}function n(g,a){var d=g.getAttribute("region");return d!==null?d:a||""}function f(g,i,d){var a={};a.text=(g.textContent||g.text).replace(e,"").replace(b,"<br />");a.id=g.getAttribute("xml:id")||g.getAttribute("id");a.start=h(g.getAttribute("begin"),i);a.end=h(g.getAttribute("end"),i);a.target=n(g,d);if(a.end<0){a.end=h(g.getAttribute("duration"),0);if(a.end>=0){a.end+=a.start}else{a.end=Number.MAX_VALUE}}return{subtitle:a}}function h(i,j){var g;if(!i){return -1}try{return c.util.toSeconds(i)}catch(a){for(var d=i.length-1;d>=0&&i[d]<="9"&&i[d]>="0";){d--}g=d;d=parseFloat(i.substring(0,g));g=i.substring(g);return d*({h:3600,m:60,s:1,ms:0.001}[g]||-1)+(j||0)}}var e=/^[\s]+|[\s]+$/gm,b=/(?:\r\n|\r|\n)/gm;c.parser("parseTTML",function(d){var a={title:"",remote:"",data:[]};if(!d.xml||!d.xml.documentElement){return a}d=d.xml.documentElement.firstChild;if(!d){return a}for(;d.nodeName!=="body";){d=d.nextSibling}if(d){a.data=m(d,0)}return a})})(Popcorn);(function(b){b.parser("parseTTXT",function(c){var f={title:"",remote:"",data:[]},a=function(j){j=j.split(":");var g=0;try{return parseFloat(j[0],10)*60*60+parseFloat(j[1],10)*60+parseFloat(j[2],10)}catch(d){g=0}return g},n=function(j,g){var d={};d[j]=g;return d};c=c.xml.lastChild.lastChild;for(var e=Number.MAX_VALUE,h=[];c;){if(c.nodeType===1&&c.nodeName==="TextSample"){var i={};i.start=a(c.getAttribute("sampleTime"));i.text=c.getAttribute("text");if(i.text){i.end=e-0.001;h.push(n("subtitle",i))}e=i.start}c=c.previousSibling}f.data=h.reverse();return f})})(Popcorn);(function(e){function d(a){var h=a.split(":");a=a.length;var b;if(a!==12&&a!==9){throw"Bad cue"}a=h.length-1;try{b=parseInt(h[a-1],10)*60+parseFloat(h[a],10);if(a===2){b+=parseInt(h[0],10)*3600}}catch(c){throw"Bad cue"}return b}function f(a,c){var b={};b[a]=c;return b}e.parser("parseVTT",function(p){var o={title:"",remote:"",data:[]},q=[],s=0,a=0,b,i;p=p.text.split(/(?:\r\n|\r|\n)/gm);a=p.length;if(a===0||p[0]!=="WEBVTT"){return o}for(s++;s<a;){b=[];try{for(var c=s;c<a&&!p[c];){c++}s=c;var h=p[s++];c=void 0;var j={};if(!h||h.indexOf("-->")===-1){throw"Bad cue"}c=h.replace(/--\>/," --> ").split(/[\t ]+/);if(c.length<2){throw"Bad cue"}j.id=h;j.start=d(c[0]);j.end=d(c[2]);for(i=j;s<a&&p[s];){b.push(p[s++])}i.text=b.join("<br />");q.push(f("subtitle",i))}catch(m){for(s=s;s<a&&p[s];){s++}s=s}}o.data=q;return o})})(Popcorn);(function(b){b.parser("parseXML","XML",function(e){var j={title:"",remote:"",data:[]},a={},p=function(d){d=d.split(":");if(d.length===1){return parseFloat(d[0],10)}else{if(d.length===2){return parseFloat(d[0],10)+parseFloat(d[1]/12,10)}else{if(d.length===3){return parseInt(d[0]*60,10)+parseFloat(d[1],10)+parseFloat(d[2]/12,10)}else{if(d.length===4){return parseInt(d[0]*3600,10)+parseInt(d[1]*60,10)+parseFloat(d[2],10)+parseFloat(d[3]/12,10)}}}}},c=function(o){for(var g={},r=0,k=o.length;r<k;r++){var m=o.item(r).nodeName,l=o.item(r).nodeValue,q=a[l];if(m==="in"){g.start=p(l)}else{if(m==="out"){g.end=p(l)}else{if(m==="resourceid"){for(var d in q){if(q.hasOwnProperty(d)){if(!g[d]&&d!=="id"){g[d]=q[d]}}}}else{g[m]=l}}}}return g},f=function(d,g){var k={};k[d]=g;return k},h=function(d,g,k){var l={};b.extend(l,g,c(d.attributes),{text:d.textContent||d.text});g=d.childNodes;if(g.length<1||g.length===1&&g[0].nodeType===3){if(k){a[l.id]=l}else{j.data.push(f(d.nodeName,l))}}else{for(d=0;d<g.length;d++){g[d].nodeType===1&&h(g[d],l,k)}}};e=e.documentElement.childNodes;for(var i=0,n=e.length;i<n;i++){if(e[i].nodeType===1){e[i].nodeName==="manifest"?h(e[i],{},true):h(e[i],{},false)}}return j})})(Popcorn);(function(){var d=false,c=false;Popcorn.player("soundcloud",{_canPlayType:function(a,b){return/(?:http:\/\/www\.|http:\/\/|www\.|\.|^)(soundcloud)/.test(b)&&a.toLowerCase()!=="video"},_setup:function(h){function q(){d=true;SC.initialize({client_id:"PRaNFlda6Bhf5utPjUsptg"});SC.get("/resolve",{url:o.src},function(f){o.width=o.style.width?""+o.offsetWidth:"560";o.height=o.style.height?""+o.offsetHeight:"315";z.scrolling="no";z.frameborder="no";z.id="soundcloud-"+Popcorn.guid();z.src="http://w.soundcloud.com/player/?url="+f.uri+"&show_artwork=false&buying=false&liking=false&sharing=false";z.width="100%";z.height="100%";h.loadListener=function(){h.widget=m=SC.Widget(z.id);m.bind(SC.Widget.Events.FINISH,function(){o.pause();o.dispatchEvent("ended")});m.bind(SC.Widget.Events.PLAY_PROGRESS,function(g){p=g.currentPosition/1000;o.dispatchEvent("timeupdate")});m.bind(SC.Widget.Events.PLAY,function(){n=a=false;o.dispatchEvent("play");o.dispatchEvent("playing");o.currentTime=p;s.next()});m.bind(SC.Widget.Events.PAUSE,function(){n=a=true;o.dispatchEvent("pause");s.next()});m.bind(SC.Widget.Events.READY,function(){m.getDuration(function(g){i=g/1000;o.style.visibility="visible";o.dispatchEvent("durationchange");o.readyState=4;o.dispatchEvent("readystatechange");o.dispatchEvent("loadedmetadata");o.dispatchEvent("loadeddata");o.dispatchEvent("canplaythrough");o.dispatchEvent("load");!o.paused&&o.play()});m.getVolume(function(g){e=g/100})})};z.addEventListener("load",h.loadListener,false);o.appendChild(z)})}function j(){if(c){(function f(){setTimeout(function(){d?q():f()},100)})()}else{c=true;Popcorn.getScript("http://w.soundcloud.com/player/api.js",function(){Popcorn.getScript("http://connect.soundcloud.com/sdk.js",function(){q()})})}}var o=this,z=document.createElement("iframe"),e=1,p=0,n=true,a=true,m,i=0,b=false,s=Popcorn.player.playerQueue();h._container=z;o.style.visibility="hidden";o.play=function(){n=false;s.add(function(){if(a){m&&m.play()}else{s.next()}})};o.pause=function(){n=true;s.add(function(){if(a){s.next()}else{m&&m.pause()}})};Object.defineProperties(o,{muted:{set:function(f){if(f){m&&m.getVolume(function(g){e=g/100});m&&m.setVolume(0);b=true}else{m&&m.setVolume(e*100);b=false}o.dispatchEvent("volumechange")},get:function(){return b}},volume:{set:function(f){m&&m.setVolume(f*100);e=f;o.dispatchEvent("volumechange")},get:function(){return b?0:e}},currentTime:{set:function(f){p=f;m&&m.seekTo(f*1000);o.dispatchEvent("seeked");o.dispatchEvent("timeupdate")},get:function(){return p}},duration:{get:function(){return i}},paused:{get:function(){return n}}});d?q():j()},_teardown:function(h){var j=h.widget,e=SC.Widget.Events,a=h._container;h.destroyed=true;if(j){for(var b in e){j&&j.unbind(e[b])}}else{a.removeEventListener("load",h.loadEventListener,false)}}})})();(function(){function d(a){var b=d.options;a=b.parser[b.strictMode?"strict":"loose"].exec(a);for(var h={},e=14;e--;){h[b.key[e]]=a[e]||""}h[b.q.name]={};h[b.key[12]].replace(b.q.parser,function(f,g,j){if(g){h[b.q.name][g]=j}});return h}function c(a,b){return/player.vimeo.com\/video\/\d+/.test(b)||/vimeo.com\/\d+/.test(b)}d.options={strictMode:false,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}};Popcorn.player("vimeo",{_canPlayType:c,_setup:function(h){function a(r,l){var f=J.src.split("?")[0],k=JSON.stringify({method:r,value:l});if(f.substr(0,2)==="//"){f=window.location.protocol+f}J.contentWindow?J.contentWindow.postMessage(k,f):n.unload()}function y(l){if(l.origin==="http://player.vimeo.com"){var k;try{k=JSON.parse(l.data)}catch(f){console.warn(f)}if(k.player_id==g){k.method&&o[k.method]&&o[k.method](k);k.event&&m[k.event]&&m[k.event](k)}}}function b(){I||(I=setInterval(function(){n.dispatchEvent("timeupdate")},e));s||(s=setInterval(function(){a("getCurrentTime")},j))}function q(){if(I){clearInterval(I);I=0}if(s){clearInterval(s);s=0}}var e=250,j=16,x={MEDIA_ERR_ABORTED:1,MEDIA_ERR_NETWORK:2,MEDIA_ERR_DECODE:3,MEDIA_ERR_SRC_NOT_SUPPORTED:4},g,n=this,i={q:[],queue:function(f){this.q.push(f);this.process()},process:function(){if(A){for(;this.q.length;){this.q.shift()()}}}},s,I,A,J=document.createElement("iframe"),p={error:null,src:n.src,NETWORK_EMPTY:0,NETWORK_IDLE:1,NETWORK_LOADING:2,NETWORK_NO_SOURCE:3,networkState:0,HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4,readyState:0,seeking:false,currentTime:0,duration:NaN,paused:true,ended:false,autoplay:false,loop:false,volume:1,muted:false,width:0,height:0};Popcorn.forEach("error networkState readyState seeking duration paused ended".split(" "),function(f){Object.defineProperty(n,f,{get:function(){return p[f]}})});Object.defineProperties(n,{src:{get:function(){return p.src},set:function(f){p.src=f;n.load()}},currentTime:{get:function(){return p.currentTime},set:function(f){i.queue(function(){a("seekTo",f)});p.seeking=true;n.dispatchEvent("seeking")}},autoplay:{get:function(){return p.autoplay},set:function(f){p.autoplay=!!f}},loop:{get:function(){return p.loop},set:function(f){p.loop=!!f;i.queue(function(){a("setLoop",loop)})}},volume:{get:function(){return p.volume},set:function(f){p.volume=f;i.queue(function(){a("setVolume",p.muted?0:p.volume)});n.dispatchEvent("volumechange")}},muted:{get:function(){return p.muted},set:function(f){p.muted=!!f;i.queue(function(){a("setVolume",p.muted?0:p.volume)});n.dispatchEvent("volumechange")}},width:{get:function(){return J.width},set:function(f){J.width=f}},height:{get:function(){return J.height},set:function(f){J.height=f}}});var o={getCurrentTime:function(f){p.currentTime=parseFloat(f.value)},getDuration:function(f){p.duration=parseFloat(f.value);if(!isNaN(p.duration)){p.readyState=4;n.dispatchEvent("durationchange");n.dispatchEvent("loadedmetadata");n.dispatchEvent("loadeddata");n.dispatchEvent("canplay");n.dispatchEvent("canplaythrough")}},getVolume:function(f){p.volume=parseFloat(f.value)}},m={ready:function(){a("addEventListener","loadProgress");a("addEventListener","playProgress");a("addEventListener","play");a("addEventListener","pause");a("addEventListener","finish");a("addEventListener","seek");a("getDuration");A=true;i.process();n.dispatchEvent("loadstart")},loadProgress:function(f){n.dispatchEvent("progress");p.duration=parseFloat(f.data.duration)},playProgress:function(f){p.currentTime=parseFloat(f.data.seconds)},play:function(){if(p.seeking){p.seeking=false;n.dispatchEvent("seeked")}p.paused=false;p.ended=false;b();n.dispatchEvent("play")},pause:function(){p.paused=true;q();n.dispatchEvent("pause")},finish:function(){p.ended=true;q();n.dispatchEvent("ended")},seek:function(f){p.currentTime=parseFloat(f.data.seconds);p.seeking=false;p.ended=false;n.dispatchEvent("timeupdate");n.dispatchEvent("seeked")}};n.load=function(){A=false;g=Popcorn.guid();var t=d(p.src),l={},f=[],k={api:1,player_id:g};if(c(n.nodeName,t.source)){Popcorn.extend(l,h);Popcorn.extend(l,t.queryKey);Popcorn.extend(l,k);t="http://player.vimeo.com/video/"+/\d+$/.exec(t.path)+"?";for(var r in l){l.hasOwnProperty(r)&&f.push(encodeURIComponent(r)+"="+encodeURIComponent(l[r]))}t+=f.join("&");p.loop=!!t.match(/loop=1/);p.autoplay=!!t.match(/autoplay=1/);J.width=n.style.width?n.style.width:500;J.height=n.style.height?n.style.height:281;J.frameBorder=0;J.webkitAllowFullScreen=true;J.mozAllowFullScreen=true;J.allowFullScreen=true;J.src=t;n.appendChild(J)}else{t=p.MEDIA_ERR_SRC_NOT_SUPPORTED;p.error={};Popcorn.extend(p.error,x);p.error.code=t;n.dispatchEvent("error")}};n.unload=function(){q();window.removeEventListener("message",y,false)};n.play=function(){i.queue(function(){a("play")})};n.pause=function(){i.queue(function(){a("pause")})};setTimeout(function(){window.addEventListener("message",y,false);n.load()},0)},_teardown:function(){this.unload&&this.unload()}})})();(function(e,d){e.onYouTubePlayerAPIReady=function(){onYouTubePlayerAPIReady.ready=true;for(var a=0;a<onYouTubePlayerAPIReady.waiting.length;a++){onYouTubePlayerAPIReady.waiting[a]()}};if(e.YT){e.quarantineYT=e.YT;e.YT=null}onYouTubePlayerAPIReady.waiting=[];var f=false;d.player("youtube",{_canPlayType:function(a,b){return typeof b==="string"&&/(?:http:\/\/www\.|http:\/\/|www\.|\.|^)(youtu)/.test(b)&&a.toLowerCase()!=="video"},_setup:function(m){if(!e.YT&&!f){f=true;d.getScript("//youtube.com/player_api")}var z=this,q=false,i=document.createElement("div"),o=0,s=true,b=false,a=0,c=false,p=100,j=d.player.playerQueue(),y=function(){d.player.defineProperty(z,"currentTime",{set:function(g){if(!m.destroyed){b=true;o=Math.round(+g*100)/100}},get:function(){return o}});d.player.defineProperty(z,"paused",{get:function(){return s}});d.player.defineProperty(z,"muted",{set:function(g){if(m.destroyed){return g}if(m.youtubeObject.isMuted()!==g){g?m.youtubeObject.mute():m.youtubeObject.unMute();c=m.youtubeObject.isMuted();z.dispatchEvent("volumechange")}return m.youtubeObject.isMuted()},get:function(){if(m.destroyed){return 0}return m.youtubeObject.isMuted()}});d.player.defineProperty(z,"volume",{set:function(g){if(m.destroyed){return g}if(m.youtubeObject.getVolume()/100!==g){m.youtubeObject.setVolume(g*100);p=m.youtubeObject.getVolume();z.dispatchEvent("volumechange")}return m.youtubeObject.getVolume()/100},get:function(){if(m.destroyed){return 0}return m.youtubeObject.getVolume()/100}});z.play=function(){if(!m.destroyed){s=false;j.add(function(){if(m.youtubeObject.getPlayerState()!==1){b=false;m.youtubeObject.playVideo()}else{j.next()}})}};z.pause=function(){if(!m.destroyed){s=true;j.add(function(){m.youtubeObject.getPlayerState()!==2?m.youtubeObject.pauseVideo():j.next()})}}};i.id=z.id+d.guid();m._container=i;z.appendChild(i);var h=function(){var w,u,v,g,l=true,k=function(){if(!m.destroyed){if(b){if(o===m.youtubeObject.getCurrentTime()){b=false;z.dispatchEvent("seeked");z.dispatchEvent("timeupdate")}else{m.youtubeObject.seekTo(o)}}else{o=m.youtubeObject.getCurrentTime();z.dispatchEvent("timeupdate")}setTimeout(k,250)}},n=function(x){var B=m.youtubeObject.getDuration();if(isNaN(B)||B===0){setTimeout(function(){n(x*2)},x*1000)}else{z.duration=B;z.dispatchEvent("durationchange");z.dispatchEvent("loadedmetadata");z.dispatchEvent("loadeddata");z.readyState=4;k();z.dispatchEvent("canplaythrough")}};m.controls=+m.controls===0||+m.controls===1?m.controls:1;m.annotations=+m.annotations===1||+m.annotations===3?m.annotations:1;w=/^.*(?:\/|v=)(.{11})/.exec(z.src)[1];u=(z.src.split("?")[1]||"").replace(/v=.{11}/,"");u=u.replace(/&t=(?:(\d+)m)?(?:(\d+)s)?/,function(C,D,x){D|=0;x|=0;a=+x+D*60;return""});u=u.replace(/&start=(\d+)?/,function(x,B){B|=0;a=B;return""});q=/autoplay=1/.test(u);u=u.split(/[\&\?]/g);v={wmode:"transparent"};for(var r=0;r<u.length;r++){g=u[r].split("=");v[g[0]]=g[1]}m.youtubeObject=new YT.Player(i.id,{height:"100%",width:"100%",wmode:"transparent",playerVars:v,videoId:w,events:{onReady:function(){p=z.volume;c=z.muted;t();s=z.paused;y();m.youtubeObject.playVideo();z.currentTime=a},onStateChange:function(x){if(!(m.destroyed||x.data===-1)){if(x.data===2){s=true;z.dispatchEvent("pause");j.next()}else{if(x.data===1&&!l){s=false;z.dispatchEvent("play");z.dispatchEvent("playing");j.next()}else{if(x.data===0){z.dispatchEvent("ended")}else{if(x.data===1&&l){l=false;if(q||!z.paused){s=false}s&&m.youtubeObject.pauseVideo();n(0.025)}}}}}},onError:function(x){if([2,100,101,150].indexOf(x.data)!==-1){z.error={customCode:x.data};z.dispatchEvent("error")}}}});var t=function(){if(!m.destroyed){if(c!==m.youtubeObject.isMuted()){c=m.youtubeObject.isMuted();z.dispatchEvent("volumechange")}if(p!==m.youtubeObject.getVolume()){p=m.youtubeObject.getVolume();z.dispatchEvent("volumechange")}setTimeout(t,250)}}};onYouTubePlayerAPIReady.ready?h():onYouTubePlayerAPIReady.waiting.push(h)},_teardown:function(a){a.destroyed=true;var b=a.youtubeObject;if(b){b.stopVideo();b.clearVideo&&b.clearVideo()}this.removeChild(document.getElementById(a._container.id))}})})(window,Popcorn);