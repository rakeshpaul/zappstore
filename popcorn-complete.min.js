/*1fcc91fd3d41edb382ad7a9e632a56a2569e298f*/(function(m,j){function h(a,g){return function(){if(c.plugin.debug){return a.apply(this,arguments)}try{return a.apply(this,arguments)}catch(k){c.plugin.errors.push({plugin:g,thrown:k,source:a.toString()});this.emit("pluginerror",c.plugin.errors)}}}if(j.addEventListener){var b=Array.prototype,o=Object.prototype,d=b.forEach,e=b.slice,p=o.hasOwnProperty,q=o.toString,i=m.Popcorn,A=[],f=false,s={events:{hash:{},apis:{}}},r=function(){return m.requestAnimationFrame||m.webkitRequestAnimationFrame||m.mozRequestAnimationFrame||m.oRequestAnimationFrame||m.msRequestAnimationFrame||function(a){m.setTimeout(a,16)}}(),c=function(a,g){return new c.p.init(a,g||null)};c.version="1.3";c.isSupported=true;c.instances=[];c.p=c.prototype={init:function(k,g){var t,v=this;if(typeof k==="function"){if(j.readyState==="complete"){k(j,c)}else{A.push(k);if(!f){f=true;var u=function(){j.removeEventListener("DOMContentLoaded",u,false);for(var w=0,z=A.length;w<z;w++){A[w].call(j,c)}A=null};j.addEventListener("DOMContentLoaded",u,false)}}}else{if(typeof k==="string"){try{t=j.querySelector(k)}catch(l){throw Error("Popcorn.js Error: Invalid media element selector: "+k)}}this.media=t||k;t=this.media.nodeName&&this.media.nodeName.toLowerCase()||"video";this[t]=this.media;this.options=g||{};this.id=this.options.id||c.guid(t);if(c.byId(this.id)){throw Error("Popcorn.js Error: Cannot use duplicate ID ("+this.id+")")}this.isDestroyed=false;this.data={running:{cue:[]},timeUpdate:c.nop,disabled:{},events:{},hooks:{},history:[],state:{volume:this.media.volume},trackRefs:{},trackEvents:{byStart:[{start:-1,end:-1}],byEnd:[{start:-1,end:-1}],animating:[],startIndex:0,endIndex:0,previousUpdateTime:-1}};c.instances.push(this);var a=function(){if(v.media.currentTime<0){v.media.currentTime=0}v.media.removeEventListener("loadeddata",a,false);var C,w,z,B,D;C=v.media.duration;C=C!=C?Number.MAX_VALUE:C+1;c.addTrackEvent(v,{start:C,end:C});if(v.options.frameAnimation){v.data.timeUpdate=function(){c.timeUpdate(v,{});c.forEach(c.manifest,function(E,F){if(w=v.data.running[F]){B=w.length;for(var G=0;G<B;G++){z=w[G];(D=z._natives)&&D.frame&&D.frame.call(v,{},z,v.currentTime())}}});v.emit("timeupdate");!v.isDestroyed&&r(v.data.timeUpdate)};!v.isDestroyed&&r(v.data.timeUpdate)}else{v.data.timeUpdate=function(E){c.timeUpdate(v,E)};v.isDestroyed||v.media.addEventListener("timeupdate",v.data.timeUpdate,false)}};Object.defineProperty(this,"error",{get:function(){return v.media.error}});v.media.readyState>=2?a():v.media.addEventListener("loadeddata",a,false);return this}}};c.p.init.prototype=c.p;c.byId=function(l){for(var g=c.instances,a=g.length,k=0;k<a;k++){if(g[k].id===l){return g[k]}}return null};c.forEach=function(k,g,t){if(!k||!g){return{}}t=t||this;var l,a;if(d&&k.forEach===d){return k.forEach(g,t)}if(q.call(k)==="[object NodeList]"){l=0;for(a=k.length;l<a;l++){g.call(t,k[l],l,k)}return k}for(l in k){p.call(k,l)&&g.call(t,k[l],l,k)}return k};c.extend=function(a){var g=e.call(arguments,1);c.forEach(g,function(l){for(var k in l){a[k]=l[k]}});return a};c.extend(c,{noConflict:function(a){if(a){m.Popcorn=i}return c},error:function(a){throw Error(a)},guid:function(a){c.guid.counter++;return(a?a:"")+(+new Date+c.guid.counter)},sizeOf:function(k){var g=0,a;for(a in k){g++}return g},isArray:Array.isArray||function(a){return q.call(a)==="[object Array]"},nop:function(){},position:function(t){t=t.getBoundingClientRect();var k={},l=j.documentElement,u=j.body,v,w,a;v=l.clientTop||u.clientTop||0;w=l.clientLeft||u.clientLeft||0;a=m.pageYOffset&&l.scrollTop||u.scrollTop;l=m.pageXOffset&&l.scrollLeft||u.scrollLeft;v=Math.ceil(t.top+a-v);w=Math.ceil(t.left+l-w);for(var g in t){k[g]=Math.round(t[g])}return c.extend({},k,{top:v,left:w})},disable:function(l,g){if(!l.data.disabled[g]){l.data.disabled[g]=true;for(var a=l.data.running[g].length-1,k;a>=0;a--){k=l.data.running[g][a];k._natives.end.call(l,null,k)}}return l},enable:function(l,g){if(l.data.disabled[g]){l.data.disabled[g]=false;for(var a=l.data.running[g].length-1,k;a>=0;a--){k=l.data.running[g][a];k._natives.start.call(l,null,k)}}return l},destroy:function(k){var g=k.data.events,t=k.data.trackEvents,v,u,l,a;for(u in g){v=g[u];for(l in v){delete v[l]}g[u]=null}for(a in c.registryByName){c.removePlugin(k,a)}t.byStart.length=0;t.byEnd.length=0;if(!k.isDestroyed){k.data.timeUpdate&&k.media.removeEventListener("timeupdate",k.data.timeUpdate,false);k.isDestroyed=true}}});c.guid.counter=1;c.extend(c.p,function(){var a={};c.forEach("load play pause currentTime playbackRate volume duration preload playbackRate autoplay loop controls muted buffered readyState seeking paused played seekable ended".split(/\s+/g),function(g){a[g]=function(l){var k;if(typeof this.media[g]==="function"){if(l!=null&&/play|pause/.test(g)){this.media.currentTime=c.util.toSeconds(l)}this.media[g]();return this}if(l!=null){k=this.media[g];this.media[g]=l;k!==l&&this.emit("attrchange",{attribute:g,previousValue:k,currentValue:l});return this}return this.media[g]}});return a}());c.forEach("enable disable".split(" "),function(a){c.p[a]=function(g){return c[a](this,g)}});c.extend(c.p,{roundTime:function(){return Math.round(this.media.currentTime)},exec:function(t,k,l){var u=arguments.length,v,w;try{w=c.util.toSeconds(t)}catch(a){}if(typeof w==="number"){t=w}if(typeof t==="number"&&u===2){l=k;k=t;t=c.guid("cue")}else{if(u===1){k=-1}else{if(v=this.getTrackEvent(t)){if(typeof t==="string"&&u===2){if(typeof k==="number"){l=v._natives.start}if(typeof k==="function"){l=k;k=v.start}}}else{if(u>=2){if(typeof k==="string"){try{w=c.util.toSeconds(k)}catch(g){}k=w}if(typeof k==="number"){l=c.nop()}if(typeof k==="function"){l=k;k=-1}}}}}c.addTrackEvent(this,{id:t,start:k,end:k+1,_running:false,_natives:{start:l||c.nop,end:c.nop,type:"cue"}});return this},mute:function(a){a=a==null||a===true?"muted":"unmuted";if(a==="unmuted"){this.media.muted=false;this.media.volume=this.data.state.volume}if(a==="muted"){this.data.state.volume=this.media.volume;this.media.muted=true}this.emit(a);return this},unmute:function(a){return this.mute(a==null?false:!a)},position:function(){return c.position(this.media)},toggle:function(a){return c[this.data.disabled[a]?"enable":"disable"](this,a)},defaults:function(a,g){if(c.isArray(a)){c.forEach(a,function(l){for(var k in l){this.defaults(k,l[k])}},this);return this}if(!this.options.defaults){this.options.defaults={}}this.options.defaults[a]||(this.options.defaults[a]={});c.extend(this.options.defaults[a],g);return this}});c.Events={UIEvents:"blur focus focusin focusout load resize scroll unload",MouseEvents:"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave click dblclick",Events:"loadstart progress suspend emptied stalled play pause error loadedmetadata loadeddata waiting playing canplay canplaythrough seeking seeked timeupdate ended ratechange durationchange volumechange"};c.Events.Natives=c.Events.UIEvents+" "+c.Events.MouseEvents+" "+c.Events.Events;s.events.apiTypes=["UIEvents","MouseEvents","Events"];(function(u,g){for(var l=s.events.apiTypes,t=u.Natives.split(/\s+/g),k=0,a=t.length;k<a;k++){g.hash[t[k]]=true}l.forEach(function(v){g.apis[v]={};for(var B=u[v].split(/\s+/g),w=B.length,z=0;z<w;z++){g.apis[v][B[z]]=true}})})(c.Events,s.events);c.events={isNative:function(a){return !!s.events.hash[a]},getInterface:function(k){if(!c.events.isNative(k)){return false}var g=s.events,t=g.apiTypes;g=g.apis;for(var v=0,u=t.length,l,a;v<u;v++){a=t[v];if(g[a][k]){l=a;break}}return l},all:c.Events.Natives.split(/\s+/g),fn:{trigger:function(k,g){var a;if(this.data.events[k]&&c.sizeOf(this.data.events[k])){if(a=c.events.getInterface(k)){a=j.createEvent(a);a.initEvent(k,true,true,m,1);this.media.dispatchEvent(a);return this}c.forEach(this.data.events[k],function(l){l.call(this,g)},this)}return this},listen:function(u,g){var l=this,t=true,k=c.events.hooks[u],a;if(!this.data.events[u]){this.data.events[u]={};t=false}if(k){k.add&&k.add.call(this,{},g);if(k.bind){u=k.bind}if(k.handler){a=g;g=function(v){k.handler.call(l,v,a)}}t=true;if(!this.data.events[u]){this.data.events[u]={};t=false}}this.data.events[u][g.name||g.toString()+c.guid()]=g;!t&&c.events.all.indexOf(u)>-1&&this.media.addEventListener(u,function(v){c.forEach(l.data.events[u],function(w){typeof w==="function"&&w.call(l,v)})},false);return this},unlisten:function(a,g){if(this.data.events[a]&&this.data.events[a][g]){delete this.data.events[a][g];return this}this.data.events[a]=null;return this}},hooks:{canplayall:{bind:"canplaythrough",add:function(k,g){var a=false;if(this.media.readyState){g.call(this,k);a=true}this.data.hooks.canplayall={fired:a}},handler:function(a,g){if(!this.data.hooks.canplayall.fired){g.call(this,a);this.data.hooks.canplayall.fired=true}}}}};c.forEach([["trigger","emit"],["listen","on"],["unlisten","off"]],function(a){c.p[a[0]]=c.p[a[1]]=c.events.fn[a[0]]});c.addTrackEvent=function(k,g){var t,v;if(g.id){t=k.getTrackEvent(g.id)}if(t){v=true;g=c.extend({},t,g);k.removeTrackEvent(g.id)}if(g&&g._natives&&g._natives.type&&k.options.defaults&&k.options.defaults[g._natives.type]){g=c.extend({},k.options.defaults[g._natives.type],g)}if(g._natives){g._id=g.id||g._id||c.guid(g._natives.type);k.data.history.push(g._id)}g.start=c.util.toSeconds(g.start,k.options.framerate);g.end=c.util.toSeconds(g.end,k.options.framerate);var u=k.data.trackEvents.byStart,l=k.data.trackEvents.byEnd,a;for(a=u.length-1;a>=0;a--){if(g.start>=u[a].start){u.splice(a+1,0,g);break}}for(u=l.length-1;u>=0;u--){if(g.end>l[u].end){l.splice(u+1,0,g);break}}if(g.end>k.media.currentTime&&g.start<=k.media.currentTime){g._running=true;k.data.running[g._natives.type].push(g);k.data.disabled[g._natives.type]||g._natives.start.call(k,null,g)}a<=k.data.trackEvents.startIndex&&g.start<=k.data.trackEvents.previousUpdateTime&&k.data.trackEvents.startIndex++;u<=k.data.trackEvents.endIndex&&g.end<k.data.trackEvents.previousUpdateTime&&k.data.trackEvents.endIndex++;this.timeUpdate(k,null,true);g._id&&c.addTrackEvent.ref(k,g);if(v){v=g._natives.type==="cue"?"cuechange":"trackchange";k.emit(v,{id:g.id,previousValue:{time:t.start,fn:t._natives.start},currentValue:{time:g.start,fn:g._natives.start}})}};c.addTrackEvent.ref=function(a,g){a.data.trackRefs[g._id]=g;return a};c.removeTrackEvent=function(w,g){for(var B,k,l=w.data.history.length,u=w.data.trackEvents.byStart.length,v=0,z=0,D=[],a=[],C=[],t=[];--u>-1;){B=w.data.trackEvents.byStart[v];k=w.data.trackEvents.byEnd[v];if(!B._id){D.push(B);a.push(k)}if(B._id){B._id!==g&&D.push(B);k._id!==g&&a.push(k);if(B._id===g){z=v;B._natives._teardown&&B._natives._teardown.call(w,B)}}v++}u=w.data.trackEvents.animating.length;v=0;if(u){for(;--u>-1;){B=w.data.trackEvents.animating[v];B._id||C.push(B);B._id&&B._id!==g&&C.push(B);v++}}z<=w.data.trackEvents.startIndex&&w.data.trackEvents.startIndex--;z<=w.data.trackEvents.endIndex&&w.data.trackEvents.endIndex--;w.data.trackEvents.byStart=D;w.data.trackEvents.byEnd=a;w.data.trackEvents.animating=C;for(u=0;u<l;u++){w.data.history[u]!==g&&t.push(w.data.history[u])}w.data.history=t;c.removeTrackEvent.ref(w,g)};c.removeTrackEvent.ref=function(a,g){delete a.data.trackRefs[g];return a};c.getTrackEvents=function(k){var g=[];k=k.data.trackEvents.byStart;for(var t=k.length,l=0,a;l<t;l++){a=k[l];a._id&&g.push(a)}return g};c.getTrackEvents.ref=function(a){return a.data.trackRefs};c.getTrackEvent=function(a,g){return a.data.trackRefs[g]};c.getTrackEvent.ref=function(a,g){return a.data.trackRefs[g]};c.getLastTrackEventId=function(a){return a.data.history[a.data.history.length-1]};c.timeUpdate=function(l,t){var a=l.media.currentTime,C=l.data.trackEvents.previousUpdateTime,w=l.data.trackEvents,B=w.endIndex,E=w.startIndex,D=w.byStart.length,k=w.byEnd.length,v=c.registryByName,u,g,z;if(C<=a){for(;w.byEnd[B]&&w.byEnd[B].end<=a;){u=w.byEnd[B];g=(C=u._natives)&&C.type;if(!C||v[g]||l[g]){if(u._running===true){u._running=false;z=l.data.running[g];z.splice(z.indexOf(u),1);if(!l.data.disabled[g]){C.end.call(l,t,u);l.emit("trackend",c.extend({},u,{plugin:g,type:"trackend"}))}}B++}else{c.removeTrackEvent(l,u._id);return}}for(;w.byStart[E]&&w.byStart[E].start<=a;){u=w.byStart[E];g=(C=u._natives)&&C.type;if(!C||v[g]||l[g]){if(u.end>a&&u._running===false){u._running=true;l.data.running[g].push(u);if(!l.data.disabled[g]){C.start.call(l,t,u);l.emit("trackstart",c.extend({},u,{plugin:g,type:"trackstart"}))}}E++}else{c.removeTrackEvent(l,u._id);return}}}else{if(C>a){for(;w.byStart[E]&&w.byStart[E].start>a;){u=w.byStart[E];g=(C=u._natives)&&C.type;if(!C||v[g]||l[g]){if(u._running===true){u._running=false;z=l.data.running[g];z.splice(z.indexOf(u),1);if(!l.data.disabled[g]){C.end.call(l,t,u);l.emit("trackend",c.extend({},u,{plugin:g,type:"trackend"}))}}E--}else{c.removeTrackEvent(l,u._id);return}}for(;w.byEnd[B]&&w.byEnd[B].end>a;){u=w.byEnd[B];g=(C=u._natives)&&C.type;if(!C||v[g]||l[g]){if(u.start<=a&&u._running===false){u._running=true;l.data.running[g].push(u);if(!l.data.disabled[g]){C.start.call(l,t,u);l.emit("trackstart",c.extend({},u,{plugin:g,type:"trackstart"}))}}B--}else{c.removeTrackEvent(l,u._id);return}}}}w.endIndex=B;w.startIndex=E;w.previousUpdateTime=a;w.byStart.length<D&&w.startIndex--;w.byEnd.length<k&&w.endIndex--};c.extend(c.p,{getTrackEvents:function(){return c.getTrackEvents.call(null,this)},getTrackEvent:function(a){return c.getTrackEvent.call(null,this,a)},getLastTrackEventId:function(){return c.getLastTrackEventId.call(null,this)},removeTrackEvent:function(a){c.removeTrackEvent.call(null,this,a);return this},removePlugin:function(a){c.removePlugin.call(null,this,a);return this},timeUpdate:function(a){c.timeUpdate.call(null,this,a);return this},destroy:function(){c.destroy.call(null,this);return this}});c.manifest={};c.registry=[];c.registryByName={};c.plugin=function(t,z,k){if(c.protect.natives.indexOf(t.toLowerCase())>=0){c.error("'"+t+"' is a protected function name")}else{var g=["start","end"],l={},u=typeof z==="function",v=["_setup","_teardown","start","end","frame"],w=function(C,D){C=C||c.nop;D=D||c.nop;return function(){C.apply(this,arguments);D.apply(this,arguments)}};c.manifest[t]=k=k||z.manifest||{};v.forEach(function(C){z[C]=h(z[C]||c.nop,t)});var B=function(C,G){if(!G){return this}if(G.ranges&&c.isArray(G.ranges)){c.forEach(G.ranges,function(H){H=c.extend({},G,H);delete H.ranges;this[t](H)},this);return this}var D=G._natives={},E="",F;c.extend(D,C);G._natives.type=t;G._running=false;D.start=D.start||D["in"];D.end=D.end||D.out;if(G.once){D.end=w(D.end,function(){this.removeTrackEvent(G._id)})}D._teardown=w(function(){var I=e.call(arguments),H=this.data.running[D.type];I.unshift(null);I[1]._running&&H.splice(H.indexOf(G),1)&&D.end.apply(this,I)},D._teardown);G.compose=G.compose&&G.compose.split(" ")||[];G.effect=G.effect&&G.effect.split(" ")||[];G.compose=G.compose.concat(G.effect);G.compose.forEach(function(H){E=c.compositions[H]||{};v.forEach(function(I){D[I]=w(D[I],E[I])})});G._natives.manifest=k;if(!("start" in G)){G.start=G["in"]||0}if(!G.end&&G.end!==0){G.end=G.out||Number.MAX_VALUE}if(!p.call(G,"toString")){G.toString=function(){var H=["start: "+G.start,"end: "+G.end,"id: "+(G.id||G._id)];G.target!=null&&H.push("target: "+G.target);return t+" ( "+H.join(", ")+" )"}}if(!G.target){F="options" in k&&k.options;G.target=F&&"target" in F&&F.target}if(G._natives){G._id=c.guid(G._natives.type)}G._natives._setup&&G._natives._setup.call(this,G);c.addTrackEvent(this,G);c.forEach(C,function(I,H){H!=="type"&&g.indexOf(H)===-1&&this.on(H,I)},this);return this};c.p[t]=l[t]=function(C,E){var D;if(C&&!E){E=C}else{if(D=this.getTrackEvent(C)){E=c.extend({},D,E);c.addTrackEvent(this,E);return this}else{E.id=C}}this.data.running[t]=this.data.running[t]||[];D=c.extend({},this.options.defaults&&this.options.defaults[t]||{},E);return B.call(this,u?z.call(this,D):z,D)};k&&c.extend(z,{manifest:k});var a={fn:l[t],definition:z,base:z,parents:[],name:t};c.registry.push(c.extend(l,a,{type:t}));c.registryByName[t]=a;return l}};c.plugin.errors=[];c.plugin.debug=c.version==="1.3";c.removePlugin=function(k,g){if(!g){g=k;k=c.p;if(c.protect.natives.indexOf(g.toLowerCase())>=0){c.error("'"+g+"' is a protected function name");return}var t=c.registry.length,v;for(v=0;v<t;v++){if(c.registry[v].name===g){c.registry.splice(v,1);delete c.registryByName[g];delete c.manifest[g];delete k[g];return}}}t=k.data.trackEvents.byStart;v=k.data.trackEvents.byEnd;var u=k.data.trackEvents.animating,l,a;l=0;for(a=t.length;l<a;l++){if(t[l]&&t[l]._natives&&t[l]._natives.type===g){t[l]._natives._teardown&&t[l]._natives._teardown.call(k,t[l]);t.splice(l,1);l--;a--;if(k.data.trackEvents.startIndex<=l){k.data.trackEvents.startIndex--;k.data.trackEvents.endIndex--}}v[l]&&v[l]._natives&&v[l]._natives.type===g&&v.splice(l,1)}l=0;for(a=u.length;l<a;l++){if(u[l]&&u[l]._natives&&u[l]._natives.type===g){u.splice(l,1);l--;a--}}};c.compositions={};c.compose=function(k,g,a){c.manifest[k]=a||g.manifest||{};c.compositions[k]=g};c.plugin.effect=c.effect=c.compose;var y=/^(?:\.|#|\[)/;c.dom={debug:false,find:function(l,g){var a=null;l=l.trim();g=g||j;if(l){if(!y.test(l)){a=j.getElementById(l);if(a!==null){return a}}try{a=g.querySelector(l)}catch(k){if(c.dom.debug){throw Error(k)}}}return a}};var x=/\?/,n={url:"",data:"",dataType:"",success:c.nop,type:"GET",async:true,xhr:function(){return new m.XMLHttpRequest}};c.xhr=function(a){a.dataType=a.dataType&&a.dataType.toLowerCase()||null;if(a.dataType&&(a.dataType==="jsonp"||a.dataType==="script")){c.xhr.getJSONP(a.url,a.success,a.dataType==="script")}else{a=c.extend({},n,a);a.ajax=a.xhr();if(a.ajax){if(a.type==="GET"&&a.data){a.url+=(x.test(a.url)?"&":"?")+a.data;a.data=null}a.ajax.open(a.type,a.url,a.async);a.ajax.send(a.data||null);return c.xhr.httpData(a)}}};c.xhr.httpData=function(k){var g,t=null,l,a=null;k.ajax.onreadystatechange=function(){if(k.ajax.readyState===4){try{t=JSON.parse(k.ajax.responseText)}catch(u){}g={xml:k.ajax.responseXML,text:k.ajax.responseText,json:t};if(!g.xml||!g.xml.documentElement){g.xml=null;try{l=new DOMParser;a=l.parseFromString(k.ajax.responseText,"text/xml");if(!a.getElementsByTagName("parsererror").length){g.xml=a}}catch(v){}}if(k.dataType){g=g[k.dataType]}k.success.call(k.ajax,g)}};return g};c.xhr.getJSONP=function(v,w,g){var z=j.head||j.getElementsByTagName("head")[0]||j.documentElement,a=j.createElement("script"),l=false,u=[];u=/(=)\?(?=&|$)|\?\?/;var t,k;if(!g){k=v.match(/(callback=[^&]*)/);if(k!==null&&k.length){u=k[1].split("=")[1];if(u==="?"){u="jsonp"}t=c.guid(u);v=v.replace(/(callback=[^&]*)/,"callback="+t)}else{t=c.guid("jsonp");if(u.test(v)){v=v.replace(u,"$1"+t)}u=v.split(/\?(.+)?/);v=u[0]+"?";if(u[1]){v+=u[1]+"&"}v+="callback="+t}window[t]=function(B){w&&w(B);l=true}}a.addEventListener("load",function(){g&&w&&w();l&&delete window[t];z.removeChild(a)},false);a.src=v;z.insertBefore(a,z.firstChild)};c.getJSONP=c.xhr.getJSONP;c.getScript=c.xhr.getScript=function(a,g){return c.xhr.getJSONP(a,g,true)};c.util={toSeconds:function(u,g){var l=/^([0-9]+:){0,2}[0-9]+([.;][0-9]+)?$/,t,k,a;if(typeof u==="number"){return u}typeof u==="string"&&!l.test(u)&&c.error("Invalid time format");l=u.split(":");t=l.length-1;k=l[t];if(k.indexOf(";")>-1){k=k.split(";");a=0;if(g&&typeof g==="number"){a=parseFloat(k[1],10)/g}l[t]=parseInt(k[0],10)+a}t=l[0];return{1:parseFloat(t,10),2:parseInt(t,10)*60+parseFloat(l[1],10),3:parseInt(t,10)*3600+parseInt(l[1],10)*60+parseFloat(l[2],10)}[l.length||1]}};c.p.cue=c.p.exec;c.protect={natives:function(a){return Object.keys?Object.keys(a):function(g){var l,k=[];for(l in g){p.call(g,l)&&k.push(l)}return k}(a)}(c.p).map(function(a){return a.toLowerCase()})};c.forEach({listen:"on",unlisten:"off",trigger:"emit",exec:"cue"},function(k,g){var a=c.p[g];c.p[g]=function(){if(typeof console!=="undefined"&&console.warn){console.warn("Deprecated method '"+g+"', "+(k==null?"do not use.":"use '"+k+"' instead."));c.p[g]=a}return c.p[k].apply(this,[].slice.call(arguments))}});m.Popcorn=c}else{m.Popcorn={isSupported:false};for(b="byId forEach extend effects error guid sizeOf isArray nop position disable enable destroyaddTrackEvent removeTrackEvent getTrackEvents getTrackEvent getLastTrackEventId timeUpdate plugin removePlugin compose effect xhr getJSONP getScript".split(/\s+/);b.length;){m.Popcorn[b.shift()]=function(){}}}})(window,window.document);(function(e,f){var h=e.document,p=e.location,n=/:\/\//,i=p.href.replace(p.href.split("/").slice(-1)[0],""),b=function(k,g,a){k=k||0;g=(g||k||0)+1;a=a||1;g=Math.ceil((g-k)/a)||0;var d=0,j=[];for(j.length=g;d<g;){j[d++]=k;k+=a}return j};f.sequence=function(a,d){return new f.sequence.init(a,d)};f.sequence.init=function(j,g){this.parent=h.getElementById(j);this.seqId=f.guid("__sequenced");this.queue=[];this.playlist=[];this.inOuts={ofVideos:[],ofClips:[]};this.dims={width:0,height:0};this.active=0;this.playing=this.cycling=false;this.times={last:0};this.events={};var a=this,d=0;f.forEach(g,function(k,l){var q=h.createElement("video");q.preload="auto";q.controls=true;q.style.display=l&&"none"||"";q.id=a.seqId+"-"+l;a.queue.push(q);var m=k["in"],o=k.out;a.inOuts.ofVideos.push({"in":m!==undefined&&m||1,out:o!==undefined&&o||0});a.inOuts.ofVideos[l].out=a.inOuts.ofVideos[l].out||a.inOuts.ofVideos[l]["in"]+2;q.src=!n.test(k.src)?i+k.src:k.src;q.setAttribute("data-sequence-owner",j);q.setAttribute("data-sequence-guid",a.seqId);q.setAttribute("data-sequence-id",l);q.setAttribute("data-sequence-clip",[a.inOuts.ofVideos[l]["in"],a.inOuts.ofVideos[l].out].join(":"));a.parent.appendChild(q);a.playlist.push(f("#"+q.id))});a.inOuts.ofVideos.forEach(function(k){k={"in":d,out:d+(k.out-k["in"])};a.inOuts.ofClips.push(k);d=k.out+1});f.forEach(this.queue,function(m,k){function l(){if(!k){a.dims.width=m.videoWidth;a.dims.height=m.videoHeight}m.currentTime=a.inOuts.ofVideos[k]["in"]-0.5;m.removeEventListener("canplaythrough",l,false);return true}m.addEventListener("canplaythrough",l,false);m.addEventListener("play",function(){a.playing=true},false);m.addEventListener("pause",function(){a.playing=false},false);m.addEventListener("timeupdate",function(r){r=r.srcElement||r.target;r=+(r.dataset&&r.dataset.sequenceId||r.getAttribute("data-sequence-id"));var o=Math.floor(m.currentTime);if(a.times.last!==o&&r===a.active){a.times.last=o;o===a.inOuts.ofVideos[r].out&&f.sequence.cycle.call(a,r)}},false)});return this};f.sequence.init.prototype=f.sequence.prototype;f.sequence.cycle=function(l){this.queue||f.error("Popcorn.sequence.cycle is not a public method");var g=this.queue,a=this.inOuts.ofVideos,d=g[l],j=0,k;if(g[l+1]){j=l+1}if(g[l+1]){g=g[j];a=a[j];f.extend(g,{width:this.dims.width,height:this.dims.height});k=this.playlist[j];d.pause();this.active=j;this.times.last=a["in"]-1;k.currentTime(a["in"]);k[j?"play":"pause"]();this.trigger("cycle",{position:{previous:l,current:j}});if(j){d.style.display="none";g.style.display=""}this.cycling=false}else{this.playlist[l].pause()}return this};var c=["timeupdate","play","pause"];f.extend(f.sequence.prototype,{eq:function(a){return this.playlist[a]},remove:function(){this.parent.innerHTML=null},clip:function(a){return this.inOuts.ofVideos[a]},duration:function(){for(var g=0,d=this.inOuts.ofClips,a=0;a<d.length;a++){g+=d[a].out-d[a]["in"]+1}return g-1},play:function(){this.playlist[this.active].play();return this},exec:function(g,d){var a=this.active;this.inOuts.ofClips.forEach(function(j,k){if(g>=j["in"]&&g<=j.out){a=k}});g+=this.inOuts.ofVideos[a]["in"]-this.inOuts.ofClips[a]["in"];f.addTrackEvent(this.playlist[a],{start:g-1,end:g,_running:false,_natives:{start:d||f.nop,end:f.nop,type:"exec"}});return this},listen:function(l,g){var a=this,d=this.playlist,j=d.length,k=0;if(!g){g=f.nop}if(f.Events.Natives.indexOf(l)>-1){f.forEach(d,function(m){m.listen(l,function(o){o.active=a;if(c.indexOf(l)>-1){g.call(m,o)}else{++k===j&&g.call(m,o)}})})}else{this.events[l]||(this.events[l]={});d=g.name||f.guid("__"+l);this.events[l][d]=g}return this},unlisten:function(){},trigger:function(g,d){var a=this;if(!(f.Events.Natives.indexOf(g)>-1)){this.events[g]&&f.forEach(this.events[g],function(j){j.call(a,{type:g},d)});return this}}});f.forEach(f.manifest,function(a,d){f.sequence.prototype[d]=function(l){var o={},q=[],s,k,m,j,v;for(s=0;s<this.inOuts.ofClips.length;s++){q=this.inOuts.ofClips[s];k=b(q["in"],q.out);m=k.indexOf(l.start);j=k.indexOf(l.end);if(m>-1){o[s]=f.extend({},q,{start:k[m],clipIdx:m})}if(j>-1){o[s]=f.extend({},q,{end:k[j],clipIdx:j})}}s=Object.keys(o).map(function(r){return +r});q=b(s[0],s[1]);for(s=0;s<q.length;s++){m={};j=q[s];var g=o[j];if(g){v=this.inOuts.ofVideos[j];k=g.clipIdx;v=b(v["in"],v.out);if(g.start){m.start=v[k];m.end=v[v.length-1]}if(g.end){m.start=v[0];m.end=v[k]}}else{m.start=this.inOuts.ofVideos[j]["in"];m.end=this.inOuts.ofVideos[j].out}this.playlist[j][d](f.extend({},l,m))}return this}})})(this,Popcorn);(function(b){document.addEventListener("DOMContentLoaded",function(){var a=document.querySelectorAll("[data-timeline-sources]");b.forEach(a,function(c,n){var m=a[n],e,h,i;if(!m.id){m.id=b.guid("__popcorn")}if(m.nodeType&&m.nodeType===1){i=b("#"+m.id);e=(m.getAttribute("data-timeline-sources")||"").split(",");e[0]&&b.forEach(e,function(d){h=d.split("!");if(h.length===1){h=d.match(/(.*)[\/\\]([^\/\\]+\.\w+)$/)[2].split(".");h[0]="parse"+h[1].toUpperCase();h[1]=d}e[0]&&i[h[0]]&&i[h[0]](h[1])});i.autoplay()&&i.play()}})},false)})(Popcorn);(function(j,i){function c(d){d=typeof d==="string"?d:[d.language,d.region].join("-");var a=d.split("-");return{iso6391:d,language:a[0]||"",region:a[1]||""}}var f=j.navigator,b=c(f.userLanguage||f.language);i.locale={get:function(){return b},set:function(a){b=c(a);i.locale.broadcast();return b},broadcast:function(d){var g=i.instances,h=g.length,a=0,e;for(d=d||"locale:changed";a<h;a++){e=g[a];d in e.data.events&&e.trigger(d)}}}})(this,this.Popcorn);(function(d){var c=Object.prototype.hasOwnProperty;d.parsers={};d.parser=function(a,b,h){if(d.protect.natives.indexOf(a.toLowerCase())>=0){d.error("'"+a+"' is a protected function name")}else{if(typeof b==="function"&&!h){h=b;b=""}if(!(typeof h!=="function"||typeof b!=="string")){var e={};e[a]=function(f,g){if(!f){return this}var j=this;d.xhr({url:f,dataType:b,success:function(i){var p,r,m=0;i=h(i).data||[];if(p=i.length){for(;m<p;m++){r=i[m];for(var o in r){c.call(r,o)&&j[o]&&j[o](r[o])}}g&&g()}}});return this};d.extend(d.p,e);return e}}}})(Popcorn);(function(f){var c=function(b,a){b=b||f.nop;a=a||f.nop;return function(){b.apply(this,arguments);a.apply(this,arguments)}},g=/^.*\.(ogg|oga|aac|mp3|wav)($|\?)/,h=/^.*\.(ogg|oga|aac|mp3|wav|ogg|ogv|mp4|webm)($|\?)/;f.player=function(a,b){if(!f[a]){b=b||{};var d=function(q,x,i){i=i||{};var p=new Date/1000,s=p,G=0,H=0,l=1,e=false,j={},o=typeof q==="string"?f.dom.find(q):q,m={};Object.prototype.__defineGetter__||(m=o||document.createElement("div"));for(var A in o){if(!(A in m)){if(typeof o[A]==="object"){m[A]=o[A]}else{if(typeof o[A]==="function"){m[A]=function(k){return"length" in o[k]&&!o[k].call?o[k]:function(){return o[k].apply(o,arguments)}}(A)}else{f.player.defineProperty(m,A,{get:function(k){return function(){return o[k]}}(A),set:f.nop,configurable:true})}}}}var y=function(){p=new Date/1000;if(!m.paused){m.currentTime+=p-s;m.dispatchEvent("timeupdate");setTimeout(y,10)}s=p};m.play=function(){this.paused=false;if(m.readyState>=4){s=new Date/1000;m.dispatchEvent("play");y()}};m.pause=function(){this.paused=true;m.dispatchEvent("pause")};f.player.defineProperty(m,"currentTime",{get:function(){return G},set:function(k){G=+k;m.dispatchEvent("timeupdate");return G},configurable:true});f.player.defineProperty(m,"volume",{get:function(){return l},set:function(k){l=+k;m.dispatchEvent("volumechange");return l},configurable:true});f.player.defineProperty(m,"muted",{get:function(){return e},set:function(k){e=+k;m.dispatchEvent("volumechange");return e},configurable:true});f.player.defineProperty(m,"readyState",{get:function(){return H},set:function(k){return H=k},configurable:true});m.addEventListener=function(n,k){j[n]||(j[n]=[]);j[n].push(k);return k};m.removeEventListener=function(r,k){var n,t=j[r];if(t){for(n=j[r].length-1;n>=0;n--){k===t[n]&&t.splice(n,1)}return k}};m.dispatchEvent=function(n){var r,k=n.type;if(!k){k=n;if(n=f.events.getInterface(k)){r=document.createEvent(n);r.initEvent(k,true,true,window,1)}}if(j[k]){for(n=j[k].length-1;n>=0;n--){j[k][n].call(this,r,this)}}};m.src=x||"";m.duration=0;m.paused=true;m.ended=0;i&&i.events&&f.forEach(i.events,function(n,k){m.addEventListener(k,n,false)});if(b._canPlayType(o.nodeName,x)!==false){if(b._setup){b._setup.call(m,i)}else{m.readyState=4;m.dispatchEvent("loadedmetadata");m.dispatchEvent("loadeddata");m.dispatchEvent("canplaythrough")}}else{setTimeout(function(){m.dispatchEvent("error")},0)}q=new f.p.init(m,i);if(b._teardown){q.destroy=c(q.destroy,function(){b._teardown.call(m,i)})}return q};d.canPlayType=b._canPlayType=b._canPlayType||f.nop;f[a]=f.player.registry[a]=d}};f.player.registry={};f.player.defineProperty=Object.defineProperty||function(a,b,d){a.__defineGetter__(b,d.get||f.nop);a.__defineSetter__(b,d.set||f.nop)};f.player.playerQueue=function(){var b=[],a=false;return{next:function(){a=false;b.shift();b[0]&&b[0]()},add:function(d){b.push(function(){a=true;d&&d()});!a&&b[0]()}}};f.smart=function(o,p,a){var b=["AUDIO","VIDEO"],d,j=f.dom.find(o),e;d=document.createElement("video");var i={ogg:"video/ogg",ogv:"video/ogg",oga:"audio/ogg",webm:"video/webm",mp4:"video/mp4",mp3:"audio/mp3"};if(j){if(b.indexOf(j.nodeName)>-1&&!p){if(typeof p==="object"){a=p}return f(j,a)}if(typeof p==="string"){p=[p]}o=0;for(srcLength=p.length;o<srcLength;o++){e=h.exec(p[o]);e=!e||!e[1]?false:d.canPlayType(i[e[1]]);if(e){p=p[o];break}for(var m in f.player.registry){if(f.player.registry.hasOwnProperty(m)){if(f.player.registry[m].canPlayType(j.nodeName,p[o])){return f[m](j,p[o],a)}}}}if(b.indexOf(j.nodeName)===-1){d=typeof p==="string"?p:p.length?p[0]:p;o=document.createElement(g.exec(d)?b[0]:b[1]);o.controls=true;j.appendChild(o);j=o}a&&a.events&&a.events.error&&j.addEventListener("error",a.events.error,false);j.src=p;return f(j,a)}else{f.error("Specified target "+o+" was not found.")}}})(Popcorn);(function(d){var c=function(e,h){var b=0,j=0,a;d.forEach(h.classes,function(f,g){a=[];if(f==="parent"){a[0]=document.querySelectorAll("#"+h.target)[0].parentNode}else{a=document.querySelectorAll("#"+h.target+" "+f)}b=0;for(j=a.length;b<j;b++){a[b].classList.toggle(g)}})};d.compose("applyclass",{manifest:{about:{name:"Popcorn applyclass Effect",version:"0.1",author:"@scottdowne",website:"scottdowne.wordpress.com"},options:{}},_setup:function(e){e.classes={};e.applyclass=e.applyclass||"";for(var h=e.applyclass.replace(/\s/g,"").split(","),b=[],j=0,a=h.length;j<a;j++){b=h[j].split(":");if(b[0]){e.classes[b[0]]=b[1]||""}}},start:c,end:c})})(Popcorn);(function(f){var c=/(?:http:\/\/www\.|http:\/\/|www\.|\.|^)(youtu|vimeo|soundcloud|baseplayer)/,g={},h={vimeo:false,youtube:false,soundcloud:false,module:false};Object.defineProperty(g,void 0,{get:function(){return h[void 0]},set:function(a){h[void 0]=a}});f.plugin("mediaspawner",{manifest:{about:{name:"Popcorn Media Spawner Plugin",version:"0.1",author:"Matthew Schranz, @mjschranz",website:"mschranz.wordpress.com"},options:{source:{elem:"input",type:"text",label:"Media Source","default":"http://www.youtube.com/watch?v=CXDstfD9eJ0"},caption:{elem:"input",type:"text",label:"Media Caption","default":"Popcorn Popping",optional:true},target:"mediaspawner-container",start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},autoplay:{elem:"input",type:"checkbox",label:"Autoplay Video",optional:true},width:{elem:"input",type:"number",label:"Media Width","default":400,units:"px",optional:true},height:{elem:"input",type:"number",label:"Media Height","default":200,units:"px",optional:true}}},_setup:function(e){function i(){function k(){if(m!=="HTML5"&&!window.Popcorn[m]){setTimeout(function(){k()},300)}else{e.id=e._container.id;e._container.style.width=e.width+"px";e._container.style.height=e.height+"px";e.popcorn=f.smart("#"+e.id,e.source);m==="HTML5"&&e.popcorn.controls(true);e._container.style.width="0px";e._container.style.height="0px";e._container.style.visibility="hidden";e._container.style.overflow="hidden"}}if(m!=="HTML5"&&!window.Popcorn[m]&&!g[m]){g[m]=true;f.getScript("http://popcornjs.org/code/players/"+m+"/popcorn."+m+".js",function(){k()})}else{k()}}function a(){window.Popcorn.player?i():setTimeout(function(){a()},300)}var b=document.getElementById(e.target)||{},m,d,j;if(d=c.exec(e.source)){m=d[1];if(m==="youtu"){m="youtube"}}else{m="HTML5"}e._type=m;e._container=document.createElement("div");d=e._container;d.id="mediaSpawnerdiv-"+f.guid();e.width=e.width||400;e.height=e.height||200;if(e.caption){j=document.createElement("div");j.innerHTML=e.caption;j.style.display="none";e._capCont=j;d.appendChild(j)}b&&b.appendChild(d);if(!window.Popcorn.player&&!g.module){g.module=true;f.getScript("http://popcornjs.org/code/modules/player/popcorn.player.js",a)}else{a()}},start:function(b,a){if(a._capCont){a._capCont.style.display=""}a._container.style.width=a.width+"px";a._container.style.height=a.height+"px";a._container.style.visibility="visible";a._container.style.overflow="visible";a.autoplay&&a.popcorn.play()},end:function(b,a){if(a._capCont){a._capCont.style.display="none"}a._container.style.width="0px";a._container.style.height="0px";a._container.style.visibility="hidden";a._container.style.overflow="hidden";a.popcorn.pause()},_teardown:function(a){a.popcorn&&a.popcorn.destory&&a.popcorn.destroy();document.getElementById(a.target)&&document.getElementById(a.target).removeChild(a._container)}})})(Popcorn,this);(function(b){b.plugin("code",function(f){var a=false,c=this,h=function(){var d=function(e){return function(j,l){var g=function(){a&&j.call(c,l);a&&e(g)};g()}};return window.webkitRequestAnimationFrame?d(window.webkitRequestAnimationFrame):window.mozRequestAnimationFrame?d(window.mozRequestAnimationFrame):d(function(e){window.setTimeout(e,16)})}();if(!f.onStart||typeof f.onStart!=="function"){f.onStart=b.nop}if(f.onEnd&&typeof f.onEnd!=="function"){f.onEnd=undefined}if(f.onFrame&&typeof f.onFrame!=="function"){f.onFrame=undefined}return{start:function(e,d){d.onStart.call(c,d);if(d.onFrame){a=true;h(d.onFrame,d)}},end:function(e,d){if(d.onFrame){a=false}d.onEnd&&d.onEnd.call(c,d)}}},{about:{name:"Popcorn Code Plugin",version:"0.1",author:"David Humphrey (@humphd)",website:"http://vocamus.net/dave"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},onStart:{elem:"input",type:"function",label:"onStart"},onFrame:{elem:"input",type:"function",label:"onFrame",optional:true},onEnd:{elem:"input",type:"function",label:"onEnd"}}})})(Popcorn);(function(d){var c=0;d.plugin("flickr",function(n){var A,p=document.getElementById(n.target),q,B,i,b,e=n.numberofimages||4,h=n.height||"50px",o=n.width||"50px",s=n.padding||"5px",j=n.border||"0px";A=document.createElement("div");A.id="flickr"+c;A.style.width="100%";A.style.height="100%";A.style.display="none";c++;p&&p.appendChild(A);var a=function(){if(q){setTimeout(function(){a()},5)}else{B="http://api.flickr.com/services/rest/?method=flickr.people.findByUsername&";B+="username="+n.username+"&api_key="+n.apikey+"&format=json&jsoncallback=flickr";d.getJSONP(B,function(f){q=f.user.nsid;m()})}},m=function(){B="http://api.flickr.com/services/feeds/photos_public.gne?";if(q){B+="id="+q+"&"}if(n.tags){B+="tags="+n.tags+"&"}B+="lang=en-us&format=json&jsoncallback=flickr";d.xhr.getJSONP(B,function(f){var g=document.createElement("div");g.innerHTML="<p style='padding:"+s+";'>"+f.title+"<p/>";d.forEach(f.items,function(l,k){if(k<e){i=document.createElement("a");i.setAttribute("href",l.link);i.setAttribute("target","_blank");b=document.createElement("img");b.setAttribute("src",l.media.m);b.setAttribute("height",h);b.setAttribute("width",o);b.setAttribute("style","border:"+j+";padding:"+s);i.appendChild(b);g.appendChild(i)}else{return false}});A.appendChild(g)})};if(n.username&&n.apikey){a()}else{q=n.userid;m()}return{start:function(){A.style.display="inline"},end:function(){A.style.display="none"},_teardown:function(f){document.getElementById(f.target)&&document.getElementById(f.target).removeChild(A)}}},{about:{name:"Popcorn Flickr Plugin",version:"0.2",author:"Scott Downe, Steven Weerdenburg, Annasob",website:"http://scottdowne.wordpress.com/"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},userid:{elem:"input",type:"text",label:"User ID",optional:true},tags:{elem:"input",type:"text",label:"Tags"},username:{elem:"input",type:"text",label:"Username",optional:true},apikey:{elem:"input",type:"text",label:"API Key",optional:true},target:"flickr-container",height:{elem:"input",type:"text",label:"Height","default":"50px",optional:true},width:{elem:"input",type:"text",label:"Width","default":"50px",optional:true},padding:{elem:"input",type:"text",label:"Padding",optional:true},border:{elem:"input",type:"text",label:"Border","default":"5px",optional:true},numberofimages:{elem:"input",type:"number","default":4,label:"Number of Images"}}})})(Popcorn);(function(b){b.plugin("footnote",{manifest:{about:{name:"Popcorn Footnote Plugin",version:"0.2",author:"@annasob, @rwaldron",website:"annasob.wordpress.com"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},text:{elem:"input",type:"text",label:"Text"},target:"footnote-container"}},_setup:function(a){var d=b.dom.find(a.target);a._container=document.createElement("div");a._container.style.display="none";a._container.innerHTML=a.text;d.appendChild(a._container)},start:function(a,d){d._container.style.display="inline"},end:function(a,d){d._container.style.display="none"},_teardown:function(a){var d=b.dom.find(a.target);d&&d.removeChild(a._container)}})})(Popcorn);(function(f){function c(a){return String(a).replace(/&(?!\w+;)|[<>"']/g,function(b){return h[b]||b})}function g(e,i){var a=e.container=document.createElement("div"),b=a.style,d=e.media,j=function(){var k=e.position();b.fontSize="18px";b.width=d.offsetWidth+"px";b.top=k.top+d.offsetHeight-a.offsetHeight-40+"px";b.left=k.left+"px";setTimeout(j,10)};a.id=i||"";b.position="absolute";b.color="white";b.textShadow="black 2px 2px 6px";b.fontWeight="bold";b.textAlign="center";j();e.media.parentNode.appendChild(a);return a}var h={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};f.plugin("text",{manifest:{about:{name:"Popcorn Text Plugin",version:"0.1",author:"@humphd"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},text:{elem:"input",type:"text",label:"Text","default":"Popcorn.js"},escape:{elem:"input",type:"checkbox",label:"Escape"},multiline:{elem:"input",type:"checkbox",label:"Multiline"}}},_setup:function(e){var a,b,d=e._container=document.createElement("div");d.style.display="none";if(e.target){if(a=f.dom.find(e.target)){if(["VIDEO","AUDIO"].indexOf(a.nodeName)>-1){a=g(this,e.target+"-overlay")}}else{a=g(this,e.target)}}else{a=this.container?this.container:g(this)}e._target=a;b=e.escape?c(e.text):e.text;b=e.multiline?b.replace(/\r?\n/gm,"<br>"):b;d.innerHTML=b||"";a.appendChild(d)},start:function(b,a){a._container.style.display="inline"},end:function(b,a){a._container.style.display="none"},_teardown:function(b){var a=b._target;a&&a.removeChild(b._container)}})})(Popcorn);var googleCallback;(function(c){function f(g,i,d){g=g.type?g.type.toUpperCase():"HYBRID";var a;if(g==="STAMEN-WATERCOLOR"||g==="STAMEN-TERRAIN"||g==="STAMEN-TONER"){a=g.replace("STAMEN-","").toLowerCase()}d=new google.maps.Map(d,{mapTypeId:a?a:google.maps.MapTypeId[g],mapTypeControlOptions:{mapTypeIds:[]}});a&&d.mapTypes.set(a,new google.maps.StamenMapType(a));d.getDiv().style.display="none";return d}var h=1,n=false,e=false,b,m;googleCallback=function(a){if(typeof google!=="undefined"&&google.maps&&google.maps.Geocoder&&google.maps.LatLng){b=new google.maps.Geocoder;c.getScript("//maps.stamen.com/js/tile.stamen.js",function(){e=true})}else{setTimeout(function(){googleCallback(a)},1)}};m=function(){if(document.body){n=true;c.getScript("//maps.google.com/maps/api/js?sensor=false&callback=googleCallback")}else{setTimeout(function(){m()},1)}};c.plugin("googlemap",function(i){var k,d,a,j=document.getElementById(i.target);i.type=i.type||"ROADMAP";i.zoom=i.zoom||1;i.lat=i.lat||0;i.lng=i.lng||0;n||m();k=document.createElement("div");k.id="actualmap"+h;k.style.width=i.width||"100%";k.style.height=i.height?i.height:j&&j.clientHeight?j.clientHeight+"px":"100%";h++;j&&j.appendChild(k);var g=function(){if(e){if(k){if(i.location){b.geocode({address:i.location},function(l,p){if(k&&p===google.maps.GeocoderStatus.OK){i.lat=l[0].geometry.location.lat();i.lng=l[0].geometry.location.lng();a=new google.maps.LatLng(i.lat,i.lng);d=f(i,a,k)}})}else{a=new google.maps.LatLng(i.lat,i.lng);d=f(i,a,k)}}}else{setTimeout(function(){g()},5)}};g();return{start:function(v,u){var l=this,t,s=function(){if(d){u._map=d;d.getDiv().style.display="block";google.maps.event.trigger(d,"resize");d.setCenter(a);if(u.zoom&&typeof u.zoom!=="number"){u.zoom=+u.zoom}d.setZoom(u.zoom);if(u.heading&&typeof u.heading!=="number"){u.heading=+u.heading}if(u.pitch&&typeof u.pitch!=="number"){u.pitch=+u.pitch}if(u.type==="STREETVIEW"){d.setStreetView(t=new google.maps.StreetViewPanorama(k,{position:a,pov:{heading:u.heading=u.heading||0,pitch:u.pitch=u.pitch||0,zoom:u.zoom}}));var o=function(w,x){var y=google.maps.geometry.spherical.computeHeading;setTimeout(function(){var H=l.media.currentTime;if(typeof u.tween==="object"){for(var I=0,J=w.length;I<J;I++){var F=w[I];if(H>=F.interval*(I+1)/1000&&(H<=F.interval*(I+2)/1000||H>=F.interval*J/1000)){B.setPosition(new google.maps.LatLng(F.position.lat,F.position.lng));B.setPov({heading:F.pov.heading||y(F,w[I+1])||0,zoom:F.pov.zoom||0,pitch:F.pov.pitch||0})}}o(w,w[0].interval)}else{I=0;for(J=w.length;I<J;I++){F=u.interval;if(H>=F*(I+1)/1000&&(H<=F*(I+2)/1000||H>=F*J/1000)){q.setPov({heading:y(w[I],w[I+1])||0,zoom:u.zoom,pitch:u.pitch||0});q.setPosition(A[I])}}o(A,u.interval)}},x)};if(u.location&&typeof u.tween==="string"){var q=t,A=[],z=new google.maps.DirectionsService,p=new google.maps.DirectionsRenderer(q);z.route({origin:u.location,destination:u.tween,travelMode:google.maps.TravelMode.DRIVING},function(E,x){if(x==google.maps.DirectionsStatus.OK){p.setDirections(E);for(var F=E.routes[0].overview_path,y=0,w=F.length;y<w;y++){A.push(new google.maps.LatLng(F[y].lat(),F[y].lng()))}u.interval=u.interval||1000;o(A,10)}})}else{if(typeof u.tween==="object"){var B=t;z=0;for(var r=u.tween.length;z<r;z++){u.tween[z].interval=u.tween[z].interval||1000;o(u.tween,10)}}}}u.onmaploaded&&u.onmaploaded(u,d)}else{setTimeout(function(){s()},13)}};s()},end:function(){if(d){d.getDiv().style.display="none"}},_teardown:function(l){var p=document.getElementById(l.target);p&&p.removeChild(k);k=d=a=null;l._map=null}}},{about:{name:"Popcorn Google Map Plugin",version:"0.1",author:"@annasob",website:"annasob.wordpress.com"},options:{start:{elem:"input",type:"start",label:"Start"},end:{elem:"input",type:"start",label:"End"},target:"map-container",type:{elem:"select",options:["ROADMAP","SATELLITE","STREETVIEW","HYBRID","TERRAIN","STAMEN-WATERCOLOR","STAMEN-TERRAIN","STAMEN-TONER"],label:"Map Type",optional:true},zoom:{elem:"input",type:"text",label:"Zoom","default":0,optional:true},lat:{elem:"input",type:"text",label:"Lat",optional:true},lng:{elem:"input",type:"text",label:"Lng",optional:true},location:{elem:"input",type:"text",label:"Location","default":"Toronto, Ontario, Canada"},heading:{elem:"input",type:"text",label:"Heading","default":0,optional:true},pitch:{elem:"input",type:"text",label:"Pitch","default":1,optional:true}}})})(Popcorn);(function(f){function c(b){function d(){var j=b.getBoundingClientRect(),k=i.getBoundingClientRect();if(k.left!==j.left){i.style.left=j.left+"px"}if(k.top!==j.top){i.style.top=j.top+"px"}}var e=-1,i=document.createElement("div"),a=getComputedStyle(b).zIndex;i.setAttribute("data-popcorn-helper-container",true);i.style.position="absolute";i.style.zIndex=isNaN(a)?g:a+1;document.body.appendChild(i);return{element:i,start:function(){e=setInterval(d,h)},stop:function(){clearInterval(e);e=-1},destroy:function(){document.body.removeChild(i);e!==-1&&clearInterval(e)}}}var g=2000,h=10;f.plugin("image",{manifest:{about:{name:"Popcorn image Plugin",version:"0.1",author:"Scott Downe",website:"http://scottdowne.wordpress.com/"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},src:{elem:"input",type:"url",label:"Image URL","default":"http://mozillapopcorn.org/wp-content/themes/popcorn/images/for_developers.png"},href:{elem:"input",type:"url",label:"Link","default":"http://mozillapopcorn.org/wp-content/themes/popcorn/images/for_developers.png",optional:true},target:"image-container",text:{elem:"input",type:"text",label:"Caption","default":"Popcorn.js",optional:true}}},_setup:function(a){var b=document.createElement("img"),d=document.getElementById(a.target);a.anchor=document.createElement("a");a.anchor.style.position="relative";a.anchor.style.textDecoration="none";a.anchor.style.display="none";if(d){if(["VIDEO","AUDIO"].indexOf(d.nodeName)>-1){a.trackedContainer=c(d);a.trackedContainer.element.appendChild(a.anchor)}else{d&&d.appendChild(a.anchor)}}b.addEventListener("load",function(){b.style.borderStyle="none";a.anchor.href=a.href||a.src||"#";a.anchor.target="_blank";var e,i;b.style.height=d.style.height;b.style.width=d.style.width;a.anchor.appendChild(b);if(a.text){e=b.height/12+"px";i=document.createElement("div");f.extend(i.style,{color:"black",fontSize:e,fontWeight:"bold",position:"relative",textAlign:"center",width:b.style.width||b.width+"px",zIndex:"10"});i.innerHTML=a.text||"";i.style.top=(b.style.height.replace("px","")||b.height)/2-i.offsetHeight/2+"px";a.anchor.insertBefore(i,b)}},false);b.src=a.src},start:function(b,a){a.anchor.style.display="inline";a.trackedContainer&&a.trackedContainer.start()},end:function(b,a){a.anchor.style.display="none";a.trackedContainer&&a.trackedContainer.stop()},_teardown:function(a){if(a.trackedContainer){a.trackedContainer.destroy()}else{a.anchor.parentNode&&a.anchor.parentNode.removeChild(a.anchor)}}})})(Popcorn);(function(d){var f=1,e=false;d.plugin("googlefeed",function(c){var b=function(){var o=false,j=0,g=document.getElementsByTagName("link"),p=g.length,k=document.head||document.getElementsByTagName("head")[0],m=document.createElement("link");if(window.GFdynamicFeedControl){e=true}else{d.getScript("//www.google.com/uds/solutions/dynamicfeed/gfdynamicfeedcontrol.js",function(){e=true})}for(;j<p;j++){if(g[j].href==="//www.google.com/uds/solutions/dynamicfeed/gfdynamicfeedcontrol.css"){o=true}}if(!o){m.type="text/css";m.rel="stylesheet";m.href="//www.google.com/uds/solutions/dynamicfeed/gfdynamicfeedcontrol.css";k.insertBefore(m,k.firstChild)}};window.google?b():d.getScript("//www.google.com/jsapi",function(){google.load("feeds","1",{callback:function(){b()}})});var h=document.createElement("div"),i=document.getElementById(c.target),a=function(){if(e){c.feed=new GFdynamicFeedControl(c.url,h,{vertical:c.orientation.toLowerCase()==="vertical"?true:false,horizontal:c.orientation.toLowerCase()==="horizontal"?true:false,title:c.title=c.title||"Blog"})}else{setTimeout(function(){a()},5)}};if(!c.orientation||c.orientation.toLowerCase()!=="vertical"&&c.orientation.toLowerCase()!=="horizontal"){c.orientation="vertical"}h.style.display="none";h.id="_feed"+f;h.style.width="100%";h.style.height="100%";f++;i&&i.appendChild(h);a();return{start:function(){h.setAttribute("style","display:inline")},end:function(){h.setAttribute("style","display:none")},_teardown:function(g){document.getElementById(g.target)&&document.getElementById(g.target).removeChild(h);delete g.feed}}},{about:{name:"Popcorn Google Feed Plugin",version:"0.1",author:"David Seifried",website:"dseifried.wordpress.com"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},target:"feed-container",url:{elem:"input",type:"url",label:"Feed URL","default":"http://planet.mozilla.org/rss20.xml"},title:{elem:"input",type:"text",label:"Title","default":"Planet Mozilla",optional:true},orientation:{elem:"select",options:["Vertical","Horizontal"],label:"Orientation","default":"Vertical",optional:true}}})})(Popcorn);(function(d){var f=0,e=function(i,h){var j=i.container=document.createElement("div"),a=j.style,b=i.media,c=function(){var g=i.position();a.fontSize="18px";a.width=b.offsetWidth+"px";a.top=g.top+b.offsetHeight-j.offsetHeight-40+"px";a.left=g.left+"px";setTimeout(c,10)};j.id=h||d.guid();a.position="absolute";a.color="white";a.textShadow="black 2px 2px 6px";a.fontWeight="bold";a.textAlign="center";c();i.media.parentNode.appendChild(j);return j};d.plugin("subtitle",{manifest:{about:{name:"Popcorn Subtitle Plugin",version:"0.1",author:"Scott Downe",website:"http://scottdowne.wordpress.com/"},options:{start:{elem:"input",type:"text",label:"Start"},end:{elem:"input",type:"text",label:"End"},target:"subtitle-container",text:{elem:"input",type:"text",label:"Text"}}},_setup:function(a){var b=document.createElement("div");b.id="subtitle-"+f++;b.style.display="none";!this.container&&(!a.target||a.target==="subtitle-container")&&e(this);a.container=a.target&&a.target!=="subtitle-container"?document.getElementById(a.target)||e(this,a.target):this.container;document.getElementById(a.container.id)&&document.getElementById(a.container.id).appendChild(b);a.innerContainer=b;a.showSubtitle=function(){a.innerContainer.innerHTML=a.text||""}},start:function(a,b){b.innerContainer.style.display="inline";b.showSubtitle(b,b.text)},end:function(a,b){b.innerContainer.style.display="none";b.innerContainer.innerHTML=""},_teardown:function(a){a.container.removeChild(a.innerContainer)}})})(Popcorn);(function(d){var c=false;d.plugin("twitter",{manifest:{about:{name:"Popcorn Twitter Plugin",version:"0.1",author:"Scott Downe",website:"http://scottdowne.wordpress.com/"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},src:{elem:"input",type:"text",label:"Tweet Source (# or @)","default":"@popcornjs"},target:"twitter-container",height:{elem:"input",type:"number",label:"Height","default":"200",optional:true},width:{elem:"input",type:"number",label:"Width","default":"250",optional:true}}},_setup:function(h){if(!window.TWTR&&!c){c=true;d.getScript("//widgets.twimg.com/j/2/widget.js")}var e=document.getElementById(h.target);h.container=document.createElement("div");h.container.setAttribute("id",d.guid());h.container.style.display="none";e&&e.appendChild(h.container);var b=h.src||"";e=h.width||250;var i=h.height||200,j=/^@/.test(b),a={version:2,id:h.container.getAttribute("id"),rpp:30,width:e,height:i,interval:6000,theme:{shell:{background:"#ffffff",color:"#000000"},tweets:{background:"#ffffff",color:"#444444",links:"#1985b5"}},features:{loop:true,timestamp:true,avatars:true,hashtags:true,toptweets:true,live:true,scrollbar:false,behavior:"default"}},n=function(f){if(window.TWTR){if(j){a.type="profile";(new TWTR.Widget(a)).render().setUser(b).start()}else{a.type="search";a.search=b;a.subject=b;(new TWTR.Widget(a)).render().start()}}else{setTimeout(function(){n(f)},1)}};n(this)},start:function(a,b){b.container.style.display="inline"},end:function(a,b){b.container.style.display="none"},_teardown:function(a){document.getElementById(a.target)&&document.getElementById(a.target).removeChild(a.container)}})})(Popcorn);(function(b){b.plugin("webpage",{manifest:{about:{name:"Popcorn Webpage Plugin",version:"0.1",author:"@annasob",website:"annasob.wordpress.com"},options:{id:{elem:"input",type:"text",label:"Id",optional:true},start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},src:{elem:"input",type:"url",label:"Webpage URL","default":"http://mozillapopcorn.org"},target:"iframe-container"}},_setup:function(a){var d=document.getElementById(a.target);a.src=a.src.replace(/^(https?:)?(\/\/)?/,"//");a._iframe=document.createElement("iframe");a._iframe.setAttribute("width","100%");a._iframe.setAttribute("height","100%");a._iframe.id=a.id;a._iframe.src=a.src;a._iframe.style.display="none";d&&d.appendChild(a._iframe)},start:function(a,d){d._iframe.src=d.src;d._iframe.style.display="inline"},end:function(a,d){d._iframe.style.display="none"},_teardown:function(a){document.getElementById(a.target)&&document.getElementById(a.target).removeChild(a._iframe)}})})(Popcorn);var wikiCallback;(function(b){b.plugin("wikipedia",{manifest:{about:{name:"Popcorn Wikipedia Plugin",version:"0.1",author:"@annasob",website:"annasob.wordpress.com"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},lang:{elem:"input",type:"text",label:"Language","default":"english",optional:true},src:{elem:"input",type:"url",label:"Wikipedia URL","default":"http://en.wikipedia.org/wiki/Cat"},title:{elem:"input",type:"text",label:"Title","default":"Cats",optional:true},numberofwords:{elem:"input",type:"number",label:"Number of Words","default":"200",optional:true},target:"wikipedia-container"}},_setup:function(a){var c,f=b.guid();if(!a.lang){a.lang="en"}a.numberofwords=a.numberofwords||200;window["wikiCallback"+f]=function(d){a._link=document.createElement("a");a._link.setAttribute("href",a.src);a._link.setAttribute("target","_blank");a._link.innerHTML=a.title||d.parse.displaytitle;a._desc=document.createElement("p");c=d.parse.text["*"].substr(d.parse.text["*"].indexOf("<p>"));c=c.replace(/((<(.|\n)+?>)|(\((.*?)\) )|(\[(.*?)\]))/g,"");c=c.split(" ");a._desc.innerHTML=c.slice(0,c.length>=a.numberofwords?a.numberofwords:c.length).join(" ")+" ...";a._fired=true};a.src&&b.getScript("//"+a.lang+".wikipedia.org/w/api.php?action=parse&props=text&redirects&page="+a.src.slice(a.src.lastIndexOf("/")+1)+"&format=json&callback=wikiCallback"+f)},start:function(a,c){var f=function(){if(c._fired){if(c._link&&c._desc){if(document.getElementById(c.target)){document.getElementById(c.target).appendChild(c._link);document.getElementById(c.target).appendChild(c._desc);c._added=true}}}else{setTimeout(function(){f()},13)}};f()},end:function(a,d){if(d._added){document.getElementById(d.target).removeChild(d._link);document.getElementById(d.target).removeChild(d._desc)}},_teardown:function(a){if(a._added){a._link.parentNode&&document.getElementById(a.target).removeChild(a._link);a._desc.parentNode&&document.getElementById(a.target).removeChild(a._desc);delete a.target}}})})(Popcorn);(function(b){b.plugin("mustache",function(e){var j,a,p,c;b.getScript("http://mustache.github.com/extras/mustache.js");var f=!!e.dynamic,h=typeof e.template,i=typeof e.data,n=document.getElementById(e.target);e.container=n||document.createElement("div");if(h==="function"){if(f){p=e.template}else{c=e.template(e)}}else{c=h==="string"?e.template:""}if(i==="function"){if(f){j=e.data}else{a=e.data(e)}}else{a=i==="string"?JSON.parse(e.data):i==="object"?e.data:""}return{start:function(d,g){var k=function(){if(window.Mustache){if(j){a=j(g)}if(p){c=p(g)}var l=Mustache.to_html(c,a).replace(/^\s*/mg,"");g.container.innerHTML=l}else{setTimeout(function(){k()},10)}};k()},end:function(d,g){g.container.innerHTML=""},_teardown:function(){j=a=p=c=null}}},{about:{name:"Popcorn Mustache Plugin",version:"0.1",author:"David Humphrey (@humphd)",website:"http://vocamus.net/dave"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},target:"mustache-container",template:{elem:"input",type:"text",label:"Template"},data:{elem:"input",type:"text",label:"Data"},dynamic:{elem:"input",type:"checkbox",label:"Dynamic","default":true}}})})(Popcorn);(function(d){function f(a,b){if(a.map){a.map.div.style.display=b}else{setTimeout(function(){f(a,b)},10)}}var e=1;d.plugin("openmap",function(a){var q,b,c,h,i,o,j,m,p=document.getElementById(a.target);q=document.createElement("div");q.id="openmapdiv"+e;q.style.width="100%";q.style.height="100%";e++;p&&p.appendChild(q);m=function(){if(window.OpenLayers&&window.OpenLayers.Layer.Stamen){if(a.location){location=new OpenLayers.LonLat(0,0);d.getJSONP("//tinygeocoder.com/create-api.php?q="+a.location+"&callback=jsonp",function(k){b=new OpenLayers.LonLat(k[1],k[0])})}else{b=new OpenLayers.LonLat(a.lng,a.lat)}a.type=a.type||"ROADMAP";switch(a.type){case"SATELLITE":a.map=new OpenLayers.Map({div:q,maxResolution:0.28125,tileSize:new OpenLayers.Size(512,512)});var g=new OpenLayers.Layer.WorldWind("LANDSAT","//worldwind25.arc.nasa.gov/tile/tile.aspx",2.25,4,{T:"105"});a.map.addLayer(g);h=new OpenLayers.Projection("EPSG:4326");c=new OpenLayers.Projection("EPSG:4326");break;case"TERRAIN":h=new OpenLayers.Projection("EPSG:4326");c=new OpenLayers.Projection("EPSG:4326");a.map=new OpenLayers.Map({div:q,projection:c});g=new OpenLayers.Layer.WMS("USGS Terraserver","//terraserver-usa.org/ogcmap.ashx?",{layers:"DRG"});a.map.addLayer(g);break;case"STAMEN-TONER":case"STAMEN-WATERCOLOR":case"STAMEN-TERRAIN":g=a.type.replace("STAMEN-","").toLowerCase();g=new OpenLayers.Layer.Stamen(g);h=new OpenLayers.Projection("EPSG:4326");c=new OpenLayers.Projection("EPSG:900913");b=b.transform(h,c);a.map=new OpenLayers.Map({div:q,projection:c,displayProjection:h,controls:[new OpenLayers.Control.Navigation,new OpenLayers.Control.PanPanel,new OpenLayers.Control.ZoomPanel]});a.map.addLayer(g);break;default:c=new OpenLayers.Projection("EPSG:900913");h=new OpenLayers.Projection("EPSG:4326");b=b.transform(h,c);a.map=new OpenLayers.Map({div:q,projection:c,displayProjection:h});g=new OpenLayers.Layer.OSM;a.map.addLayer(g)}if(a.map){a.map.setCenter(b,a.zoom||10);a.map.div.style.display="none"}}else{setTimeout(function(){m()},50)}};m();return{_setup:function(k){window.OpenLayers||d.getScript("//openlayers.org/api/OpenLayers.js",function(){d.getScript("//maps.stamen.com/js/tile.stamen.js")});var g=function(){if(k.map){k.zoom=k.zoom||2;if(k.zoom&&typeof k.zoom!=="number"){k.zoom=+k.zoom}k.map.setCenter(b,k.zoom);if(k.markers){var u=OpenLayers.Util.extend({},OpenLayers.Feature.Vector.style["default"]),y=function(v){clickedFeature=v.feature;if(clickedFeature.attributes.text){j=new OpenLayers.Popup.FramedCloud("featurePopup",clickedFeature.geometry.getBounds().getCenterLonLat(),new OpenLayers.Size(120,250),clickedFeature.attributes.text,null,true,function(){o.unselect(this.feature)});clickedFeature.popup=j;j.feature=clickedFeature;k.map.addPopup(j)}},t=function(v){feature=v.feature;if(feature.popup){j.feature=null;k.map.removePopup(feature.popup);feature.popup.destroy();feature.popup=null}},l=function(v){d.getJSONP("//tinygeocoder.com/create-api.php?q="+v.location+"&callback=jsonp",function(w){w=(new OpenLayers.Geometry.Point(w[1],w[0])).transform(h,c);var z=OpenLayers.Util.extend({},u);if(!v.size||isNaN(v.size)){v.size=14}z.pointRadius=v.size;z.graphicOpacity=1;z.externalGraphic=v.icon;w=new OpenLayers.Feature.Vector(w,null,z);if(v.text){w.attributes={text:v.text}}i.addFeatures([w])})};i=new OpenLayers.Layer.Vector("Point Layer",{style:u});k.map.addLayer(i);for(var r=0,x=k.markers.length;r<x;r++){var s=k.markers[r];if(s.text){if(!o){o=new OpenLayers.Control.SelectFeature(i);k.map.addControl(o);o.activate();i.events.on({featureselected:y,featureunselected:t})}}if(s.location){l(s)}else{var A=(new OpenLayers.Geometry.Point(s.lng,s.lat)).transform(h,c),n=OpenLayers.Util.extend({},u);if(!s.size||isNaN(s.size)){s.size=14}n.pointRadius=s.size;n.graphicOpacity=1;n.externalGraphic=s.icon;A=new OpenLayers.Feature.Vector(A,null,n);if(s.text){A.attributes={text:s.text}}i.addFeatures([A])}}}}else{setTimeout(function(){g()},13)}};g()},start:function(k,g){f(g,"block")},end:function(k,g){f(g,"none")},_teardown:function(){p&&p.removeChild(q);q=map=b=c=h=i=o=j=null}}},{about:{name:"Popcorn OpenMap Plugin",version:"0.3",author:"@mapmeld",website:"mapadelsur.blogspot.com"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},target:"map-container",type:{elem:"select",options:["ROADMAP","SATELLITE","TERRAIN"],label:"Map Type",optional:true},zoom:{elem:"input",type:"number",label:"Zoom","default":2},lat:{elem:"input",type:"text",label:"Lat",optional:true},lng:{elem:"input",type:"text",label:"Lng",optional:true},location:{elem:"input",type:"text",label:"Location","default":"Toronto, Ontario, Canada"},markers:{elem:"input",type:"text",label:"List Markers",optional:true}}})})(Popcorn);document.addEventListener("click",function(b){b=b.target;if(b.nodeName==="A"||b.parentNode&&b.parentNode.nodeName==="A"){Popcorn.instances.forEach(function(a){a.options.pauseOnLinkClicked&&a.pause()})}},false);(function(i){var o={},e=0,m=document.createElement("span"),j=["webkit","Moz","ms","O",""],n=["Transform","TransitionDuration","TransitionTimingFunction"],p={},b;document.getElementsByTagName("head")[0].appendChild(m);for(var r=0,h=n.length;r<h;r++){for(var c=0,f=j.length;c<f;c++){b=j[c]+n[r];if(b in m.style){p[n[r].toLowerCase()]=b;break}}}document.getElementsByTagName("head")[0].appendChild(m);i.plugin("wordriver",{manifest:{about:{name:"Popcorn WordRiver Plugin"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},target:"wordriver-container",text:{elem:"input",type:"text",label:"Text","default":"Popcorn.js"},color:{elem:"input",type:"text",label:"Color","default":"Green",optional:true}}},_setup:function(g){g._duration=g.end-g.start;var a;if(!(a=o[g.target])){a=g.target;o[a]=document.createElement("div");var d=document.getElementById(a);d&&d.appendChild(o[a]);o[a].style.height="100%";o[a].style.position="relative";a=o[a]}g._container=a;g.word=document.createElement("span");g.word.style.position="absolute";g.word.style.whiteSpace="nowrap";g.word.style.opacity=0;g.word.style.MozTransitionProperty="opacity, -moz-transform";g.word.style.webkitTransitionProperty="opacity, -webkit-transform";g.word.style.OTransitionProperty="opacity, -o-transform";g.word.style.transitionProperty="opacity, transform";g.word.style[p.transitionduration]="1s, "+g._duration+"s";g.word.style[p.transitiontimingfunction]="linear";g.word.innerHTML=g.text;g.word.style.color=g.color||"black"},start:function(d,a){a._container.appendChild(a.word);a.word.style[p.transform]="";a.word.style.fontSize=~~(30+20*Math.random())+"px";e%=a._container.offsetWidth-a.word.offsetWidth;a.word.style.left=e+"px";e+=a.word.offsetWidth+10;a.word.style[p.transform]="translateY("+(a._container.offsetHeight-a.word.offsetHeight)+"px)";a.word.style.opacity=1;setTimeout(function(){a.word.style.opacity=0},(a.end-a.start-1||1)*1000)},end:function(d,a){a.word.style.opacity=0},_teardown:function(d){var a=document.getElementById(d.target);d.word.parentNode&&d._container.removeChild(d.word);o[d.target]&&!o[d.target].childElementCount&&a&&a.removeChild(o[d.target])&&delete o[d.target]}})})(Popcorn);(function(d){var c=1;d.plugin("timeline",function(e){var h=document.getElementById(e.target),b=document.createElement("div"),j,a=true;if(h&&!h.firstChild){h.appendChild(j=document.createElement("div"));j.style.width="inherit";j.style.height="inherit";j.style.overflow="auto"}else{j=h.firstChild}b.style.display="none";b.id="timelineDiv"+c;e.direction=e.direction||"up";if(e.direction.toLowerCase()==="down"){a=false}if(h&&j){a?j.insertBefore(b,j.firstChild):j.appendChild(b)}c++;b.innerHTML="<p><span id='big' style='font-size:24px; line-height: 130%;' >"+e.title+"</span><br /><span id='mid' style='font-size: 16px;'>"+e.text+"</span><br />"+e.innerHTML;return{start:function(f,g){b.style.display="block";if(g.direction==="down"){j.scrollTop=j.scrollHeight}},end:function(){b.style.display="none"},_teardown:function(){j&&b&&j.removeChild(b)&&!j.firstChild&&h.removeChild(j)}}},{about:{name:"Popcorn Timeline Plugin",version:"0.1",author:"David Seifried @dcseifried",website:"dseifried.wordpress.com"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},target:"feed-container",title:{elem:"input",type:"text",label:"Title"},text:{elem:"input",type:"text",label:"Text"},innerHTML:{elem:"input",type:"text",label:"HTML Code",optional:true},direction:{elem:"select",options:["DOWN","UP"],label:"Direction",optional:true}}})})(Popcorn);(function(d,f){var e={};d.plugin("documentcloud",{manifest:{about:{name:"Popcorn Document Cloud Plugin",version:"0.1",author:"@humphd, @ChrisDeCairos",website:"http://vocamus.net/dave"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},target:"documentcloud-container",width:{elem:"input",type:"text",label:"Width",optional:true},height:{elem:"input",type:"text",label:"Height",optional:true},src:{elem:"input",type:"url",label:"PDF URL","default":"http://www.documentcloud.org/documents/70050-urbina-day-1-in-progress.html"},preload:{elem:"input",type:"checkbox",label:"Preload","default":true},page:{elem:"input",type:"number",label:"Page Number",optional:true},aid:{elem:"input",type:"number",label:"Annotation Id",optional:true}}},_setup:function(j){function a(){function y(o){j._key=o.api.getId();j._changeView=function(p){j.aid?p.pageSet.showAnnotation(p.api.getAnnotation(j.aid)):p.api.setCurrentPage(j.page)}}function t(){e[j._key]={num:1,id:j._containerId};h.loaded=true}h.loaded=false;var F=j.url.replace(/\.html$/,".js"),q=j.target,m=f.getElementById(q),G=f.createElement("div"),H=d.position(m),s=j.width||H.width;H=j.height||H.height;var u=j.sidebar||true,k=j.text||true,l=j.pdf||true,g=j.showAnnotations||true,x=j.zoom||700,A=j.search||true;if(!function(p){var o=false;d.forEach(h.viewers,function(r){if(r.api.getSchema().canonicalURL===p){y(r);r=e[j._key];j._containerId=r.id;r.num+=1;o=true;h.loaded=true}});return o}(j.url)){G.id=j._containerId=d.guid(q);q="#"+G.id;m.appendChild(G);i.trigger("documentready");h.load(F,{width:s,height:H,sidebar:u,text:k,pdf:l,showAnnotations:g,zoom:x,search:A,container:q,afterLoad:j.page||j.aid?function(o){y(o);j._changeView(o);G.style.visibility="hidden";o.elements.pages.hide();t()}:function(o){y(o);t();G.style.visibility="hidden";o.elements.pages.hide()}})}}function c(){window.DV.loaded?a():setTimeout(c,25)}var h=window.DV=window.DV||{},i=this;if(h.loading){c()}else{h.loading=true;h.recordHit="//www.documentcloud.org/pixel.gif";var n=f.createElement("link"),b=f.getElementsByTagName("head")[0];n.rel="stylesheet";n.type="text/css";n.media="screen";n.href="//s3.documentcloud.org/viewer/viewer-datauri.css";b.appendChild(n);h.loaded=false;d.getScript("http://s3.documentcloud.org/viewer/viewer.js",function(){h.loading=false;a()})}},start:function(a,h){var b=f.getElementById(h._containerId),c=DV.viewers[h._key];(h.page||h.aid)&&c&&h._changeView(c);if(b&&c){b.style.visibility="visible";c.elements.pages.show()}},end:function(b,a){var c=f.getElementById(a._containerId);if(c&&DV.viewers[a._key]){c.style.visibility="hidden";DV.viewers[a._key].elements.pages.hide()}},_teardown:function(a){var b=f.getElementById(a._containerId);if((a=a._key)&&DV.viewers[a]&&--e[a].num===0){for(DV.viewers[a].api.unload();b.hasChildNodes();){b.removeChild(b.lastChild)}b.parentNode.removeChild(b)}}})})(Popcorn,window.document);(function(b){b.parser("parseJSON","JSON",function(a){var d={title:"",remote:"",data:[]};b.forEach(a.data,function(c){d.data.push(c)});return d})})(Popcorn);(function(b){b.parser("parseSBV",function(h){var o={title:"",remote:"",data:[]},e=[],c=0,f=0,i=function(k){k=k.split(":");var l=k.length-1,g;try{g=parseInt(k[l-1],10)*60+parseFloat(k[l],10);if(l===2){g+=parseInt(k[0],10)*3600}}catch(d){throw"Bad cue"}return g},j=function(k,d){var g={};g[k]=d;return g};h=h.text.split(/(?:\r\n|\r|\n)/gm);for(f=h.length;c<f;){var m={},a=[],n=h[c++].split(",");try{m.start=i(n[0]);for(m.end=i(n[1]);c<f&&h[c];){a.push(h[c++])}m.text=a.join("<br />");e.push(j("subtitle",m))}catch(p){for(;c<f&&h[c];){c++}}for(;c<f&&!h[c];){c++}}o.data=e;return o})})(Popcorn);(function(d){function f(b,a){var c={};c[b]=a;return c}function e(b){b=b.split(":");try{var a=b[2].split(",");if(a.length===1){a=b[2].split(".")}return parseFloat(b[0],10)*3600+parseFloat(b[1],10)*60+parseFloat(a[0],10)+parseFloat(a[1],10)/1000}catch(c){return 0}}d.parser("parseSRT",function(a){var p={title:"",remote:"",data:[]},b=[],c=0,h=0,i,o,j,m;a=a.text.split(/(?:\r\n|\r|\n)/gm);for(c=a.length-1;c>=0&&!a[c];){c--}j=c+1;for(c=0;c<j;c++){m={};o=[];m.id=parseInt(a[c++],10);i=a[c++].split(/[\t ]*--\>[\t ]*/);m.start=e(i[0]);h=i[1].indexOf(" ");if(h!==-1){i[1]=i[1].substr(0,h)}for(m.end=e(i[1]);c<j&&a[c];){o.push(a[c++])}m.text=o.join("\\N").replace(/\{(\\[\w]+\(?([\w\d]+,?)+\)?)+\}/gi,"");m.text=m.text.replace(/</g,"&lt;").replace(/>/g,"&gt;");m.text=m.text.replace(/&lt;(\/?(font|b|u|i|s))((\s+(\w|\w[\w\-]*\w)(\s*=\s*(?:\".*?\"|'.*?'|[^'\">\s]+))?)+\s*|\s*)(\/?)&gt;/gi,"<$1$3$7>");m.text=m.text.replace(/\\N/gi,"<br />");b.push(f("subtitle",m))}p.data=b;return p})})(Popcorn);(function(f){function c(o,p){var a=o.substr(10).split(","),b;b={start:g(a[p.start]),end:g(a[p.end])};if(b.start===-1||b.end===-1){throw"Invalid time"}var d=m.call(e,/\{(\\[\w]+\(?([\w\d]+,?)+\)?)+\}/gi,""),j=d.replace,e;e=a.length;m=[];for(var i=p.text;i<e;i++){m.push(a[i])}e=m.join(",");var m=e.replace;b.text=j.call(d,/\\N/gi,"<br />");return b}function g(b){var a=b.split(":");if(b.length!==10||a.length<3){return -1}return parseInt(a[0],10)*3600+parseInt(a[1],10)*60+parseFloat(a[2],10)}function h(a,b){var d={};d[a]=b;return d}f.parser("parseSSA",function(a){var b={title:"",remote:"",data:[]},d=[],e=0,i;a=a.text.split(/(?:\r\n|\r|\n)/gm);for(i=a.length;e<i&&a[e]!=="[Events]";){e++}var o=a[++e].substr(8).split(", "),j={},m,p;p=0;for(m=o.length;p<m;p++){if(o[p]==="Start"){j.start=p}else{if(o[p]==="End"){j.end=p}else{if(o[p]==="Text"){j.text=p}}}}for(;++e<i&&a[e]&&a[e][0]!=="[";){try{d.push(h("subtitle",c(a[e],j)))}catch(q){}}b.data=d;return b})})(Popcorn);(function(c){function f(i,j,g){var a=i.firstChild;i=h(i,g);g=[];for(var d;a;){if(a.nodeType===1){if(a.nodeName==="p"){g.push(n(a,j,i))}else{if(a.nodeName==="div"){d=e(a.getAttribute("begin"));if(d<0){d=j}g.push.apply(g,f(a,d,i))}}}a=a.nextSibling}return g}function h(g,a){var d=g.getAttribute("region");return d!==null?d:a||""}function n(g,i,d){var a={};a.text=(g.textContent||g.text).replace(b,"").replace(m,"<br />");a.id=g.getAttribute("xml:id")||g.getAttribute("id");a.start=e(g.getAttribute("begin"),i);a.end=e(g.getAttribute("end"),i);a.target=h(g,d);if(a.end<0){a.end=e(g.getAttribute("duration"),0);if(a.end>=0){a.end+=a.start}else{a.end=Number.MAX_VALUE}}return{subtitle:a}}function e(i,j){var g;if(!i){return -1}try{return c.util.toSeconds(i)}catch(a){for(var d=i.length-1;d>=0&&i[d]<="9"&&i[d]>="0";){d--}g=d;d=parseFloat(i.substring(0,g));g=i.substring(g);return d*({h:3600,m:60,s:1,ms:0.001}[g]||-1)+(j||0)}}var b=/^[\s]+|[\s]+$/gm,m=/(?:\r\n|\r|\n)/gm;c.parser("parseTTML",function(d){var a={title:"",remote:"",data:[]};if(!d.xml||!d.xml.documentElement){return a}d=d.xml.documentElement.firstChild;if(!d){return a}for(;d.nodeName!=="body";){d=d.nextSibling}if(d){a.data=f(d,0)}return a})})(Popcorn);(function(b){b.parser("parseTTXT",function(n){var c={title:"",remote:"",data:[]},a=function(j){j=j.split(":");var g=0;try{return parseFloat(j[0],10)*60*60+parseFloat(j[1],10)*60+parseFloat(j[2],10)}catch(d){g=0}return g},h=function(j,g){var d={};d[j]=g;return d};n=n.xml.lastChild.lastChild;for(var i=Number.MAX_VALUE,e=[];n;){if(n.nodeType===1&&n.nodeName==="TextSample"){var f={};f.start=a(n.getAttribute("sampleTime"));f.text=n.getAttribute("text");if(f.text){f.end=i-0.001;e.push(h("subtitle",f))}i=f.start}n=n.previousSibling}c.data=e.reverse();return c})})(Popcorn);(function(d){function f(a){var h=a.split(":");a=a.length;var b;if(a!==12&&a!==9){throw"Bad cue"}a=h.length-1;try{b=parseInt(h[a-1],10)*60+parseFloat(h[a],10);if(a===2){b+=parseInt(h[0],10)*3600}}catch(c){throw"Bad cue"}return b}function e(b,a){var c={};c[b]=a;return c}d.parser("parseVTT",function(b){var a={title:"",remote:"",data:[]},c=[],h=0,i=0,j,p;b=b.text.split(/(?:\r\n|\r|\n)/gm);i=b.length;if(i===0||b[0]!=="WEBVTT"){return a}for(h++;h<i;){j=[];try{for(var m=h;m<i&&!b[m];){m++}h=m;var o=b[h++];m=void 0;var q={};if(!o||o.indexOf("-->")===-1){throw"Bad cue"}m=o.replace(/--\>/," --> ").split(/[\t ]+/);if(m.length<2){throw"Bad cue"}q.id=o;q.start=f(m[0]);q.end=f(m[2]);for(p=q;h<i&&b[h];){j.push(b[h++])}p.text=j.join("<br />");c.push(e("subtitle",p))}catch(s){for(h=h;h<i&&b[h];){h++}h=h}}a.data=c;return a})})(Popcorn);(function(b){b.parser("parseXML","XML",function(e){var j={title:"",remote:"",data:[]},a={},p=function(d){d=d.split(":");if(d.length===1){return parseFloat(d[0],10)}else{if(d.length===2){return parseFloat(d[0],10)+parseFloat(d[1]/12,10)}else{if(d.length===3){return parseInt(d[0]*60,10)+parseFloat(d[1],10)+parseFloat(d[2]/12,10)}else{if(d.length===4){return parseInt(d[0]*3600,10)+parseInt(d[1]*60,10)+parseFloat(d[2],10)+parseFloat(d[3]/12,10)}}}}},c=function(o){for(var g={},l=0,m=o.length;l<m;l++){var k=o.item(l).nodeName,r=o.item(l).nodeValue,q=a[r];if(k==="in"){g.start=p(r)}else{if(k==="out"){g.end=p(r)}else{if(k==="resourceid"){for(var d in q){if(q.hasOwnProperty(d)){if(!g[d]&&d!=="id"){g[d]=q[d]}}}}else{g[k]=r}}}}return g},f=function(d,g){var k={};k[d]=g;return k},h=function(d,g,k){var l={};b.extend(l,g,c(d.attributes),{text:d.textContent||d.text});g=d.childNodes;if(g.length<1||g.length===1&&g[0].nodeType===3){if(k){a[l.id]=l}else{j.data.push(f(d.nodeName,l))}}else{for(d=0;d<g.length;d++){g[d].nodeType===1&&h(g[d],l,k)}}};e=e.documentElement.childNodes;for(var i=0,n=e.length;i<n;i++){if(e[i].nodeType===1){e[i].nodeName==="manifest"?h(e[i],{},true):h(e[i],{},false)}}return j})})(Popcorn);(function(){var d=false,c=false;Popcorn.player("soundcloud",{_canPlayType:function(a,b){return/(?:http:\/\/www\.|http:\/\/|www\.|\.|^)(soundcloud)/.test(b)&&a.toLowerCase()!=="video"},_setup:function(s){function h(){d=true;SC.initialize({client_id:"PRaNFlda6Bhf5utPjUsptg"});SC.get("/resolve",{url:i.src},function(f){i.width=i.style.width?""+i.offsetWidth:"560";i.height=i.style.height?""+i.offsetHeight:"315";n.scrolling="no";n.frameborder="no";n.id="soundcloud-"+Popcorn.guid();n.src="http://w.soundcloud.com/player/?url="+f.uri+"&show_artwork=false&buying=false&liking=false&sharing=false";n.width="100%";n.height="100%";s.loadListener=function(){s.widget=z=SC.Widget(n.id);z.bind(SC.Widget.Events.FINISH,function(){i.pause();i.dispatchEvent("ended")});z.bind(SC.Widget.Events.PLAY_PROGRESS,function(g){j=g.currentPosition/1000;i.dispatchEvent("timeupdate")});z.bind(SC.Widget.Events.PLAY,function(){e=o=false;i.dispatchEvent("play");i.dispatchEvent("playing");i.currentTime=j;m.next()});z.bind(SC.Widget.Events.PAUSE,function(){e=o=true;i.dispatchEvent("pause");m.next()});z.bind(SC.Widget.Events.READY,function(){z.getDuration(function(g){a=g/1000;i.style.visibility="visible";i.dispatchEvent("durationchange");i.readyState=4;i.dispatchEvent("readystatechange");i.dispatchEvent("loadedmetadata");i.dispatchEvent("loadeddata");i.dispatchEvent("canplaythrough");i.dispatchEvent("load");!i.paused&&i.play()});z.getVolume(function(g){q=g/100})})};n.addEventListener("load",s.loadListener,false);i.appendChild(n)})}function b(){if(c){(function f(){setTimeout(function(){d?h():f()},100)})()}else{c=true;Popcorn.getScript("http://w.soundcloud.com/player/api.js",function(){Popcorn.getScript("http://connect.soundcloud.com/sdk.js",function(){h()})})}}var i=this,n=document.createElement("iframe"),q=1,j=0,e=true,o=true,z,a=0,p=false,m=Popcorn.player.playerQueue();s._container=n;i.style.visibility="hidden";i.play=function(){e=false;m.add(function(){if(o){z&&z.play()}else{m.next()}})};i.pause=function(){e=true;m.add(function(){if(o){m.next()}else{z&&z.pause()}})};Object.defineProperties(i,{muted:{set:function(f){if(f){z&&z.getVolume(function(g){q=g/100});z&&z.setVolume(0);p=true}else{z&&z.setVolume(q*100);p=false}i.dispatchEvent("volumechange")},get:function(){return p}},volume:{set:function(f){z&&z.setVolume(f*100);q=f;i.dispatchEvent("volumechange")},get:function(){return p?0:q}},currentTime:{set:function(f){j=f;z&&z.seekTo(f*1000);i.dispatchEvent("seeked");i.dispatchEvent("timeupdate")},get:function(){return j}},duration:{get:function(){return a}},paused:{get:function(){return e}}});d?h():b()},_teardown:function(e){var h=e.widget,b=SC.Widget.Events,j=e._container;e.destroyed=true;if(h){for(var a in b){h&&h.unbind(b[a])}}else{j.removeEventListener("load",e.loadEventListener,false)}}})})();(function(){function d(a){var b=d.options;a=b.parser[b.strictMode?"strict":"loose"].exec(a);for(var h={},e=14;e--;){h[b.key[e]]=a[e]||""}h[b.q.name]={};h[b.key[12]].replace(b.q.parser,function(f,g,j){if(g){h[b.q.name][g]=j}});return h}function c(a,b){return/player.vimeo.com\/video\/\d+/.test(b)||/vimeo.com\/\d+/.test(b)}d.options={strictMode:false,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}};Popcorn.player("vimeo",{_canPlayType:c,_setup:function(h){function g(k,r){var f=J.src.split("?")[0],l=JSON.stringify({method:k,value:r});if(f.substr(0,2)==="//"){f=window.location.protocol+f}J.contentWindow?J.contentWindow.postMessage(l,f):I.unload()}function s(l){if(l.origin==="http://player.vimeo.com"){var k;try{k=JSON.parse(l.data)}catch(f){console.warn(f)}if(k.player_id==a){k.method&&o[k.method]&&o[k.method](k);k.event&&b[k.event]&&b[k.event](k)}}}function m(){x||(x=setInterval(function(){I.dispatchEvent("timeupdate")},A));p||(p=setInterval(function(){g("getCurrentTime")},i))}function q(){if(x){clearInterval(x);x=0}if(p){clearInterval(p);p=0}}var A=250,i=16,j={MEDIA_ERR_ABORTED:1,MEDIA_ERR_NETWORK:2,MEDIA_ERR_DECODE:3,MEDIA_ERR_SRC_NOT_SUPPORTED:4},a,I=this,n={q:[],queue:function(f){this.q.push(f);this.process()},process:function(){if(y){for(;this.q.length;){this.q.shift()()}}}},p,x,y,J=document.createElement("iframe"),e={error:null,src:I.src,NETWORK_EMPTY:0,NETWORK_IDLE:1,NETWORK_LOADING:2,NETWORK_NO_SOURCE:3,networkState:0,HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4,readyState:0,seeking:false,currentTime:0,duration:NaN,paused:true,ended:false,autoplay:false,loop:false,volume:1,muted:false,width:0,height:0};Popcorn.forEach("error networkState readyState seeking duration paused ended".split(" "),function(f){Object.defineProperty(I,f,{get:function(){return e[f]}})});Object.defineProperties(I,{src:{get:function(){return e.src},set:function(f){e.src=f;I.load()}},currentTime:{get:function(){return e.currentTime},set:function(f){n.queue(function(){g("seekTo",f)});e.seeking=true;I.dispatchEvent("seeking")}},autoplay:{get:function(){return e.autoplay},set:function(f){e.autoplay=!!f}},loop:{get:function(){return e.loop},set:function(f){e.loop=!!f;n.queue(function(){g("setLoop",loop)})}},volume:{get:function(){return e.volume},set:function(f){e.volume=f;n.queue(function(){g("setVolume",e.muted?0:e.volume)});I.dispatchEvent("volumechange")}},muted:{get:function(){return e.muted},set:function(f){e.muted=!!f;n.queue(function(){g("setVolume",e.muted?0:e.volume)});I.dispatchEvent("volumechange")}},width:{get:function(){return J.width},set:function(f){J.width=f}},height:{get:function(){return J.height},set:function(f){J.height=f}}});var o={getCurrentTime:function(f){e.currentTime=parseFloat(f.value)},getDuration:function(f){e.duration=parseFloat(f.value);if(!isNaN(e.duration)){e.readyState=4;I.dispatchEvent("durationchange");I.dispatchEvent("loadedmetadata");I.dispatchEvent("loadeddata");I.dispatchEvent("canplay");I.dispatchEvent("canplaythrough")}},getVolume:function(f){e.volume=parseFloat(f.value)}},b={ready:function(){g("addEventListener","loadProgress");g("addEventListener","playProgress");g("addEventListener","play");g("addEventListener","pause");g("addEventListener","finish");g("addEventListener","seek");g("getDuration");y=true;n.process();I.dispatchEvent("loadstart")},loadProgress:function(f){I.dispatchEvent("progress");e.duration=parseFloat(f.data.duration)},playProgress:function(f){e.currentTime=parseFloat(f.data.seconds)},play:function(){if(e.seeking){e.seeking=false;I.dispatchEvent("seeked")}e.paused=false;e.ended=false;m();I.dispatchEvent("play")},pause:function(){e.paused=true;q();I.dispatchEvent("pause")},finish:function(){e.ended=true;q();I.dispatchEvent("ended")},seek:function(f){e.currentTime=parseFloat(f.data.seconds);e.seeking=false;e.ended=false;I.dispatchEvent("timeupdate");I.dispatchEvent("seeked")}};I.load=function(){y=false;a=Popcorn.guid();var t=d(e.src),l={},f=[],k={api:1,player_id:a};if(c(I.nodeName,t.source)){Popcorn.extend(l,h);Popcorn.extend(l,t.queryKey);Popcorn.extend(l,k);t="http://player.vimeo.com/video/"+/\d+$/.exec(t.path)+"?";for(var r in l){l.hasOwnProperty(r)&&f.push(encodeURIComponent(r)+"="+encodeURIComponent(l[r]))}t+=f.join("&");e.loop=!!t.match(/loop=1/);e.autoplay=!!t.match(/autoplay=1/);J.width=I.style.width?I.style.width:500;J.height=I.style.height?I.style.height:281;J.frameBorder=0;J.webkitAllowFullScreen=true;J.mozAllowFullScreen=true;J.allowFullScreen=true;J.src=t;I.appendChild(J)}else{t=e.MEDIA_ERR_SRC_NOT_SUPPORTED;e.error={};Popcorn.extend(e.error,j);e.error.code=t;I.dispatchEvent("error")}};I.unload=function(){q();window.removeEventListener("message",s,false)};I.play=function(){n.queue(function(){g("play")})};I.pause=function(){n.queue(function(){g("pause")})};setTimeout(function(){window.addEventListener("message",s,false);I.load()},0)},_teardown:function(){this.unload&&this.unload()}})})();(function(d,f){d.onYouTubePlayerAPIReady=function(){onYouTubePlayerAPIReady.ready=true;for(var a=0;a<onYouTubePlayerAPIReady.waiting.length;a++){onYouTubePlayerAPIReady.waiting[a]()}};if(d.YT){d.quarantineYT=d.YT;d.YT=null}onYouTubePlayerAPIReady.waiting=[];var e=false;f.player("youtube",{_canPlayType:function(a,b){return typeof b==="string"&&/(?:http:\/\/www\.|http:\/\/|www\.|\.|^)(youtu)/.test(b)&&a.toLowerCase()!=="video"},_setup:function(s){if(!d.YT&&!e){e=true;f.getScript("//youtube.com/player_api")}var z=this,c=false,p=document.createElement("div"),a=0,h=true,j=false,i=0,m=false,y=100,q=f.player.playerQueue(),b=function(){f.player.defineProperty(z,"currentTime",{set:function(g){if(!s.destroyed){j=true;a=Math.round(+g*100)/100}},get:function(){return a}});f.player.defineProperty(z,"paused",{get:function(){return h}});f.player.defineProperty(z,"muted",{set:function(g){if(s.destroyed){return g}if(s.youtubeObject.isMuted()!==g){g?s.youtubeObject.mute():s.youtubeObject.unMute();m=s.youtubeObject.isMuted();z.dispatchEvent("volumechange")}return s.youtubeObject.isMuted()},get:function(){if(s.destroyed){return 0}return s.youtubeObject.isMuted()}});f.player.defineProperty(z,"volume",{set:function(g){if(s.destroyed){return g}if(s.youtubeObject.getVolume()/100!==g){s.youtubeObject.setVolume(g*100);y=s.youtubeObject.getVolume();z.dispatchEvent("volumechange")}return s.youtubeObject.getVolume()/100},get:function(){if(s.destroyed){return 0}return s.youtubeObject.getVolume()/100}});z.play=function(){if(!s.destroyed){h=false;q.add(function(){if(s.youtubeObject.getPlayerState()!==1){j=false;s.youtubeObject.playVideo()}else{q.next()}})}};z.pause=function(){if(!s.destroyed){h=true;q.add(function(){s.youtubeObject.getPlayerState()!==2?s.youtubeObject.pauseVideo():q.next()})}}};p.id=z.id+f.guid();s._container=p;z.appendChild(p);var o=function(){var r,l,n,t,v=true,u=function(){if(!s.destroyed){if(j){if(a===s.youtubeObject.getCurrentTime()){j=false;z.dispatchEvent("seeked");z.dispatchEvent("timeupdate")}else{s.youtubeObject.seekTo(a)}}else{a=s.youtubeObject.getCurrentTime();z.dispatchEvent("timeupdate")}setTimeout(u,250)}},w=function(x){var B=s.youtubeObject.getDuration();if(isNaN(B)||B===0){setTimeout(function(){w(x*2)},x*1000)}else{z.duration=B;z.dispatchEvent("durationchange");z.dispatchEvent("loadedmetadata");z.dispatchEvent("loadeddata");z.readyState=4;u();z.dispatchEvent("canplaythrough")}};s.controls=+s.controls===0||+s.controls===1?s.controls:1;s.annotations=+s.annotations===1||+s.annotations===3?s.annotations:1;r=/^.*(?:\/|v=)(.{11})/.exec(z.src)[1];l=(z.src.split("?")[1]||"").replace(/v=.{11}/,"");l=l.replace(/&t=(?:(\d+)m)?(?:(\d+)s)?/,function(D,x,C){x|=0;C|=0;i=+C+x*60;return""});l=l.replace(/&start=(\d+)?/,function(x,B){B|=0;i=B;return""});c=/autoplay=1/.test(l);l=l.split(/[\&\?]/g);n={wmode:"transparent"};for(var g=0;g<l.length;g++){t=l[g].split("=");n[t[0]]=t[1]}s.youtubeObject=new YT.Player(p.id,{height:"100%",width:"100%",wmode:"transparent",playerVars:n,videoId:r,events:{onReady:function(){y=z.volume;m=z.muted;k();h=z.paused;b();s.youtubeObject.playVideo();z.currentTime=i},onStateChange:function(x){if(!(s.destroyed||x.data===-1)){if(x.data===2){h=true;z.dispatchEvent("pause");q.next()}else{if(x.data===1&&!v){h=false;z.dispatchEvent("play");z.dispatchEvent("playing");q.next()}else{if(x.data===0){z.dispatchEvent("ended")}else{if(x.data===1&&v){v=false;if(c||!z.paused){h=false}h&&s.youtubeObject.pauseVideo();w(0.025)}}}}}},onError:function(x){if([2,100,101,150].indexOf(x.data)!==-1){z.error={customCode:x.data};z.dispatchEvent("error")}}}});var k=function(){if(!s.destroyed){if(m!==s.youtubeObject.isMuted()){m=s.youtubeObject.isMuted();z.dispatchEvent("volumechange")}if(y!==s.youtubeObject.getVolume()){y=s.youtubeObject.getVolume();z.dispatchEvent("volumechange")}setTimeout(k,250)}}};onYouTubePlayerAPIReady.ready?o():onYouTubePlayerAPIReady.waiting.push(o)},_teardown:function(a){a.destroyed=true;var b=a.youtubeObject;if(b){b.stopVideo();b.clearVideo&&b.clearVideo()}this.removeChild(document.getElementById(a._container.id))}})})(window,Popcorn);