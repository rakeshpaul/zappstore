/*7280b4650ab0b98b2c4f325946dc9adcfea240bd*/(function(g,t){function I(b,c){return function(){if(E.plugin.debug){return b.apply(this,arguments)}try{return b.apply(this,arguments)}catch(d){E.plugin.errors.push({plugin:c,thrown:d,source:b.toString()});this.emit("pluginerror",E.plugin.errors)}}}if(t.addEventListener){var G=Array.prototype,H=Object.prototype,z=G.forEach,J=G.slice,D=H.hasOwnProperty,w=H.toString,v=g.Popcorn,k=[],C=false,F={events:{hash:{},apis:{}}},a=function(){return g.requestAnimationFrame||g.webkitRequestAnimationFrame||g.mozRequestAnimationFrame||g.oRequestAnimationFrame||g.msRequestAnimationFrame||function(b){g.setTimeout(b,16)}}(),E=function(b,c){return new E.p.init(b,c||null)};E.version="1.3";E.isSupported=true;E.instances=[];E.p=E.prototype={init:function(h,i){var e,d=this;if(typeof h==="function"){if(t.readyState==="complete"){h(t,E)}else{k.push(h);if(!C){C=true;var f=function(){t.removeEventListener("DOMContentLoaded",f,false);for(var m=0,j=k.length;m<j;m++){k[m].call(t,E)}k=null};t.addEventListener("DOMContentLoaded",f,false)}}}else{if(typeof h==="string"){try{e=t.querySelector(h)}catch(c){throw Error("Popcorn.js Error: Invalid media element selector: "+h)}}this.media=e||h;e=this.media.nodeName&&this.media.nodeName.toLowerCase()||"video";this[e]=this.media;this.options=i||{};this.id=this.options.id||E.guid(e);if(E.byId(this.id)){throw Error("Popcorn.js Error: Cannot use duplicate ID ("+this.id+")")}this.isDestroyed=false;this.data={running:{cue:[]},timeUpdate:E.nop,disabled:{},events:{},hooks:{},history:[],state:{volume:this.media.volume},trackRefs:{},trackEvents:{byStart:[{start:-1,end:-1}],byEnd:[{start:-1,end:-1}],animating:[],startIndex:0,endIndex:0,previousUpdateTime:-1}};E.instances.push(this);var b=function(){if(d.media.currentTime<0){d.media.currentTime=0}d.media.removeEventListener("loadeddata",b,false);var o,j,n,p,m;o=d.media.duration;o=o!=o?Number.MAX_VALUE:o+1;E.addTrackEvent(d,{start:o,end:o});if(d.options.frameAnimation){d.data.timeUpdate=function(){E.timeUpdate(d,{});E.forEach(E.manifest,function(s,r){if(j=d.data.running[r]){p=j.length;for(var q=0;q<p;q++){n=j[q];(m=n._natives)&&m.frame&&m.frame.call(d,{},n,d.currentTime())}}});d.emit("timeupdate");!d.isDestroyed&&a(d.data.timeUpdate)};!d.isDestroyed&&a(d.data.timeUpdate)}else{d.data.timeUpdate=function(q){E.timeUpdate(d,q)};d.isDestroyed||d.media.addEventListener("timeupdate",d.data.timeUpdate,false)}};Object.defineProperty(this,"error",{get:function(){return d.media.error}});d.media.readyState>=2?b():d.media.addEventListener("loadeddata",b,false);return this}}};E.p.init.prototype=E.p;E.byId=function(c){for(var e=E.instances,b=e.length,d=0;d<b;d++){if(e[d].id===c){return e[d]}}return null};E.forEach=function(d,f,e){if(!d||!f){return{}}e=e||this;var c,b;if(z&&d.forEach===z){return d.forEach(f,e)}if(w.call(d)==="[object NodeList]"){c=0;for(b=d.length;c<b;c++){f.call(e,d[c],c,d)}return d}for(c in d){D.call(d,c)&&f.call(e,d[c],c,d)}return d};E.extend=function(b){var c=J.call(arguments,1);E.forEach(c,function(d){for(var e in d){b[e]=d[e]}});return b};E.extend(E,{noConflict:function(b){if(b){g.Popcorn=v}return E},error:function(b){throw Error(b)},guid:function(b){E.guid.counter++;return(b?b:"")+(+new Date+E.guid.counter)},sizeOf:function(c){var d=0,b;for(b in c){d++}return d},isArray:Array.isArray||function(b){return w.call(b)==="[object Array]"},nop:function(){},position:function(f){f=f.getBoundingClientRect();var i={},d=t.documentElement,c=t.body,b,e,h;b=d.clientTop||c.clientTop||0;e=d.clientLeft||c.clientLeft||0;h=g.pageYOffset&&d.scrollTop||c.scrollTop;d=g.pageXOffset&&d.scrollLeft||c.scrollLeft;b=Math.ceil(f.top+h-b);e=Math.ceil(f.left+d-e);for(var j in f){i[j]=Math.round(f[j])}return E.extend({},i,{top:b,left:e})},disable:function(c,e){if(!c.data.disabled[e]){c.data.disabled[e]=true;for(var b=c.data.running[e].length-1,d;b>=0;b--){d=c.data.running[e][b];d._natives.end.call(c,null,d)}}return c},enable:function(c,e){if(c.data.disabled[e]){c.data.disabled[e]=false;for(var b=c.data.running[e].length-1,d;b>=0;b--){d=c.data.running[e][b];d._natives.start.call(c,null,d)}}return c},destroy:function(h){var i=h.data.events,e=h.data.trackEvents,d,f,c,b;for(f in i){d=i[f];for(c in d){delete d[c]}i[f]=null}for(b in E.registryByName){E.removePlugin(h,b)}e.byStart.length=0;e.byEnd.length=0;if(!h.isDestroyed){h.data.timeUpdate&&h.media.removeEventListener("timeupdate",h.data.timeUpdate,false);h.isDestroyed=true}}});E.guid.counter=1;E.extend(E.p,function(){var b={};E.forEach("load play pause currentTime playbackRate volume duration preload playbackRate autoplay loop controls muted buffered readyState seeking paused played seekable ended".split(/\s+/g),function(c){b[c]=function(d){var e;if(typeof this.media[c]==="function"){if(d!=null&&/play|pause/.test(c)){this.media.currentTime=E.util.toSeconds(d)}this.media[c]();return this}if(d!=null){e=this.media[c];this.media[c]=d;e!==d&&this.emit("attrchange",{attribute:c,previousValue:e,currentValue:d});return this}return this.media[c]}});return b}());E.forEach("enable disable".split(" "),function(b){E.p[b]=function(c){return E[b](this,c)}});E.extend(E.p,{roundTime:function(){return Math.round(this.media.currentTime)},exec:function(f,i,d){var c=arguments.length,b,e;try{e=E.util.toSeconds(f)}catch(h){}if(typeof e==="number"){f=e}if(typeof f==="number"&&c===2){d=i;i=f;f=E.guid("cue")}else{if(c===1){i=-1}else{if(b=this.getTrackEvent(f)){if(typeof f==="string"&&c===2){if(typeof i==="number"){d=b._natives.start}if(typeof i==="function"){d=i;i=b.start}}}else{if(c>=2){if(typeof i==="string"){try{e=E.util.toSeconds(i)}catch(j){}i=e}if(typeof i==="number"){d=E.nop()}if(typeof i==="function"){d=i;i=-1}}}}}E.addTrackEvent(this,{id:f,start:i,end:i+1,_running:false,_natives:{start:d||E.nop,end:E.nop,type:"cue"}});return this},mute:function(b){b=b==null||b===true?"muted":"unmuted";if(b==="unmuted"){this.media.muted=false;this.media.volume=this.data.state.volume}if(b==="muted"){this.data.state.volume=this.media.volume;this.media.muted=true}this.emit(b);return this},unmute:function(b){return this.mute(b==null?false:!b)},position:function(){return E.position(this.media)},toggle:function(b){return E[this.data.disabled[b]?"enable":"disable"](this,b)},defaults:function(b,c){if(E.isArray(b)){E.forEach(b,function(d){for(var e in d){this.defaults(e,d[e])}},this);return this}if(!this.options.defaults){this.options.defaults={}}this.options.defaults[b]||(this.options.defaults[b]={});E.extend(this.options.defaults[b],c);return this}});E.Events={UIEvents:"blur focus focusin focusout load resize scroll unload",MouseEvents:"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave click dblclick",Events:"loadstart progress suspend emptied stalled play pause error loadedmetadata loadeddata waiting playing canplay canplaythrough seeking seeked timeupdate ended ratechange durationchange volumechange"};E.Events.Natives=E.Events.UIEvents+" "+E.Events.MouseEvents+" "+E.Events.Events;F.events.apiTypes=["UIEvents","MouseEvents","Events"];(function(c,h){for(var e=F.events.apiTypes,d=c.Natives.split(/\s+/g),f=0,b=d.length;f<b;f++){h.hash[d[f]]=true}e.forEach(function(j){h.apis[j]={};for(var n=c[j].split(/\s+/g),i=n.length,m=0;m<i;m++){h.apis[j][n[m]]=true}})})(E.Events,F.events);E.events={isNative:function(b){return !!F.events.hash[b]},getInterface:function(h){if(!E.events.isNative(h)){return false}var i=F.events,e=i.apiTypes;i=i.apis;for(var d=0,f=e.length,c,b;d<f;d++){b=e[d];if(i[b][h]){c=b;break}}return c},all:E.Events.Natives.split(/\s+/g),fn:{trigger:function(c,d){var b;if(this.data.events[c]&&E.sizeOf(this.data.events[c])){if(b=E.events.getInterface(c)){b=t.createEvent(b);b.initEvent(c,true,true,g,1);this.media.dispatchEvent(b);return this}E.forEach(this.data.events[c],function(e){e.call(this,d)},this)}return this},listen:function(c,h){var e=this,d=true,f=E.events.hooks[c],b;if(!this.data.events[c]){this.data.events[c]={};d=false}if(f){f.add&&f.add.call(this,{},h);if(f.bind){c=f.bind}if(f.handler){b=h;h=function(i){f.handler.call(e,i,b)}}d=true;if(!this.data.events[c]){this.data.events[c]={};d=false}}this.data.events[c][h.name||h.toString()+E.guid()]=h;!d&&E.events.all.indexOf(c)>-1&&this.media.addEventListener(c,function(i){E.forEach(e.data.events[c],function(j){typeof j==="function"&&j.call(e,i)})},false);return this},unlisten:function(b,c){if(this.data.events[b]&&this.data.events[b][c]){delete this.data.events[b][c];return this}this.data.events[b]=null;return this}},hooks:{canplayall:{bind:"canplaythrough",add:function(c,d){var b=false;if(this.media.readyState){d.call(this,c);b=true}this.data.hooks.canplayall={fired:b}},handler:function(b,c){if(!this.data.hooks.canplayall.fired){c.call(this,b);this.data.hooks.canplayall.fired=true}}}}};E.forEach([["trigger","emit"],["listen","on"],["unlisten","off"]],function(b){E.p[b[0]]=E.p[b[1]]=E.events.fn[b[0]]});E.addTrackEvent=function(h,i){var e,d;if(i.id){e=h.getTrackEvent(i.id)}if(e){d=true;i=E.extend({},e,i);h.removeTrackEvent(i.id)}if(i&&i._natives&&i._natives.type&&h.options.defaults&&h.options.defaults[i._natives.type]){i=E.extend({},h.options.defaults[i._natives.type],i)}if(i._natives){i._id=i.id||i._id||E.guid(i._natives.type);h.data.history.push(i._id)}i.start=E.util.toSeconds(i.start,h.options.framerate);i.end=E.util.toSeconds(i.end,h.options.framerate);var f=h.data.trackEvents.byStart,c=h.data.trackEvents.byEnd,b;for(b=f.length-1;b>=0;b--){if(i.start>=f[b].start){f.splice(b+1,0,i);break}}for(f=c.length-1;f>=0;f--){if(i.end>c[f].end){c.splice(f+1,0,i);break}}if(i.end>h.media.currentTime&&i.start<=h.media.currentTime){i._running=true;h.data.running[i._natives.type].push(i);h.data.disabled[i._natives.type]||i._natives.start.call(h,null,i)}b<=h.data.trackEvents.startIndex&&i.start<=h.data.trackEvents.previousUpdateTime&&h.data.trackEvents.startIndex++;f<=h.data.trackEvents.endIndex&&i.end<h.data.trackEvents.previousUpdateTime&&h.data.trackEvents.endIndex++;this.timeUpdate(h,null,true);i._id&&E.addTrackEvent.ref(h,i);if(d){d=i._natives.type==="cue"?"cuechange":"trackchange";h.emit(d,{id:i.id,previousValue:{time:e.start,fn:e._natives.start},currentValue:{time:i.start,fn:i._natives.start}})}};E.addTrackEvent.ref=function(b,c){b.data.trackRefs[c._id]=c;return b};E.removeTrackEvent=function(h,e){for(var d,o,n=h.data.history.length,m=h.data.trackEvents.byStart.length,i=0,f=0,b=[],p=[],c=[],j=[];--m>-1;){d=h.data.trackEvents.byStart[i];o=h.data.trackEvents.byEnd[i];if(!d._id){b.push(d);p.push(o)}if(d._id){d._id!==e&&b.push(d);o._id!==e&&p.push(o);if(d._id===e){f=i;d._natives._teardown&&d._natives._teardown.call(h,d)}}i++}m=h.data.trackEvents.animating.length;i=0;if(m){for(;--m>-1;){d=h.data.trackEvents.animating[i];d._id||c.push(d);d._id&&d._id!==e&&c.push(d);i++}}f<=h.data.trackEvents.startIndex&&h.data.trackEvents.startIndex--;f<=h.data.trackEvents.endIndex&&h.data.trackEvents.endIndex--;h.data.trackEvents.byStart=b;h.data.trackEvents.byEnd=p;h.data.trackEvents.animating=c;for(m=0;m<n;m++){h.data.history[m]!==e&&j.push(h.data.history[m])}h.data.history=j;E.removeTrackEvent.ref(h,e)};E.removeTrackEvent.ref=function(b,c){delete b.data.trackRefs[c];return b};E.getTrackEvents=function(d){var f=[];d=d.data.trackEvents.byStart;for(var e=d.length,c=0,b;c<e;c++){b=d[c];b._id&&f.push(b)}return f};E.getTrackEvents.ref=function(b){return b.data.trackRefs};E.getTrackEvent=function(b,c){return b.data.trackRefs[c]};E.getTrackEvent.ref=function(b,c){return b.data.trackRefs[c]};E.getLastTrackEventId=function(b){return b.data.history[b.data.history.length-1]};E.timeUpdate=function(f,p){var c=f.media.currentTime,n=f.data.trackEvents.previousUpdateTime,m=f.data.trackEvents,i=m.endIndex,d=m.startIndex,e=m.byStart.length,q=m.byEnd.length,o=E.registryByName,b,h,j;if(n<=c){for(;m.byEnd[i]&&m.byEnd[i].end<=c;){b=m.byEnd[i];h=(n=b._natives)&&n.type;if(!n||o[h]||f[h]){if(b._running===true){b._running=false;j=f.data.running[h];j.splice(j.indexOf(b),1);if(!f.data.disabled[h]){n.end.call(f,p,b);f.emit("trackend",E.extend({},b,{plugin:h,type:"trackend"}))}}i++}else{E.removeTrackEvent(f,b._id);return}}for(;m.byStart[d]&&m.byStart[d].start<=c;){b=m.byStart[d];h=(n=b._natives)&&n.type;if(!n||o[h]||f[h]){if(b.end>c&&b._running===false){b._running=true;f.data.running[h].push(b);if(!f.data.disabled[h]){n.start.call(f,p,b);f.emit("trackstart",E.extend({},b,{plugin:h,type:"trackstart"}))}}d++}else{E.removeTrackEvent(f,b._id);return}}}else{if(n>c){for(;m.byStart[d]&&m.byStart[d].start>c;){b=m.byStart[d];h=(n=b._natives)&&n.type;if(!n||o[h]||f[h]){if(b._running===true){b._running=false;j=f.data.running[h];j.splice(j.indexOf(b),1);if(!f.data.disabled[h]){n.end.call(f,p,b);f.emit("trackend",E.extend({},b,{plugin:h,type:"trackend"}))}}d--}else{E.removeTrackEvent(f,b._id);return}}for(;m.byEnd[i]&&m.byEnd[i].end>c;){b=m.byEnd[i];h=(n=b._natives)&&n.type;if(!n||o[h]||f[h]){if(b.start<=c&&b._running===false){b._running=true;f.data.running[h].push(b);if(!f.data.disabled[h]){n.start.call(f,p,b);f.emit("trackstart",E.extend({},b,{plugin:h,type:"trackstart"}))}}i--}else{E.removeTrackEvent(f,b._id);return}}}}m.endIndex=i;m.startIndex=d;m.previousUpdateTime=c;m.byStart.length<e&&m.startIndex--;m.byEnd.length<q&&m.endIndex--};E.extend(E.p,{getTrackEvents:function(){return E.getTrackEvents.call(null,this)},getTrackEvent:function(b){return E.getTrackEvent.call(null,this,b)},getLastTrackEventId:function(){return E.getLastTrackEventId.call(null,this)},removeTrackEvent:function(b){E.removeTrackEvent.call(null,this,b);return this},removePlugin:function(b){E.removePlugin.call(null,this,b);return this},timeUpdate:function(b){E.timeUpdate.call(null,this,b);return this},destroy:function(){E.destroy.call(null,this);return this}});E.manifest={};E.registry=[];E.registryByName={};E.plugin=function(h,d,m){if(E.protect.natives.indexOf(h.toLowerCase())>=0){E.error("'"+h+"' is a protected function name")}else{var c=["start","end"],j={},i=typeof d==="function",f=["_setup","_teardown","start","end","frame"],e=function(p,o){p=p||E.nop;o=o||E.nop;return function(){p.apply(this,arguments);o.apply(this,arguments)}};E.manifest[h]=m=m||d.manifest||{};f.forEach(function(o){d[o]=I(d[o]||E.nop,h)});var b=function(s,o){if(!o){return this}if(o.ranges&&E.isArray(o.ranges)){E.forEach(o.ranges,function(x){x=E.extend({},o,x);delete x.ranges;this[h](x)},this);return this}var r=o._natives={},q="",p;E.extend(r,s);o._natives.type=h;o._running=false;r.start=r.start||r["in"];r.end=r.end||r.out;if(o.once){r.end=e(r.end,function(){this.removeTrackEvent(o._id)})}r._teardown=e(function(){var y=J.call(arguments),x=this.data.running[r.type];y.unshift(null);y[1]._running&&x.splice(x.indexOf(o),1)&&r.end.apply(this,y)},r._teardown);o.compose=o.compose&&o.compose.split(" ")||[];o.effect=o.effect&&o.effect.split(" ")||[];o.compose=o.compose.concat(o.effect);o.compose.forEach(function(x){q=E.compositions[x]||{};f.forEach(function(y){r[y]=e(r[y],q[y])})});o._natives.manifest=m;if(!("start" in o)){o.start=o["in"]||0}if(!o.end&&o.end!==0){o.end=o.out||Number.MAX_VALUE}if(!D.call(o,"toString")){o.toString=function(){var x=["start: "+o.start,"end: "+o.end,"id: "+(o.id||o._id)];o.target!=null&&x.push("target: "+o.target);return h+" ( "+x.join(", ")+" )"}}if(!o.target){p="options" in m&&m.options;o.target=p&&"target" in p&&p.target}if(o._natives){o._id=E.guid(o._natives.type)}o._natives._setup&&o._natives._setup.call(this,o);E.addTrackEvent(this,o);E.forEach(s,function(y,x){x!=="type"&&c.indexOf(x)===-1&&this.on(x,y)},this);return this};E.p[h]=j[h]=function(q,o){var p;if(q&&!o){o=q}else{if(p=this.getTrackEvent(q)){o=E.extend({},p,o);E.addTrackEvent(this,o);return this}else{o.id=q}}this.data.running[h]=this.data.running[h]||[];p=E.extend({},this.options.defaults&&this.options.defaults[h]||{},o);return b.call(this,i?d.call(this,p):d,p)};m&&E.extend(d,{manifest:m});var n={fn:j[h],definition:d,base:d,parents:[],name:h};E.registry.push(E.extend(j,n,{type:h}));E.registryByName[h]=n;return j}};E.plugin.errors=[];E.plugin.debug=E.version==="1.3";E.removePlugin=function(h,i){if(!i){i=h;h=E.p;if(E.protect.natives.indexOf(i.toLowerCase())>=0){E.error("'"+i+"' is a protected function name");return}var e=E.registry.length,d;for(d=0;d<e;d++){if(E.registry[d].name===i){E.registry.splice(d,1);delete E.registryByName[i];delete E.manifest[i];delete h[i];return}}}e=h.data.trackEvents.byStart;d=h.data.trackEvents.byEnd;var f=h.data.trackEvents.animating,c,b;c=0;for(b=e.length;c<b;c++){if(e[c]&&e[c]._natives&&e[c]._natives.type===i){e[c]._natives._teardown&&e[c]._natives._teardown.call(h,e[c]);e.splice(c,1);c--;b--;if(h.data.trackEvents.startIndex<=c){h.data.trackEvents.startIndex--;h.data.trackEvents.endIndex--}}d[c]&&d[c]._natives&&d[c]._natives.type===i&&d.splice(c,1)}c=0;for(b=f.length;c<b;c++){if(f[c]&&f[c]._natives&&f[c]._natives.type===i){f.splice(c,1);c--;b--}}};E.compositions={};E.compose=function(c,d,b){E.manifest[c]=b||d.manifest||{};E.compositions[c]=d};E.plugin.effect=E.effect=E.compose;var l=/^(?:\.|#|\[)/;E.dom={debug:false,find:function(c,e){var b=null;c=c.trim();e=e||t;if(c){if(!l.test(c)){b=t.getElementById(c);if(b!==null){return b}}try{b=e.querySelector(c)}catch(d){if(E.dom.debug){throw Error(d)}}}return b}};var B=/\?/,u={url:"",data:"",dataType:"",success:E.nop,type:"GET",async:true,xhr:function(){return new g.XMLHttpRequest}};E.xhr=function(b){b.dataType=b.dataType&&b.dataType.toLowerCase()||null;if(b.dataType&&(b.dataType==="jsonp"||b.dataType==="script")){E.xhr.getJSONP(b.url,b.success,b.dataType==="script")}else{b=E.extend({},u,b);b.ajax=b.xhr();if(b.ajax){if(b.type==="GET"&&b.data){b.url+=(B.test(b.url)?"&":"?")+b.data;b.data=null}b.ajax.open(b.type,b.url,b.async);b.ajax.send(b.data||null);return E.xhr.httpData(b)}}};E.xhr.httpData=function(d){var f,e=null,c,b=null;d.ajax.onreadystatechange=function(){if(d.ajax.readyState===4){try{e=JSON.parse(d.ajax.responseText)}catch(i){}f={xml:d.ajax.responseXML,text:d.ajax.responseText,json:e};if(!f.xml||!f.xml.documentElement){f.xml=null;try{c=new DOMParser;b=c.parseFromString(d.ajax.responseText,"text/xml");if(!b.getElementsByTagName("parsererror").length){f.xml=b}}catch(h){}}if(d.dataType){f=f[d.dataType]}d.success.call(d.ajax,f)}};return f};E.xhr.getJSONP=function(e,d,b){var c=t.head||t.getElementsByTagName("head")[0]||t.documentElement,m=t.createElement("script"),i=false,h=[];h=/(=)\?(?=&|$)|\?\?/;var f,j;if(!b){j=e.match(/(callback=[^&]*)/);if(j!==null&&j.length){h=j[1].split("=")[1];if(h==="?"){h="jsonp"}f=E.guid(h);e=e.replace(/(callback=[^&]*)/,"callback="+f)}else{f=E.guid("jsonp");if(h.test(e)){e=e.replace(h,"$1"+f)}h=e.split(/\?(.+)?/);e=h[0]+"?";if(h[1]){e+=h[1]+"&"}e+="callback="+f}window[f]=function(n){d&&d(n);i=true}}m.addEventListener("load",function(){b&&d&&d();i&&delete window[f];c.removeChild(m)},false);m.src=e;c.insertBefore(m,c.firstChild)};E.getJSONP=E.xhr.getJSONP;E.getScript=E.xhr.getScript=function(b,c){return E.xhr.getJSONP(b,c,true)};E.util={toSeconds:function(c,h){var e=/^([0-9]+:){0,2}[0-9]+([.;][0-9]+)?$/,d,f,b;if(typeof c==="number"){return c}typeof c==="string"&&!e.test(c)&&E.error("Invalid time format");e=c.split(":");d=e.length-1;f=e[d];if(f.indexOf(";")>-1){f=f.split(";");b=0;if(h&&typeof h==="number"){b=parseFloat(f[1],10)/h}e[d]=parseInt(f[0],10)+b}d=e[0];return{1:parseFloat(d,10),2:parseInt(d,10)*60+parseFloat(e[1],10),3:parseInt(d,10)*3600+parseInt(e[1],10)*60+parseFloat(e[2],10)}[e.length||1]}};E.p.cue=E.p.exec;E.protect={natives:function(b){return Object.keys?Object.keys(b):function(e){var c,d=[];for(c in e){D.call(e,c)&&d.push(c)}return d}(b)}(E.p).map(function(b){return b.toLowerCase()})};E.forEach({listen:"on",unlisten:"off",trigger:"emit",exec:"cue"},function(c,d){var b=E.p[d];E.p[d]=function(){if(typeof console!=="undefined"&&console.warn){console.warn("Deprecated method '"+d+"', "+(c==null?"do not use.":"use '"+c+"' instead."));E.p[d]=b}return E.p[c].apply(this,[].slice.call(arguments))}});g.Popcorn=E}else{g.Popcorn={isSupported:false};for(G="byId forEach extend effects error guid sizeOf isArray nop position disable enable destroyaddTrackEvent removeTrackEvent getTrackEvents getTrackEvent getLastTrackEventId timeUpdate plugin removePlugin compose effect xhr getJSONP getScript".split(/\s+/);G.length;){g.Popcorn[G.shift()]=function(){}}}})(window,window.document);(function(d,g){var l=d.document,o=d.location,j=/:\/\//,k=o.href.replace(o.href.split("/").slice(-1)[0],""),m=function(c,f,b){c=c||0;f=(f||c||0)+1;b=b||1;f=Math.ceil((f-c)/b)||0;var h=0,e=[];for(e.length=f;h<f;){e[h++]=c;c+=b}return e};g.sequence=function(b,c){return new g.sequence.init(b,c)};g.sequence.init=function(c,e){this.parent=l.getElementById(c);this.seqId=g.guid("__sequenced");this.queue=[];this.playlist=[];this.inOuts={ofVideos:[],ofClips:[]};this.dims={width:0,height:0};this.active=0;this.playing=this.cycling=false;this.times={last:0};this.events={};var b=this,f=0;g.forEach(e,function(r,p){var h=l.createElement("video");h.preload="auto";h.controls=true;h.style.display=p&&"none"||"";h.id=b.seqId+"-"+p;b.queue.push(h);var n=r["in"],i=r.out;b.inOuts.ofVideos.push({"in":n!==undefined&&n||1,out:i!==undefined&&i||0});b.inOuts.ofVideos[p].out=b.inOuts.ofVideos[p].out||b.inOuts.ofVideos[p]["in"]+2;h.src=!j.test(r.src)?k+r.src:r.src;h.setAttribute("data-sequence-owner",c);h.setAttribute("data-sequence-guid",b.seqId);h.setAttribute("data-sequence-id",p);h.setAttribute("data-sequence-clip",[b.inOuts.ofVideos[p]["in"],b.inOuts.ofVideos[p].out].join(":"));b.parent.appendChild(h);b.playlist.push(g("#"+h.id))});b.inOuts.ofVideos.forEach(function(h){h={"in":f,out:f+(h.out-h["in"])};b.inOuts.ofClips.push(h);f=h.out+1});g.forEach(this.queue,function(h,n){function i(){if(!n){b.dims.width=h.videoWidth;b.dims.height=h.videoHeight}h.currentTime=b.inOuts.ofVideos[n]["in"]-0.5;h.removeEventListener("canplaythrough",i,false);return true}h.addEventListener("canplaythrough",i,false);h.addEventListener("play",function(){b.playing=true},false);h.addEventListener("pause",function(){b.playing=false},false);h.addEventListener("timeupdate",function(p){p=p.srcElement||p.target;p=+(p.dataset&&p.dataset.sequenceId||p.getAttribute("data-sequence-id"));var q=Math.floor(h.currentTime);if(b.times.last!==q&&p===b.active){b.times.last=q;q===b.inOuts.ofVideos[p].out&&g.sequence.cycle.call(b,p)}},false)});return this};g.sequence.init.prototype=g.sequence.prototype;g.sequence.cycle=function(c){this.queue||g.error("Popcorn.sequence.cycle is not a public method");var h=this.queue,b=this.inOuts.ofVideos,i=h[c],f=0,e;if(h[c+1]){f=c+1}if(h[c+1]){h=h[f];b=b[f];g.extend(h,{width:this.dims.width,height:this.dims.height});e=this.playlist[f];i.pause();this.active=f;this.times.last=b["in"]-1;e.currentTime(b["in"]);e[f?"play":"pause"]();this.trigger("cycle",{position:{previous:c,current:f}});if(f){i.style.display="none";h.style.display=""}this.cycling=false}else{this.playlist[c].pause()}return this};var a=["timeupdate","play","pause"];g.extend(g.sequence.prototype,{eq:function(b){return this.playlist[b]},remove:function(){this.parent.innerHTML=null},clip:function(b){return this.inOuts.ofVideos[b]},duration:function(){for(var c=0,e=this.inOuts.ofClips,b=0;b<e.length;b++){c+=e[b].out-e[b]["in"]+1}return c-1},play:function(){this.playlist[this.active].play();return this},exec:function(c,e){var b=this.active;this.inOuts.ofClips.forEach(function(h,f){if(c>=h["in"]&&c<=h.out){b=f}});c+=this.inOuts.ofVideos[b]["in"]-this.inOuts.ofClips[b]["in"];g.addTrackEvent(this.playlist[b],{start:c-1,end:c,_running:false,_natives:{start:e||g.nop,end:g.nop,type:"exec"}});return this},listen:function(c,h){var b=this,i=this.playlist,f=i.length,e=0;if(!h){h=g.nop}if(g.Events.Natives.indexOf(c)>-1){g.forEach(i,function(n){n.listen(c,function(p){p.active=b;if(a.indexOf(c)>-1){h.call(n,p)}else{++e===f&&h.call(n,p)}})})}else{this.events[c]||(this.events[c]={});i=h.name||g.guid("__"+c);this.events[c][i]=h}return this},unlisten:function(){},trigger:function(c,e){var b=this;if(!(g.Events.Natives.indexOf(c)>-1)){this.events[c]&&g.forEach(this.events[c],function(f){f.call(b,{type:c},e)});return this}}});g.forEach(g.manifest,function(b,c){g.sequence.prototype[c]=function(i){var f={},e=[],u,n,h,p,t;for(u=0;u<this.inOuts.ofClips.length;u++){e=this.inOuts.ofClips[u];n=m(e["in"],e.out);h=n.indexOf(i.start);p=n.indexOf(i.end);if(h>-1){f[u]=g.extend({},e,{start:n[h],clipIdx:h})}if(p>-1){f[u]=g.extend({},e,{end:n[p],clipIdx:p})}}u=Object.keys(f).map(function(q){return +q});e=m(u[0],u[1]);for(u=0;u<e.length;u++){h={};p=e[u];var r=f[p];if(r){t=this.inOuts.ofVideos[p];n=r.clipIdx;t=m(t["in"],t.out);if(r.start){h.start=t[n];h.end=t[t.length-1]}if(r.end){h.start=t[0];h.end=t[n]}}else{h.start=this.inOuts.ofVideos[p]["in"];h.end=this.inOuts.ofVideos[p].out}this.playlist[p][c](g.extend({},i,h))}return this}})})(this,Popcorn);(function(a){document.addEventListener("DOMContentLoaded",function(){var b=document.querySelectorAll("[data-timeline-sources]");a.forEach(b,function(l,g){var j=b[g],f,d,k;if(!j.id){j.id=a.guid("__popcorn")}if(j.nodeType&&j.nodeType===1){k=a("#"+j.id);f=(j.getAttribute("data-timeline-sources")||"").split(",");f[0]&&a.forEach(f,function(c){d=c.split("!");if(d.length===1){d=c.match(/(.*)[\/\\]([^\/\\]+\.\w+)$/)[2].split(".");d[0]="parse"+d[1].toUpperCase();d[1]=c}f[0]&&k[d[0]]&&k[d[0]](d[1])});k.autoplay()&&k.play()}})},false)})(Popcorn);(function(d,e){function h(c){c=typeof c==="string"?c:[c.language,c.region].join("-");var b=c.split("-");return{iso6391:c,language:b[0]||"",region:b[1]||""}}var g=d.navigator,a=h(g.userLanguage||g.language);e.locale={get:function(){return a},set:function(b){a=h(b);e.locale.broadcast();return a},broadcast:function(j){var f=e.instances,c=f.length,b=0,i;for(j=j||"locale:changed";b<c;b++){i=f[b];j in i.data.events&&i.trigger(j)}}}})(this,this.Popcorn);(function(a){var b=Object.prototype.hasOwnProperty;a.parsers={};a.parser=function(g,f,c){if(a.protect.natives.indexOf(g.toLowerCase())>=0){a.error("'"+g+"' is a protected function name")}else{if(typeof f==="function"&&!c){c=f;f=""}if(!(typeof c!=="function"||typeof f!=="string")){var d={};d[g]=function(i,h){if(!i){return this}var e=this;a.xhr({url:i,dataType:f,success:function(q){var k,r,n=0;q=c(q).data||[];if(k=q.length){for(;n<k;n++){r=q[n];for(var l in r){b.call(r,l)&&e[l]&&e[l](r[l])}}h&&h()}}});return this};a.extend(a.p,d);return d}}}})(Popcorn);(function(a){var b=function(c,f){c=c||a.nop;f=f||a.nop;return function(){c.apply(this,arguments);f.apply(this,arguments)}},e=/^.*\.(ogg|oga|aac|mp3|wav)($|\?)/,d=/^.*\.(ogg|oga|aac|mp3|wav|ogg|ogv|mp4|webm)($|\?)/;a.player=function(f,c){if(!a[f]){c=c||{};var g=function(E,v,t){t=t||{};var D=new Date/1000,F=D,r=0,w=0,B=1,n=false,C={},z=typeof E==="string"?a.dom.find(E):E,h={};Object.prototype.__defineGetter__||(h=z||document.createElement("div"));for(var k in z){if(!(k in h)){if(typeof z[k]==="object"){h[k]=z[k]}else{if(typeof z[k]==="function"){h[k]=function(i){return"length" in z[i]&&!z[i].call?z[i]:function(){return z[i].apply(z,arguments)}}(k)}else{a.player.defineProperty(h,k,{get:function(i){return function(){return z[i]}}(k),set:a.nop,configurable:true})}}}}var u=function(){D=new Date/1000;if(!h.paused){h.currentTime+=D-F;h.dispatchEvent("timeupdate");setTimeout(u,10)}F=D};h.play=function(){this.paused=false;if(h.readyState>=4){F=new Date/1000;h.dispatchEvent("play");u()}};h.pause=function(){this.paused=true;h.dispatchEvent("pause")};a.player.defineProperty(h,"currentTime",{get:function(){return r},set:function(i){r=+i;h.dispatchEvent("timeupdate");return r},configurable:true});a.player.defineProperty(h,"volume",{get:function(){return B},set:function(i){B=+i;h.dispatchEvent("volumechange");return B},configurable:true});a.player.defineProperty(h,"muted",{get:function(){return n},set:function(i){n=+i;h.dispatchEvent("volumechange");return n},configurable:true});a.player.defineProperty(h,"readyState",{get:function(){return w},set:function(i){return w=i},configurable:true});h.addEventListener=function(i,j){C[i]||(C[i]=[]);C[i].push(j);return j};h.removeEventListener=function(m,j){var i,l=C[m];if(l){for(i=C[m].length-1;i>=0;i--){j===l[i]&&l.splice(i,1)}return j}};h.dispatchEvent=function(l){var j,i=l.type;if(!i){i=l;if(l=a.events.getInterface(i)){j=document.createEvent(l);j.initEvent(i,true,true,window,1)}}if(C[i]){for(l=C[i].length-1;l>=0;l--){C[i][l].call(this,j,this)}}};h.src=v||"";h.duration=0;h.paused=true;h.ended=0;t&&t.events&&a.forEach(t.events,function(i,j){h.addEventListener(j,i,false)});if(c._canPlayType(z.nodeName,v)!==false){if(c._setup){c._setup.call(h,t)}else{h.readyState=4;h.dispatchEvent("loadedmetadata");h.dispatchEvent("loadeddata");h.dispatchEvent("canplaythrough")}}else{setTimeout(function(){h.dispatchEvent("error")},0)}E=new a.p.init(h,t);if(c._teardown){E.destroy=b(E.destroy,function(){c._teardown.call(h,t)})}return E};g.canPlayType=c._canPlayType=c._canPlayType||a.nop;a[f]=a.player.registry[f]=g}};a.player.registry={};a.player.defineProperty=Object.defineProperty||function(f,c,g){f.__defineGetter__(c,g.get||a.nop);f.__defineSetter__(c,g.set||a.nop)};a.player.playerQueue=function(){var c=[],f=false;return{next:function(){f=false;c.shift();c[0]&&c[0]()},add:function(g){c.push(function(){f=true;g&&g()});!f&&c[0]()}}};a.smart=function(f,c,r){var q=["AUDIO","VIDEO"],n,h=a.dom.find(f),l;n=document.createElement("video");var k={ogg:"video/ogg",ogv:"video/ogg",oga:"audio/ogg",webm:"video/webm",mp4:"video/mp4",mp3:"audio/mp3"};if(h){if(q.indexOf(h.nodeName)>-1&&!c){if(typeof c==="object"){r=c}return a(h,r)}if(typeof c==="string"){c=[c]}f=0;for(srcLength=c.length;f<srcLength;f++){l=d.exec(c[f]);l=!l||!l[1]?false:n.canPlayType(k[l[1]]);if(l){c=c[f];break}for(var g in a.player.registry){if(a.player.registry.hasOwnProperty(g)){if(a.player.registry[g].canPlayType(h.nodeName,c[f])){return a[g](h,c[f],r)}}}}if(q.indexOf(h.nodeName)===-1){n=typeof c==="string"?c:c.length?c[0]:c;f=document.createElement(e.exec(n)?q[0]:q[1]);f.controls=true;h.appendChild(f);h=f}r&&r.events&&r.events.error&&h.addEventListener("error",r.events.error,false);h.src=c;return a(h,r)}else{a.error("Specified target "+f+" was not found.")}}})(Popcorn);(function(a){var b=function(g,f){var i=0,d=0,c;a.forEach(f.classes,function(h,e){c=[];if(h==="parent"){c[0]=document.querySelectorAll("#"+f.target)[0].parentNode}else{c=document.querySelectorAll("#"+f.target+" "+h)}i=0;for(d=c.length;i<d;i++){c[i].classList.toggle(e)}})};a.compose("applyclass",{manifest:{about:{name:"Popcorn applyclass Effect",version:"0.1",author:"@scottdowne",website:"scottdowne.wordpress.com"},options:{}},_setup:function(g){g.classes={};g.applyclass=g.applyclass||"";for(var f=g.applyclass.replace(/\s/g,"").split(","),i=[],d=0,c=f.length;d<c;d++){i=f[d].split(":");if(i[0]){g.classes[i[0]]=i[1]||""}}},start:b,end:b})})(Popcorn);(function(a){var b=/(?:http:\/\/www\.|http:\/\/|www\.|\.|^)(youtu|vimeo|soundcloud|baseplayer)/,e={},d={vimeo:false,youtube:false,soundcloud:false,module:false};Object.defineProperty(e,void 0,{get:function(){return d[void 0]},set:function(c){d[void 0]=c}});a.plugin("mediaspawner",{manifest:{about:{name:"Popcorn Media Spawner Plugin",version:"0.1",author:"Matthew Schranz, @mjschranz",website:"mschranz.wordpress.com"},options:{source:{elem:"input",type:"text",label:"Media Source","default":"http://www.youtube.com/watch?v=CXDstfD9eJ0"},caption:{elem:"input",type:"text",label:"Media Caption","default":"Popcorn Popping",optional:true},target:"mediaspawner-container",start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},autoplay:{elem:"input",type:"checkbox",label:"Autoplay Video",optional:true},width:{elem:"input",type:"number",label:"Media Width","default":400,units:"px",optional:true},height:{elem:"input",type:"number",label:"Media Height","default":200,units:"px",optional:true}}},_setup:function(g){function f(){function i(){if(c!=="HTML5"&&!window.Popcorn[c]){setTimeout(function(){i()},300)}else{g.id=g._container.id;g._container.style.width=g.width+"px";g._container.style.height=g.height+"px";g.popcorn=a.smart("#"+g.id,g.source);c==="HTML5"&&g.popcorn.controls(true);g._container.style.width="0px";g._container.style.height="0px";g._container.style.visibility="hidden";g._container.style.overflow="hidden"}}if(c!=="HTML5"&&!window.Popcorn[c]&&!e[c]){e[c]=true;a.getScript("http://popcornjs.org/code/players/"+c+"/popcorn."+c+".js",function(){i()})}else{i()}}function l(){window.Popcorn.player?f():setTimeout(function(){l()},300)}var k=document.getElementById(g.target)||{},c,h,n;if(h=b.exec(g.source)){c=h[1];if(c==="youtu"){c="youtube"}}else{c="HTML5"}g._type=c;g._container=document.createElement("div");h=g._container;h.id="mediaSpawnerdiv-"+a.guid();g.width=g.width||400;g.height=g.height||200;if(g.caption){n=document.createElement("div");n.innerHTML=g.caption;n.style.display="none";g._capCont=n;h.appendChild(n)}k&&k.appendChild(h);if(!window.Popcorn.player&&!e.module){e.module=true;a.getScript("http://popcornjs.org/code/modules/player/popcorn.player.js",l)}else{l()}},start:function(c,f){if(f._capCont){f._capCont.style.display=""}f._container.style.width=f.width+"px";f._container.style.height=f.height+"px";f._container.style.visibility="visible";f._container.style.overflow="visible";f.autoplay&&f.popcorn.play()},end:function(c,f){if(f._capCont){f._capCont.style.display="none"}f._container.style.width="0px";f._container.style.height="0px";f._container.style.visibility="hidden";f._container.style.overflow="hidden";f.popcorn.pause()},_teardown:function(c){c.popcorn&&c.popcorn.destory&&c.popcorn.destroy();document.getElementById(c.target)&&document.getElementById(c.target).removeChild(c._container)}})})(Popcorn,this);(function(a){a.plugin("code",function(e){var b=false,g=this,d=function(){var c=function(f){return function(i,h){var k=function(){b&&i.call(g,h);b&&f(k)};k()}};return window.webkitRequestAnimationFrame?c(window.webkitRequestAnimationFrame):window.mozRequestAnimationFrame?c(window.mozRequestAnimationFrame):c(function(f){window.setTimeout(f,16)})}();if(!e.onStart||typeof e.onStart!=="function"){e.onStart=a.nop}if(e.onEnd&&typeof e.onEnd!=="function"){e.onEnd=undefined}if(e.onFrame&&typeof e.onFrame!=="function"){e.onFrame=undefined}return{start:function(c,f){f.onStart.call(g,f);if(f.onFrame){b=true;d(f.onFrame,f)}},end:function(c,f){if(f.onFrame){b=false}f.onEnd&&f.onEnd.call(g,f)}}},{about:{name:"Popcorn Code Plugin",version:"0.1",author:"David Humphrey (@humphd)",website:"http://vocamus.net/dave"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},onStart:{elem:"input",type:"function",label:"onStart"},onFrame:{elem:"input",type:"function",label:"onFrame",optional:true},onEnd:{elem:"input",type:"function",label:"onEnd"}}})})(Popcorn);(function(a){var b=0;a.plugin("flickr",function(k){var x,c=document.getElementById(k.target),u,t,l,w,f=k.numberofimages||4,r=k.height||"50px",z=k.width||"50px",y=k.padding||"5px",d=k.border||"0px";x=document.createElement("div");x.id="flickr"+b;x.style.width="100%";x.style.height="100%";x.style.display="none";b++;c&&c.appendChild(x);var v=function(){if(u){setTimeout(function(){v()},5)}else{t="http://api.flickr.com/services/rest/?method=flickr.people.findByUsername&";t+="username="+k.username+"&api_key="+k.apikey+"&format=json&jsoncallback=flickr";a.getJSONP(t,function(e){u=e.user.nsid;g()})}},g=function(){t="http://api.flickr.com/services/feeds/photos_public.gne?";if(u){t+="id="+u+"&"}if(k.tags){t+="tags="+k.tags+"&"}t+="lang=en-us&format=json&jsoncallback=flickr";a.xhr.getJSONP(t,function(h){var e=document.createElement("div");e.innerHTML="<p style='padding:"+y+";'>"+h.title+"<p/>";a.forEach(h.items,function(i,j){if(j<f){l=document.createElement("a");l.setAttribute("href",i.link);l.setAttribute("target","_blank");w=document.createElement("img");w.setAttribute("src",i.media.m);w.setAttribute("height",r);w.setAttribute("width",z);w.setAttribute("style","border:"+d+";padding:"+y);l.appendChild(w);e.appendChild(l)}else{return false}});x.appendChild(e)})};if(k.username&&k.apikey){v()}else{u=k.userid;g()}return{start:function(){x.style.display="inline"},end:function(){x.style.display="none"},_teardown:function(e){document.getElementById(e.target)&&document.getElementById(e.target).removeChild(x)}}},{about:{name:"Popcorn Flickr Plugin",version:"0.2",author:"Scott Downe, Steven Weerdenburg, Annasob",website:"http://scottdowne.wordpress.com/"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},userid:{elem:"input",type:"text",label:"User ID",optional:true},tags:{elem:"input",type:"text",label:"Tags"},username:{elem:"input",type:"text",label:"Username",optional:true},apikey:{elem:"input",type:"text",label:"API Key",optional:true},target:"flickr-container",height:{elem:"input",type:"text",label:"Height","default":"50px",optional:true},width:{elem:"input",type:"text",label:"Width","default":"50px",optional:true},padding:{elem:"input",type:"text",label:"Padding",optional:true},border:{elem:"input",type:"text",label:"Border","default":"5px",optional:true},numberofimages:{elem:"input",type:"number","default":4,label:"Number of Images"}}})})(Popcorn);(function(a){a.plugin("footnote",{manifest:{about:{name:"Popcorn Footnote Plugin",version:"0.2",author:"@annasob, @rwaldron",website:"annasob.wordpress.com"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},text:{elem:"input",type:"text",label:"Text"},target:"footnote-container"}},_setup:function(b){var c=a.dom.find(b.target);b._container=document.createElement("div");b._container.style.display="none";b._container.innerHTML=b.text;c.appendChild(b._container)},start:function(b,c){c._container.style.display="inline"},end:function(b,c){c._container.style.display="none"},_teardown:function(b){var c=a.dom.find(b.target);c&&c.removeChild(b._container)}})})(Popcorn);(function(a){function b(c){return String(c).replace(/&(?!\w+;)|[<>"']/g,function(f){return d[f]||f})}function e(k,h){var f=k.container=document.createElement("div"),c=f.style,l=k.media,g=function(){var i=k.position();c.fontSize="18px";c.width=l.offsetWidth+"px";c.top=i.top+l.offsetHeight-f.offsetHeight-40+"px";c.left=i.left+"px";setTimeout(g,10)};f.id=h||"";c.position="absolute";c.color="white";c.textShadow="black 2px 2px 6px";c.fontWeight="bold";c.textAlign="center";g();k.media.parentNode.appendChild(f);return f}var d={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};a.plugin("text",{manifest:{about:{name:"Popcorn Text Plugin",version:"0.1",author:"@humphd"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},text:{elem:"input",type:"text",label:"Text","default":"Popcorn.js"},escape:{elem:"input",type:"checkbox",label:"Escape"},multiline:{elem:"input",type:"checkbox",label:"Multiline"}}},_setup:function(c){var h,g,f=c._container=document.createElement("div");f.style.display="none";if(c.target){if(h=a.dom.find(c.target)){if(["VIDEO","AUDIO"].indexOf(h.nodeName)>-1){h=e(this,c.target+"-overlay")}}else{h=e(this,c.target)}}else{h=this.container?this.container:e(this)}c._target=h;g=c.escape?b(c.text):c.text;g=c.multiline?g.replace(/\r?\n/gm,"<br>"):g;f.innerHTML=g||"";h.appendChild(f)},start:function(c,f){f._container.style.display="inline"},end:function(c,f){f._container.style.display="none"},_teardown:function(c){var f=c._target;f&&f.removeChild(c._container)}})})(Popcorn);var googleCallback;(function(l){function d(e,c,f){e=e.type?e.type.toUpperCase():"HYBRID";var b;if(e==="STAMEN-WATERCOLOR"||e==="STAMEN-TERRAIN"||e==="STAMEN-TONER"){b=e.replace("STAMEN-","").toLowerCase()}f=new google.maps.Map(f,{mapTypeId:b?b:google.maps.MapTypeId[e],mapTypeControlOptions:{mapTypeIds:[]}});b&&f.mapTypes.set(b,new google.maps.StamenMapType(b));f.getDiv().style.display="none";return f}var k=1,i=false,a=false,g,j;googleCallback=function(b){if(typeof google!=="undefined"&&google.maps&&google.maps.Geocoder&&google.maps.LatLng){g=new google.maps.Geocoder;l.getScript("//maps.stamen.com/js/tile.stamen.js",function(){a=true})}else{setTimeout(function(){googleCallback(b)},1)}};j=function(){if(document.body){i=true;l.getScript("//maps.google.com/maps/api/js?sensor=false&callback=googleCallback")}else{setTimeout(function(){j()},1)}};l.plugin("googlemap",function(f){var c,m,b,e=document.getElementById(f.target);f.type=f.type||"ROADMAP";f.zoom=f.zoom||1;f.lat=f.lat||0;f.lng=f.lng||0;i||j();c=document.createElement("div");c.id="actualmap"+k;c.style.width=f.width||"100%";c.style.height=f.height?f.height:e&&e.clientHeight?e.clientHeight+"px":"100%";k++;e&&e.appendChild(c);var h=function(){if(a){if(c){if(f.location){g.geocode({address:f.location},function(o,n){if(c&&n===google.maps.GeocoderStatus.OK){f.lat=o[0].geometry.location.lat();f.lng=o[0].geometry.location.lng();b=new google.maps.LatLng(f.lat,f.lng);m=d(f,b,c)}})}else{b=new google.maps.LatLng(f.lat,f.lng);m=d(f,b,c)}}}else{setTimeout(function(){h()},5)}};h();return{start:function(q,r){var p=this,n,o=function(){if(m){r._map=m;m.getDiv().style.display="block";google.maps.event.trigger(m,"resize");m.setCenter(b);if(r.zoom&&typeof r.zoom!=="number"){r.zoom=+r.zoom}m.setZoom(r.zoom);if(r.heading&&typeof r.heading!=="number"){r.heading=+r.heading}if(r.pitch&&typeof r.pitch!=="number"){r.pitch=+r.pitch}if(r.type==="STREETVIEW"){m.setStreetView(n=new google.maps.StreetViewPanorama(c,{position:b,pov:{heading:r.heading=r.heading||0,pitch:r.pitch=r.pitch||0,zoom:r.zoom}}));var t=function(A,z){var B=google.maps.geometry.spherical.computeHeading;setTimeout(function(){var E=p.media.currentTime;if(typeof r.tween==="object"){for(var D=0,C=A.length;D<C;D++){var G=A[D];if(E>=G.interval*(D+1)/1000&&(E<=G.interval*(D+2)/1000||E>=G.interval*C/1000)){y.setPosition(new google.maps.LatLng(G.position.lat,G.position.lng));y.setPov({heading:G.pov.heading||B(G,A[D+1])||0,zoom:G.pov.zoom||0,pitch:G.pov.pitch||0})}}t(A,A[0].interval)}else{D=0;for(C=A.length;D<C;D++){G=r.interval;if(E>=G*(D+1)/1000&&(E<=G*(D+2)/1000||E>=G*C/1000)){x.setPov({heading:B(A[D],A[D+1])||0,zoom:r.zoom,pitch:r.pitch||0});x.setPosition(s[D])}}t(s,r.interval)}},z)};if(r.location&&typeof r.tween==="string"){var x=n,s=[],v=new google.maps.DirectionsService,u=new google.maps.DirectionsRenderer(x);v.route({origin:r.location,destination:r.tween,travelMode:google.maps.TravelMode.DRIVING},function(C,D){if(D==google.maps.DirectionsStatus.OK){u.setDirections(C);for(var B=C.routes[0].overview_path,z=0,A=B.length;z<A;z++){s.push(new google.maps.LatLng(B[z].lat(),B[z].lng()))}r.interval=r.interval||1000;t(s,10)}})}else{if(typeof r.tween==="object"){var y=n;v=0;for(var w=r.tween.length;v<w;v++){r.tween[v].interval=r.tween[v].interval||1000;t(r.tween,10)}}}}r.onmaploaded&&r.onmaploaded(r,m)}else{setTimeout(function(){o()},13)}};o()},end:function(){if(m){m.getDiv().style.display="none"}},_teardown:function(o){var n=document.getElementById(o.target);n&&n.removeChild(c);c=m=b=null;o._map=null}}},{about:{name:"Popcorn Google Map Plugin",version:"0.1",author:"@annasob",website:"annasob.wordpress.com"},options:{start:{elem:"input",type:"start",label:"Start"},end:{elem:"input",type:"start",label:"End"},target:"map-container",type:{elem:"select",options:["ROADMAP","SATELLITE","STREETVIEW","HYBRID","TERRAIN","STAMEN-WATERCOLOR","STAMEN-TERRAIN","STAMEN-TONER"],label:"Map Type",optional:true},zoom:{elem:"input",type:"text",label:"Zoom","default":0,optional:true},lat:{elem:"input",type:"text",label:"Lat",optional:true},lng:{elem:"input",type:"text",label:"Lng",optional:true},location:{elem:"input",type:"text",label:"Location","default":"Toronto, Ontario, Canada"},heading:{elem:"input",type:"text",label:"Heading","default":0,optional:true},pitch:{elem:"input",type:"text",label:"Pitch","default":1,optional:true}}})})(Popcorn);(function(a){function b(j){function h(){var l=j.getBoundingClientRect(),i=f.getBoundingClientRect();if(i.left!==l.left){f.style.left=l.left+"px"}if(i.top!==l.top){f.style.top=l.top+"px"}}var g=-1,f=document.createElement("div"),c=getComputedStyle(j).zIndex;f.setAttribute("data-popcorn-helper-container",true);f.style.position="absolute";f.style.zIndex=isNaN(c)?e:c+1;document.body.appendChild(f);return{element:f,start:function(){g=setInterval(h,d)},stop:function(){clearInterval(g);g=-1},destroy:function(){document.body.removeChild(f);g!==-1&&clearInterval(g)}}}var e=2000,d=10;a.plugin("image",{manifest:{about:{name:"Popcorn image Plugin",version:"0.1",author:"Scott Downe",website:"http://scottdowne.wordpress.com/"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},src:{elem:"input",type:"url",label:"Image URL","default":"http://mozillapopcorn.org/wp-content/themes/popcorn/images/for_developers.png"},href:{elem:"input",type:"url",label:"Link","default":"http://mozillapopcorn.org/wp-content/themes/popcorn/images/for_developers.png",optional:true},target:"image-container",text:{elem:"input",type:"text",label:"Caption","default":"Popcorn.js",optional:true}}},_setup:function(f){var c=document.createElement("img"),g=document.getElementById(f.target);f.anchor=document.createElement("a");f.anchor.style.position="relative";f.anchor.style.textDecoration="none";f.anchor.style.display="none";if(g){if(["VIDEO","AUDIO"].indexOf(g.nodeName)>-1){f.trackedContainer=b(g);f.trackedContainer.element.appendChild(f.anchor)}else{g&&g.appendChild(f.anchor)}}c.addEventListener("load",function(){c.style.borderStyle="none";f.anchor.href=f.href||f.src||"#";f.anchor.target="_blank";var j,h;c.style.height=g.style.height;c.style.width=g.style.width;f.anchor.appendChild(c);if(f.text){j=c.height/12+"px";h=document.createElement("div");a.extend(h.style,{color:"black",fontSize:j,fontWeight:"bold",position:"relative",textAlign:"center",width:c.style.width||c.width+"px",zIndex:"10"});h.innerHTML=f.text||"";h.style.top=(c.style.height.replace("px","")||c.height)/2-h.offsetHeight/2+"px";f.anchor.insertBefore(h,c)}},false);c.src=f.src},start:function(c,f){f.anchor.style.display="inline";f.trackedContainer&&f.trackedContainer.start()},end:function(c,f){f.anchor.style.display="none";f.trackedContainer&&f.trackedContainer.stop()},_teardown:function(c){if(c.trackedContainer){c.trackedContainer.destroy()}else{c.anchor.parentNode&&c.anchor.parentNode.removeChild(c.anchor)}}})})(Popcorn);(function(c){var a=1,b=false;c.plugin("googlefeed",function(g){var j=function(){var l=false,r=0,h=document.getElementsByTagName("link"),i=h.length,q=document.head||document.getElementsByTagName("head")[0],n=document.createElement("link");if(window.GFdynamicFeedControl){b=true}else{c.getScript("//www.google.com/uds/solutions/dynamicfeed/gfdynamicfeedcontrol.js",function(){b=true})}for(;r<i;r++){if(h[r].href==="//www.google.com/uds/solutions/dynamicfeed/gfdynamicfeedcontrol.css"){l=true}}if(!l){n.type="text/css";n.rel="stylesheet";n.href="//www.google.com/uds/solutions/dynamicfeed/gfdynamicfeedcontrol.css";q.insertBefore(n,q.firstChild)}};window.google?j():c.getScript("//www.google.com/jsapi",function(){google.load("feeds","1",{callback:function(){j()}})});var f=document.createElement("div"),e=document.getElementById(g.target),d=function(){if(b){g.feed=new GFdynamicFeedControl(g.url,f,{vertical:g.orientation.toLowerCase()==="vertical"?true:false,horizontal:g.orientation.toLowerCase()==="horizontal"?true:false,title:g.title=g.title||"Blog"})}else{setTimeout(function(){d()},5)}};if(!g.orientation||g.orientation.toLowerCase()!=="vertical"&&g.orientation.toLowerCase()!=="horizontal"){g.orientation="vertical"}f.style.display="none";f.id="_feed"+a;f.style.width="100%";f.style.height="100%";a++;e&&e.appendChild(f);d();return{start:function(){f.setAttribute("style","display:inline")},end:function(){f.setAttribute("style","display:none")},_teardown:function(h){document.getElementById(h.target)&&document.getElementById(h.target).removeChild(f);delete h.feed}}},{about:{name:"Popcorn Google Feed Plugin",version:"0.1",author:"David Seifried",website:"dseifried.wordpress.com"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},target:"feed-container",url:{elem:"input",type:"url",label:"Feed URL","default":"http://planet.mozilla.org/rss20.xml"},title:{elem:"input",type:"text",label:"Title","default":"Planet Mozilla",optional:true},orientation:{elem:"select",options:["Vertical","Horizontal"],label:"Orientation","default":"Vertical",optional:true}}})})(Popcorn);(function(c){var a=0,b=function(g,k){var f=g.container=document.createElement("div"),e=f.style,d=g.media,l=function(){var h=g.position();e.fontSize="18px";e.width=d.offsetWidth+"px";e.top=h.top+d.offsetHeight-f.offsetHeight-40+"px";e.left=h.left+"px";setTimeout(l,10)};f.id=k||c.guid();e.position="absolute";e.color="white";e.textShadow="black 2px 2px 6px";e.fontWeight="bold";e.textAlign="center";l();g.media.parentNode.appendChild(f);return f};c.plugin("subtitle",{manifest:{about:{name:"Popcorn Subtitle Plugin",version:"0.1",author:"Scott Downe",website:"http://scottdowne.wordpress.com/"},options:{start:{elem:"input",type:"text",label:"Start"},end:{elem:"input",type:"text",label:"End"},target:"subtitle-container",text:{elem:"input",type:"text",label:"Text"}}},_setup:function(e){var d=document.createElement("div");d.id="subtitle-"+a++;d.style.display="none";!this.container&&(!e.target||e.target==="subtitle-container")&&b(this);e.container=e.target&&e.target!=="subtitle-container"?document.getElementById(e.target)||b(this,e.target):this.container;document.getElementById(e.container.id)&&document.getElementById(e.container.id).appendChild(d);e.innerContainer=d;e.showSubtitle=function(){e.innerContainer.innerHTML=e.text||""}},start:function(e,d){d.innerContainer.style.display="inline";d.showSubtitle(d,d.text)},end:function(e,d){d.innerContainer.style.display="none";d.innerContainer.innerHTML=""},_teardown:function(d){d.container.removeChild(d.innerContainer)}})})(Popcorn);(function(a){var b=false;a.plugin("twitter",{manifest:{about:{name:"Popcorn Twitter Plugin",version:"0.1",author:"Scott Downe",website:"http://scottdowne.wordpress.com/"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},src:{elem:"input",type:"text",label:"Tweet Source (# or @)","default":"@popcornjs"},target:"twitter-container",height:{elem:"input",type:"number",label:"Height","default":"200",optional:true},width:{elem:"input",type:"number",label:"Width","default":"250",optional:true}}},_setup:function(d){if(!window.TWTR&&!b){b=true;a.getScript("//widgets.twimg.com/j/2/widget.js")}var f=document.getElementById(d.target);d.container=document.createElement("div");d.container.setAttribute("id",a.guid());d.container.style.display="none";f&&f.appendChild(d.container);var g=d.src||"";f=d.width||250;var m=d.height||200,c=/^@/.test(g),l={version:2,id:d.container.getAttribute("id"),rpp:30,width:f,height:m,interval:6000,theme:{shell:{background:"#ffffff",color:"#000000"},tweets:{background:"#ffffff",color:"#444444",links:"#1985b5"}},features:{loop:true,timestamp:true,avatars:true,hashtags:true,toptweets:true,live:true,scrollbar:false,behavior:"default"}},k=function(e){if(window.TWTR){if(c){l.type="profile";(new TWTR.Widget(l)).render().setUser(g).start()}else{l.type="search";l.search=g;l.subject=g;(new TWTR.Widget(l)).render().start()}}else{setTimeout(function(){k(e)},1)}};k(this)},start:function(d,c){c.container.style.display="inline"},end:function(d,c){c.container.style.display="none"},_teardown:function(c){document.getElementById(c.target)&&document.getElementById(c.target).removeChild(c.container)}})})(Popcorn);(function(a){a.plugin("webpage",{manifest:{about:{name:"Popcorn Webpage Plugin",version:"0.1",author:"@annasob",website:"annasob.wordpress.com"},options:{id:{elem:"input",type:"text",label:"Id",optional:true},start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},src:{elem:"input",type:"url",label:"Webpage URL","default":"http://mozillapopcorn.org"},target:"iframe-container"}},_setup:function(b){var c=document.getElementById(b.target);b.src=b.src.replace(/^(https?:)?(\/\/)?/,"//");b._iframe=document.createElement("iframe");b._iframe.setAttribute("width","100%");b._iframe.setAttribute("height","100%");b._iframe.id=b.id;b._iframe.src=b.src;b._iframe.style.display="none";c&&c.appendChild(b._iframe)},start:function(b,c){c._iframe.src=c.src;c._iframe.style.display="inline"},end:function(b,c){c._iframe.style.display="none"},_teardown:function(b){document.getElementById(b.target)&&document.getElementById(b.target).removeChild(b._iframe)}})})(Popcorn);var wikiCallback;(function(a){a.plugin("wikipedia",{manifest:{about:{name:"Popcorn Wikipedia Plugin",version:"0.1",author:"@annasob",website:"annasob.wordpress.com"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},lang:{elem:"input",type:"text",label:"Language","default":"english",optional:true},src:{elem:"input",type:"url",label:"Wikipedia URL","default":"http://en.wikipedia.org/wiki/Cat"},title:{elem:"input",type:"text",label:"Title","default":"Cats",optional:true},numberofwords:{elem:"input",type:"number",label:"Number of Words","default":"200",optional:true},target:"wikipedia-container"}},_setup:function(b){var e,d=a.guid();if(!b.lang){b.lang="en"}b.numberofwords=b.numberofwords||200;window["wikiCallback"+d]=function(c){b._link=document.createElement("a");b._link.setAttribute("href",b.src);b._link.setAttribute("target","_blank");b._link.innerHTML=b.title||c.parse.displaytitle;b._desc=document.createElement("p");e=c.parse.text["*"].substr(c.parse.text["*"].indexOf("<p>"));e=e.replace(/((<(.|\n)+?>)|(\((.*?)\) )|(\[(.*?)\]))/g,"");e=e.split(" ");b._desc.innerHTML=e.slice(0,e.length>=b.numberofwords?b.numberofwords:e.length).join(" ")+" ...";b._fired=true};b.src&&a.getScript("//"+b.lang+".wikipedia.org/w/api.php?action=parse&props=text&redirects&page="+b.src.slice(b.src.lastIndexOf("/")+1)+"&format=json&callback=wikiCallback"+d)},start:function(b,e){var d=function(){if(e._fired){if(e._link&&e._desc){if(document.getElementById(e.target)){document.getElementById(e.target).appendChild(e._link);document.getElementById(e.target).appendChild(e._desc);e._added=true}}}else{setTimeout(function(){d()},13)}};d()},end:function(b,c){if(c._added){document.getElementById(c.target).removeChild(c._link);document.getElementById(c.target).removeChild(c._desc)}},_teardown:function(b){if(b._added){b._link.parentNode&&document.getElementById(b.target).removeChild(b._link);b._desc.parentNode&&document.getElementById(b.target).removeChild(b._desc);delete b.target}}})})(Popcorn);(function(a){a.plugin("mustache",function(o){var g,r,b,q;a.getScript("http://mustache.github.com/extras/mustache.js");var m=!!o.dynamic,l=typeof o.template,k=typeof o.data,d=document.getElementById(o.target);o.container=d||document.createElement("div");if(l==="function"){if(m){b=o.template}else{q=o.template(o)}}else{q=l==="string"?o.template:""}if(k==="function"){if(m){g=o.data}else{r=o.data(o)}}else{r=k==="string"?JSON.parse(o.data):k==="object"?o.data:""}return{start:function(f,e){var c=function(){if(window.Mustache){if(g){r=g(e)}if(b){q=b(e)}var h=Mustache.to_html(q,r).replace(/^\s*/mg,"");e.container.innerHTML=h}else{setTimeout(function(){c()},10)}};c()},end:function(e,c){c.container.innerHTML=""},_teardown:function(){g=r=b=q=null}}},{about:{name:"Popcorn Mustache Plugin",version:"0.1",author:"David Humphrey (@humphd)",website:"http://vocamus.net/dave"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},target:"mustache-container",template:{elem:"input",type:"text",label:"Template"},data:{elem:"input",type:"text",label:"Data"},dynamic:{elem:"input",type:"checkbox",label:"Dynamic","default":true}}})})(Popcorn);(function(c){function a(e,d){if(e.map){e.map.div.style.display=d}else{setTimeout(function(){a(e,d)},10)}}var b=1;c.plugin("openmap",function(g){var k,f,e,d,t,n,s,r,l=document.getElementById(g.target);k=document.createElement("div");k.id="openmapdiv"+b;k.style.width="100%";k.style.height="100%";b++;l&&l.appendChild(k);r=function(){if(window.OpenLayers&&window.OpenLayers.Layer.Stamen){if(g.location){location=new OpenLayers.LonLat(0,0);c.getJSONP("//tinygeocoder.com/create-api.php?q="+g.location+"&callback=jsonp",function(i){f=new OpenLayers.LonLat(i[1],i[0])})}else{f=new OpenLayers.LonLat(g.lng,g.lat)}g.type=g.type||"ROADMAP";switch(g.type){case"SATELLITE":g.map=new OpenLayers.Map({div:k,maxResolution:0.28125,tileSize:new OpenLayers.Size(512,512)});var h=new OpenLayers.Layer.WorldWind("LANDSAT","//worldwind25.arc.nasa.gov/tile/tile.aspx",2.25,4,{T:"105"});g.map.addLayer(h);d=new OpenLayers.Projection("EPSG:4326");e=new OpenLayers.Projection("EPSG:4326");break;case"TERRAIN":d=new OpenLayers.Projection("EPSG:4326");e=new OpenLayers.Projection("EPSG:4326");g.map=new OpenLayers.Map({div:k,projection:e});h=new OpenLayers.Layer.WMS("USGS Terraserver","//terraserver-usa.org/ogcmap.ashx?",{layers:"DRG"});g.map.addLayer(h);break;case"STAMEN-TONER":case"STAMEN-WATERCOLOR":case"STAMEN-TERRAIN":h=g.type.replace("STAMEN-","").toLowerCase();h=new OpenLayers.Layer.Stamen(h);d=new OpenLayers.Projection("EPSG:4326");e=new OpenLayers.Projection("EPSG:900913");f=f.transform(d,e);g.map=new OpenLayers.Map({div:k,projection:e,displayProjection:d,controls:[new OpenLayers.Control.Navigation,new OpenLayers.Control.PanPanel,new OpenLayers.Control.ZoomPanel]});g.map.addLayer(h);break;default:e=new OpenLayers.Projection("EPSG:900913");d=new OpenLayers.Projection("EPSG:4326");f=f.transform(d,e);g.map=new OpenLayers.Map({div:k,projection:e,displayProjection:d});h=new OpenLayers.Layer.OSM;g.map.addLayer(h)}if(g.map){g.map.setCenter(f,g.zoom||10);g.map.div.style.display="none"}}else{setTimeout(function(){r()},50)}};r();return{_setup:function(h){window.OpenLayers||c.getScript("//openlayers.org/api/OpenLayers.js",function(){c.getScript("//maps.stamen.com/js/tile.stamen.js")});var i=function(){if(h.map){h.zoom=h.zoom||2;if(h.zoom&&typeof h.zoom!=="number"){h.zoom=+h.zoom}h.map.setCenter(f,h.zoom);if(h.markers){var q=OpenLayers.Util.extend({},OpenLayers.Feature.Vector.style["default"]),B=function(u){clickedFeature=u.feature;if(clickedFeature.attributes.text){s=new OpenLayers.Popup.FramedCloud("featurePopup",clickedFeature.geometry.getBounds().getCenterLonLat(),new OpenLayers.Size(120,250),clickedFeature.attributes.text,null,true,function(){n.unselect(this.feature)});clickedFeature.popup=s;s.feature=clickedFeature;h.map.addPopup(s)}},z=function(u){feature=u.feature;if(feature.popup){s.feature=null;h.map.removePopup(feature.popup);feature.popup.destroy();feature.popup=null}},j=function(u){c.getJSONP("//tinygeocoder.com/create-api.php?q="+u.location+"&callback=jsonp",function(x){x=(new OpenLayers.Geometry.Point(x[1],x[0])).transform(d,e);var y=OpenLayers.Util.extend({},q);if(!u.size||isNaN(u.size)){u.size=14}y.pointRadius=u.size;y.graphicOpacity=1;y.externalGraphic=u.icon;x=new OpenLayers.Feature.Vector(x,null,y);if(u.text){x.attributes={text:u.text}}t.addFeatures([x])})};t=new OpenLayers.Layer.Vector("Point Layer",{style:q});h.map.addLayer(t);for(var w=0,v=h.markers.length;w<v;w++){var o=h.markers[w];if(o.text){if(!n){n=new OpenLayers.Control.SelectFeature(t);h.map.addControl(n);n.activate();t.events.on({featureselected:B,featureunselected:z})}}if(o.location){j(o)}else{var m=(new OpenLayers.Geometry.Point(o.lng,o.lat)).transform(d,e),p=OpenLayers.Util.extend({},q);if(!o.size||isNaN(o.size)){o.size=14}p.pointRadius=o.size;p.graphicOpacity=1;p.externalGraphic=o.icon;m=new OpenLayers.Feature.Vector(m,null,p);if(o.text){m.attributes={text:o.text}}t.addFeatures([m])}}}}else{setTimeout(function(){i()},13)}};i()},start:function(h,i){a(i,"block")},end:function(h,i){a(i,"none")},_teardown:function(){l&&l.removeChild(k);k=map=f=e=d=t=n=s=null}}},{about:{name:"Popcorn OpenMap Plugin",version:"0.3",author:"@mapmeld",website:"mapadelsur.blogspot.com"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},target:"map-container",type:{elem:"select",options:["ROADMAP","SATELLITE","TERRAIN"],label:"Map Type",optional:true},zoom:{elem:"input",type:"number",label:"Zoom","default":2},lat:{elem:"input",type:"text",label:"Lat",optional:true},lng:{elem:"input",type:"text",label:"Lng",optional:true},location:{elem:"input",type:"text",label:"Location","default":"Toronto, Ontario, Canada"},markers:{elem:"input",type:"text",label:"List Markers",optional:true}}})})(Popcorn);document.addEventListener("click",function(a){a=a.target;if(a.nodeName==="A"||a.parentNode&&a.parentNode.nodeName==="A"){Popcorn.instances.forEach(function(b){b.options.pauseOnLinkClicked&&b.pause()})}},false);(function(a){var u={},k=0,w=document.createElement("span"),x=["webkit","Moz","ms","O",""],v=["Transform","TransitionDuration","TransitionTimingFunction"],t={},q;document.getElementsByTagName("head")[0].appendChild(w);for(var s=0,d=v.length;s<d;s++){for(var l=0,g=x.length;l<g;l++){q=x[l]+v[s];if(q in w.style){t[v[s].toLowerCase()]=q;break}}}document.getElementsByTagName("head")[0].appendChild(w);a.plugin("wordriver",{manifest:{about:{name:"Popcorn WordRiver Plugin"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},target:"wordriver-container",text:{elem:"input",type:"text",label:"Text","default":"Popcorn.js"},color:{elem:"input",type:"text",label:"Color","default":"Green",optional:true}}},_setup:function(c){c._duration=c.end-c.start;var b;if(!(b=u[c.target])){b=c.target;u[b]=document.createElement("div");var e=document.getElementById(b);e&&e.appendChild(u[b]);u[b].style.height="100%";u[b].style.position="relative";b=u[b]}c._container=b;c.word=document.createElement("span");c.word.style.position="absolute";c.word.style.whiteSpace="nowrap";c.word.style.opacity=0;c.word.style.MozTransitionProperty="opacity, -moz-transform";c.word.style.webkitTransitionProperty="opacity, -webkit-transform";c.word.style.OTransitionProperty="opacity, -o-transform";c.word.style.transitionProperty="opacity, transform";c.word.style[t.transitionduration]="1s, "+c._duration+"s";c.word.style[t.transitiontimingfunction]="linear";c.word.innerHTML=c.text;c.word.style.color=c.color||"black"},start:function(c,b){b._container.appendChild(b.word);b.word.style[t.transform]="";b.word.style.fontSize=~~(30+20*Math.random())+"px";k%=b._container.offsetWidth-b.word.offsetWidth;b.word.style.left=k+"px";k+=b.word.offsetWidth+10;b.word.style[t.transform]="translateY("+(b._container.offsetHeight-b.word.offsetHeight)+"px)";b.word.style.opacity=1;setTimeout(function(){b.word.style.opacity=0},(b.end-b.start-1||1)*1000)},end:function(c,b){b.word.style.opacity=0},_teardown:function(c){var b=document.getElementById(c.target);c.word.parentNode&&c._container.removeChild(c.word);u[c.target]&&!u[c.target].childElementCount&&b&&b.removeChild(u[c.target])&&delete u[c.target]}})})(Popcorn);(function(a){var b=1;a.plugin("timeline",function(g){var f=document.getElementById(g.target),i=document.createElement("div"),d,c=true;if(f&&!f.firstChild){f.appendChild(d=document.createElement("div"));d.style.width="inherit";d.style.height="inherit";d.style.overflow="auto"}else{d=f.firstChild}i.style.display="none";i.id="timelineDiv"+b;g.direction=g.direction||"up";if(g.direction.toLowerCase()==="down"){c=false}if(f&&d){c?d.insertBefore(i,d.firstChild):d.appendChild(i)}b++;i.innerHTML="<p><span id='big' style='font-size:24px; line-height: 130%;' >"+g.title+"</span><br /><span id='mid' style='font-size: 16px;'>"+g.text+"</span><br />"+g.innerHTML;return{start:function(h,e){i.style.display="block";if(e.direction==="down"){d.scrollTop=d.scrollHeight}},end:function(){i.style.display="none"},_teardown:function(){d&&i&&d.removeChild(i)&&!d.firstChild&&f.removeChild(d)}}},{about:{name:"Popcorn Timeline Plugin",version:"0.1",author:"David Seifried @dcseifried",website:"dseifried.wordpress.com"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},target:"feed-container",title:{elem:"input",type:"text",label:"Title"},text:{elem:"input",type:"text",label:"Text"},innerHTML:{elem:"input",type:"text",label:"HTML Code",optional:true},direction:{elem:"select",options:["DOWN","UP"],label:"Direction",optional:true}}})})(Popcorn);(function(c,a){var b={};c.plugin("documentcloud",{manifest:{about:{name:"Popcorn Document Cloud Plugin",version:"0.1",author:"@humphd, @ChrisDeCairos",website:"http://vocamus.net/dave"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},target:"documentcloud-container",width:{elem:"input",type:"text",label:"Width",optional:true},height:{elem:"input",type:"text",label:"Height",optional:true},src:{elem:"input",type:"url",label:"PDF URL","default":"http://www.documentcloud.org/documents/70050-urbina-day-1-in-progress.html"},preload:{elem:"input",type:"checkbox",label:"Preload","default":true},page:{elem:"input",type:"number",label:"Page Number",optional:true},aid:{elem:"input",type:"number",label:"Annotation Id",optional:true}}},_setup:function(d){function g(){function v(q){d._key=q.api.getId();d._changeView=function(s){d.aid?s.pageSet.showAnnotation(s.api.getAnnotation(d.aid)):s.api.setCurrentPage(d.page)}}function w(){b[d._key]={num:1,id:d._containerId};e.loaded=true}e.loaded=false;var o=d.url.replace(/\.html$/,".js"),n=d.target,i=a.getElementById(n),z=a.createElement("div"),r=c.position(i),h=d.width||r.width;r=d.height||r.height;var D=d.sidebar||true,C=d.text||true,E=d.pdf||true,p=d.showAnnotations||true,j=d.zoom||700,B=d.search||true;if(!function(q){var s=false;c.forEach(e.viewers,function(t){if(t.api.getSchema().canonicalURL===q){v(t);t=b[d._key];d._containerId=t.id;t.num+=1;s=true;e.loaded=true}});return s}(d.url)){z.id=d._containerId=c.guid(n);n="#"+z.id;i.appendChild(z);m.trigger("documentready");e.load(o,{width:h,height:r,sidebar:D,text:C,pdf:E,showAnnotations:p,zoom:j,search:B,container:n,afterLoad:d.page||d.aid?function(q){v(q);d._changeView(q);z.style.visibility="hidden";q.elements.pages.hide();w()}:function(q){v(q);w();z.style.visibility="hidden";q.elements.pages.hide()}})}}function f(){window.DV.loaded?g():setTimeout(f,25)}var e=window.DV=window.DV||{},m=this;if(e.loading){f()}else{e.loading=true;e.recordHit="//www.documentcloud.org/pixel.gif";var k=a.createElement("link"),l=a.getElementsByTagName("head")[0];k.rel="stylesheet";k.type="text/css";k.media="screen";k.href="//s3.documentcloud.org/viewer/viewer-datauri.css";l.appendChild(k);e.loaded=false;c.getScript("http://s3.documentcloud.org/viewer/viewer.js",function(){e.loading=false;g()})}},start:function(g,d){var f=a.getElementById(d._containerId),e=DV.viewers[d._key];(d.page||d.aid)&&e&&d._changeView(e);if(f&&e){f.style.visibility="visible";e.elements.pages.show()}},end:function(d,e){var f=a.getElementById(e._containerId);if(f&&DV.viewers[e._key]){f.style.visibility="hidden";DV.viewers[e._key].elements.pages.hide()}},_teardown:function(e){var d=a.getElementById(e._containerId);if((e=e._key)&&DV.viewers[e]&&--b[e].num===0){for(DV.viewers[e].api.unload();d.hasChildNodes();){d.removeChild(d.lastChild)}d.parentNode.removeChild(d)}}})})(Popcorn,window.document);(function(a){a.parser("parseJSON","JSON",function(b){var c={title:"",remote:"",data:[]};a.forEach(b.data,function(d){c.data.push(d)});return c})})(Popcorn);(function(a){a.parser("parseSBV",function(q){var b={title:"",remote:"",data:[]},s=[],t=0,r=0,l=function(e){e=e.split(":");var c=e.length-1,f;try{f=parseInt(e[c-1],10)*60+parseFloat(e[c],10);if(c===2){f+=parseInt(e[0],10)*3600}}catch(h){throw"Bad cue"}return f},k=function(c,f){var e={};e[c]=f;return e};q=q.text.split(/(?:\r\n|\r|\n)/gm);for(r=q.length;t<r;){var g={},u=[],d=q[t++].split(",");try{g.start=l(d[0]);for(g.end=l(d[1]);t<r&&q[t];){u.push(q[t++])}g.text=u.join("<br />");s.push(k("subtitle",g))}catch(v){for(;t<r&&q[t];){t++}}for(;t<r&&!q[t];){t++}}b.data=s;return b})})(Popcorn);(function(c){function a(d,e){var f={};f[d]=e;return f}function b(d){d=d.split(":");try{var e=d[2].split(",");if(e.length===1){e=d[2].split(".")}return parseFloat(d[0],10)*3600+parseFloat(d[1],10)*60+parseFloat(e[0],10)+parseFloat(e[1],10)/1000}catch(f){return 0}}c.parser("parseSRT",function(r){var d={title:"",remote:"",data:[]},q=[],n=0,l=0,k,e,g,f;r=r.text.split(/(?:\r\n|\r|\n)/gm);for(n=r.length-1;n>=0&&!r[n];){n--}g=n+1;for(n=0;n<g;n++){f={};e=[];f.id=parseInt(r[n++],10);k=r[n++].split(/[\t ]*--\>[\t ]*/);f.start=b(k[0]);l=k[1].indexOf(" ");if(l!==-1){k[1]=k[1].substr(0,l)}for(f.end=b(k[1]);n<g&&r[n];){e.push(r[n++])}f.text=e.join("\\N").replace(/\{(\\[\w]+\(?([\w\d]+,?)+\)?)+\}/gi,"");f.text=f.text.replace(/</g,"&lt;").replace(/>/g,"&gt;");f.text=f.text.replace(/&lt;(\/?(font|b|u|i|s))((\s+(\w|\w[\w\-]*\w)(\s*=\s*(?:\".*?\"|'.*?'|[^'\">\s]+))?)+\s*|\s*)(\/?)&gt;/gi,"<$1$3$7>");f.text=f.text.replace(/\\N/gi,"<br />");q.push(a("subtitle",f))}d.data=q;return d})})(Popcorn);(function(a){function b(f,c){var r=f.substr(10).split(","),q;q={start:e(r[c.start]),end:e(r[c.end])};if(q.start===-1||q.end===-1){throw"Invalid time"}var n=g.call(l,/\{(\\[\w]+\(?([\w\d]+,?)+\)?)+\}/gi,""),h=n.replace,l;l=r.length;g=[];for(var k=c.text;k<l;k++){g.push(r[k])}l=g.join(",");var g=l.replace;q.text=h.call(n,/\\N/gi,"<br />");return q}function e(c){var f=c.split(":");if(c.length!==10||f.length<3){return -1}return parseInt(f[0],10)*3600+parseInt(f[1],10)*60+parseFloat(f[2],10)}function d(f,c){var g={};g[f]=c;return g}a.parser("parseSSA",function(h){var g={title:"",remote:"",data:[]},f=[],c=0,t;h=h.text.split(/(?:\r\n|\r|\n)/gm);for(t=h.length;c<t&&h[c]!=="[Events]";){c++}var n=h[++c].substr(8).split(", "),s={},r,l;l=0;for(r=n.length;l<r;l++){if(n[l]==="Start"){s.start=l}else{if(n[l]==="End"){s.end=l}else{if(n[l]==="Text"){s.text=l}}}}for(;++c<t&&h[c]&&h[c][0]!=="[";){try{f.push(d("subtitle",b(h[c],s)))}catch(k){}}g.data=f;return g})})(Popcorn);(function(l){function d(e,c,f){var b=e.firstChild;e=k(e,f);f=[];for(var h;b;){if(b.nodeType===1){if(b.nodeName==="p"){f.push(i(b,c,e))}else{if(b.nodeName==="div"){h=a(b.getAttribute("begin"));if(h<0){h=c}f.push.apply(f,d(b,h,e))}}}b=b.nextSibling}return f}function k(c,b){var e=c.getAttribute("region");return e!==null?e:b||""}function i(e,c,f){var b={};b.text=(e.textContent||e.text).replace(g,"").replace(j,"<br />");b.id=e.getAttribute("xml:id")||e.getAttribute("id");b.start=a(e.getAttribute("begin"),c);b.end=a(e.getAttribute("end"),c);b.target=k(e,f);if(b.end<0){b.end=a(e.getAttribute("duration"),0);if(b.end>=0){b.end+=b.start}else{b.end=Number.MAX_VALUE}}return{subtitle:b}}function a(e,c){var f;if(!e){return -1}try{return l.util.toSeconds(e)}catch(b){for(var h=e.length-1;h>=0&&e[h]<="9"&&e[h]>="0";){h--}f=h;h=parseFloat(e.substring(0,f));f=e.substring(f);return h*({h:3600,m:60,s:1,ms:0.001}[f]||-1)+(c||0)}}var g=/^[\s]+|[\s]+$/gm,j=/(?:\r\n|\r|\n)/gm;l.parser("parseTTML",function(c){var b={title:"",remote:"",data:[]};if(!c.xml||!c.xml.documentElement){return b}c=c.xml.documentElement.firstChild;if(!c){return b}for(;c.nodeName!=="body";){c=c.nextSibling}if(c){b.data=d(c,0)}return b})})(Popcorn);(function(a){a.parser("parseTTXT",function(j){var m={title:"",remote:"",data:[]},b=function(c){c=c.split(":");var e=0;try{return parseFloat(c[0],10)*60*60+parseFloat(c[1],10)*60+parseFloat(c[2],10)}catch(f){e=0}return e},l=function(c,e){var f={};f[c]=e;return f};j=j.xml.lastChild.lastChild;for(var k=Number.MAX_VALUE,g=[];j;){if(j.nodeType===1&&j.nodeName==="TextSample"){var d={};d.start=b(j.getAttribute("sampleTime"));d.text=j.getAttribute("text");if(d.text){d.end=k-0.001;g.push(l("subtitle",d))}k=d.start}j=j.previousSibling}m.data=g.reverse();return m})})(Popcorn);(function(c){function a(g){var d=g.split(":");g=g.length;var f;if(g!==12&&g!==9){throw"Bad cue"}g=d.length-1;try{f=parseInt(d[g-1],10)*60+parseFloat(d[g],10);if(g===2){f+=parseInt(d[0],10)*3600}}catch(e){throw"Bad cue"}return f}function b(d,e){var f={};f[d]=e;return f}c.parser("parseVTT",function(f){var g={title:"",remote:"",data:[]},e=[],d=0,v=0,u,n;f=f.text.split(/(?:\r\n|\r|\n)/gm);v=f.length;if(v===0||f[0]!=="WEBVTT"){return g}for(d++;d<v;){u=[];try{for(var t=d;t<v&&!f[t];){t++}d=t;var r=f[d++];t=void 0;var l={};if(!r||r.indexOf("-->")===-1){throw"Bad cue"}t=r.replace(/--\>/," --> ").split(/[\t ]+/);if(t.length<2){throw"Bad cue"}l.id=r;l.start=a(t[0]);l.end=a(t[2]);for(n=l;d<v&&f[d];){u.push(f[d++])}n.text=u.join("<br />");e.push(b("subtitle",n))}catch(k){for(d=d;d<v&&f[d];){d++}d=d}}g.data=e;return g})})(Popcorn);(function(a){a.parser("parseXML","XML",function(o){var g={title:"",remote:"",data:[]},r={},b=function(c){c=c.split(":");if(c.length===1){return parseFloat(c[0],10)}else{if(c.length===2){return parseFloat(c[0],10)+parseFloat(c[1]/12,10)}else{if(c.length===3){return parseInt(c[0]*60,10)+parseFloat(c[1],10)+parseFloat(c[2]/12,10)}else{if(c.length===4){return parseInt(c[0]*3600,10)+parseInt(c[1]*60,10)+parseFloat(c[2],10)+parseFloat(c[3]/12,10)}}}}},q=function(p){for(var i={},c=0,h=p.length;c<h;c++){var e=p.item(c).nodeName,f=p.item(c).nodeValue,n=r[f];if(e==="in"){i.start=b(f)}else{if(e==="out"){i.end=b(f)}else{if(e==="resourceid"){for(var j in n){if(n.hasOwnProperty(j)){if(!i[j]&&j!=="id"){i[j]=n[j]}}}}else{i[e]=f}}}}return i},m=function(f,e){var c={};c[f]=e;return c},l=function(h,f,e){var c={};a.extend(c,f,q(h.attributes),{text:h.textContent||h.text});f=h.childNodes;if(f.length<1||f.length===1&&f[0].nodeType===3){if(e){r[c.id]=c}else{g.data.push(m(h.nodeName,c))}}else{for(h=0;h<f.length;h++){f[h].nodeType===1&&l(f[h],c,e)}}};o=o.documentElement.childNodes;for(var k=0,d=o.length;k<d;k++){if(o[k].nodeType===1){o[k].nodeName==="manifest"?l(o[k],{},true):l(o[k],{},false)}}return g})})(Popcorn);(function(){var a=false,b=false;Popcorn.player("soundcloud",{_canPlayType:function(d,c){return/(?:http:\/\/www\.|http:\/\/|www\.|\.|^)(soundcloud)/.test(c)&&d.toLowerCase()!=="video"},_setup:function(c){function u(){a=true;SC.initialize({client_id:"PRaNFlda6Bhf5utPjUsptg"});SC.get("/resolve",{url:r.src},function(e){r.width=r.style.width?""+r.offsetWidth:"560";r.height=r.style.height?""+r.offsetHeight:"315";k.scrolling="no";k.frameborder="no";k.id="soundcloud-"+Popcorn.guid();k.src="http://w.soundcloud.com/player/?url="+e.uri+"&show_artwork=false&buying=false&liking=false&sharing=false";k.width="100%";k.height="100%";c.loadListener=function(){c.widget=y=SC.Widget(k.id);y.bind(SC.Widget.Events.FINISH,function(){r.pause();r.dispatchEvent("ended")});y.bind(SC.Widget.Events.PLAY_PROGRESS,function(h){l=h.currentPosition/1000;r.dispatchEvent("timeupdate")});y.bind(SC.Widget.Events.PLAY,function(){v=f=false;r.dispatchEvent("play");r.dispatchEvent("playing");r.currentTime=l;t.next()});y.bind(SC.Widget.Events.PAUSE,function(){v=f=true;r.dispatchEvent("pause");t.next()});y.bind(SC.Widget.Events.READY,function(){y.getDuration(function(h){x=h/1000;r.style.visibility="visible";r.dispatchEvent("durationchange");r.readyState=4;r.dispatchEvent("readystatechange");r.dispatchEvent("loadedmetadata");r.dispatchEvent("loadeddata");r.dispatchEvent("canplaythrough");r.dispatchEvent("load");!r.paused&&r.play()});y.getVolume(function(h){g=h/100})})};k.addEventListener("load",c.loadListener,false);r.appendChild(k)})}function w(){if(b){(function e(){setTimeout(function(){a?u():e()},100)})()}else{b=true;Popcorn.getScript("http://w.soundcloud.com/player/api.js",function(){Popcorn.getScript("http://connect.soundcloud.com/sdk.js",function(){u()})})}}var r=this,k=document.createElement("iframe"),g=1,l=0,v=true,f=true,y,x=0,d=false,t=Popcorn.player.playerQueue();c._container=k;r.style.visibility="hidden";r.play=function(){v=false;t.add(function(){if(f){y&&y.play()}else{t.next()}})};r.pause=function(){v=true;t.add(function(){if(f){t.next()}else{y&&y.pause()}})};Object.defineProperties(r,{muted:{set:function(e){if(e){y&&y.getVolume(function(h){g=h/100});y&&y.setVolume(0);d=true}else{y&&y.setVolume(g*100);d=false}r.dispatchEvent("volumechange")},get:function(){return d}},volume:{set:function(e){y&&y.setVolume(e*100);g=e;r.dispatchEvent("volumechange")},get:function(){return d?0:g}},currentTime:{set:function(e){l=e;y&&y.seekTo(e*1000);r.dispatchEvent("seeked");r.dispatchEvent("timeupdate")},get:function(){return l}},duration:{get:function(){return x}},paused:{get:function(){return v}}});a?u():w()},_teardown:function(g){var f=g.widget,i=SC.Widget.Events,d=g._container;g.destroyed=true;if(f){for(var c in i){f&&f.unbind(i[c])}}else{d.removeEventListener("load",g.loadEventListener,false)}}})})();(function(){function a(g){var f=a.options;g=f.parser[f.strictMode?"strict":"loose"].exec(g);for(var c={},d=14;d--;){c[f.key[d]]=g[d]||""}c[f.q.name]={};c[f.key[12]].replace(f.q.parser,function(i,h,e){if(h){c[f.q.name][h]=e}});return c}function b(d,c){return/player.vimeo.com\/video\/\d+/.test(c)||/vimeo.com\/\d+/.test(c)}a.options={strictMode:false,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}};Popcorn.player("vimeo",{_canPlayType:b,_setup:function(v){function z(g,h){var i=c.src.split("?")[0],e=JSON.stringify({method:g,value:h});if(i.substr(0,2)==="//"){i=window.location.protocol+i}c.contentWindow?c.contentWindow.postMessage(e,i):l.unload()}function C(e){if(e.origin==="http://player.vimeo.com"){var g;try{g=JSON.parse(e.data)}catch(h){console.warn(h)}if(g.player_id==G){g.method&&D[g.method]&&D[g.method](g);g.event&&E[g.event]&&E[g.event](g)}}}function H(){u||(u=setInterval(function(){l.dispatchEvent("timeupdate")},k));w||(w=setInterval(function(){z("getCurrentTime")},t))}function r(){if(u){clearInterval(u);u=0}if(w){clearInterval(w);w=0}}var k=250,t=16,F={MEDIA_ERR_ABORTED:1,MEDIA_ERR_NETWORK:2,MEDIA_ERR_DECODE:3,MEDIA_ERR_SRC_NOT_SUPPORTED:4},G,l=this,d={q:[],queue:function(e){this.q.push(e);this.process()},process:function(){if(B){for(;this.q.length;){this.q.shift()()}}}},w,u,B,c=document.createElement("iframe"),f={error:null,src:l.src,NETWORK_EMPTY:0,NETWORK_IDLE:1,NETWORK_LOADING:2,NETWORK_NO_SOURCE:3,networkState:0,HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4,readyState:0,seeking:false,currentTime:0,duration:NaN,paused:true,ended:false,autoplay:false,loop:false,volume:1,muted:false,width:0,height:0};Popcorn.forEach("error networkState readyState seeking duration paused ended".split(" "),function(e){Object.defineProperty(l,e,{get:function(){return f[e]}})});Object.defineProperties(l,{src:{get:function(){return f.src},set:function(e){f.src=e;l.load()}},currentTime:{get:function(){return f.currentTime},set:function(e){d.queue(function(){z("seekTo",e)});f.seeking=true;l.dispatchEvent("seeking")}},autoplay:{get:function(){return f.autoplay},set:function(e){f.autoplay=!!e}},loop:{get:function(){return f.loop},set:function(e){f.loop=!!e;d.queue(function(){z("setLoop",loop)})}},volume:{get:function(){return f.volume},set:function(e){f.volume=e;d.queue(function(){z("setVolume",f.muted?0:f.volume)});l.dispatchEvent("volumechange")}},muted:{get:function(){return f.muted},set:function(e){f.muted=!!e;d.queue(function(){z("setVolume",f.muted?0:f.volume)});l.dispatchEvent("volumechange")}},width:{get:function(){return c.width},set:function(e){c.width=e}},height:{get:function(){return c.height},set:function(e){c.height=e}}});var D={getCurrentTime:function(e){f.currentTime=parseFloat(e.value)},getDuration:function(e){f.duration=parseFloat(e.value);if(!isNaN(f.duration)){f.readyState=4;l.dispatchEvent("durationchange");l.dispatchEvent("loadedmetadata");l.dispatchEvent("loadeddata");l.dispatchEvent("canplay");l.dispatchEvent("canplaythrough")}},getVolume:function(e){f.volume=parseFloat(e.value)}},E={ready:function(){z("addEventListener","loadProgress");z("addEventListener","playProgress");z("addEventListener","play");z("addEventListener","pause");z("addEventListener","finish");z("addEventListener","seek");z("getDuration");B=true;d.process();l.dispatchEvent("loadstart")},loadProgress:function(e){l.dispatchEvent("progress");f.duration=parseFloat(e.data.duration)},playProgress:function(e){f.currentTime=parseFloat(e.data.seconds)},play:function(){if(f.seeking){f.seeking=false;l.dispatchEvent("seeked")}f.paused=false;f.ended=false;H();l.dispatchEvent("play")},pause:function(){f.paused=true;r();l.dispatchEvent("pause")},finish:function(){f.ended=true;r();l.dispatchEvent("ended")},seek:function(e){f.currentTime=parseFloat(e.data.seconds);f.seeking=false;f.ended=false;l.dispatchEvent("timeupdate");l.dispatchEvent("seeked")}};l.load=function(){B=false;G=Popcorn.guid();var e=a(f.src),h={},j=[],i={api:1,player_id:G};if(b(l.nodeName,e.source)){Popcorn.extend(h,v);Popcorn.extend(h,e.queryKey);Popcorn.extend(h,i);e="http://player.vimeo.com/video/"+/\d+$/.exec(e.path)+"?";for(var g in h){h.hasOwnProperty(g)&&j.push(encodeURIComponent(g)+"="+encodeURIComponent(h[g]))}e+=j.join("&");f.loop=!!e.match(/loop=1/);f.autoplay=!!e.match(/autoplay=1/);c.width=l.style.width?l.style.width:500;c.height=l.style.height?l.style.height:281;c.frameBorder=0;c.webkitAllowFullScreen=true;c.mozAllowFullScreen=true;c.allowFullScreen=true;c.src=e;l.appendChild(c)}else{e=f.MEDIA_ERR_SRC_NOT_SUPPORTED;f.error={};Popcorn.extend(f.error,F);f.error.code=e;l.dispatchEvent("error")}};l.unload=function(){r();window.removeEventListener("message",C,false)};l.play=function(){d.queue(function(){z("play")})};l.pause=function(){d.queue(function(){z("pause")})};setTimeout(function(){window.addEventListener("message",C,false);l.load()},0)},_teardown:function(){this.unload&&this.unload()}})})();(function(c,a){c.onYouTubePlayerAPIReady=function(){onYouTubePlayerAPIReady.ready=true;for(var d=0;d<onYouTubePlayerAPIReady.waiting.length;d++){onYouTubePlayerAPIReady.waiting[d]()}};if(c.YT){c.quarantineYT=c.YT;c.YT=null}onYouTubePlayerAPIReady.waiting=[];var b=false;a.player("youtube",{_canPlayType:function(e,d){return typeof d==="string"&&/(?:http:\/\/www\.|http:\/\/|www\.|\.|^)(youtu)/.test(d)&&e.toLowerCase()!=="video"},_setup:function(k){if(!c.YT&&!b){b=true;a.getScript("//youtube.com/player_api")}var l=this,e=false,n=document.createElement("div"),g=0,d=true,w=false,x=0,v=false,u=100,t=a.player.playerQueue(),f=function(){a.player.defineProperty(l,"currentTime",{set:function(h){if(!k.destroyed){w=true;g=Math.round(+h*100)/100}},get:function(){return g}});a.player.defineProperty(l,"paused",{get:function(){return d}});a.player.defineProperty(l,"muted",{set:function(h){if(k.destroyed){return h}if(k.youtubeObject.isMuted()!==h){h?k.youtubeObject.mute():k.youtubeObject.unMute();v=k.youtubeObject.isMuted();l.dispatchEvent("volumechange")}return k.youtubeObject.isMuted()},get:function(){if(k.destroyed){return 0}return k.youtubeObject.isMuted()}});a.player.defineProperty(l,"volume",{set:function(h){if(k.destroyed){return h}if(k.youtubeObject.getVolume()/100!==h){k.youtubeObject.setVolume(h*100);u=k.youtubeObject.getVolume();l.dispatchEvent("volumechange")}return k.youtubeObject.getVolume()/100},get:function(){if(k.destroyed){return 0}return k.youtubeObject.getVolume()/100}});l.play=function(){if(!k.destroyed){d=false;t.add(function(){if(k.youtubeObject.getPlayerState()!==1){w=false;k.youtubeObject.playVideo()}else{t.next()}})}};l.pause=function(){if(!k.destroyed){d=true;t.add(function(){k.youtubeObject.getPlayerState()!==2?k.youtubeObject.pauseVideo():t.next()})}}};n.id=l.id+a.guid();k._container=n;l.appendChild(n);var r=function(){var q,y,s,p,m=true,o=function(){if(!k.destroyed){if(w){if(g===k.youtubeObject.getCurrentTime()){w=false;l.dispatchEvent("seeked");l.dispatchEvent("timeupdate")}else{k.youtubeObject.seekTo(g)}}else{g=k.youtubeObject.getCurrentTime();l.dispatchEvent("timeupdate")}setTimeout(o,250)}},j=function(A){var z=k.youtubeObject.getDuration();if(isNaN(z)||z===0){setTimeout(function(){j(A*2)},A*1000)}else{l.duration=z;l.dispatchEvent("durationchange");l.dispatchEvent("loadedmetadata");l.dispatchEvent("loadeddata");l.readyState=4;o();l.dispatchEvent("canplaythrough")}};k.controls=+k.controls===0||+k.controls===1?k.controls:1;k.annotations=+k.annotations===1||+k.annotations===3?k.annotations:1;q=/^.*(?:\/|v=)(.{11})/.exec(l.src)[1];y=(l.src.split("?")[1]||"").replace(/v=.{11}/,"");y=y.replace(/&t=(?:(\d+)m)?(?:(\d+)s)?/,function(A,z,B){z|=0;B|=0;x=+B+z*60;return""});y=y.replace(/&start=(\d+)?/,function(A,z){z|=0;x=z;return""});e=/autoplay=1/.test(y);y=y.split(/[\&\?]/g);s={wmode:"transparent"};for(var i=0;i<y.length;i++){p=y[i].split("=");s[p[0]]=p[1]}k.youtubeObject=new YT.Player(n.id,{height:"100%",width:"100%",wmode:"transparent",playerVars:s,videoId:q,events:{onReady:function(){u=l.volume;v=l.muted;h();d=l.paused;f();k.youtubeObject.playVideo();l.currentTime=x},onStateChange:function(z){if(!(k.destroyed||z.data===-1)){if(z.data===2){d=true;l.dispatchEvent("pause");t.next()}else{if(z.data===1&&!m){d=false;l.dispatchEvent("play");l.dispatchEvent("playing");t.next()}else{if(z.data===0){l.dispatchEvent("ended")}else{if(z.data===1&&m){m=false;if(e||!l.paused){d=false}d&&k.youtubeObject.pauseVideo();j(0.025)}}}}}},onError:function(z){if([2,100,101,150].indexOf(z.data)!==-1){l.error={customCode:z.data};l.dispatchEvent("error")}}}});var h=function(){if(!k.destroyed){if(v!==k.youtubeObject.isMuted()){v=k.youtubeObject.isMuted();l.dispatchEvent("volumechange")}if(u!==k.youtubeObject.getVolume()){u=k.youtubeObject.getVolume();l.dispatchEvent("volumechange")}setTimeout(h,250)}}};onYouTubePlayerAPIReady.ready?r():onYouTubePlayerAPIReady.waiting.push(r)},_teardown:function(e){e.destroyed=true;var d=e.youtubeObject;if(d){d.stopVideo();d.clearVideo&&d.clearVideo()}this.removeChild(document.getElementById(e._container.id))}})})(window,Popcorn);