/*d47dccc4449361f9b7ad9586181bee9c0b334eca*/(function(l,F){function z(b,c){return function(){if(H.plugin.debug){return b.apply(this,arguments)}try{return b.apply(this,arguments)}catch(d){H.plugin.errors.push({plugin:c,thrown:d,source:b.toString()});this.emit("pluginerror",H.plugin.errors)}}}if(F.addEventListener){var I=Array.prototype,J=Object.prototype,G=I.forEach,E=I.slice,D=J.hasOwnProperty,C=J.toString,v=l.Popcorn,B=[],w=false,t={events:{hash:{},apis:{}}},k=function(){return l.requestAnimationFrame||l.webkitRequestAnimationFrame||l.mozRequestAnimationFrame||l.oRequestAnimationFrame||l.msRequestAnimationFrame||function(b){l.setTimeout(b,16)}}(),H=function(b,c){return new H.p.init(b,c||null)};H.version="1.3";H.isSupported=true;H.instances=[];H.p=H.prototype={init:function(c,i){var b,e=this;if(typeof c==="function"){if(F.readyState==="complete"){c(F,H)}else{B.push(c);if(!w){w=true;var h=function(){F.removeEventListener("DOMContentLoaded",h,false);for(var m=0,j=B.length;m<j;m++){B[m].call(F,H)}B=null};F.addEventListener("DOMContentLoaded",h,false)}}}else{if(typeof c==="string"){try{b=F.querySelector(c)}catch(f){throw Error("Popcorn.js Error: Invalid media element selector: "+c)}}this.media=b||c;b=this.media.nodeName&&this.media.nodeName.toLowerCase()||"video";this[b]=this.media;this.options=i||{};this.id=this.options.id||H.guid(b);if(H.byId(this.id)){throw Error("Popcorn.js Error: Cannot use duplicate ID ("+this.id+")")}this.isDestroyed=false;this.data={running:{cue:[]},timeUpdate:H.nop,disabled:{},events:{},hooks:{},history:[],state:{volume:this.media.volume},trackRefs:{},trackEvents:{byStart:[{start:-1,end:-1}],byEnd:[{start:-1,end:-1}],animating:[],startIndex:0,endIndex:0,previousUpdateTime:-1}};H.instances.push(this);var d=function(){if(e.media.currentTime<0){e.media.currentTime=0}e.media.removeEventListener("loadeddata",d,false);var o,n,m,p,j;o=e.media.duration;o=o!=o?Number.MAX_VALUE:o+1;H.addTrackEvent(e,{start:o,end:o});if(e.options.frameAnimation){e.data.timeUpdate=function(){H.timeUpdate(e,{});H.forEach(H.manifest,function(s,r){if(n=e.data.running[r]){p=n.length;for(var q=0;q<p;q++){m=n[q];(j=m._natives)&&j.frame&&j.frame.call(e,{},m,e.currentTime())}}});e.emit("timeupdate");!e.isDestroyed&&k(e.data.timeUpdate)};!e.isDestroyed&&k(e.data.timeUpdate)}else{e.data.timeUpdate=function(q){H.timeUpdate(e,q)};e.isDestroyed||e.media.addEventListener("timeupdate",e.data.timeUpdate,false)}};Object.defineProperty(this,"error",{get:function(){return e.media.error}});e.media.readyState>=2?d():e.media.addEventListener("loadeddata",d,false);return this}}};H.p.init.prototype=H.p;H.byId=function(c){for(var e=H.instances,b=e.length,d=0;d<b;d++){if(e[d].id===c){return e[d]}}return null};H.forEach=function(c,f,b){if(!c||!f){return{}}b=b||this;var d,e;if(G&&c.forEach===G){return c.forEach(f,b)}if(C.call(c)==="[object NodeList]"){d=0;for(e=c.length;d<e;d++){f.call(b,c[d],d,c)}return c}for(d in c){D.call(c,d)&&f.call(b,c[d],d,c)}return c};H.extend=function(b){var c=E.call(arguments,1);H.forEach(c,function(d){for(var e in d){b[e]=d[e]}});return b};H.extend(H,{noConflict:function(b){if(b){l.Popcorn=v}return H},error:function(b){throw Error(b)},guid:function(b){H.guid.counter++;return(b?b:"")+(+new Date+H.guid.counter)},sizeOf:function(c){var d=0,b;for(b in c){d++}return d},isArray:Array.isArray||function(b){return C.call(b)==="[object Array]"},nop:function(){},position:function(c){c=c.getBoundingClientRect();var i={},b=F.documentElement,e=F.body,h,f,d;h=b.clientTop||e.clientTop||0;f=b.clientLeft||e.clientLeft||0;d=l.pageYOffset&&b.scrollTop||e.scrollTop;b=l.pageXOffset&&b.scrollLeft||e.scrollLeft;h=Math.ceil(c.top+d-h);f=Math.ceil(c.left+b-f);for(var j in c){i[j]=Math.round(c[j])}return H.extend({},i,{top:h,left:f})},disable:function(c,e){if(!c.data.disabled[e]){c.data.disabled[e]=true;for(var b=c.data.running[e].length-1,d;b>=0;b--){d=c.data.running[e][b];d._natives.end.call(c,null,d)}}return c},enable:function(c,e){if(c.data.disabled[e]){c.data.disabled[e]=false;for(var b=c.data.running[e].length-1,d;b>=0;b--){d=c.data.running[e][b];d._natives.start.call(c,null,d)}}return c},destroy:function(c){var i=c.data.events,b=c.data.trackEvents,e,h,f,d;for(h in i){e=i[h];for(f in e){delete e[f]}i[h]=null}for(d in H.registryByName){H.removePlugin(c,d)}b.byStart.length=0;b.byEnd.length=0;if(!c.isDestroyed){c.data.timeUpdate&&c.media.removeEventListener("timeupdate",c.data.timeUpdate,false);c.isDestroyed=true}}});H.guid.counter=1;H.extend(H.p,function(){var b={};H.forEach("load play pause currentTime playbackRate volume duration preload playbackRate autoplay loop controls muted buffered readyState seeking paused played seekable ended".split(/\s+/g),function(c){b[c]=function(d){var e;if(typeof this.media[c]==="function"){if(d!=null&&/play|pause/.test(c)){this.media.currentTime=H.util.toSeconds(d)}this.media[c]();return this}if(d!=null){e=this.media[c];this.media[c]=d;e!==d&&this.emit("attrchange",{attribute:c,previousValue:e,currentValue:d});return this}return this.media[c]}});return b}());H.forEach("enable disable".split(" "),function(b){H.p[b]=function(c){return H[b](this,c)}});H.extend(H.p,{roundTime:function(){return Math.round(this.media.currentTime)},exec:function(c,i,b){var e=arguments.length,h,f;try{f=H.util.toSeconds(c)}catch(d){}if(typeof f==="number"){c=f}if(typeof c==="number"&&e===2){b=i;i=c;c=H.guid("cue")}else{if(e===1){i=-1}else{if(h=this.getTrackEvent(c)){if(typeof c==="string"&&e===2){if(typeof i==="number"){b=h._natives.start}if(typeof i==="function"){b=i;i=h.start}}}else{if(e>=2){if(typeof i==="string"){try{f=H.util.toSeconds(i)}catch(j){}i=f}if(typeof i==="number"){b=H.nop()}if(typeof i==="function"){b=i;i=-1}}}}}H.addTrackEvent(this,{id:c,start:i,end:i+1,_running:false,_natives:{start:b||H.nop,end:H.nop,type:"cue"}});return this},mute:function(b){b=b==null||b===true?"muted":"unmuted";if(b==="unmuted"){this.media.muted=false;this.media.volume=this.data.state.volume}if(b==="muted"){this.data.state.volume=this.media.volume;this.media.muted=true}this.emit(b);return this},unmute:function(b){return this.mute(b==null?false:!b)},position:function(){return H.position(this.media)},toggle:function(b){return H[this.data.disabled[b]?"enable":"disable"](this,b)},defaults:function(b,c){if(H.isArray(b)){H.forEach(b,function(d){for(var e in d){this.defaults(e,d[e])}},this);return this}if(!this.options.defaults){this.options.defaults={}}this.options.defaults[b]||(this.options.defaults[b]={});H.extend(this.options.defaults[b],c);return this}});H.Events={UIEvents:"blur focus focusin focusout load resize scroll unload",MouseEvents:"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave click dblclick",Events:"loadstart progress suspend emptied stalled play pause error loadedmetadata loadeddata waiting playing canplay canplaythrough seeking seeked timeupdate ended ratechange durationchange volumechange"};H.Events.Natives=H.Events.UIEvents+" "+H.Events.MouseEvents+" "+H.Events.Events;t.events.apiTypes=["UIEvents","MouseEvents","Events"];(function(c,h){for(var b=t.events.apiTypes,d=c.Natives.split(/\s+/g),f=0,e=d.length;f<e;f++){h.hash[d[f]]=true}b.forEach(function(i){h.apis[i]={};for(var n=c[i].split(/\s+/g),m=n.length,j=0;j<m;j++){h.apis[i][n[j]]=true}})})(H.Events,t.events);H.events={isNative:function(b){return !!t.events.hash[b]},getInterface:function(c){if(!H.events.isNative(c)){return false}var i=t.events,b=i.apiTypes;i=i.apis;for(var e=0,h=b.length,f,d;e<h;e++){d=b[e];if(i[d][c]){f=d;break}}return f},all:H.Events.Natives.split(/\s+/g),fn:{trigger:function(c,d){var b;if(this.data.events[c]&&H.sizeOf(this.data.events[c])){if(b=H.events.getInterface(c)){b=F.createEvent(b);b.initEvent(c,true,true,l,1);this.media.dispatchEvent(b);return this}H.forEach(this.data.events[c],function(e){e.call(this,d)},this)}return this},listen:function(c,h){var b=this,d=true,f=H.events.hooks[c],e;if(!this.data.events[c]){this.data.events[c]={};d=false}if(f){f.add&&f.add.call(this,{},h);if(f.bind){c=f.bind}if(f.handler){e=h;h=function(i){f.handler.call(b,i,e)}}d=true;if(!this.data.events[c]){this.data.events[c]={};d=false}}this.data.events[c][h.name||h.toString()+H.guid()]=h;!d&&H.events.all.indexOf(c)>-1&&this.media.addEventListener(c,function(i){H.forEach(b.data.events[c],function(j){typeof j==="function"&&j.call(b,i)})},false);return this},unlisten:function(b,c){if(this.data.events[b]&&this.data.events[b][c]){delete this.data.events[b][c];return this}this.data.events[b]=null;return this}},hooks:{canplayall:{bind:"canplaythrough",add:function(c,d){var b=false;if(this.media.readyState){d.call(this,c);b=true}this.data.hooks.canplayall={fired:b}},handler:function(b,c){if(!this.data.hooks.canplayall.fired){c.call(this,b);this.data.hooks.canplayall.fired=true}}}}};H.forEach([["trigger","emit"],["listen","on"],["unlisten","off"]],function(b){H.p[b[0]]=H.p[b[1]]=H.events.fn[b[0]]});H.addTrackEvent=function(c,i){var b,e;if(i.id){b=c.getTrackEvent(i.id)}if(b){e=true;i=H.extend({},b,i);c.removeTrackEvent(i.id)}if(i&&i._natives&&i._natives.type&&c.options.defaults&&c.options.defaults[i._natives.type]){i=H.extend({},c.options.defaults[i._natives.type],i)}if(i._natives){i._id=i.id||i._id||H.guid(i._natives.type);c.data.history.push(i._id)}i.start=H.util.toSeconds(i.start,c.options.framerate);i.end=H.util.toSeconds(i.end,c.options.framerate);var h=c.data.trackEvents.byStart,f=c.data.trackEvents.byEnd,d;for(d=h.length-1;d>=0;d--){if(i.start>=h[d].start){h.splice(d+1,0,i);break}}for(h=f.length-1;h>=0;h--){if(i.end>f[h].end){f.splice(h+1,0,i);break}}if(i.end>c.media.currentTime&&i.start<=c.media.currentTime){i._running=true;c.data.running[i._natives.type].push(i);c.data.disabled[i._natives.type]||i._natives.start.call(c,null,i)}d<=c.data.trackEvents.startIndex&&i.start<=c.data.trackEvents.previousUpdateTime&&c.data.trackEvents.startIndex++;h<=c.data.trackEvents.endIndex&&i.end<c.data.trackEvents.previousUpdateTime&&c.data.trackEvents.endIndex++;this.timeUpdate(c,null,true);i._id&&H.addTrackEvent.ref(c,i);if(e){e=i._natives.type==="cue"?"cuechange":"trackchange";c.emit(e,{id:i.id,previousValue:{time:b.start,fn:b._natives.start},currentValue:{time:i.start,fn:i._natives.start}})}};H.addTrackEvent.ref=function(b,c){b.data.trackRefs[c._id]=c;return b};H.removeTrackEvent=function(i,f){for(var d,e,o=i.data.history.length,n=i.data.trackEvents.byStart.length,m=0,h=0,b=[],p=[],c=[],j=[];--n>-1;){d=i.data.trackEvents.byStart[m];e=i.data.trackEvents.byEnd[m];if(!d._id){b.push(d);p.push(e)}if(d._id){d._id!==f&&b.push(d);e._id!==f&&p.push(e);if(d._id===f){h=m;d._natives._teardown&&d._natives._teardown.call(i,d)}}m++}n=i.data.trackEvents.animating.length;m=0;if(n){for(;--n>-1;){d=i.data.trackEvents.animating[m];d._id||c.push(d);d._id&&d._id!==f&&c.push(d);m++}}h<=i.data.trackEvents.startIndex&&i.data.trackEvents.startIndex--;h<=i.data.trackEvents.endIndex&&i.data.trackEvents.endIndex--;i.data.trackEvents.byStart=b;i.data.trackEvents.byEnd=p;i.data.trackEvents.animating=c;for(n=0;n<o;n++){i.data.history[n]!==f&&j.push(i.data.history[n])}i.data.history=j;H.removeTrackEvent.ref(i,f)};H.removeTrackEvent.ref=function(b,c){delete b.data.trackRefs[c];return b};H.getTrackEvents=function(c){var f=[];c=c.data.trackEvents.byStart;for(var b=c.length,d=0,e;d<b;d++){e=c[d];e._id&&f.push(e)}return f};H.getTrackEvents.ref=function(b){return b.data.trackRefs};H.getTrackEvent=function(b,c){return b.data.trackRefs[c]};H.getTrackEvent.ref=function(b,c){return b.data.trackRefs[c]};H.getLastTrackEventId=function(b){return b.data.history[b.data.history.length-1]};H.timeUpdate=function(j,h){var e=j.media.currentTime,f=j.data.trackEvents.previousUpdateTime,p=j.data.trackEvents,o=p.endIndex,n=p.startIndex,i=p.byStart.length,c=p.byEnd.length,q=H.registryByName,d,m,b;if(f<=e){for(;p.byEnd[o]&&p.byEnd[o].end<=e;){d=p.byEnd[o];m=(f=d._natives)&&f.type;if(!f||q[m]||j[m]){if(d._running===true){d._running=false;b=j.data.running[m];b.splice(b.indexOf(d),1);if(!j.data.disabled[m]){f.end.call(j,h,d);j.emit("trackend",H.extend({},d,{plugin:m,type:"trackend"}))}}o++}else{H.removeTrackEvent(j,d._id);return}}for(;p.byStart[n]&&p.byStart[n].start<=e;){d=p.byStart[n];m=(f=d._natives)&&f.type;if(!f||q[m]||j[m]){if(d.end>e&&d._running===false){d._running=true;j.data.running[m].push(d);if(!j.data.disabled[m]){f.start.call(j,h,d);j.emit("trackstart",H.extend({},d,{plugin:m,type:"trackstart"}))}}n++}else{H.removeTrackEvent(j,d._id);return}}}else{if(f>e){for(;p.byStart[n]&&p.byStart[n].start>e;){d=p.byStart[n];m=(f=d._natives)&&f.type;if(!f||q[m]||j[m]){if(d._running===true){d._running=false;b=j.data.running[m];b.splice(b.indexOf(d),1);if(!j.data.disabled[m]){f.end.call(j,h,d);j.emit("trackend",H.extend({},d,{plugin:m,type:"trackend"}))}}n--}else{H.removeTrackEvent(j,d._id);return}}for(;p.byEnd[o]&&p.byEnd[o].end>e;){d=p.byEnd[o];m=(f=d._natives)&&f.type;if(!f||q[m]||j[m]){if(d.start<=e&&d._running===false){d._running=true;j.data.running[m].push(d);if(!j.data.disabled[m]){f.start.call(j,h,d);j.emit("trackstart",H.extend({},d,{plugin:m,type:"trackstart"}))}}o--}else{H.removeTrackEvent(j,d._id);return}}}}p.endIndex=o;p.startIndex=n;p.previousUpdateTime=e;p.byStart.length<i&&p.startIndex--;p.byEnd.length<c&&p.endIndex--};H.extend(H.p,{getTrackEvents:function(){return H.getTrackEvents.call(null,this)},getTrackEvent:function(b){return H.getTrackEvent.call(null,this,b)},getLastTrackEventId:function(){return H.getLastTrackEventId.call(null,this)},removeTrackEvent:function(b){H.removeTrackEvent.call(null,this,b);return this},removePlugin:function(b){H.removePlugin.call(null,this,b);return this},timeUpdate:function(b){H.timeUpdate.call(null,this,b);return this},destroy:function(){H.destroy.call(null,this);return this}});H.manifest={};H.registry=[];H.registryByName={};H.plugin=function(h,e,c){if(H.protect.natives.indexOf(h.toLowerCase())>=0){H.error("'"+h+"' is a protected function name")}else{var d=["start","end"],m={},j=typeof e==="function",i=["_setup","_teardown","start","end","frame"],f=function(p,o){p=p||H.nop;o=o||H.nop;return function(){p.apply(this,arguments);o.apply(this,arguments)}};H.manifest[h]=c=c||e.manifest||{};i.forEach(function(o){e[o]=z(e[o]||H.nop,h)});var b=function(s,o){if(!o){return this}if(o.ranges&&H.isArray(o.ranges)){H.forEach(o.ranges,function(x){x=H.extend({},o,x);delete x.ranges;this[h](x)},this);return this}var r=o._natives={},q="",p;H.extend(r,s);o._natives.type=h;o._running=false;r.start=r.start||r["in"];r.end=r.end||r.out;if(o.once){r.end=f(r.end,function(){this.removeTrackEvent(o._id)})}r._teardown=f(function(){var y=E.call(arguments),x=this.data.running[r.type];y.unshift(null);y[1]._running&&x.splice(x.indexOf(o),1)&&r.end.apply(this,y)},r._teardown);o.compose=o.compose&&o.compose.split(" ")||[];o.effect=o.effect&&o.effect.split(" ")||[];o.compose=o.compose.concat(o.effect);o.compose.forEach(function(x){q=H.compositions[x]||{};i.forEach(function(y){r[y]=f(r[y],q[y])})});o._natives.manifest=c;if(!("start" in o)){o.start=o["in"]||0}if(!o.end&&o.end!==0){o.end=o.out||Number.MAX_VALUE}if(!D.call(o,"toString")){o.toString=function(){var x=["start: "+o.start,"end: "+o.end,"id: "+(o.id||o._id)];o.target!=null&&x.push("target: "+o.target);return h+" ( "+x.join(", ")+" )"}}if(!o.target){p="options" in c&&c.options;o.target=p&&"target" in p&&p.target}if(o._natives){o._id=H.guid(o._natives.type)}o._natives._setup&&o._natives._setup.call(this,o);H.addTrackEvent(this,o);H.forEach(s,function(y,x){x!=="type"&&d.indexOf(x)===-1&&this.on(x,y)},this);return this};H.p[h]=m[h]=function(q,o){var p;if(q&&!o){o=q}else{if(p=this.getTrackEvent(q)){o=H.extend({},p,o);H.addTrackEvent(this,o);return this}else{o.id=q}}this.data.running[h]=this.data.running[h]||[];p=H.extend({},this.options.defaults&&this.options.defaults[h]||{},o);return b.call(this,j?e.call(this,p):e,p)};c&&H.extend(e,{manifest:c});var n={fn:m[h],definition:e,base:e,parents:[],name:h};H.registry.push(H.extend(m,n,{type:h}));H.registryByName[h]=n;return m}};H.plugin.errors=[];H.plugin.debug=H.version==="1.3";H.removePlugin=function(c,i){if(!i){i=c;c=H.p;if(H.protect.natives.indexOf(i.toLowerCase())>=0){H.error("'"+i+"' is a protected function name");return}var b=H.registry.length,e;for(e=0;e<b;e++){if(H.registry[e].name===i){H.registry.splice(e,1);delete H.registryByName[i];delete H.manifest[i];delete c[i];return}}}b=c.data.trackEvents.byStart;e=c.data.trackEvents.byEnd;var h=c.data.trackEvents.animating,f,d;f=0;for(d=b.length;f<d;f++){if(b[f]&&b[f]._natives&&b[f]._natives.type===i){b[f]._natives._teardown&&b[f]._natives._teardown.call(c,b[f]);b.splice(f,1);f--;d--;if(c.data.trackEvents.startIndex<=f){c.data.trackEvents.startIndex--;c.data.trackEvents.endIndex--}}e[f]&&e[f]._natives&&e[f]._natives.type===i&&e.splice(f,1)}f=0;for(d=h.length;f<d;f++){if(h[f]&&h[f]._natives&&h[f]._natives.type===i){h.splice(f,1);f--;d--}}};H.compositions={};H.compose=function(c,d,b){H.manifest[c]=b||d.manifest||{};H.compositions[c]=d};H.plugin.effect=H.effect=H.compose;var u=/^(?:\.|#|\[)/;H.dom={debug:false,find:function(c,e){var b=null;c=c.trim();e=e||F;if(c){if(!u.test(c)){b=F.getElementById(c);if(b!==null){return b}}try{b=e.querySelector(c)}catch(d){if(H.dom.debug){throw Error(d)}}}return b}};var a=/\?/,g={url:"",data:"",dataType:"",success:H.nop,type:"GET",async:true,xhr:function(){return new l.XMLHttpRequest}};H.xhr=function(b){b.dataType=b.dataType&&b.dataType.toLowerCase()||null;if(b.dataType&&(b.dataType==="jsonp"||b.dataType==="script")){H.xhr.getJSONP(b.url,b.success,b.dataType==="script")}else{b=H.extend({},g,b);b.ajax=b.xhr();if(b.ajax){if(b.type==="GET"&&b.data){b.url+=(a.test(b.url)?"&":"?")+b.data;b.data=null}b.ajax.open(b.type,b.url,b.async);b.ajax.send(b.data||null);return H.xhr.httpData(b)}}};H.xhr.httpData=function(c){var f,b=null,d,e=null;c.ajax.onreadystatechange=function(){if(c.ajax.readyState===4){try{b=JSON.parse(c.ajax.responseText)}catch(i){}f={xml:c.ajax.responseXML,text:c.ajax.responseText,json:b};if(!f.xml||!f.xml.documentElement){f.xml=null;try{d=new DOMParser;e=d.parseFromString(c.ajax.responseText,"text/xml");if(!e.getElementsByTagName("parsererror").length){f.xml=e}}catch(h){}}if(c.dataType){f=f[c.dataType]}c.success.call(c.ajax,f)}};return f};H.xhr.getJSONP=function(h,e,c){var d=F.head||F.getElementsByTagName("head")[0]||F.documentElement,m=F.createElement("script"),j=false,i=[];i=/(=)\?(?=&|$)|\?\?/;var f,b;if(!c){b=h.match(/(callback=[^&]*)/);if(b!==null&&b.length){i=b[1].split("=")[1];if(i==="?"){i="jsonp"}f=H.guid(i);h=h.replace(/(callback=[^&]*)/,"callback="+f)}else{f=H.guid("jsonp");if(i.test(h)){h=h.replace(i,"$1"+f)}i=h.split(/\?(.+)?/);h=i[0]+"?";if(i[1]){h+=i[1]+"&"}h+="callback="+f}window[f]=function(n){e&&e(n);j=true}}m.addEventListener("load",function(){c&&e&&e();j&&delete window[f];d.removeChild(m)},false);m.src=h;d.insertBefore(m,d.firstChild)};H.getJSONP=H.xhr.getJSONP;H.getScript=H.xhr.getScript=function(b,c){return H.xhr.getJSONP(b,c,true)};H.util={toSeconds:function(c,h){var b=/^([0-9]+:){0,2}[0-9]+([.;][0-9]+)?$/,d,f,e;if(typeof c==="number"){return c}typeof c==="string"&&!b.test(c)&&H.error("Invalid time format");b=c.split(":");d=b.length-1;f=b[d];if(f.indexOf(";")>-1){f=f.split(";");e=0;if(h&&typeof h==="number"){e=parseFloat(f[1],10)/h}b[d]=parseInt(f[0],10)+e}d=b[0];return{1:parseFloat(d,10),2:parseInt(d,10)*60+parseFloat(b[1],10),3:parseInt(d,10)*3600+parseInt(b[1],10)*60+parseFloat(b[2],10)}[b.length||1]}};H.p.cue=H.p.exec;H.protect={natives:function(b){return Object.keys?Object.keys(b):function(e){var c,d=[];for(c in e){D.call(e,c)&&d.push(c)}return d}(b)}(H.p).map(function(b){return b.toLowerCase()})};H.forEach({listen:"on",unlisten:"off",trigger:"emit",exec:"cue"},function(c,d){var b=H.p[d];H.p[d]=function(){if(typeof console!=="undefined"&&console.warn){console.warn("Deprecated method '"+d+"', "+(c==null?"do not use.":"use '"+c+"' instead."));H.p[d]=b}return H.p[c].apply(this,[].slice.call(arguments))}});l.Popcorn=H}else{l.Popcorn={isSupported:false};for(I="byId forEach extend effects error guid sizeOf isArray nop position disable enable destroyaddTrackEvent removeTrackEvent getTrackEvents getTrackEvent getLastTrackEventId timeUpdate plugin removePlugin compose effect xhr getJSONP getScript".split(/\s+/);I.length;){l.Popcorn[I.shift()]=function(){}}}})(window,window.document);(function(j,k){var o=j.document,m=j.location,a=/:\/\//,l=m.href.replace(m.href.split("/").slice(-1)[0],""),g=function(c,f,b){c=c||0;f=(f||c||0)+1;b=b||1;f=Math.ceil((f-c)/b)||0;var h=0,e=[];for(e.length=f;h<f;){e[h++]=c;c+=b}return e};k.sequence=function(b,c){return new k.sequence.init(b,c)};k.sequence.init=function(c,e){this.parent=o.getElementById(c);this.seqId=k.guid("__sequenced");this.queue=[];this.playlist=[];this.inOuts={ofVideos:[],ofClips:[]};this.dims={width:0,height:0};this.active=0;this.playing=this.cycling=false;this.times={last:0};this.events={};var b=this,f=0;k.forEach(e,function(n,i){var p=o.createElement("video");p.preload="auto";p.controls=true;p.style.display=i&&"none"||"";p.id=b.seqId+"-"+i;b.queue.push(p);var h=n["in"],r=n.out;b.inOuts.ofVideos.push({"in":h!==undefined&&h||1,out:r!==undefined&&r||0});b.inOuts.ofVideos[i].out=b.inOuts.ofVideos[i].out||b.inOuts.ofVideos[i]["in"]+2;p.src=!a.test(n.src)?l+n.src:n.src;p.setAttribute("data-sequence-owner",c);p.setAttribute("data-sequence-guid",b.seqId);p.setAttribute("data-sequence-id",i);p.setAttribute("data-sequence-clip",[b.inOuts.ofVideos[i]["in"],b.inOuts.ofVideos[i].out].join(":"));b.parent.appendChild(p);b.playlist.push(k("#"+p.id))});b.inOuts.ofVideos.forEach(function(h){h={"in":f,out:f+(h.out-h["in"])};b.inOuts.ofClips.push(h);f=h.out+1});k.forEach(this.queue,function(i,h){function n(){if(!h){b.dims.width=i.videoWidth;b.dims.height=i.videoHeight}i.currentTime=b.inOuts.ofVideos[h]["in"]-0.5;i.removeEventListener("canplaythrough",n,false);return true}i.addEventListener("canplaythrough",n,false);i.addEventListener("play",function(){b.playing=true},false);i.addEventListener("pause",function(){b.playing=false},false);i.addEventListener("timeupdate",function(p){p=p.srcElement||p.target;p=+(p.dataset&&p.dataset.sequenceId||p.getAttribute("data-sequence-id"));var q=Math.floor(i.currentTime);if(b.times.last!==q&&p===b.active){b.times.last=q;q===b.inOuts.ofVideos[p].out&&k.sequence.cycle.call(b,p)}},false)});return this};k.sequence.init.prototype=k.sequence.prototype;k.sequence.cycle=function(c){this.queue||k.error("Popcorn.sequence.cycle is not a public method");var h=this.queue,b=this.inOuts.ofVideos,i=h[c],f=0,e;if(h[c+1]){f=c+1}if(h[c+1]){h=h[f];b=b[f];k.extend(h,{width:this.dims.width,height:this.dims.height});e=this.playlist[f];i.pause();this.active=f;this.times.last=b["in"]-1;e.currentTime(b["in"]);e[f?"play":"pause"]();this.trigger("cycle",{position:{previous:c,current:f}});if(f){i.style.display="none";h.style.display=""}this.cycling=false}else{this.playlist[c].pause()}return this};var d=["timeupdate","play","pause"];k.extend(k.sequence.prototype,{eq:function(b){return this.playlist[b]},remove:function(){this.parent.innerHTML=null},clip:function(b){return this.inOuts.ofVideos[b]},duration:function(){for(var c=0,e=this.inOuts.ofClips,b=0;b<e.length;b++){c+=e[b].out-e[b]["in"]+1}return c-1},play:function(){this.playlist[this.active].play();return this},exec:function(c,e){var b=this.active;this.inOuts.ofClips.forEach(function(h,f){if(c>=h["in"]&&c<=h.out){b=f}});c+=this.inOuts.ofVideos[b]["in"]-this.inOuts.ofClips[b]["in"];k.addTrackEvent(this.playlist[b],{start:c-1,end:c,_running:false,_natives:{start:e||k.nop,end:k.nop,type:"exec"}});return this},listen:function(c,h){var b=this,i=this.playlist,f=i.length,e=0;if(!h){h=k.nop}if(k.Events.Natives.indexOf(c)>-1){k.forEach(i,function(n){n.listen(c,function(p){p.active=b;if(d.indexOf(c)>-1){h.call(n,p)}else{++e===f&&h.call(n,p)}})})}else{this.events[c]||(this.events[c]={});i=h.name||k.guid("__"+c);this.events[c][i]=h}return this},unlisten:function(){},trigger:function(c,e){var b=this;if(!(k.Events.Natives.indexOf(c)>-1)){this.events[c]&&k.forEach(this.events[c],function(f){f.call(b,{type:c},e)});return this}}});k.forEach(k.manifest,function(b,c){k.sequence.prototype[c]=function(i){var f={},e=[],u,n,h,p,t;for(u=0;u<this.inOuts.ofClips.length;u++){e=this.inOuts.ofClips[u];n=g(e["in"],e.out);h=n.indexOf(i.start);p=n.indexOf(i.end);if(h>-1){f[u]=k.extend({},e,{start:n[h],clipIdx:h})}if(p>-1){f[u]=k.extend({},e,{end:n[p],clipIdx:p})}}u=Object.keys(f).map(function(q){return +q});e=g(u[0],u[1]);for(u=0;u<e.length;u++){h={};p=e[u];var r=f[p];if(r){t=this.inOuts.ofVideos[p];n=r.clipIdx;t=g(t["in"],t.out);if(r.start){h.start=t[n];h.end=t[t.length-1]}if(r.end){h.start=t[0];h.end=t[n]}}else{h.start=this.inOuts.ofVideos[p]["in"];h.end=this.inOuts.ofVideos[p].out}this.playlist[p][c](k.extend({},i,h))}return this}})})(this,Popcorn);(function(a){document.addEventListener("DOMContentLoaded",function(){var b=document.querySelectorAll("[data-timeline-sources]");a.forEach(b,function(l,k){var d=b[k],j,g,f;if(!d.id){d.id=a.guid("__popcorn")}if(d.nodeType&&d.nodeType===1){f=a("#"+d.id);j=(d.getAttribute("data-timeline-sources")||"").split(",");j[0]&&a.forEach(j,function(c){g=c.split("!");if(g.length===1){g=c.match(/(.*)[\/\\]([^\/\\]+\.\w+)$/)[2].split(".");g[0]="parse"+g[1].toUpperCase();g[1]=c}j[0]&&f[g[0]]&&f[g[0]](g[1])});f.autoplay()&&f.play()}})},false)})(Popcorn);(function(d,e){function h(c){c=typeof c==="string"?c:[c.language,c.region].join("-");var b=c.split("-");return{iso6391:c,language:b[0]||"",region:b[1]||""}}var g=d.navigator,a=h(g.userLanguage||g.language);e.locale={get:function(){return a},set:function(b){a=h(b);e.locale.broadcast();return a},broadcast:function(l){var f=e.instances,c=f.length,b=0,k;for(l=l||"locale:changed";b<c;b++){k=f[b];l in k.data.events&&k.trigger(l)}}}})(this,this.Popcorn);(function(a){var b=Object.prototype.hasOwnProperty;a.parsers={};a.parser=function(h,g,d){if(a.protect.natives.indexOf(h.toLowerCase())>=0){a.error("'"+h+"' is a protected function name")}else{if(typeof g==="function"&&!d){d=g;g=""}if(!(typeof d!=="function"||typeof g!=="string")){var f={};f[h]=function(k,e){if(!k){return this}var c=this;a.xhr({url:k,dataType:g,success:function(n){var i,r,l=0;n=d(n).data||[];if(i=n.length){for(;l<i;l++){r=n[l];for(var j in r){b.call(r,j)&&c[j]&&c[j](r[j])}}e&&e()}}});return this};a.extend(a.p,f);return f}}}})(Popcorn);(function(a){var b=function(c,f){c=c||a.nop;f=f||a.nop;return function(){c.apply(this,arguments);f.apply(this,arguments)}},e=/^.*\.(ogg|oga|aac|mp3|wav)($|\?)/,d=/^.*\.(ogg|oga|aac|mp3|wav|ogg|ogv|mp4|webm)($|\?)/;a.player=function(c,g){if(!a[c]){g=g||{};var f=function(w,v,k){k=k||{};var t=new Date/1000,r=t,h=0,F=0,B=1,n=false,C={},E=typeof w==="string"?a.dom.find(w):w,D={};Object.prototype.__defineGetter__||(D=E||document.createElement("div"));for(var z in E){if(!(z in D)){if(typeof E[z]==="object"){D[z]=E[z]}else{if(typeof E[z]==="function"){D[z]=function(i){return"length" in E[i]&&!E[i].call?E[i]:function(){return E[i].apply(E,arguments)}}(z)}else{a.player.defineProperty(D,z,{get:function(i){return function(){return E[i]}}(z),set:a.nop,configurable:true})}}}}var u=function(){t=new Date/1000;if(!D.paused){D.currentTime+=t-r;D.dispatchEvent("timeupdate");setTimeout(u,10)}r=t};D.play=function(){this.paused=false;if(D.readyState>=4){r=new Date/1000;D.dispatchEvent("play");u()}};D.pause=function(){this.paused=true;D.dispatchEvent("pause")};a.player.defineProperty(D,"currentTime",{get:function(){return h},set:function(i){h=+i;D.dispatchEvent("timeupdate");return h},configurable:true});a.player.defineProperty(D,"volume",{get:function(){return B},set:function(i){B=+i;D.dispatchEvent("volumechange");return B},configurable:true});a.player.defineProperty(D,"muted",{get:function(){return n},set:function(i){n=+i;D.dispatchEvent("volumechange");return n},configurable:true});a.player.defineProperty(D,"readyState",{get:function(){return F},set:function(i){return F=i},configurable:true});D.addEventListener=function(i,j){C[i]||(C[i]=[]);C[i].push(j);return j};D.removeEventListener=function(j,m){var l,i=C[j];if(i){for(l=C[j].length-1;l>=0;l--){m===i[l]&&i.splice(l,1)}return m}};D.dispatchEvent=function(i){var l,j=i.type;if(!j){j=i;if(i=a.events.getInterface(j)){l=document.createEvent(i);l.initEvent(j,true,true,window,1)}}if(C[j]){for(i=C[j].length-1;i>=0;i--){C[j][i].call(this,l,this)}}};D.src=v||"";D.duration=0;D.paused=true;D.ended=0;k&&k.events&&a.forEach(k.events,function(i,j){D.addEventListener(j,i,false)});if(g._canPlayType(E.nodeName,v)!==false){if(g._setup){g._setup.call(D,k)}else{D.readyState=4;D.dispatchEvent("loadedmetadata");D.dispatchEvent("loadeddata");D.dispatchEvent("canplaythrough")}}else{setTimeout(function(){D.dispatchEvent("error")},0)}w=new a.p.init(D,k);if(g._teardown){w.destroy=b(w.destroy,function(){g._teardown.call(D,k)})}return w};f.canPlayType=g._canPlayType=g._canPlayType||a.nop;a[c]=a.player.registry[c]=f}};a.player.registry={};a.player.defineProperty=Object.defineProperty||function(c,g,f){c.__defineGetter__(g,f.get||a.nop);c.__defineSetter__(g,f.set||a.nop)};a.player.playerQueue=function(){var c=[],f=false;return{next:function(){f=false;c.shift();c[0]&&c[0]()},add:function(g){c.push(function(){f=true;g&&g()});!f&&c[0]()}}};a.smart=function(t,s,r){var n=["AUDIO","VIDEO"],l,f=a.dom.find(t),k;l=document.createElement("video");var g={ogg:"video/ogg",ogv:"video/ogg",oga:"audio/ogg",webm:"video/webm",mp4:"video/mp4",mp3:"audio/mp3"};if(f){if(n.indexOf(f.nodeName)>-1&&!s){if(typeof s==="object"){r=s}return a(f,r)}if(typeof s==="string"){s=[s]}t=0;for(srcLength=s.length;t<srcLength;t++){k=d.exec(s[t]);k=!k||!k[1]?false:l.canPlayType(g[k[1]]);if(k){s=s[t];break}for(var c in a.player.registry){if(a.player.registry.hasOwnProperty(c)){if(a.player.registry[c].canPlayType(f.nodeName,s[t])){return a[c](f,s[t],r)}}}}if(n.indexOf(f.nodeName)===-1){l=typeof s==="string"?s:s.length?s[0]:s;t=document.createElement(e.exec(l)?n[0]:n[1]);t.controls=true;f.appendChild(t);f=t}r&&r.events&&r.events.error&&f.addEventListener("error",r.events.error,false);f.src=s;return a(f,r)}else{a.error("Specified target "+t+" was not found.")}}})(Popcorn);(function(a){var b=function(j,i){var d=0,g=0,f;a.forEach(i.classes,function(e,c){f=[];if(e==="parent"){f[0]=document.querySelectorAll("#"+i.target)[0].parentNode}else{f=document.querySelectorAll("#"+i.target+" "+e)}d=0;for(g=f.length;d<g;d++){f[d].classList.toggle(c)}})};a.compose("applyclass",{manifest:{about:{name:"Popcorn applyclass Effect",version:"0.1",author:"@scottdowne",website:"scottdowne.wordpress.com"},options:{}},_setup:function(j){j.classes={};j.applyclass=j.applyclass||"";for(var i=j.applyclass.replace(/\s/g,"").split(","),d=[],g=0,f=i.length;g<f;g++){d=i[g].split(":");if(d[0]){j.classes[d[0]]=d[1]||""}}},start:b,end:b})})(Popcorn);(function(a){var b=/(?:http:\/\/www\.|http:\/\/|www\.|\.|^)(youtu|vimeo|soundcloud|baseplayer)/,e={},d={vimeo:false,youtube:false,soundcloud:false,module:false};Object.defineProperty(e,void 0,{get:function(){return d[void 0]},set:function(c){d[void 0]=c}});a.plugin("mediaspawner",{manifest:{about:{name:"Popcorn Media Spawner Plugin",version:"0.1",author:"Matthew Schranz, @mjschranz",website:"mschranz.wordpress.com"},options:{source:{elem:"input",type:"text",label:"Media Source","default":"http://www.youtube.com/watch?v=CXDstfD9eJ0"},caption:{elem:"input",type:"text",label:"Media Caption","default":"Popcorn Popping",optional:true},target:"mediaspawner-container",start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},autoplay:{elem:"input",type:"checkbox",label:"Autoplay Video",optional:true},width:{elem:"input",type:"number",label:"Media Width","default":400,units:"px",optional:true},height:{elem:"input",type:"number",label:"Media Height","default":200,units:"px",optional:true}}},_setup:function(f){function o(){function h(){if(g!=="HTML5"&&!window.Popcorn[g]){setTimeout(function(){h()},300)}else{f.id=f._container.id;f._container.style.width=f.width+"px";f._container.style.height=f.height+"px";f.popcorn=a.smart("#"+f.id,f.source);g==="HTML5"&&f.popcorn.controls(true);f._container.style.width="0px";f._container.style.height="0px";f._container.style.visibility="hidden";f._container.style.overflow="hidden"}}if(g!=="HTML5"&&!window.Popcorn[g]&&!e[g]){e[g]=true;a.getScript("http://popcornjs.org/code/players/"+g+"/popcorn."+g+".js",function(){h()})}else{h()}}function l(){window.Popcorn.player?o():setTimeout(function(){l()},300)}var k=document.getElementById(f.target)||{},g,n,c;if(n=b.exec(f.source)){g=n[1];if(g==="youtu"){g="youtube"}}else{g="HTML5"}f._type=g;f._container=document.createElement("div");n=f._container;n.id="mediaSpawnerdiv-"+a.guid();f.width=f.width||400;f.height=f.height||200;if(f.caption){c=document.createElement("div");c.innerHTML=f.caption;c.style.display="none";f._capCont=c;n.appendChild(c)}k&&k.appendChild(n);if(!window.Popcorn.player&&!e.module){e.module=true;a.getScript("http://popcornjs.org/code/modules/player/popcorn.player.js",l)}else{l()}},start:function(c,f){if(f._capCont){f._capCont.style.display=""}f._container.style.width=f.width+"px";f._container.style.height=f.height+"px";f._container.style.visibility="visible";f._container.style.overflow="visible";f.autoplay&&f.popcorn.play()},end:function(c,f){if(f._capCont){f._capCont.style.display="none"}f._container.style.width="0px";f._container.style.height="0px";f._container.style.visibility="hidden";f._container.style.overflow="hidden";f.popcorn.pause()},_teardown:function(c){c.popcorn&&c.popcorn.destory&&c.popcorn.destroy();document.getElementById(c.target)&&document.getElementById(c.target).removeChild(c._container)}})})(Popcorn,this);(function(a){a.plugin("code",function(e){var h=false,g=this,d=function(){var b=function(c){return function(k,f){var l=function(){h&&k.call(g,f);h&&c(l)};l()}};return window.webkitRequestAnimationFrame?b(window.webkitRequestAnimationFrame):window.mozRequestAnimationFrame?b(window.mozRequestAnimationFrame):b(function(c){window.setTimeout(c,16)})}();if(!e.onStart||typeof e.onStart!=="function"){e.onStart=a.nop}if(e.onEnd&&typeof e.onEnd!=="function"){e.onEnd=undefined}if(e.onFrame&&typeof e.onFrame!=="function"){e.onFrame=undefined}return{start:function(c,b){b.onStart.call(g,b);if(b.onFrame){h=true;d(b.onFrame,b)}},end:function(c,b){if(b.onFrame){h=false}b.onEnd&&b.onEnd.call(g,b)}}},{about:{name:"Popcorn Code Plugin",version:"0.1",author:"David Humphrey (@humphd)",website:"http://vocamus.net/dave"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},onStart:{elem:"input",type:"function",label:"onStart"},onFrame:{elem:"input",type:"function",label:"onFrame",optional:true},onEnd:{elem:"input",type:"function",label:"onEnd"}}})})(Popcorn);(function(a){var b=0;a.plugin("flickr",function(r){var z,B=document.getElementById(r.target),x,w,v,u,g=r.numberofimages||4,t=r.height||"50px",l=r.width||"50px",f=r.padding||"5px",C=r.border||"0px";z=document.createElement("div");z.id="flickr"+b;z.style.width="100%";z.style.height="100%";z.style.display="none";b++;B&&B.appendChild(z);var y=function(){if(x){setTimeout(function(){y()},5)}else{w="http://api.flickr.com/services/rest/?method=flickr.people.findByUsername&";w+="username="+r.username+"&api_key="+r.apikey+"&format=json&jsoncallback=flickr";a.getJSONP(w,function(c){x=c.user.nsid;k()})}},k=function(){w="http://api.flickr.com/services/feeds/photos_public.gne?";if(x){w+="id="+x+"&"}if(r.tags){w+="tags="+r.tags+"&"}w+="lang=en-us&format=json&jsoncallback=flickr";a.xhr.getJSONP(w,function(d){var c=document.createElement("div");c.innerHTML="<p style='padding:"+f+";'>"+d.title+"<p/>";a.forEach(d.items,function(e,h){if(h<g){v=document.createElement("a");v.setAttribute("href",e.link);v.setAttribute("target","_blank");u=document.createElement("img");u.setAttribute("src",e.media.m);u.setAttribute("height",t);u.setAttribute("width",l);u.setAttribute("style","border:"+C+";padding:"+f);v.appendChild(u);c.appendChild(v)}else{return false}});z.appendChild(c)})};if(r.username&&r.apikey){y()}else{x=r.userid;k()}return{start:function(){z.style.display="inline"},end:function(){z.style.display="none"},_teardown:function(c){document.getElementById(c.target)&&document.getElementById(c.target).removeChild(z)}}},{about:{name:"Popcorn Flickr Plugin",version:"0.2",author:"Scott Downe, Steven Weerdenburg, Annasob",website:"http://scottdowne.wordpress.com/"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},userid:{elem:"input",type:"text",label:"User ID",optional:true},tags:{elem:"input",type:"text",label:"Tags"},username:{elem:"input",type:"text",label:"Username",optional:true},apikey:{elem:"input",type:"text",label:"API Key",optional:true},target:"flickr-container",height:{elem:"input",type:"text",label:"Height","default":"50px",optional:true},width:{elem:"input",type:"text",label:"Width","default":"50px",optional:true},padding:{elem:"input",type:"text",label:"Padding",optional:true},border:{elem:"input",type:"text",label:"Border","default":"5px",optional:true},numberofimages:{elem:"input",type:"number","default":4,label:"Number of Images"}}})})(Popcorn);(function(a){a.plugin("footnote",{manifest:{about:{name:"Popcorn Footnote Plugin",version:"0.2",author:"@annasob, @rwaldron",website:"annasob.wordpress.com"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},text:{elem:"input",type:"text",label:"Text"},target:"footnote-container"}},_setup:function(b){var c=a.dom.find(b.target);b._container=document.createElement("div");b._container.style.display="none";b._container.innerHTML=b.text;c.appendChild(b._container)},start:function(b,c){c._container.style.display="inline"},end:function(b,c){c._container.style.display="none"},_teardown:function(b){var c=a.dom.find(b.target);c&&c.removeChild(b._container)}})})(Popcorn);(function(a){function b(c){return String(c).replace(/&(?!\w+;)|[<>"']/g,function(f){return d[f]||f})}function e(c,m){var k=c.container=document.createElement("div"),g=k.style,f=c.media,l=function(){var h=c.position();g.fontSize="18px";g.width=f.offsetWidth+"px";g.top=h.top+f.offsetHeight-k.offsetHeight-40+"px";g.left=h.left+"px";setTimeout(l,10)};k.id=m||"";g.position="absolute";g.color="white";g.textShadow="black 2px 2px 6px";g.fontWeight="bold";g.textAlign="center";l();c.media.parentNode.appendChild(k);return k}var d={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};a.plugin("text",{manifest:{about:{name:"Popcorn Text Plugin",version:"0.1",author:"@humphd"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},text:{elem:"input",type:"text",label:"Text","default":"Popcorn.js"},escape:{elem:"input",type:"checkbox",label:"Escape"},multiline:{elem:"input",type:"checkbox",label:"Multiline"}}},_setup:function(c){var j,g,f=c._container=document.createElement("div");f.style.display="none";if(c.target){if(j=a.dom.find(c.target)){if(["VIDEO","AUDIO"].indexOf(j.nodeName)>-1){j=e(this,c.target+"-overlay")}}else{j=e(this,c.target)}}else{j=this.container?this.container:e(this)}c._target=j;g=c.escape?b(c.text):c.text;g=c.multiline?g.replace(/\r?\n/gm,"<br>"):g;f.innerHTML=g||"";j.appendChild(f)},start:function(c,f){f._container.style.display="inline"},end:function(c,f){f._container.style.display="none"},_teardown:function(c){var f=c._target;f&&f.removeChild(c._container)}})})(Popcorn);var googleCallback;(function(g){function i(e,c,f){e=e.type?e.type.toUpperCase():"HYBRID";var b;if(e==="STAMEN-WATERCOLOR"||e==="STAMEN-TERRAIN"||e==="STAMEN-TONER"){b=e.replace("STAMEN-","").toLowerCase()}f=new google.maps.Map(f,{mapTypeId:b?b:google.maps.MapTypeId[e],mapTypeControlOptions:{mapTypeIds:[]}});b&&f.mapTypes.set(b,new google.maps.StamenMapType(b));f.getDiv().style.display="none";return f}var l=1,k=false,a=false,j,d;googleCallback=function(b){if(typeof google!=="undefined"&&google.maps&&google.maps.Geocoder&&google.maps.LatLng){j=new google.maps.Geocoder;g.getScript("//maps.stamen.com/js/tile.stamen.js",function(){a=true})}else{setTimeout(function(){googleCallback(b)},1)}};d=function(){if(document.body){k=true;g.getScript("//maps.google.com/maps/api/js?sensor=false&callback=googleCallback")}else{setTimeout(function(){d()},1)}};g.plugin("googlemap",function(e){var c,h,b,n=document.getElementById(e.target);e.type=e.type||"ROADMAP";e.zoom=e.zoom||1;e.lat=e.lat||0;e.lng=e.lng||0;k||d();c=document.createElement("div");c.id="actualmap"+l;c.style.width=e.width||"100%";c.style.height=e.height?e.height:n&&n.clientHeight?n.clientHeight+"px":"100%";l++;n&&n.appendChild(c);var f=function(){if(a){if(c){if(e.location){j.geocode({address:e.location},function(m,o){if(c&&o===google.maps.GeocoderStatus.OK){e.lat=m[0].geometry.location.lat();e.lng=m[0].geometry.location.lng();b=new google.maps.LatLng(e.lat,e.lng);h=i(e,b,c)}})}else{b=new google.maps.LatLng(e.lat,e.lng);h=i(e,b,c)}}}else{setTimeout(function(){f()},5)}};f();return{start:function(p,q){var o=this,r,m=function(){if(h){q._map=h;h.getDiv().style.display="block";google.maps.event.trigger(h,"resize");h.setCenter(b);if(q.zoom&&typeof q.zoom!=="number"){q.zoom=+q.zoom}h.setZoom(q.zoom);if(q.heading&&typeof q.heading!=="number"){q.heading=+q.heading}if(q.pitch&&typeof q.pitch!=="number"){q.pitch=+q.pitch}if(q.type==="STREETVIEW"){h.setStreetView(r=new google.maps.StreetViewPanorama(c,{position:b,pov:{heading:q.heading=q.heading||0,pitch:q.pitch=q.pitch||0,zoom:q.zoom}}));var w=function(v,u){var t=google.maps.geometry.spherical.computeHeading;setTimeout(function(){var H=o.media.currentTime;if(typeof q.tween==="object"){for(var C=0,G=v.length;C<G;C++){var E=v[C];if(H>=E.interval*(C+1)/1000&&(H<=E.interval*(C+2)/1000||H>=E.interval*G/1000)){z.setPosition(new google.maps.LatLng(E.position.lat,E.position.lng));z.setPov({heading:E.pov.heading||t(E,v[C+1])||0,zoom:E.pov.zoom||0,pitch:E.pov.pitch||0})}}w(v,v[0].interval)}else{C=0;for(G=v.length;C<G;C++){E=q.interval;if(H>=E*(C+1)/1000&&(H<=E*(C+2)/1000||H>=E*G/1000)){B.setPov({heading:t(v[C],v[C+1])||0,zoom:q.zoom,pitch:q.pitch||0});B.setPosition(s[C])}}w(s,q.interval)}},u)};if(q.location&&typeof q.tween==="string"){var B=r,s=[],y=new google.maps.DirectionsService,A=new google.maps.DirectionsRenderer(B);y.route({origin:q.location,destination:q.tween,travelMode:google.maps.TravelMode.DRIVING},function(D,v){if(v==google.maps.DirectionsStatus.OK){A.setDirections(D);for(var u=D.routes[0].overview_path,F=0,t=u.length;F<t;F++){s.push(new google.maps.LatLng(u[F].lat(),u[F].lng()))}q.interval=q.interval||1000;w(s,10)}})}else{if(typeof q.tween==="object"){var z=r;y=0;for(var x=q.tween.length;y<x;y++){q.tween[y].interval=q.tween[y].interval||1000;w(q.tween,10)}}}}q.onmaploaded&&q.onmaploaded(q,h)}else{setTimeout(function(){m()},13)}};m()},end:function(){if(h){h.getDiv().style.display="none"}},_teardown:function(m){var o=document.getElementById(m.target);o&&o.removeChild(c);c=h=b=null;m._map=null}}},{about:{name:"Popcorn Google Map Plugin",version:"0.1",author:"@annasob",website:"annasob.wordpress.com"},options:{start:{elem:"input",type:"start",label:"Start"},end:{elem:"input",type:"start",label:"End"},target:"map-container",type:{elem:"select",options:["ROADMAP","SATELLITE","STREETVIEW","HYBRID","TERRAIN","STAMEN-WATERCOLOR","STAMEN-TERRAIN","STAMEN-TONER"],label:"Map Type",optional:true},zoom:{elem:"input",type:"text",label:"Zoom","default":0,optional:true},lat:{elem:"input",type:"text",label:"Lat",optional:true},lng:{elem:"input",type:"text",label:"Lng",optional:true},location:{elem:"input",type:"text",label:"Location","default":"Toronto, Ontario, Canada"},heading:{elem:"input",type:"text",label:"Heading","default":0,optional:true},pitch:{elem:"input",type:"text",label:"Pitch","default":1,optional:true}}})})(Popcorn);(function(a){function b(c){function l(){var i=c.getBoundingClientRect(),h=g.getBoundingClientRect();if(h.left!==i.left){g.style.left=i.left+"px"}if(h.top!==i.top){g.style.top=i.top+"px"}}var k=-1,g=document.createElement("div"),f=getComputedStyle(c).zIndex;g.setAttribute("data-popcorn-helper-container",true);g.style.position="absolute";g.style.zIndex=isNaN(f)?e:f+1;document.body.appendChild(g);return{element:g,start:function(){k=setInterval(l,d)},stop:function(){clearInterval(k);k=-1},destroy:function(){document.body.removeChild(g);k!==-1&&clearInterval(k)}}}var e=2000,d=10;a.plugin("image",{manifest:{about:{name:"Popcorn image Plugin",version:"0.1",author:"Scott Downe",website:"http://scottdowne.wordpress.com/"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},src:{elem:"input",type:"url",label:"Image URL","default":"http://mozillapopcorn.org/wp-content/themes/popcorn/images/for_developers.png"},href:{elem:"input",type:"url",label:"Link","default":"http://mozillapopcorn.org/wp-content/themes/popcorn/images/for_developers.png",optional:true},target:"image-container",text:{elem:"input",type:"text",label:"Caption","default":"Popcorn.js",optional:true}}},_setup:function(c){var g=document.createElement("img"),f=document.getElementById(c.target);c.anchor=document.createElement("a");c.anchor.style.position="relative";c.anchor.style.textDecoration="none";c.anchor.style.display="none";if(f){if(["VIDEO","AUDIO"].indexOf(f.nodeName)>-1){c.trackedContainer=b(f);c.trackedContainer.element.appendChild(c.anchor)}else{f&&f.appendChild(c.anchor)}}g.addEventListener("load",function(){g.style.borderStyle="none";c.anchor.href=c.href||c.src||"#";c.anchor.target="_blank";var k,h;g.style.height=f.style.height;g.style.width=f.style.width;c.anchor.appendChild(g);if(c.text){k=g.height/12+"px";h=document.createElement("div");a.extend(h.style,{color:"black",fontSize:k,fontWeight:"bold",position:"relative",textAlign:"center",width:g.style.width||g.width+"px",zIndex:"10"});h.innerHTML=c.text||"";h.style.top=(g.style.height.replace("px","")||g.height)/2-h.offsetHeight/2+"px";c.anchor.insertBefore(h,g)}},false);g.src=c.src},start:function(c,f){f.anchor.style.display="inline";f.trackedContainer&&f.trackedContainer.start()},end:function(c,f){f.anchor.style.display="none";f.trackedContainer&&f.trackedContainer.stop()},_teardown:function(c){if(c.trackedContainer){c.trackedContainer.destroy()}else{c.anchor.parentNode&&c.anchor.parentNode.removeChild(c.anchor)}}})})(Popcorn);(function(a){var b=1,c=false;a.plugin("googlefeed",function(k){var d=function(){var h=false,n=0,e=document.getElementsByTagName("link"),r=e.length,l=document.head||document.getElementsByTagName("head")[0],i=document.createElement("link");if(window.GFdynamicFeedControl){c=true}else{a.getScript("//www.google.com/uds/solutions/dynamicfeed/gfdynamicfeedcontrol.js",function(){c=true})}for(;n<r;n++){if(e[n].href==="//www.google.com/uds/solutions/dynamicfeed/gfdynamicfeedcontrol.css"){h=true}}if(!h){i.type="text/css";i.rel="stylesheet";i.href="//www.google.com/uds/solutions/dynamicfeed/gfdynamicfeedcontrol.css";l.insertBefore(i,l.firstChild)}};window.google?d():a.getScript("//www.google.com/jsapi",function(){google.load("feeds","1",{callback:function(){d()}})});var j=document.createElement("div"),g=document.getElementById(k.target),f=function(){if(c){k.feed=new GFdynamicFeedControl(k.url,j,{vertical:k.orientation.toLowerCase()==="vertical"?true:false,horizontal:k.orientation.toLowerCase()==="horizontal"?true:false,title:k.title=k.title||"Blog"})}else{setTimeout(function(){f()},5)}};if(!k.orientation||k.orientation.toLowerCase()!=="vertical"&&k.orientation.toLowerCase()!=="horizontal"){k.orientation="vertical"}j.style.display="none";j.id="_feed"+b;j.style.width="100%";j.style.height="100%";b++;g&&g.appendChild(j);f();return{start:function(){j.setAttribute("style","display:inline")},end:function(){j.setAttribute("style","display:none")},_teardown:function(e){document.getElementById(e.target)&&document.getElementById(e.target).removeChild(j);delete e.feed}}},{about:{name:"Popcorn Google Feed Plugin",version:"0.1",author:"David Seifried",website:"dseifried.wordpress.com"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},target:"feed-container",url:{elem:"input",type:"url",label:"Feed URL","default":"http://planet.mozilla.org/rss20.xml"},title:{elem:"input",type:"text",label:"Title","default":"Planet Mozilla",optional:true},orientation:{elem:"select",options:["Vertical","Horizontal"],label:"Orientation","default":"Vertical",optional:true}}})})(Popcorn);(function(a){var b=0,c=function(m,d){var l=m.container=document.createElement("div"),k=l.style,g=m.media,f=function(){var e=m.position();k.fontSize="18px";k.width=g.offsetWidth+"px";k.top=e.top+g.offsetHeight-l.offsetHeight-40+"px";k.left=e.left+"px";setTimeout(f,10)};l.id=d||a.guid();k.position="absolute";k.color="white";k.textShadow="black 2px 2px 6px";k.fontWeight="bold";k.textAlign="center";f();m.media.parentNode.appendChild(l);return l};a.plugin("subtitle",{manifest:{about:{name:"Popcorn Subtitle Plugin",version:"0.1",author:"Scott Downe",website:"http://scottdowne.wordpress.com/"},options:{start:{elem:"input",type:"text",label:"Start"},end:{elem:"input",type:"text",label:"End"},target:"subtitle-container",text:{elem:"input",type:"text",label:"Text"}}},_setup:function(e){var d=document.createElement("div");d.id="subtitle-"+b++;d.style.display="none";!this.container&&(!e.target||e.target==="subtitle-container")&&c(this);e.container=e.target&&e.target!=="subtitle-container"?document.getElementById(e.target)||c(this,e.target):this.container;document.getElementById(e.container.id)&&document.getElementById(e.container.id).appendChild(d);e.innerContainer=d;e.showSubtitle=function(){e.innerContainer.innerHTML=e.text||""}},start:function(e,d){d.innerContainer.style.display="inline";d.showSubtitle(d,d.text)},end:function(e,d){d.innerContainer.style.display="none";d.innerContainer.innerHTML=""},_teardown:function(d){d.container.removeChild(d.innerContainer)}})})(Popcorn);(function(a){var b=false;a.plugin("twitter",{manifest:{about:{name:"Popcorn Twitter Plugin",version:"0.1",author:"Scott Downe",website:"http://scottdowne.wordpress.com/"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},src:{elem:"input",type:"text",label:"Tweet Source (# or @)","default":"@popcornjs"},target:"twitter-container",height:{elem:"input",type:"number",label:"Height","default":"200",optional:true},width:{elem:"input",type:"number",label:"Width","default":"250",optional:true}}},_setup:function(o){if(!window.TWTR&&!b){b=true;a.getScript("//widgets.twimg.com/j/2/widget.js")}var m=document.getElementById(o.target);o.container=document.createElement("div");o.container.setAttribute("id",a.guid());o.container.style.display="none";m&&m.appendChild(o.container);var d=o.src||"";m=o.width||250;var l=o.height||200,k=/^@/.test(d),g={version:2,id:o.container.getAttribute("id"),rpp:30,width:m,height:l,interval:6000,theme:{shell:{background:"#ffffff",color:"#000000"},tweets:{background:"#ffffff",color:"#444444",links:"#1985b5"}},features:{loop:true,timestamp:true,avatars:true,hashtags:true,toptweets:true,live:true,scrollbar:false,behavior:"default"}},f=function(c){if(window.TWTR){if(k){g.type="profile";(new TWTR.Widget(g)).render().setUser(d).start()}else{g.type="search";g.search=d;g.subject=d;(new TWTR.Widget(g)).render().start()}}else{setTimeout(function(){f(c)},1)}};f(this)},start:function(e,d){d.container.style.display="inline"},end:function(e,d){d.container.style.display="none"},_teardown:function(c){document.getElementById(c.target)&&document.getElementById(c.target).removeChild(c.container)}})})(Popcorn);(function(a){a.plugin("webpage",{manifest:{about:{name:"Popcorn Webpage Plugin",version:"0.1",author:"@annasob",website:"annasob.wordpress.com"},options:{id:{elem:"input",type:"text",label:"Id",optional:true},start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},src:{elem:"input",type:"url",label:"Webpage URL","default":"http://mozillapopcorn.org"},target:"iframe-container"}},_setup:function(b){var c=document.getElementById(b.target);b.src=b.src.replace(/^(https?:)?(\/\/)?/,"//");b._iframe=document.createElement("iframe");b._iframe.setAttribute("width","100%");b._iframe.setAttribute("height","100%");b._iframe.id=b.id;b._iframe.src=b.src;b._iframe.style.display="none";c&&c.appendChild(b._iframe)},start:function(b,c){c._iframe.src=c.src;c._iframe.style.display="inline"},end:function(b,c){c._iframe.style.display="none"},_teardown:function(b){document.getElementById(b.target)&&document.getElementById(b.target).removeChild(b._iframe)}})})(Popcorn);var wikiCallback;(function(a){a.plugin("wikipedia",{manifest:{about:{name:"Popcorn Wikipedia Plugin",version:"0.1",author:"@annasob",website:"annasob.wordpress.com"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},lang:{elem:"input",type:"text",label:"Language","default":"english",optional:true},src:{elem:"input",type:"url",label:"Wikipedia URL","default":"http://en.wikipedia.org/wiki/Cat"},title:{elem:"input",type:"text",label:"Title","default":"Cats",optional:true},numberofwords:{elem:"input",type:"number",label:"Number of Words","default":"200",optional:true},target:"wikipedia-container"}},_setup:function(b){var e,d=a.guid();if(!b.lang){b.lang="en"}b.numberofwords=b.numberofwords||200;window["wikiCallback"+d]=function(c){b._link=document.createElement("a");b._link.setAttribute("href",b.src);b._link.setAttribute("target","_blank");b._link.innerHTML=b.title||c.parse.displaytitle;b._desc=document.createElement("p");e=c.parse.text["*"].substr(c.parse.text["*"].indexOf("<p>"));e=e.replace(/((<(.|\n)+?>)|(\((.*?)\) )|(\[(.*?)\]))/g,"");e=e.split(" ");b._desc.innerHTML=e.slice(0,e.length>=b.numberofwords?b.numberofwords:e.length).join(" ")+" ...";b._fired=true};b.src&&a.getScript("//"+b.lang+".wikipedia.org/w/api.php?action=parse&props=text&redirects&page="+b.src.slice(b.src.lastIndexOf("/")+1)+"&format=json&callback=wikiCallback"+d)},start:function(b,e){var d=function(){if(e._fired){if(e._link&&e._desc){if(document.getElementById(e.target)){document.getElementById(e.target).appendChild(e._link);document.getElementById(e.target).appendChild(e._desc);e._added=true}}}else{setTimeout(function(){d()},13)}};d()},end:function(b,c){if(c._added){document.getElementById(c.target).removeChild(c._link);document.getElementById(c.target).removeChild(c._desc)}},_teardown:function(b){if(b._added){b._link.parentNode&&document.getElementById(b.target).removeChild(b._link);b._desc.parentNode&&document.getElementById(b.target).removeChild(b._desc);delete b.target}}})})(Popcorn);(function(a){a.plugin("mustache",function(o){var g,r,s,q;a.getScript("http://mustache.github.com/extras/mustache.js");var m=!!o.dynamic,l=typeof o.template,k=typeof o.data,d=document.getElementById(o.target);o.container=d||document.createElement("div");if(l==="function"){if(m){s=o.template}else{q=o.template(o)}}else{q=l==="string"?o.template:""}if(k==="function"){if(m){g=o.data}else{r=o.data(o)}}else{r=k==="string"?JSON.parse(o.data):k==="object"?o.data:""}return{start:function(b,e){var c=function(){if(window.Mustache){if(g){r=g(e)}if(s){q=s(e)}var f=Mustache.to_html(q,r).replace(/^\s*/mg,"");e.container.innerHTML=f}else{setTimeout(function(){c()},10)}};c()},end:function(b,c){c.container.innerHTML=""},_teardown:function(){g=r=s=q=null}}},{about:{name:"Popcorn Mustache Plugin",version:"0.1",author:"David Humphrey (@humphd)",website:"http://vocamus.net/dave"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},target:"mustache-container",template:{elem:"input",type:"text",label:"Template"},data:{elem:"input",type:"text",label:"Data"},dynamic:{elem:"input",type:"checkbox",label:"Dynamic","default":true}}})})(Popcorn);(function(a){function b(e,d){if(e.map){e.map.div.style.display=d}else{setTimeout(function(){b(e,d)},10)}}var c=1;a.plugin("openmap",function(t){var u,s,r,n,l,f,k,g,d=document.getElementById(t.target);u=document.createElement("div");u.id="openmapdiv"+c;u.style.width="100%";u.style.height="100%";c++;d&&d.appendChild(u);g=function(){if(window.OpenLayers&&window.OpenLayers.Layer.Stamen){if(t.location){location=new OpenLayers.LonLat(0,0);a.getJSONP("//tinygeocoder.com/create-api.php?q="+t.location+"&callback=jsonp",function(h){s=new OpenLayers.LonLat(h[1],h[0])})}else{s=new OpenLayers.LonLat(t.lng,t.lat)}t.type=t.type||"ROADMAP";switch(t.type){case"SATELLITE":t.map=new OpenLayers.Map({div:u,maxResolution:0.28125,tileSize:new OpenLayers.Size(512,512)});var e=new OpenLayers.Layer.WorldWind("LANDSAT","//worldwind25.arc.nasa.gov/tile/tile.aspx",2.25,4,{T:"105"});t.map.addLayer(e);n=new OpenLayers.Projection("EPSG:4326");r=new OpenLayers.Projection("EPSG:4326");break;case"TERRAIN":n=new OpenLayers.Projection("EPSG:4326");r=new OpenLayers.Projection("EPSG:4326");t.map=new OpenLayers.Map({div:u,projection:r});e=new OpenLayers.Layer.WMS("USGS Terraserver","//terraserver-usa.org/ogcmap.ashx?",{layers:"DRG"});t.map.addLayer(e);break;case"STAMEN-TONER":case"STAMEN-WATERCOLOR":case"STAMEN-TERRAIN":e=t.type.replace("STAMEN-","").toLowerCase();e=new OpenLayers.Layer.Stamen(e);n=new OpenLayers.Projection("EPSG:4326");r=new OpenLayers.Projection("EPSG:900913");s=s.transform(n,r);t.map=new OpenLayers.Map({div:u,projection:r,displayProjection:n,controls:[new OpenLayers.Control.Navigation,new OpenLayers.Control.PanPanel,new OpenLayers.Control.ZoomPanel]});t.map.addLayer(e);break;default:r=new OpenLayers.Projection("EPSG:900913");n=new OpenLayers.Projection("EPSG:4326");s=s.transform(n,r);t.map=new OpenLayers.Map({div:u,projection:r,displayProjection:n});e=new OpenLayers.Layer.OSM;t.map.addLayer(e)}if(t.map){t.map.setCenter(s,t.zoom||10);t.map.div.style.display="none"}}else{setTimeout(function(){g()},50)}};g();return{_setup:function(e){window.OpenLayers||a.getScript("//openlayers.org/api/OpenLayers.js",function(){a.getScript("//maps.stamen.com/js/tile.stamen.js")});var h=function(){if(e.map){e.zoom=e.zoom||2;if(e.zoom&&typeof e.zoom!=="number"){e.zoom=+e.zoom}e.map.setCenter(s,e.zoom);if(e.markers){var i=OpenLayers.Util.extend({},OpenLayers.Feature.Vector.style["default"]),p=function(x){clickedFeature=x.feature;if(clickedFeature.attributes.text){k=new OpenLayers.Popup.FramedCloud("featurePopup",clickedFeature.geometry.getBounds().getCenterLonLat(),new OpenLayers.Size(120,250),clickedFeature.attributes.text,null,true,function(){f.unselect(this.feature)});clickedFeature.popup=k;k.feature=clickedFeature;e.map.addPopup(k)}},v=function(x){feature=x.feature;if(feature.popup){k.feature=null;e.map.removePopup(feature.popup);feature.popup.destroy();feature.popup=null}},q=function(x){a.getJSONP("//tinygeocoder.com/create-api.php?q="+x.location+"&callback=jsonp",function(A){A=(new OpenLayers.Geometry.Point(A[1],A[0])).transform(n,r);var y=OpenLayers.Util.extend({},i);if(!x.size||isNaN(x.size)){x.size=14}y.pointRadius=x.size;y.graphicOpacity=1;y.externalGraphic=x.icon;A=new OpenLayers.Feature.Vector(A,null,y);if(x.text){A.attributes={text:x.text}}l.addFeatures([A])})};l=new OpenLayers.Layer.Vector("Point Layer",{style:i});e.map.addLayer(l);for(var o=0,j=e.markers.length;o<j;o++){var m=e.markers[o];if(m.text){if(!f){f=new OpenLayers.Control.SelectFeature(l);e.map.addControl(f);f.activate();l.events.on({featureselected:p,featureunselected:v})}}if(m.location){q(m)}else{var z=(new OpenLayers.Geometry.Point(m.lng,m.lat)).transform(n,r),w=OpenLayers.Util.extend({},i);if(!m.size||isNaN(m.size)){m.size=14}w.pointRadius=m.size;w.graphicOpacity=1;w.externalGraphic=m.icon;z=new OpenLayers.Feature.Vector(z,null,w);if(m.text){z.attributes={text:m.text}}l.addFeatures([z])}}}}else{setTimeout(function(){h()},13)}};h()},start:function(e,h){b(h,"block")},end:function(e,h){b(h,"none")},_teardown:function(){d&&d.removeChild(u);u=map=s=r=n=l=f=k=null}}},{about:{name:"Popcorn OpenMap Plugin",version:"0.3",author:"@mapmeld",website:"mapadelsur.blogspot.com"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},target:"map-container",type:{elem:"select",options:["ROADMAP","SATELLITE","TERRAIN"],label:"Map Type",optional:true},zoom:{elem:"input",type:"number",label:"Zoom","default":2},lat:{elem:"input",type:"text",label:"Lat",optional:true},lng:{elem:"input",type:"text",label:"Lng",optional:true},location:{elem:"input",type:"text",label:"Location","default":"Toronto, Ontario, Canada"},markers:{elem:"input",type:"text",label:"List Markers",optional:true}}})})(Popcorn);document.addEventListener("click",function(a){a=a.target;if(a.nodeName==="A"||a.parentNode&&a.parentNode.nodeName==="A"){Popcorn.instances.forEach(function(b){b.options.pauseOnLinkClicked&&b.pause()})}},false);(function(a){var u={},k=0,w=document.createElement("span"),x=["webkit","Moz","ms","O",""],v=["Transform","TransitionDuration","TransitionTimingFunction"],t={},s;document.getElementsByTagName("head")[0].appendChild(w);for(var q=0,d=v.length;q<d;q++){for(var l=0,g=x.length;l<g;l++){s=x[l]+v[q];if(s in w.style){t[v[q].toLowerCase()]=s;break}}}document.getElementsByTagName("head")[0].appendChild(w);a.plugin("wordriver",{manifest:{about:{name:"Popcorn WordRiver Plugin"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},target:"wordriver-container",text:{elem:"input",type:"text",label:"Text","default":"Popcorn.js"},color:{elem:"input",type:"text",label:"Color","default":"Green",optional:true}}},_setup:function(c){c._duration=c.end-c.start;var b;if(!(b=u[c.target])){b=c.target;u[b]=document.createElement("div");var e=document.getElementById(b);e&&e.appendChild(u[b]);u[b].style.height="100%";u[b].style.position="relative";b=u[b]}c._container=b;c.word=document.createElement("span");c.word.style.position="absolute";c.word.style.whiteSpace="nowrap";c.word.style.opacity=0;c.word.style.MozTransitionProperty="opacity, -moz-transform";c.word.style.webkitTransitionProperty="opacity, -webkit-transform";c.word.style.OTransitionProperty="opacity, -o-transform";c.word.style.transitionProperty="opacity, transform";c.word.style[t.transitionduration]="1s, "+c._duration+"s";c.word.style[t.transitiontimingfunction]="linear";c.word.innerHTML=c.text;c.word.style.color=c.color||"black"},start:function(c,b){b._container.appendChild(b.word);b.word.style[t.transform]="";b.word.style.fontSize=~~(30+20*Math.random())+"px";k%=b._container.offsetWidth-b.word.offsetWidth;b.word.style.left=k+"px";k+=b.word.offsetWidth+10;b.word.style[t.transform]="translateY("+(b._container.offsetHeight-b.word.offsetHeight)+"px)";b.word.style.opacity=1;setTimeout(function(){b.word.style.opacity=0},(b.end-b.start-1||1)*1000)},end:function(c,b){b.word.style.opacity=0},_teardown:function(c){var b=document.getElementById(c.target);c.word.parentNode&&c._container.removeChild(c.word);u[c.target]&&!u[c.target].childElementCount&&b&&b.removeChild(u[c.target])&&delete u[c.target]}})})(Popcorn);(function(a){var b=1;a.plugin("timeline",function(j){var i=document.getElementById(j.target),d=document.createElement("div"),g,f=true;if(i&&!i.firstChild){i.appendChild(g=document.createElement("div"));g.style.width="inherit";g.style.height="inherit";g.style.overflow="auto"}else{g=i.firstChild}d.style.display="none";d.id="timelineDiv"+b;j.direction=j.direction||"up";if(j.direction.toLowerCase()==="down"){f=false}if(i&&g){f?g.insertBefore(d,g.firstChild):g.appendChild(d)}b++;d.innerHTML="<p><span id='big' style='font-size:24px; line-height: 130%;' >"+j.title+"</span><br /><span id='mid' style='font-size: 16px;'>"+j.text+"</span><br />"+j.innerHTML;return{start:function(e,c){d.style.display="block";if(c.direction==="down"){g.scrollTop=g.scrollHeight}},end:function(){d.style.display="none"},_teardown:function(){g&&d&&g.removeChild(d)&&!g.firstChild&&i.removeChild(g)}}},{about:{name:"Popcorn Timeline Plugin",version:"0.1",author:"David Seifried @dcseifried",website:"dseifried.wordpress.com"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},target:"feed-container",title:{elem:"input",type:"text",label:"Title"},text:{elem:"input",type:"text",label:"Text"},innerHTML:{elem:"input",type:"text",label:"HTML Code",optional:true},direction:{elem:"select",options:["DOWN","UP"],label:"Direction",optional:true}}})})(Popcorn);(function(a,b){var c={};a.plugin("documentcloud",{manifest:{about:{name:"Popcorn Document Cloud Plugin",version:"0.1",author:"@humphd, @ChrisDeCairos",website:"http://vocamus.net/dave"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},target:"documentcloud-container",width:{elem:"input",type:"text",label:"Width",optional:true},height:{elem:"input",type:"text",label:"Height",optional:true},src:{elem:"input",type:"url",label:"PDF URL","default":"http://www.documentcloud.org/documents/70050-urbina-day-1-in-progress.html"},preload:{elem:"input",type:"checkbox",label:"Preload","default":true},page:{elem:"input",type:"number",label:"Page Number",optional:true},aid:{elem:"input",type:"number",label:"Annotation Id",optional:true}}},_setup:function(n){function d(){function j(o){n._key=o.api.getId();n._changeView=function(q){n.aid?q.pageSet.showAnnotation(q.api.getAnnotation(n.aid)):q.api.setCurrentPage(n.page)}}function h(){c[n._key]={num:1,id:n._containerId};k.loaded=true}k.loaded=false;var e=n.url.replace(/\.html$/,".js"),F=n.target,w=b.getElementById(F),i=b.createElement("div"),z=a.position(w),C=n.width||z.width;z=n.height||z.height;var B=n.sidebar||true,v=n.text||true,p=n.pdf||true,r=n.showAnnotations||true,E=n.zoom||700,D=n.search||true;if(!function(o){var q=false;a.forEach(k.viewers,function(s){if(s.api.getSchema().canonicalURL===o){j(s);s=c[n._key];n._containerId=s.id;s.num+=1;q=true;k.loaded=true}});return q}(n.url)){i.id=n._containerId=a.guid(F);F="#"+i.id;w.appendChild(i);g.trigger("documentready");k.load(e,{width:C,height:z,sidebar:B,text:v,pdf:p,showAnnotations:r,zoom:E,search:D,container:F,afterLoad:n.page||n.aid?function(o){j(o);n._changeView(o);i.style.visibility="hidden";o.elements.pages.hide();h()}:function(o){j(o);h();i.style.visibility="hidden";o.elements.pages.hide()}})}}function m(){window.DV.loaded?d():setTimeout(m,25)}var k=window.DV=window.DV||{},g=this;if(k.loading){m()}else{k.loading=true;k.recordHit="//www.documentcloud.org/pixel.gif";var f=b.createElement("link"),l=b.getElementsByTagName("head")[0];f.rel="stylesheet";f.type="text/css";f.media="screen";f.href="//s3.documentcloud.org/viewer/viewer-datauri.css";l.appendChild(f);k.loaded=false;a.getScript("http://s3.documentcloud.org/viewer/viewer.js",function(){k.loading=false;d()})}},start:function(i,d){var g=b.getElementById(d._containerId),f=DV.viewers[d._key];(d.page||d.aid)&&f&&d._changeView(f);if(g&&f){g.style.visibility="visible";f.elements.pages.show()}},end:function(g,d){var f=b.getElementById(d._containerId);if(f&&DV.viewers[d._key]){f.style.visibility="hidden";DV.viewers[d._key].elements.pages.hide()}},_teardown:function(e){var d=b.getElementById(e._containerId);if((e=e._key)&&DV.viewers[e]&&--c[e].num===0){for(DV.viewers[e].api.unload();d.hasChildNodes();){d.removeChild(d.lastChild)}d.parentNode.removeChild(d)}}})})(Popcorn,window.document);(function(a){a.parser("parseJSON","JSON",function(b){var c={title:"",remote:"",data:[]};a.forEach(b.data,function(d){c.data.push(d)});return c})})(Popcorn);(function(a){a.parser("parseSBV",function(t){var k={title:"",remote:"",data:[]},v=[],w=0,u=0,s=function(e){e=e.split(":");var c=e.length-1,f;try{f=parseInt(e[c-1],10)*60+parseFloat(e[c],10);if(c===2){f+=parseInt(e[0],10)*3600}}catch(b){throw"Bad cue"}return f},r=function(c,b){var e={};e[c]=b;return e};t=t.text.split(/(?:\r\n|\r|\n)/gm);for(u=t.length;w<u;){var q={},d=[],l=t[w++].split(",");try{q.start=s(l[0]);for(q.end=s(l[1]);w<u&&t[w];){d.push(t[w++])}q.text=d.join("<br />");v.push(r("subtitle",q))}catch(g){for(;w<u&&t[w];){w++}}for(;w<u&&!t[w];){w++}}k.data=v;return k})})(Popcorn);(function(a){function b(g,d){var f={};f[g]=d;return f}function c(g){g=g.split(":");try{var d=g[2].split(",");if(d.length===1){d=g[2].split(".")}return parseFloat(g[0],10)*3600+parseFloat(g[1],10)*60+parseFloat(d[0],10)+parseFloat(d[1],10)/1000}catch(f){return 0}}a.parser("parseSRT",function(r){var s={title:"",remote:"",data:[]},q=[],n=0,l=0,k,d,g,f;r=r.text.split(/(?:\r\n|\r|\n)/gm);for(n=r.length-1;n>=0&&!r[n];){n--}g=n+1;for(n=0;n<g;n++){f={};d=[];f.id=parseInt(r[n++],10);k=r[n++].split(/[\t ]*--\>[\t ]*/);f.start=c(k[0]);l=k[1].indexOf(" ");if(l!==-1){k[1]=k[1].substr(0,l)}for(f.end=c(k[1]);n<g&&r[n];){d.push(r[n++])}f.text=d.join("\\N").replace(/\{(\\[\w]+\(?([\w\d]+,?)+\)?)+\}/gi,"");f.text=f.text.replace(/</g,"&lt;").replace(/>/g,"&gt;");f.text=f.text.replace(/&lt;(\/?(font|b|u|i|s))((\s+(\w|\w[\w\-]*\w)(\s*=\s*(?:\".*?\"|'.*?'|[^'\">\s]+))?)+\s*|\s*)(\/?)&gt;/gi,"<$1$3$7>");f.text=f.text.replace(/\\N/gi,"<br />");q.push(b("subtitle",f))}s.data=q;return s})})(Popcorn);(function(a){function b(t,s){var r=t.substr(10).split(","),n;n={start:e(r[s.start]),end:e(r[s.end])};if(n.start===-1||n.end===-1){throw"Invalid time"}var l=c.call(k,/\{(\\[\w]+\(?([\w\d]+,?)+\)?)+\}/gi,""),f=l.replace,k;k=r.length;c=[];for(var g=s.text;g<k;g++){c.push(r[g])}k=c.join(",");var c=k.replace;n.text=f.call(l,/\\N/gi,"<br />");return n}function e(c){var f=c.split(":");if(c.length!==10||f.length<3){return -1}return parseInt(f[0],10)*3600+parseInt(f[1],10)*60+parseFloat(f[2],10)}function d(c,g){var f={};f[c]=g;return f}a.parser("parseSSA",function(u){var t={title:"",remote:"",data:[]},r=[],n=0,l;u=u.text.split(/(?:\r\n|\r|\n)/gm);for(l=u.length;n<l&&u[n]!=="[Events]";){n++}var f=u[++n].substr(8).split(", "),k={},g,c;c=0;for(g=f.length;c<g;c++){if(f[c]==="Start"){k.start=c}else{if(f[c]==="End"){k.end=c}else{if(f[c]==="Text"){k.text=c}}}}for(;++n<l&&u[n]&&u[n][0]!=="[";){try{r.push(d("subtitle",b(u[n],k)))}catch(v){}}t.data=r;return t})})(Popcorn);(function(g){function i(e,c,f){var b=e.firstChild;e=l(e,f);f=[];for(var h;b;){if(b.nodeType===1){if(b.nodeName==="p"){f.push(k(b,c,e))}else{if(b.nodeName==="div"){h=a(b.getAttribute("begin"));if(h<0){h=c}f.push.apply(f,i(b,h,e))}}}b=b.nextSibling}return f}function l(c,b){var e=c.getAttribute("region");return e!==null?e:b||""}function k(e,c,f){var b={};b.text=(e.textContent||e.text).replace(j,"").replace(d,"<br />");b.id=e.getAttribute("xml:id")||e.getAttribute("id");b.start=a(e.getAttribute("begin"),c);b.end=a(e.getAttribute("end"),c);b.target=l(e,f);if(b.end<0){b.end=a(e.getAttribute("duration"),0);if(b.end>=0){b.end+=b.start}else{b.end=Number.MAX_VALUE}}return{subtitle:b}}function a(e,c){var f;if(!e){return -1}try{return g.util.toSeconds(e)}catch(b){for(var h=e.length-1;h>=0&&e[h]<="9"&&e[h]>="0";){h--}f=h;h=parseFloat(e.substring(0,f));f=e.substring(f);return h*({h:3600,m:60,s:1,ms:0.001}[f]||-1)+(c||0)}}var j=/^[\s]+|[\s]+$/gm,d=/(?:\r\n|\r|\n)/gm;g.parser("parseTTML",function(c){var b={title:"",remote:"",data:[]};if(!c.xml||!c.xml.documentElement){return b}c=c.xml.documentElement.firstChild;if(!c){return b}for(;c.nodeName!=="body";){c=c.nextSibling}if(c){b.data=i(c,0)}return b})})(Popcorn);(function(a){a.parser("parseTTXT",function(k){var o={title:"",remote:"",data:[]},m=function(c){c=c.split(":");var e=0;try{return parseFloat(c[0],10)*60*60+parseFloat(c[1],10)*60+parseFloat(c[2],10)}catch(b){e=0}return e},d=function(c,e){var b={};b[c]=e;return b};k=k.xml.lastChild.lastChild;for(var l=Number.MAX_VALUE,j=[];k;){if(k.nodeType===1&&k.nodeName==="TextSample"){var g={};g.start=m(k.getAttribute("sampleTime"));g.text=k.getAttribute("text");if(g.text){g.end=l-0.001;j.push(d("subtitle",g))}l=g.start}k=k.previousSibling}o.data=j.reverse();return o})})(Popcorn);(function(a){function b(i){var d=i.split(":");i=i.length;var g;if(i!==12&&i!==9){throw"Bad cue"}i=d.length-1;try{g=parseInt(d[i-1],10)*60+parseFloat(d[i],10);if(i===2){g+=parseInt(d[0],10)*3600}}catch(f){throw"Bad cue"}return g}function c(g,d){var f={};f[g]=d;return f}a.parser("parseVTT",function(u){var v={title:"",remote:"",data:[]},t=[],r=0,n=0,l,f;u=u.text.split(/(?:\r\n|\r|\n)/gm);n=u.length;if(n===0||u[0]!=="WEBVTT"){return v}for(r++;r<n;){l=[];try{for(var k=r;k<n&&!u[k];){k++}r=k;var g=u[r++];k=void 0;var d={};if(!g||g.indexOf("-->")===-1){throw"Bad cue"}k=g.replace(/--\>/," --> ").split(/[\t ]+/);if(k.length<2){throw"Bad cue"}d.id=g;d.start=b(k[0]);d.end=b(k[2]);for(f=d;r<n&&u[r];){l.push(u[r++])}f.text=l.join("<br />");t.push(c("subtitle",f))}catch(w){for(r=r;r<n&&u[r];){r++}r=r}}v.data=t;return v})})(Popcorn);(function(a){a.parser("parseXML","XML",function(o){var g={title:"",remote:"",data:[]},r={},s=function(b){b=b.split(":");if(b.length===1){return parseFloat(b[0],10)}else{if(b.length===2){return parseFloat(b[0],10)+parseFloat(b[1]/12,10)}else{if(b.length===3){return parseInt(b[0]*60,10)+parseFloat(b[1],10)+parseFloat(b[2]/12,10)}else{if(b.length===4){return parseInt(b[0]*3600,10)+parseInt(b[1]*60,10)+parseFloat(b[2],10)+parseFloat(b[3]/12,10)}}}}},q=function(e){for(var j={},h=0,f=e.length;h<f;h++){var i=e.item(h).nodeName,c=e.item(h).nodeValue,n=r[c];if(i==="in"){j.start=s(c)}else{if(i==="out"){j.end=s(c)}else{if(i==="resourceid"){for(var b in n){if(n.hasOwnProperty(b)){if(!j[b]&&b!=="id"){j[b]=n[b]}}}}else{j[i]=c}}}}return j},m=function(b,e){var c={};c[b]=e;return c},l=function(b,f,e){var c={};a.extend(c,f,q(b.attributes),{text:b.textContent||b.text});f=b.childNodes;if(f.length<1||f.length===1&&f[0].nodeType===3){if(e){r[c.id]=c}else{g.data.push(m(b.nodeName,c))}}else{for(b=0;b<f.length;b++){f[b].nodeType===1&&l(f[b],c,e)}}};o=o.documentElement.childNodes;for(var k=0,d=o.length;k<d;k++){if(o[k].nodeType===1){o[k].nodeName==="manifest"?l(o[k],{},true):l(o[k],{},false)}}return g})})(Popcorn);(function(){var a=false,b=false;Popcorn.player("soundcloud",{_canPlayType:function(e,d){return/(?:http:\/\/www\.|http:\/\/|www\.|\.|^)(soundcloud)/.test(d)&&e.toLowerCase()!=="video"},_setup:function(l){function y(){a=true;SC.initialize({client_id:"PRaNFlda6Bhf5utPjUsptg"});SC.get("/resolve",{url:w.src},function(c){w.width=w.style.width?""+w.offsetWidth:"560";w.height=w.style.height?""+w.offsetHeight:"315";v.scrolling="no";v.frameborder="no";v.id="soundcloud-"+Popcorn.guid();v.src="http://w.soundcloud.com/player/?url="+c.uri+"&show_artwork=false&buying=false&liking=false&sharing=false";v.width="100%";v.height="100%";l.loadListener=function(){l.widget=k=SC.Widget(v.id);k.bind(SC.Widget.Events.FINISH,function(){w.pause();w.dispatchEvent("ended")});k.bind(SC.Widget.Events.PLAY_PROGRESS,function(d){t=d.currentPosition/1000;w.dispatchEvent("timeupdate")});k.bind(SC.Widget.Events.PLAY,function(){g=r=false;w.dispatchEvent("play");w.dispatchEvent("playing");w.currentTime=t;x.next()});k.bind(SC.Widget.Events.PAUSE,function(){g=r=true;w.dispatchEvent("pause");x.next()});k.bind(SC.Widget.Events.READY,function(){k.getDuration(function(d){f=d/1000;w.style.visibility="visible";w.dispatchEvent("durationchange");w.readyState=4;w.dispatchEvent("readystatechange");w.dispatchEvent("loadedmetadata");w.dispatchEvent("loadeddata");w.dispatchEvent("canplaythrough");w.dispatchEvent("load");!w.paused&&w.play()});k.getVolume(function(d){u=d/100})})};v.addEventListener("load",l.loadListener,false);w.appendChild(v)})}function z(){if(b){(function c(){setTimeout(function(){a?y():c()},100)})()}else{b=true;Popcorn.getScript("http://w.soundcloud.com/player/api.js",function(){Popcorn.getScript("http://connect.soundcloud.com/sdk.js",function(){y()})})}}var w=this,v=document.createElement("iframe"),u=1,t=0,g=true,r=true,k,f=0,A=false,x=Popcorn.player.playerQueue();l._container=v;w.style.visibility="hidden";w.play=function(){g=false;x.add(function(){if(r){k&&k.play()}else{x.next()}})};w.pause=function(){g=true;x.add(function(){if(r){x.next()}else{k&&k.pause()}})};Object.defineProperties(w,{muted:{set:function(c){if(c){k&&k.getVolume(function(d){u=d/100});k&&k.setVolume(0);A=true}else{k&&k.setVolume(u*100);A=false}w.dispatchEvent("volumechange")},get:function(){return A}},volume:{set:function(c){k&&k.setVolume(c*100);u=c;w.dispatchEvent("volumechange")},get:function(){return A?0:u}},currentTime:{set:function(c){t=c;k&&k.seekTo(c*1000);w.dispatchEvent("seeked");w.dispatchEvent("timeupdate")},get:function(){return t}},duration:{get:function(){return f}},paused:{get:function(){return g}}});a?y():z()},_teardown:function(j){var i=j.widget,d=SC.Widget.Events,g=j._container;j.destroyed=true;if(i){for(var f in d){i&&i.unbind(d[f])}}else{g.removeEventListener("load",j.loadEventListener,false)}}})})();(function(){function a(h){var g=a.options;h=g.parser[g.strictMode?"strict":"loose"].exec(h);for(var d={},f=14;f--;){d[g.key[f]]=h[f]||""}d[g.q.name]={};d[g.key[12]].replace(g.q.parser,function(k,e,c){if(e){d[g.q.name][e]=c}});return d}function b(e,d){return/player.vimeo.com\/video\/\d+/.test(d)||/vimeo.com\/\d+/.test(d)}a.options={strictMode:false,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}};Popcorn.player("vimeo",{_canPlayType:b,_setup:function(w){function H(c,d){var g=f.src.split("?")[0],e=JSON.stringify({method:c,value:d});if(g.substr(0,2)==="//"){g=window.location.protocol+g}f.contentWindow?f.contentWindow.postMessage(e,g):v.unload()}function I(c){if(c.origin==="http://player.vimeo.com"){var d;try{d=JSON.parse(c.data)}catch(e){console.warn(e)}if(d.player_id==z){d.method&&J[d.method]&&J[d.method](d);d.event&&E[d.event]&&E[d.event](d)}}}function F(){G||(G=setInterval(function(){v.dispatchEvent("timeupdate")},C));l||(l=setInterval(function(){H("getCurrentTime")},B))}function D(){if(G){clearInterval(G);G=0}if(l){clearInterval(l);l=0}}var C=250,B=16,u={MEDIA_ERR_ABORTED:1,MEDIA_ERR_NETWORK:2,MEDIA_ERR_DECODE:3,MEDIA_ERR_SRC_NOT_SUPPORTED:4},z,v=this,r={q:[],queue:function(c){this.q.push(c);this.process()},process:function(){if(t){for(;this.q.length;){this.q.shift()()}}}},l,G,t,f=document.createElement("iframe"),k={error:null,src:v.src,NETWORK_EMPTY:0,NETWORK_IDLE:1,NETWORK_LOADING:2,NETWORK_NO_SOURCE:3,networkState:0,HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4,readyState:0,seeking:false,currentTime:0,duration:NaN,paused:true,ended:false,autoplay:false,loop:false,volume:1,muted:false,width:0,height:0};Popcorn.forEach("error networkState readyState seeking duration paused ended".split(" "),function(c){Object.defineProperty(v,c,{get:function(){return k[c]}})});Object.defineProperties(v,{src:{get:function(){return k.src},set:function(c){k.src=c;v.load()}},currentTime:{get:function(){return k.currentTime},set:function(c){r.queue(function(){H("seekTo",c)});k.seeking=true;v.dispatchEvent("seeking")}},autoplay:{get:function(){return k.autoplay},set:function(c){k.autoplay=!!c}},loop:{get:function(){return k.loop},set:function(c){k.loop=!!c;r.queue(function(){H("setLoop",loop)})}},volume:{get:function(){return k.volume},set:function(c){k.volume=c;r.queue(function(){H("setVolume",k.muted?0:k.volume)});v.dispatchEvent("volumechange")}},muted:{get:function(){return k.muted},set:function(c){k.muted=!!c;r.queue(function(){H("setVolume",k.muted?0:k.volume)});v.dispatchEvent("volumechange")}},width:{get:function(){return f.width},set:function(c){f.width=c}},height:{get:function(){return f.height},set:function(c){f.height=c}}});var J={getCurrentTime:function(c){k.currentTime=parseFloat(c.value)},getDuration:function(c){k.duration=parseFloat(c.value);if(!isNaN(k.duration)){k.readyState=4;v.dispatchEvent("durationchange");v.dispatchEvent("loadedmetadata");v.dispatchEvent("loadeddata");v.dispatchEvent("canplay");v.dispatchEvent("canplaythrough")}},getVolume:function(c){k.volume=parseFloat(c.value)}},E={ready:function(){H("addEventListener","loadProgress");H("addEventListener","playProgress");H("addEventListener","play");H("addEventListener","pause");H("addEventListener","finish");H("addEventListener","seek");H("getDuration");t=true;r.process();v.dispatchEvent("loadstart")},loadProgress:function(c){v.dispatchEvent("progress");k.duration=parseFloat(c.data.duration)},playProgress:function(c){k.currentTime=parseFloat(c.data.seconds)},play:function(){if(k.seeking){k.seeking=false;v.dispatchEvent("seeked")}k.paused=false;k.ended=false;F();v.dispatchEvent("play")},pause:function(){k.paused=true;D();v.dispatchEvent("pause")},finish:function(){k.ended=true;D();v.dispatchEvent("ended")},seek:function(c){k.currentTime=parseFloat(c.data.seconds);k.seeking=false;k.ended=false;v.dispatchEvent("timeupdate");v.dispatchEvent("seeked")}};v.load=function(){t=false;z=Popcorn.guid();var c=a(k.src),e={},h=[],g={api:1,player_id:z};if(b(v.nodeName,c.source)){Popcorn.extend(e,w);Popcorn.extend(e,c.queryKey);Popcorn.extend(e,g);c="http://player.vimeo.com/video/"+/\d+$/.exec(c.path)+"?";for(var d in e){e.hasOwnProperty(d)&&h.push(encodeURIComponent(d)+"="+encodeURIComponent(e[d]))}c+=h.join("&");k.loop=!!c.match(/loop=1/);k.autoplay=!!c.match(/autoplay=1/);f.width=v.style.width?v.style.width:500;f.height=v.style.height?v.style.height:281;f.frameBorder=0;f.webkitAllowFullScreen=true;f.mozAllowFullScreen=true;f.allowFullScreen=true;f.src=c;v.appendChild(f)}else{c=k.MEDIA_ERR_SRC_NOT_SUPPORTED;k.error={};Popcorn.extend(k.error,u);k.error.code=c;v.dispatchEvent("error")}};v.unload=function(){D();window.removeEventListener("message",I,false)};v.play=function(){r.queue(function(){H("play")})};v.pause=function(){r.queue(function(){H("pause")})};setTimeout(function(){window.addEventListener("message",I,false);v.load()},0)},_teardown:function(){this.unload&&this.unload()}})})();(function(a,b){a.onYouTubePlayerAPIReady=function(){onYouTubePlayerAPIReady.ready=true;for(var d=0;d<onYouTubePlayerAPIReady.waiting.length;d++){onYouTubePlayerAPIReady.waiting[d]()}};if(a.YT){a.quarantineYT=a.YT;a.YT=null}onYouTubePlayerAPIReady.waiting=[];var c=false;b.player("youtube",{_canPlayType:function(e,d){return typeof d==="string"&&/(?:http:\/\/www\.|http:\/\/|www\.|\.|^)(youtu)/.test(d)&&e.toLowerCase()!=="video"},_setup:function(x){if(!a.YT&&!c){c=true;b.getScript("//youtube.com/player_api")}var y=this,v=false,u=document.createElement("div"),t=0,r=true,g=false,n=0,l=false,f=100,z=b.player.playerQueue(),w=function(){b.player.defineProperty(y,"currentTime",{set:function(d){if(!x.destroyed){g=true;t=Math.round(+d*100)/100}},get:function(){return t}});b.player.defineProperty(y,"paused",{get:function(){return r}});b.player.defineProperty(y,"muted",{set:function(d){if(x.destroyed){return d}if(x.youtubeObject.isMuted()!==d){d?x.youtubeObject.mute():x.youtubeObject.unMute();l=x.youtubeObject.isMuted();y.dispatchEvent("volumechange")}return x.youtubeObject.isMuted()},get:function(){if(x.destroyed){return 0}return x.youtubeObject.isMuted()}});b.player.defineProperty(y,"volume",{set:function(d){if(x.destroyed){return d}if(x.youtubeObject.getVolume()/100!==d){x.youtubeObject.setVolume(d*100);f=x.youtubeObject.getVolume();y.dispatchEvent("volumechange")}return x.youtubeObject.getVolume()/100},get:function(){if(x.destroyed){return 0}return x.youtubeObject.getVolume()/100}});y.play=function(){if(!x.destroyed){r=false;z.add(function(){if(x.youtubeObject.getPlayerState()!==1){g=false;x.youtubeObject.playVideo()}else{z.next()}})}};y.pause=function(){if(!x.destroyed){r=true;z.add(function(){x.youtubeObject.getPlayerState()!==2?x.youtubeObject.pauseVideo():z.next()})}}};u.id=y.id+b.guid();x._container=u;y.appendChild(u);var k=function(){var i,m,j,h,d=true,e=function(){if(!x.destroyed){if(g){if(t===x.youtubeObject.getCurrentTime()){g=false;y.dispatchEvent("seeked");y.dispatchEvent("timeupdate")}else{x.youtubeObject.seekTo(t)}}else{t=x.youtubeObject.getCurrentTime();y.dispatchEvent("timeupdate")}setTimeout(e,250)}},q=function(A){var s=x.youtubeObject.getDuration();if(isNaN(s)||s===0){setTimeout(function(){q(A*2)},A*1000)}else{y.duration=s;y.dispatchEvent("durationchange");y.dispatchEvent("loadedmetadata");y.dispatchEvent("loadeddata");y.readyState=4;e();y.dispatchEvent("canplaythrough")}};x.controls=+x.controls===0||+x.controls===1?x.controls:1;x.annotations=+x.annotations===1||+x.annotations===3?x.annotations:1;i=/^.*(?:\/|v=)(.{11})/.exec(y.src)[1];m=(y.src.split("?")[1]||"").replace(/v=.{11}/,"");m=m.replace(/&t=(?:(\d+)m)?(?:(\d+)s)?/,function(B,A,s){A|=0;s|=0;n=+s+A*60;return""});m=m.replace(/&start=(\d+)?/,function(A,s){s|=0;n=s;return""});v=/autoplay=1/.test(m);m=m.split(/[\&\?]/g);j={wmode:"transparent"};for(var p=0;p<m.length;p++){h=m[p].split("=");j[h[0]]=h[1]}x.youtubeObject=new YT.Player(u.id,{height:"100%",width:"100%",wmode:"transparent",playerVars:j,videoId:i,events:{onReady:function(){f=y.volume;l=y.muted;o();r=y.paused;w();x.youtubeObject.playVideo();y.currentTime=n},onStateChange:function(s){if(!(x.destroyed||s.data===-1)){if(s.data===2){r=true;y.dispatchEvent("pause");z.next()}else{if(s.data===1&&!d){r=false;y.dispatchEvent("play");y.dispatchEvent("playing");z.next()}else{if(s.data===0){y.dispatchEvent("ended")}else{if(s.data===1&&d){d=false;if(v||!y.paused){r=false}r&&x.youtubeObject.pauseVideo();q(0.025)}}}}}},onError:function(s){if([2,100,101,150].indexOf(s.data)!==-1){y.error={customCode:s.data};y.dispatchEvent("error")}}}});var o=function(){if(!x.destroyed){if(l!==x.youtubeObject.isMuted()){l=x.youtubeObject.isMuted();y.dispatchEvent("volumechange")}if(f!==x.youtubeObject.getVolume()){f=x.youtubeObject.getVolume();y.dispatchEvent("volumechange")}setTimeout(o,250)}}};onYouTubePlayerAPIReady.ready?k():onYouTubePlayerAPIReady.waiting.push(k)},_teardown:function(e){e.destroyed=true;var d=e.youtubeObject;if(d){d.stopVideo();d.clearVideo&&d.clearVideo()}this.removeChild(document.getElementById(e._container.id))}})})(window,Popcorn);