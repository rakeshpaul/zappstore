/*0e2b2e57c8bae0c50e7d5ceeaf338d72cb7c1030*/(function(k,w){function J(b,c){return function(){if(G.plugin.debug){return b.apply(this,arguments)}try{return b.apply(this,arguments)}catch(d){G.plugin.errors.push({plugin:c,thrown:d,source:b.toString()});this.emit("pluginerror",G.plugin.errors)}}}if(w.addEventListener){var H=Array.prototype,C=Object.prototype,E=H.forEach,z=H.slice,v=C.hasOwnProperty,F=C.toString,D=k.Popcorn,l=[],t=false,a={events:{hash:{},apis:{}}},g=function(){return k.requestAnimationFrame||k.webkitRequestAnimationFrame||k.mozRequestAnimationFrame||k.oRequestAnimationFrame||k.msRequestAnimationFrame||function(b){k.setTimeout(b,16)}}(),G=function(b,c){return new G.p.init(b,c||null)};G.version="1.3";G.isSupported=true;G.instances=[];G.p=G.prototype={init:function(e,i){var h,c=this;if(typeof e==="function"){if(w.readyState==="complete"){e(w,G)}else{l.push(e);if(!t){t=true;var d=function(){w.removeEventListener("DOMContentLoaded",d,false);for(var j=0,m=l.length;j<m;j++){l[j].call(w,G)}l=null};w.addEventListener("DOMContentLoaded",d,false)}}}else{if(typeof e==="string"){try{h=w.querySelector(e)}catch(f){throw Error("Popcorn.js Error: Invalid media element selector: "+e)}}this.media=h||e;h=this.media.nodeName&&this.media.nodeName.toLowerCase()||"video";this[h]=this.media;this.options=i||{};this.id=this.options.id||G.guid(h);if(G.byId(this.id)){throw Error("Popcorn.js Error: Cannot use duplicate ID ("+this.id+")")}this.isDestroyed=false;this.data={running:{cue:[]},timeUpdate:G.nop,disabled:{},events:{},hooks:{},history:[],state:{volume:this.media.volume},trackRefs:{},trackEvents:{byStart:[{start:-1,end:-1}],byEnd:[{start:-1,end:-1}],animating:[],startIndex:0,endIndex:0,previousUpdateTime:-1}};G.instances.push(this);var b=function(){if(c.media.currentTime<0){c.media.currentTime=0}c.media.removeEventListener("loadeddata",b,false);var o,m,j,p,n;o=c.media.duration;o=o!=o?Number.MAX_VALUE:o+1;G.addTrackEvent(c,{start:o,end:o});if(c.options.frameAnimation){c.data.timeUpdate=function(){G.timeUpdate(c,{});G.forEach(G.manifest,function(s,r){if(m=c.data.running[r]){p=m.length;for(var q=0;q<p;q++){j=m[q];(n=j._natives)&&n.frame&&n.frame.call(c,{},j,c.currentTime())}}});c.emit("timeupdate");!c.isDestroyed&&g(c.data.timeUpdate)};!c.isDestroyed&&g(c.data.timeUpdate)}else{c.data.timeUpdate=function(q){G.timeUpdate(c,q)};c.isDestroyed||c.media.addEventListener("timeupdate",c.data.timeUpdate,false)}};Object.defineProperty(this,"error",{get:function(){return c.media.error}});c.media.readyState>=2?b():c.media.addEventListener("loadeddata",b,false);return this}}};G.p.init.prototype=G.p;G.byId=function(c){for(var e=G.instances,b=e.length,d=0;d<b;d++){if(e[d].id===c){return e[d]}}return null};G.forEach=function(e,f,c){if(!e||!f){return{}}c=c||this;var d,b;if(E&&e.forEach===E){return e.forEach(f,c)}if(F.call(e)==="[object NodeList]"){d=0;for(b=e.length;d<b;d++){f.call(c,e[d],d,e)}return e}for(d in e){v.call(e,d)&&f.call(c,e[d],d,e)}return e};G.extend=function(b){var c=z.call(arguments,1);G.forEach(c,function(d){for(var e in d){b[e]=d[e]}});return b};G.extend(G,{noConflict:function(b){if(b){k.Popcorn=D}return G},error:function(b){throw Error(b)},guid:function(b){G.guid.counter++;return(b?b:"")+(+new Date+G.guid.counter)},sizeOf:function(c){var d=0,b;for(b in c){d++}return d},isArray:Array.isArray||function(b){return F.call(b)==="[object Array]"},nop:function(){},position:function(i){i=i.getBoundingClientRect();var f={},h=w.documentElement,e=w.body,d,c,b;d=h.clientTop||e.clientTop||0;c=h.clientLeft||e.clientLeft||0;b=k.pageYOffset&&h.scrollTop||e.scrollTop;h=k.pageXOffset&&h.scrollLeft||e.scrollLeft;d=Math.ceil(i.top+b-d);c=Math.ceil(i.left+h-c);for(var j in i){f[j]=Math.round(i[j])}return G.extend({},f,{top:d,left:c})},disable:function(c,e){if(!c.data.disabled[e]){c.data.disabled[e]=true;for(var b=c.data.running[e].length-1,d;b>=0;b--){d=c.data.running[e][b];d._natives.end.call(c,null,d)}}return c},enable:function(c,e){if(c.data.disabled[e]){c.data.disabled[e]=false;for(var b=c.data.running[e].length-1,d;b>=0;b--){d=c.data.running[e][b];d._natives.start.call(c,null,d)}}return c},destroy:function(e){var i=e.data.events,h=e.data.trackEvents,c,d,f,b;for(d in i){c=i[d];for(f in c){delete c[f]}i[d]=null}for(b in G.registryByName){G.removePlugin(e,b)}h.byStart.length=0;h.byEnd.length=0;if(!e.isDestroyed){e.data.timeUpdate&&e.media.removeEventListener("timeupdate",e.data.timeUpdate,false);e.isDestroyed=true}}});G.guid.counter=1;G.extend(G.p,function(){var b={};G.forEach("load play pause currentTime playbackRate volume duration preload playbackRate autoplay loop controls muted buffered readyState seeking paused played seekable ended".split(/\s+/g),function(c){b[c]=function(d){var e;if(typeof this.media[c]==="function"){if(d!=null&&/play|pause/.test(c)){this.media.currentTime=G.util.toSeconds(d)}this.media[c]();return this}if(d!=null){e=this.media[c];this.media[c]=d;e!==d&&this.emit("attrchange",{attribute:c,previousValue:e,currentValue:d});return this}return this.media[c]}});return b}());G.forEach("enable disable".split(" "),function(b){G.p[b]=function(c){return G[b](this,c)}});G.extend(G.p,{roundTime:function(){return Math.round(this.media.currentTime)},exec:function(i,f,h){var e=arguments.length,d,c;try{c=G.util.toSeconds(i)}catch(b){}if(typeof c==="number"){i=c}if(typeof i==="number"&&e===2){h=f;f=i;i=G.guid("cue")}else{if(e===1){f=-1}else{if(d=this.getTrackEvent(i)){if(typeof i==="string"&&e===2){if(typeof f==="number"){h=d._natives.start}if(typeof f==="function"){h=f;f=d.start}}}else{if(e>=2){if(typeof f==="string"){try{c=G.util.toSeconds(f)}catch(j){}f=c}if(typeof f==="number"){h=G.nop()}if(typeof f==="function"){h=f;f=-1}}}}}G.addTrackEvent(this,{id:i,start:f,end:f+1,_running:false,_natives:{start:h||G.nop,end:G.nop,type:"cue"}});return this},mute:function(b){b=b==null||b===true?"muted":"unmuted";if(b==="unmuted"){this.media.muted=false;this.media.volume=this.data.state.volume}if(b==="muted"){this.data.state.volume=this.media.volume;this.media.muted=true}this.emit(b);return this},unmute:function(b){return this.mute(b==null?false:!b)},position:function(){return G.position(this.media)},toggle:function(b){return G[this.data.disabled[b]?"enable":"disable"](this,b)},defaults:function(b,c){if(G.isArray(b)){G.forEach(b,function(d){for(var e in d){this.defaults(e,d[e])}},this);return this}if(!this.options.defaults){this.options.defaults={}}this.options.defaults[b]||(this.options.defaults[b]={});G.extend(this.options.defaults[b],c);return this}});G.Events={UIEvents:"blur focus focusin focusout load resize scroll unload",MouseEvents:"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave click dblclick",Events:"loadstart progress suspend emptied stalled play pause error loadedmetadata loadeddata waiting playing canplay canplaythrough seeking seeked timeupdate ended ratechange durationchange volumechange"};G.Events.Natives=G.Events.UIEvents+" "+G.Events.MouseEvents+" "+G.Events.Events;a.events.apiTypes=["UIEvents","MouseEvents","Events"];(function(e,h){for(var c=a.events.apiTypes,f=e.Natives.split(/\s+/g),d=0,b=f.length;d<b;d++){h.hash[f[d]]=true}c.forEach(function(m){h.apis[m]={};for(var n=e[m].split(/\s+/g),j=n.length,i=0;i<j;i++){h.apis[m][n[i]]=true}})})(G.Events,a.events);G.events={isNative:function(b){return !!a.events.hash[b]},getInterface:function(e){if(!G.events.isNative(e)){return false}var i=a.events,h=i.apiTypes;i=i.apis;for(var c=0,d=h.length,f,b;c<d;c++){b=h[c];if(i[b][e]){f=b;break}}return f},all:G.Events.Natives.split(/\s+/g),fn:{trigger:function(c,d){var b;if(this.data.events[c]&&G.sizeOf(this.data.events[c])){if(b=G.events.getInterface(c)){b=w.createEvent(b);b.initEvent(c,true,true,k,1);this.media.dispatchEvent(b);return this}G.forEach(this.data.events[c],function(e){e.call(this,d)},this)}return this},listen:function(e,h){var c=this,f=true,d=G.events.hooks[e],b;if(!this.data.events[e]){this.data.events[e]={};f=false}if(d){d.add&&d.add.call(this,{},h);if(d.bind){e=d.bind}if(d.handler){b=h;h=function(i){d.handler.call(c,i,b)}}f=true;if(!this.data.events[e]){this.data.events[e]={};f=false}}this.data.events[e][h.name||h.toString()+G.guid()]=h;!f&&G.events.all.indexOf(e)>-1&&this.media.addEventListener(e,function(i){G.forEach(c.data.events[e],function(j){typeof j==="function"&&j.call(c,i)})},false);return this},unlisten:function(b,c){if(this.data.events[b]&&this.data.events[b][c]){delete this.data.events[b][c];return this}this.data.events[b]=null;return this}},hooks:{canplayall:{bind:"canplaythrough",add:function(c,d){var b=false;if(this.media.readyState){d.call(this,c);b=true}this.data.hooks.canplayall={fired:b}},handler:function(b,c){if(!this.data.hooks.canplayall.fired){c.call(this,b);this.data.hooks.canplayall.fired=true}}}}};G.forEach([["trigger","emit"],["listen","on"],["unlisten","off"]],function(b){G.p[b[0]]=G.p[b[1]]=G.events.fn[b[0]]});G.addTrackEvent=function(e,i){var h,c;if(i.id){h=e.getTrackEvent(i.id)}if(h){c=true;i=G.extend({},h,i);e.removeTrackEvent(i.id)}if(i&&i._natives&&i._natives.type&&e.options.defaults&&e.options.defaults[i._natives.type]){i=G.extend({},e.options.defaults[i._natives.type],i)}if(i._natives){i._id=i.id||i._id||G.guid(i._natives.type);e.data.history.push(i._id)}i.start=G.util.toSeconds(i.start,e.options.framerate);i.end=G.util.toSeconds(i.end,e.options.framerate);var d=e.data.trackEvents.byStart,f=e.data.trackEvents.byEnd,b;for(b=d.length-1;b>=0;b--){if(i.start>=d[b].start){d.splice(b+1,0,i);break}}for(d=f.length-1;d>=0;d--){if(i.end>f[d].end){f.splice(d+1,0,i);break}}if(i.end>e.media.currentTime&&i.start<=e.media.currentTime){i._running=true;e.data.running[i._natives.type].push(i);e.data.disabled[i._natives.type]||i._natives.start.call(e,null,i)}b<=e.data.trackEvents.startIndex&&i.start<=e.data.trackEvents.previousUpdateTime&&e.data.trackEvents.startIndex++;d<=e.data.trackEvents.endIndex&&i.end<e.data.trackEvents.previousUpdateTime&&e.data.trackEvents.endIndex++;this.timeUpdate(e,null,true);i._id&&G.addTrackEvent.ref(e,i);if(c){c=i._natives.type==="cue"?"cuechange":"trackchange";e.emit(c,{id:i.id,previousValue:{time:h.start,fn:h._natives.start},currentValue:{time:i.start,fn:i._natives.start}})}};G.addTrackEvent.ref=function(b,c){b.data.trackRefs[c._id]=c;return b};G.removeTrackEvent=function(i,f){for(var d,e,o=i.data.history.length,n=i.data.trackEvents.byStart.length,m=0,h=0,b=[],j=[],c=[],p=[];--n>-1;){d=i.data.trackEvents.byStart[m];e=i.data.trackEvents.byEnd[m];if(!d._id){b.push(d);j.push(e)}if(d._id){d._id!==f&&b.push(d);e._id!==f&&j.push(e);if(d._id===f){h=m;d._natives._teardown&&d._natives._teardown.call(i,d)}}m++}n=i.data.trackEvents.animating.length;m=0;if(n){for(;--n>-1;){d=i.data.trackEvents.animating[m];d._id||c.push(d);d._id&&d._id!==f&&c.push(d);m++}}h<=i.data.trackEvents.startIndex&&i.data.trackEvents.startIndex--;h<=i.data.trackEvents.endIndex&&i.data.trackEvents.endIndex--;i.data.trackEvents.byStart=b;i.data.trackEvents.byEnd=j;i.data.trackEvents.animating=c;for(n=0;n<o;n++){i.data.history[n]!==f&&p.push(i.data.history[n])}i.data.history=p;G.removeTrackEvent.ref(i,f)};G.removeTrackEvent.ref=function(b,c){delete b.data.trackRefs[c];return b};G.getTrackEvents=function(e){var f=[];e=e.data.trackEvents.byStart;for(var c=e.length,d=0,b;d<c;d++){b=e[d];b._id&&f.push(b)}return f};G.getTrackEvents.ref=function(b){return b.data.trackRefs};G.getTrackEvent=function(b,c){return b.data.trackRefs[c]};G.getTrackEvent.ref=function(b,c){return b.data.trackRefs[c]};G.getLastTrackEventId=function(b){return b.data.history[b.data.history.length-1]};G.timeUpdate=function(c,m){var f=c.media.currentTime,q=c.data.trackEvents.previousUpdateTime,h=c.data.trackEvents,b=h.endIndex,o=h.startIndex,j=h.byStart.length,n=h.byEnd.length,d=G.registryByName,i,p,e;if(q<=f){for(;h.byEnd[b]&&h.byEnd[b].end<=f;){i=h.byEnd[b];p=(q=i._natives)&&q.type;if(!q||d[p]||c[p]){if(i._running===true){i._running=false;e=c.data.running[p];e.splice(e.indexOf(i),1);if(!c.data.disabled[p]){q.end.call(c,m,i);c.emit("trackend",G.extend({},i,{plugin:p,type:"trackend"}))}}b++}else{G.removeTrackEvent(c,i._id);return}}for(;h.byStart[o]&&h.byStart[o].start<=f;){i=h.byStart[o];p=(q=i._natives)&&q.type;if(!q||d[p]||c[p]){if(i.end>f&&i._running===false){i._running=true;c.data.running[p].push(i);if(!c.data.disabled[p]){q.start.call(c,m,i);c.emit("trackstart",G.extend({},i,{plugin:p,type:"trackstart"}))}}o++}else{G.removeTrackEvent(c,i._id);return}}}else{if(q>f){for(;h.byStart[o]&&h.byStart[o].start>f;){i=h.byStart[o];p=(q=i._natives)&&q.type;if(!q||d[p]||c[p]){if(i._running===true){i._running=false;e=c.data.running[p];e.splice(e.indexOf(i),1);if(!c.data.disabled[p]){q.end.call(c,m,i);c.emit("trackend",G.extend({},i,{plugin:p,type:"trackend"}))}}o--}else{G.removeTrackEvent(c,i._id);return}}for(;h.byEnd[b]&&h.byEnd[b].end>f;){i=h.byEnd[b];p=(q=i._natives)&&q.type;if(!q||d[p]||c[p]){if(i.start<=f&&i._running===false){i._running=true;c.data.running[p].push(i);if(!c.data.disabled[p]){q.start.call(c,m,i);c.emit("trackstart",G.extend({},i,{plugin:p,type:"trackstart"}))}}b--}else{G.removeTrackEvent(c,i._id);return}}}}h.endIndex=b;h.startIndex=o;h.previousUpdateTime=f;h.byStart.length<j&&h.startIndex--;h.byEnd.length<n&&h.endIndex--};G.extend(G.p,{getTrackEvents:function(){return G.getTrackEvents.call(null,this)},getTrackEvent:function(b){return G.getTrackEvent.call(null,this,b)},getLastTrackEventId:function(){return G.getLastTrackEventId.call(null,this)},removeTrackEvent:function(b){G.removeTrackEvent.call(null,this,b);return this},removePlugin:function(b){G.removePlugin.call(null,this,b);return this},timeUpdate:function(b){G.timeUpdate.call(null,this,b);return this},destroy:function(){G.destroy.call(null,this);return this}});G.manifest={};G.registry=[];G.registryByName={};G.plugin=function(n,e,c){if(G.protect.natives.indexOf(n.toLowerCase())>=0){G.error("'"+n+"' is a protected function name")}else{var d=["start","end"],m={},j=typeof e==="function",i=["_setup","_teardown","start","end","frame"],f=function(p,o){p=p||G.nop;o=o||G.nop;return function(){p.apply(this,arguments);o.apply(this,arguments)}};G.manifest[n]=c=c||e.manifest||{};i.forEach(function(o){e[o]=J(e[o]||G.nop,n)});var b=function(s,o){if(!o){return this}if(o.ranges&&G.isArray(o.ranges)){G.forEach(o.ranges,function(x){x=G.extend({},o,x);delete x.ranges;this[n](x)},this);return this}var r=o._natives={},q="",p;G.extend(r,s);o._natives.type=n;o._running=false;r.start=r.start||r["in"];r.end=r.end||r.out;if(o.once){r.end=f(r.end,function(){this.removeTrackEvent(o._id)})}r._teardown=f(function(){var x=z.call(arguments),y=this.data.running[r.type];x.unshift(null);x[1]._running&&y.splice(y.indexOf(o),1)&&r.end.apply(this,x)},r._teardown);o.compose=o.compose&&o.compose.split(" ")||[];o.effect=o.effect&&o.effect.split(" ")||[];o.compose=o.compose.concat(o.effect);o.compose.forEach(function(x){q=G.compositions[x]||{};i.forEach(function(y){r[y]=f(r[y],q[y])})});o._natives.manifest=c;if(!("start" in o)){o.start=o["in"]||0}if(!o.end&&o.end!==0){o.end=o.out||Number.MAX_VALUE}if(!v.call(o,"toString")){o.toString=function(){var x=["start: "+o.start,"end: "+o.end,"id: "+(o.id||o._id)];o.target!=null&&x.push("target: "+o.target);return n+" ( "+x.join(", ")+" )"}}if(!o.target){p="options" in c&&c.options;o.target=p&&"target" in p&&p.target}if(o._natives){o._id=G.guid(o._natives.type)}o._natives._setup&&o._natives._setup.call(this,o);G.addTrackEvent(this,o);G.forEach(s,function(x,y){y!=="type"&&d.indexOf(y)===-1&&this.on(y,x)},this);return this};G.p[n]=m[n]=function(q,o){var p;if(q&&!o){o=q}else{if(p=this.getTrackEvent(q)){o=G.extend({},p,o);G.addTrackEvent(this,o);return this}else{o.id=q}}this.data.running[n]=this.data.running[n]||[];p=G.extend({},this.options.defaults&&this.options.defaults[n]||{},o);return b.call(this,j?e.call(this,p):e,p)};c&&G.extend(e,{manifest:c});var h={fn:m[n],definition:e,base:e,parents:[],name:n};G.registry.push(G.extend(m,h,{type:n}));G.registryByName[n]=h;return m}};G.plugin.errors=[];G.plugin.debug=G.version==="1.3";G.removePlugin=function(e,i){if(!i){i=e;e=G.p;if(G.protect.natives.indexOf(i.toLowerCase())>=0){G.error("'"+i+"' is a protected function name");return}var h=G.registry.length,c;for(c=0;c<h;c++){if(G.registry[c].name===i){G.registry.splice(c,1);delete G.registryByName[i];delete G.manifest[i];delete e[i];return}}}h=e.data.trackEvents.byStart;c=e.data.trackEvents.byEnd;var d=e.data.trackEvents.animating,f,b;f=0;for(b=h.length;f<b;f++){if(h[f]&&h[f]._natives&&h[f]._natives.type===i){h[f]._natives._teardown&&h[f]._natives._teardown.call(e,h[f]);h.splice(f,1);f--;b--;if(e.data.trackEvents.startIndex<=f){e.data.trackEvents.startIndex--;e.data.trackEvents.endIndex--}}c[f]&&c[f]._natives&&c[f]._natives.type===i&&c.splice(f,1)}f=0;for(b=d.length;f<b;f++){if(d[f]&&d[f]._natives&&d[f]._natives.type===i){d.splice(f,1);f--;b--}}};G.compositions={};G.compose=function(c,d,b){G.manifest[c]=b||d.manifest||{};G.compositions[c]=d};G.plugin.effect=G.effect=G.compose;var B=/^(?:\.|#|\[)/;G.dom={debug:false,find:function(c,e){var b=null;c=c.trim();e=e||w;if(c){if(!B.test(c)){b=w.getElementById(c);if(b!==null){return b}}try{b=e.querySelector(c)}catch(d){if(G.dom.debug){throw Error(d)}}}return b}};var u=/\?/,I={url:"",data:"",dataType:"",success:G.nop,type:"GET",async:true,xhr:function(){return new k.XMLHttpRequest}};G.xhr=function(b){b.dataType=b.dataType&&b.dataType.toLowerCase()||null;if(b.dataType&&(b.dataType==="jsonp"||b.dataType==="script")){G.xhr.getJSONP(b.url,b.success,b.dataType==="script")}else{b=G.extend({},I,b);b.ajax=b.xhr();if(b.ajax){if(b.type==="GET"&&b.data){b.url+=(u.test(b.url)?"&":"?")+b.data;b.data=null}b.ajax.open(b.type,b.url,b.async);b.ajax.send(b.data||null);return G.xhr.httpData(b)}}};G.xhr.httpData=function(e){var f,c=null,d,b=null;e.ajax.onreadystatechange=function(){if(e.ajax.readyState===4){try{c=JSON.parse(e.ajax.responseText)}catch(i){}f={xml:e.ajax.responseXML,text:e.ajax.responseText,json:c};if(!f.xml||!f.xml.documentElement){f.xml=null;try{d=new DOMParser;b=d.parseFromString(e.ajax.responseText,"text/xml");if(!b.getElementsByTagName("parsererror").length){f.xml=b}}catch(h){}}if(e.dataType){f=f[e.dataType]}e.success.call(e.ajax,f)}};return f};G.xhr.getJSONP=function(h,e,c){var d=w.head||w.getElementsByTagName("head")[0]||w.documentElement,f=w.createElement("script"),j=false,i=[];i=/(=)\?(?=&|$)|\?\?/;var m,b;if(!c){b=h.match(/(callback=[^&]*)/);if(b!==null&&b.length){i=b[1].split("=")[1];if(i==="?"){i="jsonp"}m=G.guid(i);h=h.replace(/(callback=[^&]*)/,"callback="+m)}else{m=G.guid("jsonp");if(i.test(h)){h=h.replace(i,"$1"+m)}i=h.split(/\?(.+)?/);h=i[0]+"?";if(i[1]){h+=i[1]+"&"}h+="callback="+m}window[m]=function(n){e&&e(n);j=true}}f.addEventListener("load",function(){c&&e&&e();j&&delete window[m];d.removeChild(f)},false);f.src=h;d.insertBefore(f,d.firstChild)};G.getJSONP=G.xhr.getJSONP;G.getScript=G.xhr.getScript=function(b,c){return G.xhr.getJSONP(b,c,true)};G.util={toSeconds:function(e,h){var c=/^([0-9]+:){0,2}[0-9]+([.;][0-9]+)?$/,f,d,b;if(typeof e==="number"){return e}typeof e==="string"&&!c.test(e)&&G.error("Invalid time format");c=e.split(":");f=c.length-1;d=c[f];if(d.indexOf(";")>-1){d=d.split(";");b=0;if(h&&typeof h==="number"){b=parseFloat(d[1],10)/h}c[f]=parseInt(d[0],10)+b}f=c[0];return{1:parseFloat(f,10),2:parseInt(f,10)*60+parseFloat(c[1],10),3:parseInt(f,10)*3600+parseInt(c[1],10)*60+parseFloat(c[2],10)}[c.length||1]}};G.p.cue=G.p.exec;G.protect={natives:function(b){return Object.keys?Object.keys(b):function(e){var c,d=[];for(c in e){v.call(e,c)&&d.push(c)}return d}(b)}(G.p).map(function(b){return b.toLowerCase()})};G.forEach({listen:"on",unlisten:"off",trigger:"emit",exec:"cue"},function(c,d){var b=G.p[d];G.p[d]=function(){if(typeof console!=="undefined"&&console.warn){console.warn("Deprecated method '"+d+"', "+(c==null?"do not use.":"use '"+c+"' instead."));G.p[d]=b}return G.p[c].apply(this,[].slice.call(arguments))}});k.Popcorn=G}else{k.Popcorn={isSupported:false};for(H="byId forEach extend effects error guid sizeOf isArray nop position disable enable destroyaddTrackEvent removeTrackEvent getTrackEvents getTrackEvent getLastTrackEventId timeUpdate plugin removePlugin compose effect xhr getJSONP getScript".split(/\s+/);H.length;){k.Popcorn[H.shift()]=function(){}}}})(window,window.document);(function(l,d){var k=l.document,g=l.location,j=/:\/\//,o=g.href.replace(g.href.split("/").slice(-1)[0],""),a=function(c,f,b){c=c||0;f=(f||c||0)+1;b=b||1;f=Math.ceil((f-c)/b)||0;var h=0,e=[];for(e.length=f;h<f;){e[h++]=c;c+=b}return e};d.sequence=function(b,c){return new d.sequence.init(b,c)};d.sequence.init=function(c,e){this.parent=k.getElementById(c);this.seqId=d.guid("__sequenced");this.queue=[];this.playlist=[];this.inOuts={ofVideos:[],ofClips:[]};this.dims={width:0,height:0};this.active=0;this.playing=this.cycling=false;this.times={last:0};this.events={};var b=this,f=0;d.forEach(e,function(r,p){var h=k.createElement("video");h.preload="auto";h.controls=true;h.style.display=p&&"none"||"";h.id=b.seqId+"-"+p;b.queue.push(h);var n=r["in"],i=r.out;b.inOuts.ofVideos.push({"in":n!==undefined&&n||1,out:i!==undefined&&i||0});b.inOuts.ofVideos[p].out=b.inOuts.ofVideos[p].out||b.inOuts.ofVideos[p]["in"]+2;h.src=!j.test(r.src)?o+r.src:r.src;h.setAttribute("data-sequence-owner",c);h.setAttribute("data-sequence-guid",b.seqId);h.setAttribute("data-sequence-id",p);h.setAttribute("data-sequence-clip",[b.inOuts.ofVideos[p]["in"],b.inOuts.ofVideos[p].out].join(":"));b.parent.appendChild(h);b.playlist.push(d("#"+h.id))});b.inOuts.ofVideos.forEach(function(h){h={"in":f,out:f+(h.out-h["in"])};b.inOuts.ofClips.push(h);f=h.out+1});d.forEach(this.queue,function(n,i){function h(){if(!i){b.dims.width=n.videoWidth;b.dims.height=n.videoHeight}n.currentTime=b.inOuts.ofVideos[i]["in"]-0.5;n.removeEventListener("canplaythrough",h,false);return true}n.addEventListener("canplaythrough",h,false);n.addEventListener("play",function(){b.playing=true},false);n.addEventListener("pause",function(){b.playing=false},false);n.addEventListener("timeupdate",function(p){p=p.srcElement||p.target;p=+(p.dataset&&p.dataset.sequenceId||p.getAttribute("data-sequence-id"));var q=Math.floor(n.currentTime);if(b.times.last!==q&&p===b.active){b.times.last=q;q===b.inOuts.ofVideos[p].out&&d.sequence.cycle.call(b,p)}},false)});return this};d.sequence.init.prototype=d.sequence.prototype;d.sequence.cycle=function(c){this.queue||d.error("Popcorn.sequence.cycle is not a public method");var h=this.queue,b=this.inOuts.ofVideos,i=h[c],f=0,e;if(h[c+1]){f=c+1}if(h[c+1]){h=h[f];b=b[f];d.extend(h,{width:this.dims.width,height:this.dims.height});e=this.playlist[f];i.pause();this.active=f;this.times.last=b["in"]-1;e.currentTime(b["in"]);e[f?"play":"pause"]();this.trigger("cycle",{position:{previous:c,current:f}});if(f){i.style.display="none";h.style.display=""}this.cycling=false}else{this.playlist[c].pause()}return this};var m=["timeupdate","play","pause"];d.extend(d.sequence.prototype,{eq:function(b){return this.playlist[b]},remove:function(){this.parent.innerHTML=null},clip:function(b){return this.inOuts.ofVideos[b]},duration:function(){for(var c=0,e=this.inOuts.ofClips,b=0;b<e.length;b++){c+=e[b].out-e[b]["in"]+1}return c-1},play:function(){this.playlist[this.active].play();return this},exec:function(c,e){var b=this.active;this.inOuts.ofClips.forEach(function(h,f){if(c>=h["in"]&&c<=h.out){b=f}});c+=this.inOuts.ofVideos[b]["in"]-this.inOuts.ofClips[b]["in"];d.addTrackEvent(this.playlist[b],{start:c-1,end:c,_running:false,_natives:{start:e||d.nop,end:d.nop,type:"exec"}});return this},listen:function(c,h){var b=this,i=this.playlist,f=i.length,e=0;if(!h){h=d.nop}if(d.Events.Natives.indexOf(c)>-1){d.forEach(i,function(n){n.listen(c,function(p){p.active=b;if(m.indexOf(c)>-1){h.call(n,p)}else{++e===f&&h.call(n,p)}})})}else{this.events[c]||(this.events[c]={});i=h.name||d.guid("__"+c);this.events[c][i]=h}return this},unlisten:function(){},trigger:function(c,e){var b=this;if(!(d.Events.Natives.indexOf(c)>-1)){this.events[c]&&d.forEach(this.events[c],function(f){f.call(b,{type:c},e)});return this}}});d.forEach(d.manifest,function(b,c){d.sequence.prototype[c]=function(i){var f={},e=[],u,n,h,p,t;for(u=0;u<this.inOuts.ofClips.length;u++){e=this.inOuts.ofClips[u];n=a(e["in"],e.out);h=n.indexOf(i.start);p=n.indexOf(i.end);if(h>-1){f[u]=d.extend({},e,{start:n[h],clipIdx:h})}if(p>-1){f[u]=d.extend({},e,{end:n[p],clipIdx:p})}}u=Object.keys(f).map(function(q){return +q});e=a(u[0],u[1]);for(u=0;u<e.length;u++){h={};p=e[u];var r=f[p];if(r){t=this.inOuts.ofVideos[p];n=r.clipIdx;t=a(t["in"],t.out);if(r.start){h.start=t[n];h.end=t[t.length-1]}if(r.end){h.start=t[0];h.end=t[n]}}else{h.start=this.inOuts.ofVideos[p]["in"];h.end=this.inOuts.ofVideos[p].out}this.playlist[p][c](d.extend({},i,h))}return this}})})(this,Popcorn);(function(a){document.addEventListener("DOMContentLoaded",function(){var b=document.querySelectorAll("[data-timeline-sources]");a.forEach(b,function(l,g){var j=b[g],f,d,k;if(!j.id){j.id=a.guid("__popcorn")}if(j.nodeType&&j.nodeType===1){k=a("#"+j.id);f=(j.getAttribute("data-timeline-sources")||"").split(",");f[0]&&a.forEach(f,function(c){d=c.split("!");if(d.length===1){d=c.match(/(.*)[\/\\]([^\/\\]+\.\w+)$/)[2].split(".");d[0]="parse"+d[1].toUpperCase();d[1]=c}f[0]&&k[d[0]]&&k[d[0]](d[1])});k.autoplay()&&k.play()}})},false)})(Popcorn);(function(d,e){function h(c){c=typeof c==="string"?c:[c.language,c.region].join("-");var b=c.split("-");return{iso6391:c,language:b[0]||"",region:b[1]||""}}var g=d.navigator,a=h(g.userLanguage||g.language);e.locale={get:function(){return a},set:function(b){a=h(b);e.locale.broadcast();return a},broadcast:function(j){var f=e.instances,c=f.length,b=0,i;for(j=j||"locale:changed";b<c;b++){i=f[b];j in i.data.events&&i.trigger(j)}}}})(this,this.Popcorn);(function(a){var b=Object.prototype.hasOwnProperty;a.parsers={};a.parser=function(d,c,f){if(a.protect.natives.indexOf(d.toLowerCase())>=0){a.error("'"+d+"' is a protected function name")}else{if(typeof c==="function"&&!f){f=c;c=""}if(!(typeof f!=="function"||typeof c!=="string")){var g={};g[d]=function(i,h){if(!i){return this}var e=this;a.xhr({url:i,dataType:c,success:function(q){var k,j,n=0;q=f(q).data||[];if(k=q.length){for(;n<k;n++){j=q[n];for(var l in j){b.call(j,l)&&e[l]&&e[l](j[l])}}h&&h()}}});return this};a.extend(a.p,g);return g}}}})(Popcorn);(function(d){var e=function(c,f){c=c||d.nop;f=f||d.nop;return function(){c.apply(this,arguments);f.apply(this,arguments)}},b=/^.*\.(ogg|oga|aac|mp3|wav)($|\?)/,a=/^.*\.(ogg|oga|aac|mp3|wav|ogg|ogv|mp4|webm)($|\?)/;d.player=function(g,f){if(!d[g]){f=f||{};var c=function(r,C,E){E=E||{};var w=new Date/1000,D=w,z=0,F=0,u=1,k=false,v={},h=typeof r==="string"?d.dom.find(r):r,t={};Object.prototype.__defineGetter__||(t=h||document.createElement("div"));for(var n in h){if(!(n in t)){if(typeof h[n]==="object"){t[n]=h[n]}else{if(typeof h[n]==="function"){t[n]=function(i){return"length" in h[i]&&!h[i].call?h[i]:function(){return h[i].apply(h,arguments)}}(n)}else{d.player.defineProperty(t,n,{get:function(i){return function(){return h[i]}}(n),set:d.nop,configurable:true})}}}}var B=function(){w=new Date/1000;if(!t.paused){t.currentTime+=w-D;t.dispatchEvent("timeupdate");setTimeout(B,10)}D=w};t.play=function(){this.paused=false;if(t.readyState>=4){D=new Date/1000;t.dispatchEvent("play");B()}};t.pause=function(){this.paused=true;t.dispatchEvent("pause")};d.player.defineProperty(t,"currentTime",{get:function(){return z},set:function(i){z=+i;t.dispatchEvent("timeupdate");return z},configurable:true});d.player.defineProperty(t,"volume",{get:function(){return u},set:function(i){u=+i;t.dispatchEvent("volumechange");return u},configurable:true});d.player.defineProperty(t,"muted",{get:function(){return k},set:function(i){k=+i;t.dispatchEvent("volumechange");return k},configurable:true});d.player.defineProperty(t,"readyState",{get:function(){return F},set:function(i){return F=i},configurable:true});t.addEventListener=function(j,i){v[j]||(v[j]=[]);v[j].push(i);return i};t.removeEventListener=function(i,l){var j,m=v[i];if(m){for(j=v[i].length-1;j>=0;j--){l===m[j]&&m.splice(j,1)}return l}};t.dispatchEvent=function(j){var i,l=j.type;if(!l){l=j;if(j=d.events.getInterface(l)){i=document.createEvent(j);i.initEvent(l,true,true,window,1)}}if(v[l]){for(j=v[l].length-1;j>=0;j--){v[l][j].call(this,i,this)}}};t.src=C||"";t.duration=0;t.paused=true;t.ended=0;E&&E.events&&d.forEach(E.events,function(j,i){t.addEventListener(i,j,false)});if(f._canPlayType(h.nodeName,C)!==false){if(f._setup){f._setup.call(t,E)}else{t.readyState=4;t.dispatchEvent("loadedmetadata");t.dispatchEvent("loadeddata");t.dispatchEvent("canplaythrough")}}else{setTimeout(function(){t.dispatchEvent("error")},0)}r=new d.p.init(t,E);if(f._teardown){r.destroy=e(r.destroy,function(){f._teardown.call(t,E)})}return r};c.canPlayType=f._canPlayType=f._canPlayType||d.nop;d[g]=d.player.registry[g]=c}};d.player.registry={};d.player.defineProperty=Object.defineProperty||function(g,f,c){g.__defineGetter__(f,c.get||d.nop);g.__defineSetter__(f,c.set||d.nop)};d.player.playerQueue=function(){var c=[],f=false;return{next:function(){f=false;c.shift();c[0]&&c[0]()},add:function(g){c.push(function(){f=true;g&&g()});!f&&c[0]()}}};d.smart=function(f,c,r){var q=["AUDIO","VIDEO"],n,h=d.dom.find(f),l;n=document.createElement("video");var k={ogg:"video/ogg",ogv:"video/ogg",oga:"audio/ogg",webm:"video/webm",mp4:"video/mp4",mp3:"audio/mp3"};if(h){if(q.indexOf(h.nodeName)>-1&&!c){if(typeof c==="object"){r=c}return d(h,r)}if(typeof c==="string"){c=[c]}f=0;for(srcLength=c.length;f<srcLength;f++){l=a.exec(c[f]);l=!l||!l[1]?false:n.canPlayType(k[l[1]]);if(l){c=c[f];break}for(var g in d.player.registry){if(d.player.registry.hasOwnProperty(g)){if(d.player.registry[g].canPlayType(h.nodeName,c[f])){return d[g](h,c[f],r)}}}}if(q.indexOf(h.nodeName)===-1){n=typeof c==="string"?c:c.length?c[0]:c;f=document.createElement(b.exec(n)?q[0]:q[1]);f.controls=true;h.appendChild(f);h=f}r&&r.events&&r.events.error&&h.addEventListener("error",r.events.error,false);h.src=c;return d(h,r)}else{d.error("Specified target "+f+" was not found.")}}})(Popcorn);(function(a){var b=function(g,f){var i=0,d=0,c;a.forEach(f.classes,function(h,e){c=[];if(h==="parent"){c[0]=document.querySelectorAll("#"+f.target)[0].parentNode}else{c=document.querySelectorAll("#"+f.target+" "+h)}i=0;for(d=c.length;i<d;i++){c[i].classList.toggle(e)}})};a.compose("applyclass",{manifest:{about:{name:"Popcorn applyclass Effect",version:"0.1",author:"@scottdowne",website:"scottdowne.wordpress.com"},options:{}},_setup:function(g){g.classes={};g.applyclass=g.applyclass||"";for(var f=g.applyclass.replace(/\s/g,"").split(","),i=[],d=0,c=f.length;d<c;d++){i=f[d].split(":");if(i[0]){g.classes[i[0]]=i[1]||""}}},start:b,end:b})})(Popcorn);(function(d){var e=/(?:http:\/\/www\.|http:\/\/|www\.|\.|^)(youtu|vimeo|soundcloud|baseplayer)/,b={},a={vimeo:false,youtube:false,soundcloud:false,module:false};Object.defineProperty(b,void 0,{get:function(){return a[void 0]},set:function(c){a[void 0]=c}});d.plugin("mediaspawner",{manifest:{about:{name:"Popcorn Media Spawner Plugin",version:"0.1",author:"Matthew Schranz, @mjschranz",website:"mschranz.wordpress.com"},options:{source:{elem:"input",type:"text",label:"Media Source","default":"http://www.youtube.com/watch?v=CXDstfD9eJ0"},caption:{elem:"input",type:"text",label:"Media Caption","default":"Popcorn Popping",optional:true},target:"mediaspawner-container",start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},autoplay:{elem:"input",type:"checkbox",label:"Autoplay Video",optional:true},width:{elem:"input",type:"number",label:"Media Width","default":400,units:"px",optional:true},height:{elem:"input",type:"number",label:"Media Height","default":200,units:"px",optional:true}}},_setup:function(l){function k(){function i(){if(c!=="HTML5"&&!window.Popcorn[c]){setTimeout(function(){i()},300)}else{l.id=l._container.id;l._container.style.width=l.width+"px";l._container.style.height=l.height+"px";l.popcorn=d.smart("#"+l.id,l.source);c==="HTML5"&&l.popcorn.controls(true);l._container.style.width="0px";l._container.style.height="0px";l._container.style.visibility="hidden";l._container.style.overflow="hidden"}}if(c!=="HTML5"&&!window.Popcorn[c]&&!b[c]){b[c]=true;d.getScript("http://popcornjs.org/code/players/"+c+"/popcorn."+c+".js",function(){i()})}else{i()}}function g(){window.Popcorn.player?k():setTimeout(function(){g()},300)}var f=document.getElementById(l.target)||{},c,n,h;if(n=e.exec(l.source)){c=n[1];if(c==="youtu"){c="youtube"}}else{c="HTML5"}l._type=c;l._container=document.createElement("div");n=l._container;n.id="mediaSpawnerdiv-"+d.guid();l.width=l.width||400;l.height=l.height||200;if(l.caption){h=document.createElement("div");h.innerHTML=l.caption;h.style.display="none";l._capCont=h;n.appendChild(h)}f&&f.appendChild(n);if(!window.Popcorn.player&&!b.module){b.module=true;d.getScript("http://popcornjs.org/code/modules/player/popcorn.player.js",g)}else{g()}},start:function(c,f){if(f._capCont){f._capCont.style.display=""}f._container.style.width=f.width+"px";f._container.style.height=f.height+"px";f._container.style.visibility="visible";f._container.style.overflow="visible";f.autoplay&&f.popcorn.play()},end:function(c,f){if(f._capCont){f._capCont.style.display="none"}f._container.style.width="0px";f._container.style.height="0px";f._container.style.visibility="hidden";f._container.style.overflow="hidden";f.popcorn.pause()},_teardown:function(c){c.popcorn&&c.popcorn.destory&&c.popcorn.destroy();document.getElementById(c.target)&&document.getElementById(c.target).removeChild(c._container)}})})(Popcorn,this);(function(a){a.plugin("code",function(e){var b=false,g=this,d=function(){var c=function(f){return function(i,h){var k=function(){b&&i.call(g,h);b&&f(k)};k()}};return window.webkitRequestAnimationFrame?c(window.webkitRequestAnimationFrame):window.mozRequestAnimationFrame?c(window.mozRequestAnimationFrame):c(function(f){window.setTimeout(f,16)})}();if(!e.onStart||typeof e.onStart!=="function"){e.onStart=a.nop}if(e.onEnd&&typeof e.onEnd!=="function"){e.onEnd=undefined}if(e.onFrame&&typeof e.onFrame!=="function"){e.onFrame=undefined}return{start:function(c,f){f.onStart.call(g,f);if(f.onFrame){b=true;d(f.onFrame,f)}},end:function(c,f){if(f.onFrame){b=false}f.onEnd&&f.onEnd.call(g,f)}}},{about:{name:"Popcorn Code Plugin",version:"0.1",author:"David Humphrey (@humphd)",website:"http://vocamus.net/dave"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},onStart:{elem:"input",type:"function",label:"onStart"},onFrame:{elem:"input",type:"function",label:"onFrame",optional:true},onEnd:{elem:"input",type:"function",label:"onEnd"}}})})(Popcorn);(function(a){var b=0;a.plugin("flickr",function(f){var c,k=document.getElementById(f.target),x,d,w,u,l=f.numberofimages||4,r=f.height||"50px",z=f.width||"50px",y=f.padding||"5px",t=f.border||"0px";c=document.createElement("div");c.id="flickr"+b;c.style.width="100%";c.style.height="100%";c.style.display="none";b++;k&&k.appendChild(c);var v=function(){if(x){setTimeout(function(){v()},5)}else{d="http://api.flickr.com/services/rest/?method=flickr.people.findByUsername&";d+="username="+f.username+"&api_key="+f.apikey+"&format=json&jsoncallback=flickr";a.getJSONP(d,function(e){x=e.user.nsid;g()})}},g=function(){d="http://api.flickr.com/services/feeds/photos_public.gne?";if(x){d+="id="+x+"&"}if(f.tags){d+="tags="+f.tags+"&"}d+="lang=en-us&format=json&jsoncallback=flickr";a.xhr.getJSONP(d,function(h){var e=document.createElement("div");e.innerHTML="<p style='padding:"+y+";'>"+h.title+"<p/>";a.forEach(h.items,function(i,j){if(j<l){w=document.createElement("a");w.setAttribute("href",i.link);w.setAttribute("target","_blank");u=document.createElement("img");u.setAttribute("src",i.media.m);u.setAttribute("height",r);u.setAttribute("width",z);u.setAttribute("style","border:"+t+";padding:"+y);w.appendChild(u);e.appendChild(w)}else{return false}});c.appendChild(e)})};if(f.username&&f.apikey){v()}else{x=f.userid;g()}return{start:function(){c.style.display="inline"},end:function(){c.style.display="none"},_teardown:function(e){document.getElementById(e.target)&&document.getElementById(e.target).removeChild(c)}}},{about:{name:"Popcorn Flickr Plugin",version:"0.2",author:"Scott Downe, Steven Weerdenburg, Annasob",website:"http://scottdowne.wordpress.com/"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},userid:{elem:"input",type:"text",label:"User ID",optional:true},tags:{elem:"input",type:"text",label:"Tags"},username:{elem:"input",type:"text",label:"Username",optional:true},apikey:{elem:"input",type:"text",label:"API Key",optional:true},target:"flickr-container",height:{elem:"input",type:"text",label:"Height","default":"50px",optional:true},width:{elem:"input",type:"text",label:"Width","default":"50px",optional:true},padding:{elem:"input",type:"text",label:"Padding",optional:true},border:{elem:"input",type:"text",label:"Border","default":"5px",optional:true},numberofimages:{elem:"input",type:"number","default":4,label:"Number of Images"}}})})(Popcorn);(function(a){a.plugin("footnote",{manifest:{about:{name:"Popcorn Footnote Plugin",version:"0.2",author:"@annasob, @rwaldron",website:"annasob.wordpress.com"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},text:{elem:"input",type:"text",label:"Text"},target:"footnote-container"}},_setup:function(b){var c=a.dom.find(b.target);b._container=document.createElement("div");b._container.style.display="none";b._container.innerHTML=b.text;c.appendChild(b._container)},start:function(b,c){c._container.style.display="inline"},end:function(b,c){c._container.style.display="none"},_teardown:function(b){var c=a.dom.find(b.target);c&&c.removeChild(b._container)}})})(Popcorn);(function(d){function e(c){return String(c).replace(/&(?!\w+;)|[<>"']/g,function(f){return a[f]||f})}function b(g,f){var l=g.container=document.createElement("div"),k=l.style,h=g.media,c=function(){var i=g.position();k.fontSize="18px";k.width=h.offsetWidth+"px";k.top=i.top+h.offsetHeight-l.offsetHeight-40+"px";k.left=i.left+"px";setTimeout(c,10)};l.id=f||"";k.position="absolute";k.color="white";k.textShadow="black 2px 2px 6px";k.fontWeight="bold";k.textAlign="center";c();g.media.parentNode.appendChild(l);return l}var a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};d.plugin("text",{manifest:{about:{name:"Popcorn Text Plugin",version:"0.1",author:"@humphd"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},text:{elem:"input",type:"text",label:"Text","default":"Popcorn.js"},escape:{elem:"input",type:"checkbox",label:"Escape"},multiline:{elem:"input",type:"checkbox",label:"Multiline"}}},_setup:function(g){var f,c,h=g._container=document.createElement("div");h.style.display="none";if(g.target){if(f=d.dom.find(g.target)){if(["VIDEO","AUDIO"].indexOf(f.nodeName)>-1){f=b(this,g.target+"-overlay")}}else{f=b(this,g.target)}}else{f=this.container?this.container:b(this)}g._target=f;c=g.escape?e(g.text):g.text;c=g.multiline?c.replace(/\r?\n/gm,"<br>"):c;h.innerHTML=c||"";f.appendChild(h)},start:function(c,f){f._container.style.display="inline"},end:function(c,f){f._container.style.display="none"},_teardown:function(c){var f=c._target;f&&f.removeChild(c._container)}})})(Popcorn);var googleCallback;(function(l){function d(e,c,f){e=e.type?e.type.toUpperCase():"HYBRID";var b;if(e==="STAMEN-WATERCOLOR"||e==="STAMEN-TERRAIN"||e==="STAMEN-TONER"){b=e.replace("STAMEN-","").toLowerCase()}f=new google.maps.Map(f,{mapTypeId:b?b:google.maps.MapTypeId[e],mapTypeControlOptions:{mapTypeIds:[]}});b&&f.mapTypes.set(b,new google.maps.StamenMapType(b));f.getDiv().style.display="none";return f}var k=1,i=false,g=false,j,a;googleCallback=function(b){if(typeof google!=="undefined"&&google.maps&&google.maps.Geocoder&&google.maps.LatLng){j=new google.maps.Geocoder;l.getScript("//maps.stamen.com/js/tile.stamen.js",function(){g=true})}else{setTimeout(function(){googleCallback(b)},1)}};a=function(){if(document.body){i=true;l.getScript("//maps.google.com/maps/api/js?sensor=false&callback=googleCallback")}else{setTimeout(function(){a()},1)}};l.plugin("googlemap",function(f){var c,m,b,e=document.getElementById(f.target);f.type=f.type||"ROADMAP";f.zoom=f.zoom||1;f.lat=f.lat||0;f.lng=f.lng||0;i||a();c=document.createElement("div");c.id="actualmap"+k;c.style.width=f.width||"100%";c.style.height=f.height?f.height:e&&e.clientHeight?e.clientHeight+"px":"100%";k++;e&&e.appendChild(c);var h=function(){if(g){if(c){if(f.location){j.geocode({address:f.location},function(n,o){if(c&&o===google.maps.GeocoderStatus.OK){f.lat=n[0].geometry.location.lat();f.lng=n[0].geometry.location.lng();b=new google.maps.LatLng(f.lat,f.lng);m=d(f,b,c)}})}else{b=new google.maps.LatLng(f.lat,f.lng);m=d(f,b,c)}}}else{setTimeout(function(){h()},5)}};h();return{start:function(q,r){var p=this,n,o=function(){if(m){r._map=m;m.getDiv().style.display="block";google.maps.event.trigger(m,"resize");m.setCenter(b);if(r.zoom&&typeof r.zoom!=="number"){r.zoom=+r.zoom}m.setZoom(r.zoom);if(r.heading&&typeof r.heading!=="number"){r.heading=+r.heading}if(r.pitch&&typeof r.pitch!=="number"){r.pitch=+r.pitch}if(r.type==="STREETVIEW"){m.setStreetView(n=new google.maps.StreetViewPanorama(c,{position:b,pov:{heading:r.heading=r.heading||0,pitch:r.pitch=r.pitch||0,zoom:r.zoom}}));var x=function(A,z){var B=google.maps.geometry.spherical.computeHeading;setTimeout(function(){var E=p.media.currentTime;if(typeof r.tween==="object"){for(var D=0,C=A.length;D<C;D++){var G=A[D];if(E>=G.interval*(D+1)/1000&&(E<=G.interval*(D+2)/1000||E>=G.interval*C/1000)){y.setPosition(new google.maps.LatLng(G.position.lat,G.position.lng));y.setPov({heading:G.pov.heading||B(G,A[D+1])||0,zoom:G.pov.zoom||0,pitch:G.pov.pitch||0})}}x(A,A[0].interval)}else{D=0;for(C=A.length;D<C;D++){G=r.interval;if(E>=G*(D+1)/1000&&(E<=G*(D+2)/1000||E>=G*C/1000)){w.setPov({heading:B(A[D],A[D+1])||0,zoom:r.zoom,pitch:r.pitch||0});w.setPosition(s[D])}}x(s,r.interval)}},z)};if(r.location&&typeof r.tween==="string"){var w=n,s=[],u=new google.maps.DirectionsService,t=new google.maps.DirectionsRenderer(w);u.route({origin:r.location,destination:r.tween,travelMode:google.maps.TravelMode.DRIVING},function(C,z){if(z==google.maps.DirectionsStatus.OK){t.setDirections(C);for(var B=C.routes[0].overview_path,D=0,A=B.length;D<A;D++){s.push(new google.maps.LatLng(B[D].lat(),B[D].lng()))}r.interval=r.interval||1000;x(s,10)}})}else{if(typeof r.tween==="object"){var y=n;u=0;for(var v=r.tween.length;u<v;u++){r.tween[u].interval=r.tween[u].interval||1000;x(r.tween,10)}}}}r.onmaploaded&&r.onmaploaded(r,m)}else{setTimeout(function(){o()},13)}};o()},end:function(){if(m){m.getDiv().style.display="none"}},_teardown:function(n){var o=document.getElementById(n.target);o&&o.removeChild(c);c=m=b=null;n._map=null}}},{about:{name:"Popcorn Google Map Plugin",version:"0.1",author:"@annasob",website:"annasob.wordpress.com"},options:{start:{elem:"input",type:"start",label:"Start"},end:{elem:"input",type:"start",label:"End"},target:"map-container",type:{elem:"select",options:["ROADMAP","SATELLITE","STREETVIEW","HYBRID","TERRAIN","STAMEN-WATERCOLOR","STAMEN-TERRAIN","STAMEN-TONER"],label:"Map Type",optional:true},zoom:{elem:"input",type:"text",label:"Zoom","default":0,optional:true},lat:{elem:"input",type:"text",label:"Lat",optional:true},lng:{elem:"input",type:"text",label:"Lng",optional:true},location:{elem:"input",type:"text",label:"Location","default":"Toronto, Ontario, Canada"},heading:{elem:"input",type:"text",label:"Heading","default":0,optional:true},pitch:{elem:"input",type:"text",label:"Pitch","default":1,optional:true}}})})(Popcorn);(function(d){function e(j){function h(){var l=j.getBoundingClientRect(),i=f.getBoundingClientRect();if(i.left!==l.left){f.style.left=l.left+"px"}if(i.top!==l.top){f.style.top=l.top+"px"}}var g=-1,f=document.createElement("div"),c=getComputedStyle(j).zIndex;f.setAttribute("data-popcorn-helper-container",true);f.style.position="absolute";f.style.zIndex=isNaN(c)?b:c+1;document.body.appendChild(f);return{element:f,start:function(){g=setInterval(h,a)},stop:function(){clearInterval(g);g=-1},destroy:function(){document.body.removeChild(f);g!==-1&&clearInterval(g)}}}var b=2000,a=10;d.plugin("image",{manifest:{about:{name:"Popcorn image Plugin",version:"0.1",author:"Scott Downe",website:"http://scottdowne.wordpress.com/"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},src:{elem:"input",type:"url",label:"Image URL","default":"http://mozillapopcorn.org/wp-content/themes/popcorn/images/for_developers.png"},href:{elem:"input",type:"url",label:"Link","default":"http://mozillapopcorn.org/wp-content/themes/popcorn/images/for_developers.png",optional:true},target:"image-container",text:{elem:"input",type:"text",label:"Caption","default":"Popcorn.js",optional:true}}},_setup:function(g){var f=document.createElement("img"),c=document.getElementById(g.target);g.anchor=document.createElement("a");g.anchor.style.position="relative";g.anchor.style.textDecoration="none";g.anchor.style.display="none";if(c){if(["VIDEO","AUDIO"].indexOf(c.nodeName)>-1){g.trackedContainer=e(c);g.trackedContainer.element.appendChild(g.anchor)}else{c&&c.appendChild(g.anchor)}}f.addEventListener("load",function(){f.style.borderStyle="none";g.anchor.href=g.href||g.src||"#";g.anchor.target="_blank";var j,h;f.style.height=c.style.height;f.style.width=c.style.width;g.anchor.appendChild(f);if(g.text){j=f.height/12+"px";h=document.createElement("div");d.extend(h.style,{color:"black",fontSize:j,fontWeight:"bold",position:"relative",textAlign:"center",width:f.style.width||f.width+"px",zIndex:"10"});h.innerHTML=g.text||"";h.style.top=(f.style.height.replace("px","")||f.height)/2-h.offsetHeight/2+"px";g.anchor.insertBefore(h,f)}},false);f.src=g.src},start:function(c,f){f.anchor.style.display="inline";f.trackedContainer&&f.trackedContainer.start()},end:function(c,f){f.anchor.style.display="none";f.trackedContainer&&f.trackedContainer.stop()},_teardown:function(c){if(c.trackedContainer){c.trackedContainer.destroy()}else{c.anchor.parentNode&&c.anchor.parentNode.removeChild(c.anchor)}}})})(Popcorn);(function(b){var c=1,a=false;b.plugin("googlefeed",function(g){var j=function(){var i=false,q=0,r=document.getElementsByTagName("link"),h=r.length,n=document.head||document.getElementsByTagName("head")[0],l=document.createElement("link");if(window.GFdynamicFeedControl){a=true}else{b.getScript("//www.google.com/uds/solutions/dynamicfeed/gfdynamicfeedcontrol.js",function(){a=true})}for(;q<h;q++){if(r[q].href==="//www.google.com/uds/solutions/dynamicfeed/gfdynamicfeedcontrol.css"){i=true}}if(!i){l.type="text/css";l.rel="stylesheet";l.href="//www.google.com/uds/solutions/dynamicfeed/gfdynamicfeedcontrol.css";n.insertBefore(l,n.firstChild)}};window.google?j():b.getScript("//www.google.com/jsapi",function(){google.load("feeds","1",{callback:function(){j()}})});var f=document.createElement("div"),e=document.getElementById(g.target),d=function(){if(a){g.feed=new GFdynamicFeedControl(g.url,f,{vertical:g.orientation.toLowerCase()==="vertical"?true:false,horizontal:g.orientation.toLowerCase()==="horizontal"?true:false,title:g.title=g.title||"Blog"})}else{setTimeout(function(){d()},5)}};if(!g.orientation||g.orientation.toLowerCase()!=="vertical"&&g.orientation.toLowerCase()!=="horizontal"){g.orientation="vertical"}f.style.display="none";f.id="_feed"+c;f.style.width="100%";f.style.height="100%";c++;e&&e.appendChild(f);d();return{start:function(){f.setAttribute("style","display:inline")},end:function(){f.setAttribute("style","display:none")},_teardown:function(h){document.getElementById(h.target)&&document.getElementById(h.target).removeChild(f);delete h.feed}}},{about:{name:"Popcorn Google Feed Plugin",version:"0.1",author:"David Seifried",website:"dseifried.wordpress.com"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},target:"feed-container",url:{elem:"input",type:"url",label:"Feed URL","default":"http://planet.mozilla.org/rss20.xml"},title:{elem:"input",type:"text",label:"Title","default":"Planet Mozilla",optional:true},orientation:{elem:"select",options:["Vertical","Horizontal"],label:"Orientation","default":"Vertical",optional:true}}})})(Popcorn);(function(b){var c=0,a=function(e,f){var d=e.container=document.createElement("div"),l=d.style,k=e.media,g=function(){var h=e.position();l.fontSize="18px";l.width=k.offsetWidth+"px";l.top=h.top+k.offsetHeight-d.offsetHeight-40+"px";l.left=h.left+"px";setTimeout(g,10)};d.id=f||b.guid();l.position="absolute";l.color="white";l.textShadow="black 2px 2px 6px";l.fontWeight="bold";l.textAlign="center";g();e.media.parentNode.appendChild(d);return d};b.plugin("subtitle",{manifest:{about:{name:"Popcorn Subtitle Plugin",version:"0.1",author:"Scott Downe",website:"http://scottdowne.wordpress.com/"},options:{start:{elem:"input",type:"text",label:"Start"},end:{elem:"input",type:"text",label:"End"},target:"subtitle-container",text:{elem:"input",type:"text",label:"Text"}}},_setup:function(e){var d=document.createElement("div");d.id="subtitle-"+c++;d.style.display="none";!this.container&&(!e.target||e.target==="subtitle-container")&&a(this);e.container=e.target&&e.target!=="subtitle-container"?document.getElementById(e.target)||a(this,e.target):this.container;document.getElementById(e.container.id)&&document.getElementById(e.container.id).appendChild(d);e.innerContainer=d;e.showSubtitle=function(){e.innerContainer.innerHTML=e.text||""}},start:function(e,d){d.innerContainer.style.display="inline";d.showSubtitle(d,d.text)},end:function(e,d){d.innerContainer.style.display="none";d.innerContainer.innerHTML=""},_teardown:function(d){d.container.removeChild(d.innerContainer)}})})(Popcorn);(function(a){var b=false;a.plugin("twitter",{manifest:{about:{name:"Popcorn Twitter Plugin",version:"0.1",author:"Scott Downe",website:"http://scottdowne.wordpress.com/"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},src:{elem:"input",type:"text",label:"Tweet Source (# or @)","default":"@popcornjs"},target:"twitter-container",height:{elem:"input",type:"number",label:"Height","default":"200",optional:true},width:{elem:"input",type:"number",label:"Width","default":"250",optional:true}}},_setup:function(c){if(!window.TWTR&&!b){b=true;a.getScript("//widgets.twimg.com/j/2/widget.js")}var m=document.getElementById(c.target);c.container=document.createElement("div");c.container.setAttribute("id",a.guid());c.container.style.display="none";m&&m.appendChild(c.container);var d=c.src||"";m=c.width||250;var l=c.height||200,k=/^@/.test(d),g={version:2,id:c.container.getAttribute("id"),rpp:30,width:m,height:l,interval:6000,theme:{shell:{background:"#ffffff",color:"#000000"},tweets:{background:"#ffffff",color:"#444444",links:"#1985b5"}},features:{loop:true,timestamp:true,avatars:true,hashtags:true,toptweets:true,live:true,scrollbar:false,behavior:"default"}},f=function(e){if(window.TWTR){if(k){g.type="profile";(new TWTR.Widget(g)).render().setUser(d).start()}else{g.type="search";g.search=d;g.subject=d;(new TWTR.Widget(g)).render().start()}}else{setTimeout(function(){f(e)},1)}};f(this)},start:function(d,c){c.container.style.display="inline"},end:function(d,c){c.container.style.display="none"},_teardown:function(c){document.getElementById(c.target)&&document.getElementById(c.target).removeChild(c.container)}})})(Popcorn);(function(a){a.plugin("webpage",{manifest:{about:{name:"Popcorn Webpage Plugin",version:"0.1",author:"@annasob",website:"annasob.wordpress.com"},options:{id:{elem:"input",type:"text",label:"Id",optional:true},start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},src:{elem:"input",type:"url",label:"Webpage URL","default":"http://mozillapopcorn.org"},target:"iframe-container"}},_setup:function(b){var c=document.getElementById(b.target);b.src=b.src.replace(/^(https?:)?(\/\/)?/,"//");b._iframe=document.createElement("iframe");b._iframe.setAttribute("width","100%");b._iframe.setAttribute("height","100%");b._iframe.id=b.id;b._iframe.src=b.src;b._iframe.style.display="none";c&&c.appendChild(b._iframe)},start:function(b,c){c._iframe.src=c.src;c._iframe.style.display="inline"},end:function(b,c){c._iframe.style.display="none"},_teardown:function(b){document.getElementById(b.target)&&document.getElementById(b.target).removeChild(b._iframe)}})})(Popcorn);var wikiCallback;(function(a){a.plugin("wikipedia",{manifest:{about:{name:"Popcorn Wikipedia Plugin",version:"0.1",author:"@annasob",website:"annasob.wordpress.com"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},lang:{elem:"input",type:"text",label:"Language","default":"english",optional:true},src:{elem:"input",type:"url",label:"Wikipedia URL","default":"http://en.wikipedia.org/wiki/Cat"},title:{elem:"input",type:"text",label:"Title","default":"Cats",optional:true},numberofwords:{elem:"input",type:"number",label:"Number of Words","default":"200",optional:true},target:"wikipedia-container"}},_setup:function(b){var e,d=a.guid();if(!b.lang){b.lang="en"}b.numberofwords=b.numberofwords||200;window["wikiCallback"+d]=function(c){b._link=document.createElement("a");b._link.setAttribute("href",b.src);b._link.setAttribute("target","_blank");b._link.innerHTML=b.title||c.parse.displaytitle;b._desc=document.createElement("p");e=c.parse.text["*"].substr(c.parse.text["*"].indexOf("<p>"));e=e.replace(/((<(.|\n)+?>)|(\((.*?)\) )|(\[(.*?)\]))/g,"");e=e.split(" ");b._desc.innerHTML=e.slice(0,e.length>=b.numberofwords?b.numberofwords:e.length).join(" ")+" ...";b._fired=true};b.src&&a.getScript("//"+b.lang+".wikipedia.org/w/api.php?action=parse&props=text&redirects&page="+b.src.slice(b.src.lastIndexOf("/")+1)+"&format=json&callback=wikiCallback"+d)},start:function(b,e){var d=function(){if(e._fired){if(e._link&&e._desc){if(document.getElementById(e.target)){document.getElementById(e.target).appendChild(e._link);document.getElementById(e.target).appendChild(e._desc);e._added=true}}}else{setTimeout(function(){d()},13)}};d()},end:function(b,c){if(c._added){document.getElementById(c.target).removeChild(c._link);document.getElementById(c.target).removeChild(c._desc)}},_teardown:function(b){if(b._added){b._link.parentNode&&document.getElementById(b.target).removeChild(b._link);b._desc.parentNode&&document.getElementById(b.target).removeChild(b._desc);delete b.target}}})})(Popcorn);(function(a){a.plugin("mustache",function(o){var g,r,b,q;a.getScript("http://mustache.github.com/extras/mustache.js");var m=!!o.dynamic,l=typeof o.template,k=typeof o.data,d=document.getElementById(o.target);o.container=d||document.createElement("div");if(l==="function"){if(m){b=o.template}else{q=o.template(o)}}else{q=l==="string"?o.template:""}if(k==="function"){if(m){g=o.data}else{r=o.data(o)}}else{r=k==="string"?JSON.parse(o.data):k==="object"?o.data:""}return{start:function(f,e){var c=function(){if(window.Mustache){if(g){r=g(e)}if(b){q=b(e)}var h=Mustache.to_html(q,r).replace(/^\s*/mg,"");e.container.innerHTML=h}else{setTimeout(function(){c()},10)}};c()},end:function(e,c){c.container.innerHTML=""},_teardown:function(){g=r=b=q=null}}},{about:{name:"Popcorn Mustache Plugin",version:"0.1",author:"David Humphrey (@humphd)",website:"http://vocamus.net/dave"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},target:"mustache-container",template:{elem:"input",type:"text",label:"Template"},data:{elem:"input",type:"text",label:"Data"},dynamic:{elem:"input",type:"checkbox",label:"Dynamic","default":true}}})})(Popcorn);(function(b){function c(e,d){if(e.map){e.map.div.style.display=d}else{setTimeout(function(){c(e,d)},10)}}var a=1;b.plugin("openmap",function(g){var k,f,e,d,t,n,s,r,l=document.getElementById(g.target);k=document.createElement("div");k.id="openmapdiv"+a;k.style.width="100%";k.style.height="100%";a++;l&&l.appendChild(k);r=function(){if(window.OpenLayers&&window.OpenLayers.Layer.Stamen){if(g.location){location=new OpenLayers.LonLat(0,0);b.getJSONP("//tinygeocoder.com/create-api.php?q="+g.location+"&callback=jsonp",function(i){f=new OpenLayers.LonLat(i[1],i[0])})}else{f=new OpenLayers.LonLat(g.lng,g.lat)}g.type=g.type||"ROADMAP";switch(g.type){case"SATELLITE":g.map=new OpenLayers.Map({div:k,maxResolution:0.28125,tileSize:new OpenLayers.Size(512,512)});var h=new OpenLayers.Layer.WorldWind("LANDSAT","//worldwind25.arc.nasa.gov/tile/tile.aspx",2.25,4,{T:"105"});g.map.addLayer(h);d=new OpenLayers.Projection("EPSG:4326");e=new OpenLayers.Projection("EPSG:4326");break;case"TERRAIN":d=new OpenLayers.Projection("EPSG:4326");e=new OpenLayers.Projection("EPSG:4326");g.map=new OpenLayers.Map({div:k,projection:e});h=new OpenLayers.Layer.WMS("USGS Terraserver","//terraserver-usa.org/ogcmap.ashx?",{layers:"DRG"});g.map.addLayer(h);break;case"STAMEN-TONER":case"STAMEN-WATERCOLOR":case"STAMEN-TERRAIN":h=g.type.replace("STAMEN-","").toLowerCase();h=new OpenLayers.Layer.Stamen(h);d=new OpenLayers.Projection("EPSG:4326");e=new OpenLayers.Projection("EPSG:900913");f=f.transform(d,e);g.map=new OpenLayers.Map({div:k,projection:e,displayProjection:d,controls:[new OpenLayers.Control.Navigation,new OpenLayers.Control.PanPanel,new OpenLayers.Control.ZoomPanel]});g.map.addLayer(h);break;default:e=new OpenLayers.Projection("EPSG:900913");d=new OpenLayers.Projection("EPSG:4326");f=f.transform(d,e);g.map=new OpenLayers.Map({div:k,projection:e,displayProjection:d});h=new OpenLayers.Layer.OSM;g.map.addLayer(h)}if(g.map){g.map.setCenter(f,g.zoom||10);g.map.div.style.display="none"}}else{setTimeout(function(){r()},50)}};r();return{_setup:function(h){window.OpenLayers||b.getScript("//openlayers.org/api/OpenLayers.js",function(){b.getScript("//maps.stamen.com/js/tile.stamen.js")});var i=function(){if(h.map){h.zoom=h.zoom||2;if(h.zoom&&typeof h.zoom!=="number"){h.zoom=+h.zoom}h.map.setCenter(f,h.zoom);if(h.markers){var p=OpenLayers.Util.extend({},OpenLayers.Feature.Vector.style["default"]),j=function(u){clickedFeature=u.feature;if(clickedFeature.attributes.text){s=new OpenLayers.Popup.FramedCloud("featurePopup",clickedFeature.geometry.getBounds().getCenterLonLat(),new OpenLayers.Size(120,250),clickedFeature.attributes.text,null,true,function(){n.unselect(this.feature)});clickedFeature.popup=s;s.feature=clickedFeature;h.map.addPopup(s)}},m=function(u){feature=u.feature;if(feature.popup){s.feature=null;h.map.removePopup(feature.popup);feature.popup.destroy();feature.popup=null}},w=function(u){b.getJSONP("//tinygeocoder.com/create-api.php?q="+u.location+"&callback=jsonp",function(x){x=(new OpenLayers.Geometry.Point(x[1],x[0])).transform(d,e);var y=OpenLayers.Util.extend({},p);if(!u.size||isNaN(u.size)){u.size=14}y.pointRadius=u.size;y.graphicOpacity=1;y.externalGraphic=u.icon;x=new OpenLayers.Feature.Vector(x,null,y);if(u.text){x.attributes={text:u.text}}t.addFeatures([x])})};t=new OpenLayers.Layer.Vector("Point Layer",{style:p});h.map.addLayer(t);for(var q=0,z=h.markers.length;q<z;q++){var B=h.markers[q];if(B.text){if(!n){n=new OpenLayers.Control.SelectFeature(t);h.map.addControl(n);n.activate();t.events.on({featureselected:j,featureunselected:m})}}if(B.location){w(B)}else{var v=(new OpenLayers.Geometry.Point(B.lng,B.lat)).transform(d,e),o=OpenLayers.Util.extend({},p);if(!B.size||isNaN(B.size)){B.size=14}o.pointRadius=B.size;o.graphicOpacity=1;o.externalGraphic=B.icon;v=new OpenLayers.Feature.Vector(v,null,o);if(B.text){v.attributes={text:B.text}}t.addFeatures([v])}}}}else{setTimeout(function(){i()},13)}};i()},start:function(h,i){c(i,"block")},end:function(h,i){c(i,"none")},_teardown:function(){l&&l.removeChild(k);k=map=f=e=d=t=n=s=null}}},{about:{name:"Popcorn OpenMap Plugin",version:"0.3",author:"@mapmeld",website:"mapadelsur.blogspot.com"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},target:"map-container",type:{elem:"select",options:["ROADMAP","SATELLITE","TERRAIN"],label:"Map Type",optional:true},zoom:{elem:"input",type:"number",label:"Zoom","default":2},lat:{elem:"input",type:"text",label:"Lat",optional:true},lng:{elem:"input",type:"text",label:"Lng",optional:true},location:{elem:"input",type:"text",label:"Location","default":"Toronto, Ontario, Canada"},markers:{elem:"input",type:"text",label:"List Markers",optional:true}}})})(Popcorn);document.addEventListener("click",function(a){a=a.target;if(a.nodeName==="A"||a.parentNode&&a.parentNode.nodeName==="A"){Popcorn.instances.forEach(function(b){b.options.pauseOnLinkClicked&&b.pause()})}},false);(function(s){var g={},v=0,l=document.createElement("span"),q=["webkit","Moz","ms","O",""],k=["Transform","TransitionDuration","TransitionTimingFunction"],d={},x;document.getElementsByTagName("head")[0].appendChild(l);for(var a=0,t=k.length;a<t;a++){for(var w=0,u=q.length;w<u;w++){x=q[w]+k[a];if(x in l.style){d[k[a].toLowerCase()]=x;break}}}document.getElementsByTagName("head")[0].appendChild(l);s.plugin("wordriver",{manifest:{about:{name:"Popcorn WordRiver Plugin"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},target:"wordriver-container",text:{elem:"input",type:"text",label:"Text","default":"Popcorn.js"},color:{elem:"input",type:"text",label:"Color","default":"Green",optional:true}}},_setup:function(c){c._duration=c.end-c.start;var b;if(!(b=g[c.target])){b=c.target;g[b]=document.createElement("div");var e=document.getElementById(b);e&&e.appendChild(g[b]);g[b].style.height="100%";g[b].style.position="relative";b=g[b]}c._container=b;c.word=document.createElement("span");c.word.style.position="absolute";c.word.style.whiteSpace="nowrap";c.word.style.opacity=0;c.word.style.MozTransitionProperty="opacity, -moz-transform";c.word.style.webkitTransitionProperty="opacity, -webkit-transform";c.word.style.OTransitionProperty="opacity, -o-transform";c.word.style.transitionProperty="opacity, transform";c.word.style[d.transitionduration]="1s, "+c._duration+"s";c.word.style[d.transitiontimingfunction]="linear";c.word.innerHTML=c.text;c.word.style.color=c.color||"black"},start:function(c,b){b._container.appendChild(b.word);b.word.style[d.transform]="";b.word.style.fontSize=~~(30+20*Math.random())+"px";v%=b._container.offsetWidth-b.word.offsetWidth;b.word.style.left=v+"px";v+=b.word.offsetWidth+10;b.word.style[d.transform]="translateY("+(b._container.offsetHeight-b.word.offsetHeight)+"px)";b.word.style.opacity=1;setTimeout(function(){b.word.style.opacity=0},(b.end-b.start-1||1)*1000)},end:function(c,b){b.word.style.opacity=0},_teardown:function(c){var b=document.getElementById(c.target);c.word.parentNode&&c._container.removeChild(c.word);g[c.target]&&!g[c.target].childElementCount&&b&&b.removeChild(g[c.target])&&delete g[c.target]}})})(Popcorn);(function(a){var b=1;a.plugin("timeline",function(g){var f=document.getElementById(g.target),i=document.createElement("div"),d,c=true;if(f&&!f.firstChild){f.appendChild(d=document.createElement("div"));d.style.width="inherit";d.style.height="inherit";d.style.overflow="auto"}else{d=f.firstChild}i.style.display="none";i.id="timelineDiv"+b;g.direction=g.direction||"up";if(g.direction.toLowerCase()==="down"){c=false}if(f&&d){c?d.insertBefore(i,d.firstChild):d.appendChild(i)}b++;i.innerHTML="<p><span id='big' style='font-size:24px; line-height: 130%;' >"+g.title+"</span><br /><span id='mid' style='font-size: 16px;'>"+g.text+"</span><br />"+g.innerHTML;return{start:function(h,e){i.style.display="block";if(e.direction==="down"){d.scrollTop=d.scrollHeight}},end:function(){i.style.display="none"},_teardown:function(){d&&i&&d.removeChild(i)&&!d.firstChild&&f.removeChild(d)}}},{about:{name:"Popcorn Timeline Plugin",version:"0.1",author:"David Seifried @dcseifried",website:"dseifried.wordpress.com"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},target:"feed-container",title:{elem:"input",type:"text",label:"Title"},text:{elem:"input",type:"text",label:"Text"},innerHTML:{elem:"input",type:"text",label:"HTML Code",optional:true},direction:{elem:"select",options:["DOWN","UP"],label:"Direction",optional:true}}})})(Popcorn);(function(b,c){var a={};b.plugin("documentcloud",{manifest:{about:{name:"Popcorn Document Cloud Plugin",version:"0.1",author:"@humphd, @ChrisDeCairos",website:"http://vocamus.net/dave"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},target:"documentcloud-container",width:{elem:"input",type:"text",label:"Width",optional:true},height:{elem:"input",type:"text",label:"Height",optional:true},src:{elem:"input",type:"url",label:"PDF URL","default":"http://www.documentcloud.org/documents/70050-urbina-day-1-in-progress.html"},preload:{elem:"input",type:"checkbox",label:"Preload","default":true},page:{elem:"input",type:"number",label:"Page Number",optional:true},aid:{elem:"input",type:"number",label:"Annotation Id",optional:true}}},_setup:function(k){function g(){function E(q){k._key=q.api.getId();k._changeView=function(s){k.aid?s.pageSet.showAnnotation(s.api.getAnnotation(k.aid)):s.api.setCurrentPage(k.page)}}function h(){a[k._key]={num:1,id:k._containerId};e.loaded=true}e.loaded=false;var D=k.url.replace(/\.html$/,".js"),o=k.target,j=c.getElementById(o),r=c.createElement("div"),p=b.position(j),C=k.width||p.width;p=k.height||p.height;var v=k.sidebar||true,w=k.text||true,n=k.pdf||true,B=k.showAnnotations||true,i=k.zoom||700,z=k.search||true;if(!function(q){var s=false;b.forEach(e.viewers,function(t){if(t.api.getSchema().canonicalURL===q){E(t);t=a[k._key];k._containerId=t.id;t.num+=1;s=true;e.loaded=true}});return s}(k.url)){r.id=k._containerId=b.guid(o);o="#"+r.id;j.appendChild(r);m.trigger("documentready");e.load(D,{width:C,height:p,sidebar:v,text:w,pdf:n,showAnnotations:B,zoom:i,search:z,container:o,afterLoad:k.page||k.aid?function(q){E(q);k._changeView(q);r.style.visibility="hidden";q.elements.pages.hide();h()}:function(q){E(q);h();r.style.visibility="hidden";q.elements.pages.hide()}})}}function f(){window.DV.loaded?g():setTimeout(f,25)}var e=window.DV=window.DV||{},m=this;if(e.loading){f()}else{e.loading=true;e.recordHit="//www.documentcloud.org/pixel.gif";var l=c.createElement("link"),d=c.getElementsByTagName("head")[0];l.rel="stylesheet";l.type="text/css";l.media="screen";l.href="//s3.documentcloud.org/viewer/viewer-datauri.css";d.appendChild(l);e.loaded=false;b.getScript("http://s3.documentcloud.org/viewer/viewer.js",function(){e.loading=false;g()})}},start:function(e,f){var d=c.getElementById(f._containerId),g=DV.viewers[f._key];(f.page||f.aid)&&g&&f._changeView(g);if(d&&g){d.style.visibility="visible";g.elements.pages.show()}},end:function(e,f){var d=c.getElementById(f._containerId);if(d&&DV.viewers[f._key]){d.style.visibility="hidden";DV.viewers[f._key].elements.pages.hide()}},_teardown:function(e){var d=c.getElementById(e._containerId);if((e=e._key)&&DV.viewers[e]&&--a[e].num===0){for(DV.viewers[e].api.unload();d.hasChildNodes();){d.removeChild(d.lastChild)}d.parentNode.removeChild(d)}}})})(Popcorn,window.document);(function(a){a.parser("parseJSON","JSON",function(b){var c={title:"",remote:"",data:[]};a.forEach(b.data,function(d){c.data.push(d)});return c})})(Popcorn);(function(a){a.parser("parseSBV",function(k){var u={title:"",remote:"",data:[]},q=[],r=0,l=0,g=function(e){e=e.split(":");var c=e.length-1,f;try{f=parseInt(e[c-1],10)*60+parseFloat(e[c],10);if(c===2){f+=parseInt(e[0],10)*3600}}catch(h){throw"Bad cue"}return f},d=function(c,f){var e={};e[c]=f;return e};k=k.text.split(/(?:\r\n|\r|\n)/gm);for(l=k.length;r<l;){var b={},s=[],v=k[r++].split(",");try{b.start=g(v[0]);for(b.end=g(v[1]);r<l&&k[r];){s.push(k[r++])}b.text=s.join("<br />");q.push(d("subtitle",b))}catch(t){for(;r<l&&k[r];){r++}}for(;r<l&&!k[r];){r++}}u.data=q;return u})})(Popcorn);(function(b){function c(e,f){var d={};d[e]=f;return d}function a(e){e=e.split(":");try{var f=e[2].split(",");if(f.length===1){f=e[2].split(".")}return parseFloat(e[0],10)*3600+parseFloat(e[1],10)*60+parseFloat(f[0],10)+parseFloat(f[1],10)/1000}catch(d){return 0}}b.parser("parseSRT",function(r){var d={title:"",remote:"",data:[]},q=[],n=0,l=0,k,e,g,f;r=r.text.split(/(?:\r\n|\r|\n)/gm);for(n=r.length-1;n>=0&&!r[n];){n--}g=n+1;for(n=0;n<g;n++){f={};e=[];f.id=parseInt(r[n++],10);k=r[n++].split(/[\t ]*--\>[\t ]*/);f.start=a(k[0]);l=k[1].indexOf(" ");if(l!==-1){k[1]=k[1].substr(0,l)}for(f.end=a(k[1]);n<g&&r[n];){e.push(r[n++])}f.text=e.join("\\N").replace(/\{(\\[\w]+\(?([\w\d]+,?)+\)?)+\}/gi,"");f.text=f.text.replace(/</g,"&lt;").replace(/>/g,"&gt;");f.text=f.text.replace(/&lt;(\/?(font|b|u|i|s))((\s+(\w|\w[\w\-]*\w)(\s*=\s*(?:\".*?\"|'.*?'|[^'\">\s]+))?)+\s*|\s*)(\/?)&gt;/gi,"<$1$3$7>");f.text=f.text.replace(/\\N/gi,"<br />");q.push(c("subtitle",f))}d.data=q;return d})})(Popcorn);(function(d){function e(f,c){var r=f.substr(10).split(","),q;q={start:b(r[c.start]),end:b(r[c.end])};if(q.start===-1||q.end===-1){throw"Invalid time"}var n=g.call(l,/\{(\\[\w]+\(?([\w\d]+,?)+\)?)+\}/gi,""),h=n.replace,l;l=r.length;g=[];for(var k=c.text;k<l;k++){g.push(r[k])}l=g.join(",");var g=l.replace;q.text=h.call(n,/\\N/gi,"<br />");return q}function b(c){var f=c.split(":");if(c.length!==10||f.length<3){return -1}return parseInt(f[0],10)*3600+parseInt(f[1],10)*60+parseFloat(f[2],10)}function a(g,f){var c={};c[g]=f;return c}d.parser("parseSSA",function(h){var g={title:"",remote:"",data:[]},f=[],c=0,t;h=h.text.split(/(?:\r\n|\r|\n)/gm);for(t=h.length;c<t&&h[c]!=="[Events]";){c++}var n=h[++c].substr(8).split(", "),s={},r,l;l=0;for(r=n.length;l<r;l++){if(n[l]==="Start"){s.start=l}else{if(n[l]==="End"){s.end=l}else{if(n[l]==="Text"){s.text=l}}}}for(;++c<t&&h[c]&&h[c][0]!=="[";){try{f.push(a("subtitle",e(h[c],s)))}catch(k){}}g.data=f;return g})})(Popcorn);(function(l){function d(e,c,f){var b=e.firstChild;e=k(e,f);f=[];for(var h;b;){if(b.nodeType===1){if(b.nodeName==="p"){f.push(i(b,c,e))}else{if(b.nodeName==="div"){h=g(b.getAttribute("begin"));if(h<0){h=c}f.push.apply(f,d(b,h,e))}}}b=b.nextSibling}return f}function k(c,b){var e=c.getAttribute("region");return e!==null?e:b||""}function i(e,c,f){var b={};b.text=(e.textContent||e.text).replace(j,"").replace(a,"<br />");b.id=e.getAttribute("xml:id")||e.getAttribute("id");b.start=g(e.getAttribute("begin"),c);b.end=g(e.getAttribute("end"),c);b.target=k(e,f);if(b.end<0){b.end=g(e.getAttribute("duration"),0);if(b.end>=0){b.end+=b.start}else{b.end=Number.MAX_VALUE}}return{subtitle:b}}function g(e,c){var f;if(!e){return -1}try{return l.util.toSeconds(e)}catch(b){for(var h=e.length-1;h>=0&&e[h]<="9"&&e[h]>="0";){h--}f=h;h=parseFloat(e.substring(0,f));f=e.substring(f);return h*({h:3600,m:60,s:1,ms:0.001}[f]||-1)+(c||0)}}var j=/^[\s]+|[\s]+$/gm,a=/(?:\r\n|\r|\n)/gm;l.parser("parseTTML",function(c){var b={title:"",remote:"",data:[]};if(!c.xml||!c.xml.documentElement){return b}c=c.xml.documentElement.firstChild;if(!c){return b}for(;c.nodeName!=="body";){c=c.nextSibling}if(c){b.data=d(c,0)}return b})})(Popcorn);(function(a){a.parser("parseTTXT",function(m){var j={title:"",remote:"",data:[]},b=function(c){c=c.split(":");var e=0;try{return parseFloat(c[0],10)*60*60+parseFloat(c[1],10)*60+parseFloat(c[2],10)}catch(f){e=0}return e},l=function(c,e){var f={};f[c]=e;return f};m=m.xml.lastChild.lastChild;for(var k=Number.MAX_VALUE,g=[];m;){if(m.nodeType===1&&m.nodeName==="TextSample"){var d={};d.start=b(m.getAttribute("sampleTime"));d.text=m.getAttribute("text");if(d.text){d.end=k-0.001;g.push(l("subtitle",d))}k=d.start}m=m.previousSibling}j.data=g.reverse();return j})})(Popcorn);(function(b){function c(e){var f=e.split(":");e=e.length;var d;if(e!==12&&e!==9){throw"Bad cue"}e=f.length-1;try{d=parseInt(f[e-1],10)*60+parseFloat(f[e],10);if(e===2){d+=parseInt(f[0],10)*3600}}catch(g){throw"Bad cue"}return d}function a(e,f){var d={};d[e]=f;return d}b.parser("parseVTT",function(e){var f={title:"",remote:"",data:[]},d=[],v=0,u=0,t,l;e=e.text.split(/(?:\r\n|\r|\n)/gm);u=e.length;if(u===0||e[0]!=="WEBVTT"){return f}for(v++;v<u;){t=[];try{for(var r=v;r<u&&!e[r];){r++}v=r;var n=e[v++];r=void 0;var k={};if(!n||n.indexOf("-->")===-1){throw"Bad cue"}r=n.replace(/--\>/," --> ").split(/[\t ]+/);if(r.length<2){throw"Bad cue"}k.id=n;k.start=c(r[0]);k.end=c(r[2]);for(l=k;v<u&&e[v];){t.push(e[v++])}l.text=t.join("<br />");d.push(a("subtitle",l))}catch(g){for(v=v;v<u&&e[v];){v++}v=v}}f.data=d;return f})})(Popcorn);(function(a){a.parser("parseXML","XML",function(o){var g={title:"",remote:"",data:[]},r={},b=function(c){c=c.split(":");if(c.length===1){return parseFloat(c[0],10)}else{if(c.length===2){return parseFloat(c[0],10)+parseFloat(c[1]/12,10)}else{if(c.length===3){return parseInt(c[0]*60,10)+parseFloat(c[1],10)+parseFloat(c[2]/12,10)}else{if(c.length===4){return parseInt(c[0]*3600,10)+parseInt(c[1]*60,10)+parseFloat(c[2],10)+parseFloat(c[3]/12,10)}}}}},q=function(p){for(var i={},h=0,f=p.length;h<f;h++){var c=p.item(h).nodeName,e=p.item(h).nodeValue,j=r[e];if(c==="in"){i.start=b(e)}else{if(c==="out"){i.end=b(e)}else{if(c==="resourceid"){for(var n in j){if(j.hasOwnProperty(n)){if(!i[n]&&n!=="id"){i[n]=j[n]}}}}else{i[c]=e}}}}return i},m=function(f,e){var c={};c[f]=e;return c},l=function(h,f,e){var c={};a.extend(c,f,q(h.attributes),{text:h.textContent||h.text});f=h.childNodes;if(f.length<1||f.length===1&&f[0].nodeType===3){if(e){r[c.id]=c}else{g.data.push(m(h.nodeName,c))}}else{for(h=0;h<f.length;h++){f[h].nodeType===1&&l(f[h],c,e)}}};o=o.documentElement.childNodes;for(var k=0,d=o.length;k<d;k++){if(o[k].nodeType===1){o[k].nodeName==="manifest"?l(o[k],{},true):l(o[k],{},false)}}return g})})(Popcorn);(function(){var a=false,b=false;Popcorn.player("soundcloud",{_canPlayType:function(d,c){return/(?:http:\/\/www\.|http:\/\/|www\.|\.|^)(soundcloud)/.test(c)&&d.toLowerCase()!=="video"},_setup:function(t){function c(){a=true;SC.initialize({client_id:"PRaNFlda6Bhf5utPjUsptg"});SC.get("/resolve",{url:f.src},function(e){f.width=f.style.width?""+f.offsetWidth:"560";f.height=f.style.height?""+f.offsetHeight:"315";v.scrolling="no";v.frameborder="no";v.id="soundcloud-"+Popcorn.guid();v.src="http://w.soundcloud.com/player/?url="+e.uri+"&show_artwork=false&buying=false&liking=false&sharing=false";v.width="100%";v.height="100%";t.loadListener=function(){t.widget=k=SC.Widget(v.id);k.bind(SC.Widget.Events.FINISH,function(){f.pause();f.dispatchEvent("ended")});k.bind(SC.Widget.Events.PLAY_PROGRESS,function(h){d=h.currentPosition/1000;f.dispatchEvent("timeupdate")});k.bind(SC.Widget.Events.PLAY,function(){g=x=false;f.dispatchEvent("play");f.dispatchEvent("playing");f.currentTime=d;y.next()});k.bind(SC.Widget.Events.PAUSE,function(){g=x=true;f.dispatchEvent("pause");y.next()});k.bind(SC.Widget.Events.READY,function(){k.getDuration(function(h){r=h/1000;f.style.visibility="visible";f.dispatchEvent("durationchange");f.readyState=4;f.dispatchEvent("readystatechange");f.dispatchEvent("loadedmetadata");f.dispatchEvent("loadeddata");f.dispatchEvent("canplaythrough");f.dispatchEvent("load");!f.paused&&f.play()});k.getVolume(function(h){u=h/100})})};v.addEventListener("load",t.loadListener,false);f.appendChild(v)})}function l(){if(b){(function e(){setTimeout(function(){a?c():e()},100)})()}else{b=true;Popcorn.getScript("http://w.soundcloud.com/player/api.js",function(){Popcorn.getScript("http://connect.soundcloud.com/sdk.js",function(){c()})})}}var f=this,v=document.createElement("iframe"),u=1,d=0,g=true,x=true,k,r=0,w=false,y=Popcorn.player.playerQueue();t._container=v;f.style.visibility="hidden";f.play=function(){g=false;y.add(function(){if(x){k&&k.play()}else{y.next()}})};f.pause=function(){g=true;y.add(function(){if(x){y.next()}else{k&&k.pause()}})};Object.defineProperties(f,{muted:{set:function(e){if(e){k&&k.getVolume(function(h){u=h/100});k&&k.setVolume(0);w=true}else{k&&k.setVolume(u*100);w=false}f.dispatchEvent("volumechange")},get:function(){return w}},volume:{set:function(e){k&&k.setVolume(e*100);u=e;f.dispatchEvent("volumechange")},get:function(){return w?0:u}},currentTime:{set:function(e){d=e;k&&k.seekTo(e*1000);f.dispatchEvent("seeked");f.dispatchEvent("timeupdate")},get:function(){return d}},duration:{get:function(){return r}},paused:{get:function(){return g}}});a?c():l()},_teardown:function(g){var f=g.widget,i=SC.Widget.Events,d=g._container;g.destroyed=true;if(f){for(var c in i){f&&f.unbind(i[c])}}else{d.removeEventListener("load",g.loadEventListener,false)}}})})();(function(){function a(d){var c=a.options;d=c.parser[c.strictMode?"strict":"loose"].exec(d);for(var f={},g=14;g--;){f[c.key[g]]=d[g]||""}f[c.q.name]={};f[c.key[12]].replace(c.q.parser,function(i,h,e){if(h){f[c.q.name][h]=e}});return f}function b(d,c){return/player.vimeo.com\/video\/\d+/.test(c)||/vimeo.com\/\d+/.test(c)}a.options={strictMode:false,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}};Popcorn.player("vimeo",{_canPlayType:b,_setup:function(D){function H(h,e){var i=c.src.split("?")[0],g=JSON.stringify({method:h,value:e});if(i.substr(0,2)==="//"){i=window.location.protocol+i}c.contentWindow?c.contentWindow.postMessage(g,i):w.unload()}function d(e){if(e.origin==="http://player.vimeo.com"){var g;try{g=JSON.parse(e.data)}catch(h){console.warn(h)}if(g.player_id==E){g.method&&v[g.method]&&v[g.method](g);g.event&&z[g.event]&&z[g.event](g)}}}function G(){f||(f=setInterval(function(){w.dispatchEvent("timeupdate")},F));l||(l=setInterval(function(){H("getCurrentTime")},B))}function r(){if(f){clearInterval(f);f=0}if(l){clearInterval(l);l=0}}var F=250,B=16,k={MEDIA_ERR_ABORTED:1,MEDIA_ERR_NETWORK:2,MEDIA_ERR_DECODE:3,MEDIA_ERR_SRC_NOT_SUPPORTED:4},E,w=this,C={q:[],queue:function(e){this.q.push(e);this.process()},process:function(){if(t){for(;this.q.length;){this.q.shift()()}}}},l,f,t,c=document.createElement("iframe"),u={error:null,src:w.src,NETWORK_EMPTY:0,NETWORK_IDLE:1,NETWORK_LOADING:2,NETWORK_NO_SOURCE:3,networkState:0,HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4,readyState:0,seeking:false,currentTime:0,duration:NaN,paused:true,ended:false,autoplay:false,loop:false,volume:1,muted:false,width:0,height:0};Popcorn.forEach("error networkState readyState seeking duration paused ended".split(" "),function(e){Object.defineProperty(w,e,{get:function(){return u[e]}})});Object.defineProperties(w,{src:{get:function(){return u.src},set:function(e){u.src=e;w.load()}},currentTime:{get:function(){return u.currentTime},set:function(e){C.queue(function(){H("seekTo",e)});u.seeking=true;w.dispatchEvent("seeking")}},autoplay:{get:function(){return u.autoplay},set:function(e){u.autoplay=!!e}},loop:{get:function(){return u.loop},set:function(e){u.loop=!!e;C.queue(function(){H("setLoop",loop)})}},volume:{get:function(){return u.volume},set:function(e){u.volume=e;C.queue(function(){H("setVolume",u.muted?0:u.volume)});w.dispatchEvent("volumechange")}},muted:{get:function(){return u.muted},set:function(e){u.muted=!!e;C.queue(function(){H("setVolume",u.muted?0:u.volume)});w.dispatchEvent("volumechange")}},width:{get:function(){return c.width},set:function(e){c.width=e}},height:{get:function(){return c.height},set:function(e){c.height=e}}});var v={getCurrentTime:function(e){u.currentTime=parseFloat(e.value)},getDuration:function(e){u.duration=parseFloat(e.value);if(!isNaN(u.duration)){u.readyState=4;w.dispatchEvent("durationchange");w.dispatchEvent("loadedmetadata");w.dispatchEvent("loadeddata");w.dispatchEvent("canplay");w.dispatchEvent("canplaythrough")}},getVolume:function(e){u.volume=parseFloat(e.value)}},z={ready:function(){H("addEventListener","loadProgress");H("addEventListener","playProgress");H("addEventListener","play");H("addEventListener","pause");H("addEventListener","finish");H("addEventListener","seek");H("getDuration");t=true;C.process();w.dispatchEvent("loadstart")},loadProgress:function(e){w.dispatchEvent("progress");u.duration=parseFloat(e.data.duration)},playProgress:function(e){u.currentTime=parseFloat(e.data.seconds)},play:function(){if(u.seeking){u.seeking=false;w.dispatchEvent("seeked")}u.paused=false;u.ended=false;G();w.dispatchEvent("play")},pause:function(){u.paused=true;r();w.dispatchEvent("pause")},finish:function(){u.ended=true;r();w.dispatchEvent("ended")},seek:function(e){u.currentTime=parseFloat(e.data.seconds);u.seeking=false;u.ended=false;w.dispatchEvent("timeupdate");w.dispatchEvent("seeked")}};w.load=function(){t=false;E=Popcorn.guid();var h=a(u.src),e={},j=[],g={api:1,player_id:E};if(b(w.nodeName,h.source)){Popcorn.extend(e,D);Popcorn.extend(e,h.queryKey);Popcorn.extend(e,g);h="http://player.vimeo.com/video/"+/\d+$/.exec(h.path)+"?";for(var i in e){e.hasOwnProperty(i)&&j.push(encodeURIComponent(i)+"="+encodeURIComponent(e[i]))}h+=j.join("&");u.loop=!!h.match(/loop=1/);u.autoplay=!!h.match(/autoplay=1/);c.width=w.style.width?w.style.width:500;c.height=w.style.height?w.style.height:281;c.frameBorder=0;c.webkitAllowFullScreen=true;c.mozAllowFullScreen=true;c.allowFullScreen=true;c.src=h;w.appendChild(c)}else{h=u.MEDIA_ERR_SRC_NOT_SUPPORTED;u.error={};Popcorn.extend(u.error,k);u.error.code=h;w.dispatchEvent("error")}};w.unload=function(){r();window.removeEventListener("message",d,false)};w.play=function(){C.queue(function(){H("play")})};w.pause=function(){C.queue(function(){H("pause")})};setTimeout(function(){window.addEventListener("message",d,false);w.load()},0)},_teardown:function(){this.unload&&this.unload()}})})();(function(b,c){b.onYouTubePlayerAPIReady=function(){onYouTubePlayerAPIReady.ready=true;for(var d=0;d<onYouTubePlayerAPIReady.waiting.length;d++){onYouTubePlayerAPIReady.waiting[d]()}};if(b.YT){b.quarantineYT=b.YT;b.YT=null}onYouTubePlayerAPIReady.waiting=[];var a=false;c.player("youtube",{_canPlayType:function(e,d){return typeof d==="string"&&/(?:http:\/\/www\.|http:\/\/|www\.|\.|^)(youtu)/.test(d)&&e.toLowerCase()!=="video"},_setup:function(g){if(!b.YT&&!a){a=true;c.getScript("//youtube.com/player_api")}var t=this,d=false,l=document.createElement("div"),f=0,x=true,v=false,w=0,r=false,e=100,k=c.player.playerQueue(),u=function(){c.player.defineProperty(t,"currentTime",{set:function(h){if(!g.destroyed){v=true;f=Math.round(+h*100)/100}},get:function(){return f}});c.player.defineProperty(t,"paused",{get:function(){return x}});c.player.defineProperty(t,"muted",{set:function(h){if(g.destroyed){return h}if(g.youtubeObject.isMuted()!==h){h?g.youtubeObject.mute():g.youtubeObject.unMute();r=g.youtubeObject.isMuted();t.dispatchEvent("volumechange")}return g.youtubeObject.isMuted()},get:function(){if(g.destroyed){return 0}return g.youtubeObject.isMuted()}});c.player.defineProperty(t,"volume",{set:function(h){if(g.destroyed){return h}if(g.youtubeObject.getVolume()/100!==h){g.youtubeObject.setVolume(h*100);e=g.youtubeObject.getVolume();t.dispatchEvent("volumechange")}return g.youtubeObject.getVolume()/100},get:function(){if(g.destroyed){return 0}return g.youtubeObject.getVolume()/100}});t.play=function(){if(!g.destroyed){x=false;k.add(function(){if(g.youtubeObject.getPlayerState()!==1){v=false;g.youtubeObject.playVideo()}else{k.next()}})}};t.pause=function(){if(!g.destroyed){x=true;k.add(function(){g.youtubeObject.getPlayerState()!==2?g.youtubeObject.pauseVideo():k.next()})}}};l.id=t.id+c.guid();g._container=l;t.appendChild(l);var n=function(){var p,s,q,o,j=true,m=function(){if(!g.destroyed){if(v){if(f===g.youtubeObject.getCurrentTime()){v=false;t.dispatchEvent("seeked");t.dispatchEvent("timeupdate")}else{g.youtubeObject.seekTo(f)}}else{f=g.youtubeObject.getCurrentTime();t.dispatchEvent("timeupdate")}setTimeout(m,250)}},i=function(z){var A=g.youtubeObject.getDuration();if(isNaN(A)||A===0){setTimeout(function(){i(z*2)},z*1000)}else{t.duration=A;t.dispatchEvent("durationchange");t.dispatchEvent("loadedmetadata");t.dispatchEvent("loadeddata");t.readyState=4;m();t.dispatchEvent("canplaythrough")}};g.controls=+g.controls===0||+g.controls===1?g.controls:1;g.annotations=+g.annotations===1||+g.annotations===3?g.annotations:1;p=/^.*(?:\/|v=)(.{11})/.exec(t.src)[1];s=(t.src.split("?")[1]||"").replace(/v=.{11}/,"");s=s.replace(/&t=(?:(\d+)m)?(?:(\d+)s)?/,function(B,A,z){A|=0;z|=0;w=+z+A*60;return""});s=s.replace(/&start=(\d+)?/,function(z,A){A|=0;w=A;return""});d=/autoplay=1/.test(s);s=s.split(/[\&\?]/g);q={wmode:"transparent"};for(var h=0;h<s.length;h++){o=s[h].split("=");q[o[0]]=o[1]}g.youtubeObject=new YT.Player(l.id,{height:"100%",width:"100%",wmode:"transparent",playerVars:q,videoId:p,events:{onReady:function(){e=t.volume;r=t.muted;y();x=t.paused;u();g.youtubeObject.playVideo();t.currentTime=w},onStateChange:function(z){if(!(g.destroyed||z.data===-1)){if(z.data===2){x=true;t.dispatchEvent("pause");k.next()}else{if(z.data===1&&!j){x=false;t.dispatchEvent("play");t.dispatchEvent("playing");k.next()}else{if(z.data===0){t.dispatchEvent("ended")}else{if(z.data===1&&j){j=false;if(d||!t.paused){x=false}x&&g.youtubeObject.pauseVideo();i(0.025)}}}}}},onError:function(z){if([2,100,101,150].indexOf(z.data)!==-1){t.error={customCode:z.data};t.dispatchEvent("error")}}}});var y=function(){if(!g.destroyed){if(r!==g.youtubeObject.isMuted()){r=g.youtubeObject.isMuted();t.dispatchEvent("volumechange")}if(e!==g.youtubeObject.getVolume()){e=g.youtubeObject.getVolume();t.dispatchEvent("volumechange")}setTimeout(y,250)}}};onYouTubePlayerAPIReady.ready?n():onYouTubePlayerAPIReady.waiting.push(n)},_teardown:function(e){e.destroyed=true;var d=e.youtubeObject;if(d){d.stopVideo();d.clearVideo&&d.clearVideo()}this.removeChild(document.getElementById(e._container.id))}})})(window,Popcorn);