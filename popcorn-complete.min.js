/*a57ed73e03edf77904f51e4d98579d0db0c6959e*/(function(l,t){function z(b,c){return function(){if(H.plugin.debug){return b.apply(this,arguments)}try{return b.apply(this,arguments)}catch(d){H.plugin.errors.push({plugin:c,thrown:d,source:b.toString()});this.emit("pluginerror",H.plugin.errors)}}}if(t.addEventListener){var I=Array.prototype,F=Object.prototype,G=I.forEach,E=I.slice,D=F.hasOwnProperty,w=F.toString,v=l.Popcorn,B=[],C=false,g={events:{hash:{},apis:{}}},k=function(){return l.requestAnimationFrame||l.webkitRequestAnimationFrame||l.mozRequestAnimationFrame||l.oRequestAnimationFrame||l.msRequestAnimationFrame||function(b){l.setTimeout(b,16)}}(),H=function(b,c){return new H.p.init(b,c||null)};H.version="1.3";H.isSupported=true;H.instances=[];H.p=H.prototype={init:function(h,i){var e,f=this;if(typeof h==="function"){if(t.readyState==="complete"){h(t,H)}else{B.push(h);if(!C){C=true;var c=function(){t.removeEventListener("DOMContentLoaded",c,false);for(var m=0,j=B.length;m<j;m++){B[m].call(t,H)}B=null};t.addEventListener("DOMContentLoaded",c,false)}}}else{if(typeof h==="string"){try{e=t.querySelector(h)}catch(d){throw Error("Popcorn.js Error: Invalid media element selector: "+h)}}this.media=e||h;e=this.media.nodeName&&this.media.nodeName.toLowerCase()||"video";this[e]=this.media;this.options=i||{};this.id=this.options.id||H.guid(e);if(H.byId(this.id)){throw Error("Popcorn.js Error: Cannot use duplicate ID ("+this.id+")")}this.isDestroyed=false;this.data={running:{cue:[]},timeUpdate:H.nop,disabled:{},events:{},hooks:{},history:[],state:{volume:this.media.volume},trackRefs:{},trackEvents:{byStart:[{start:-1,end:-1}],byEnd:[{start:-1,end:-1}],animating:[],startIndex:0,endIndex:0,previousUpdateTime:-1}};H.instances.push(this);var b=function(){if(f.media.currentTime<0){f.media.currentTime=0}f.media.removeEventListener("loadeddata",b,false);var o,n,m,p,j;o=f.media.duration;o=o!=o?Number.MAX_VALUE:o+1;H.addTrackEvent(f,{start:o,end:o});if(f.options.frameAnimation){f.data.timeUpdate=function(){H.timeUpdate(f,{});H.forEach(H.manifest,function(s,r){if(n=f.data.running[r]){p=n.length;for(var q=0;q<p;q++){m=n[q];(j=m._natives)&&j.frame&&j.frame.call(f,{},m,f.currentTime())}}});f.emit("timeupdate");!f.isDestroyed&&k(f.data.timeUpdate)};!f.isDestroyed&&k(f.data.timeUpdate)}else{f.data.timeUpdate=function(q){H.timeUpdate(f,q)};f.isDestroyed||f.media.addEventListener("timeupdate",f.data.timeUpdate,false)}};Object.defineProperty(this,"error",{get:function(){return f.media.error}});f.media.readyState>=2?b():f.media.addEventListener("loadeddata",b,false);return this}}};H.p.init.prototype=H.p;H.byId=function(c){for(var e=H.instances,b=e.length,d=0;d<b;d++){if(e[d].id===c){return e[d]}}return null};H.forEach=function(c,f,d){if(!c||!f){return{}}d=d||this;var e,b;if(G&&c.forEach===G){return c.forEach(f,d)}if(w.call(c)==="[object NodeList]"){e=0;for(b=c.length;e<b;e++){f.call(d,c[e],e,c)}return c}for(e in c){D.call(c,e)&&f.call(d,c[e],e,c)}return c};H.extend=function(b){var c=E.call(arguments,1);H.forEach(c,function(d){for(var e in d){b[e]=d[e]}});return b};H.extend(H,{noConflict:function(b){if(b){l.Popcorn=v}return H},error:function(b){throw Error(b)},guid:function(b){H.guid.counter++;return(b?b:"")+(+new Date+H.guid.counter)},sizeOf:function(c){var d=0,b;for(b in c){d++}return d},isArray:Array.isArray||function(b){return w.call(b)==="[object Array]"},nop:function(){},position:function(f){f=f.getBoundingClientRect();var i={},e=t.documentElement,d=t.body,h,c,b;h=e.clientTop||d.clientTop||0;c=e.clientLeft||d.clientLeft||0;b=l.pageYOffset&&e.scrollTop||d.scrollTop;e=l.pageXOffset&&e.scrollLeft||d.scrollLeft;h=Math.ceil(f.top+b-h);c=Math.ceil(f.left+e-c);for(var j in f){i[j]=Math.round(f[j])}return H.extend({},i,{top:h,left:c})},disable:function(c,e){if(!c.data.disabled[e]){c.data.disabled[e]=true;for(var b=c.data.running[e].length-1,d;b>=0;b--){d=c.data.running[e][b];d._natives.end.call(c,null,d)}}return c},enable:function(c,e){if(c.data.disabled[e]){c.data.disabled[e]=false;for(var b=c.data.running[e].length-1,d;b>=0;b--){d=c.data.running[e][b];d._natives.start.call(c,null,d)}}return c},destroy:function(h){var i=h.data.events,e=h.data.trackEvents,f,c,d,b;for(c in i){f=i[c];for(d in f){delete f[d]}i[c]=null}for(b in H.registryByName){H.removePlugin(h,b)}e.byStart.length=0;e.byEnd.length=0;if(!h.isDestroyed){h.data.timeUpdate&&h.media.removeEventListener("timeupdate",h.data.timeUpdate,false);h.isDestroyed=true}}});H.guid.counter=1;H.extend(H.p,function(){var b={};H.forEach("load play pause currentTime playbackRate volume duration preload playbackRate autoplay loop controls muted buffered readyState seeking paused played seekable ended".split(/\s+/g),function(c){b[c]=function(d){var e;if(typeof this.media[c]==="function"){if(d!=null&&/play|pause/.test(c)){this.media.currentTime=H.util.toSeconds(d)}this.media[c]();return this}if(d!=null){e=this.media[c];this.media[c]=d;e!==d&&this.emit("attrchange",{attribute:c,previousValue:e,currentValue:d});return this}return this.media[c]}});return b}());H.forEach("enable disable".split(" "),function(b){H.p[b]=function(c){return H[b](this,c)}});H.extend(H.p,{roundTime:function(){return Math.round(this.media.currentTime)},exec:function(f,i,e){var d=arguments.length,h,c;try{c=H.util.toSeconds(f)}catch(b){}if(typeof c==="number"){f=c}if(typeof f==="number"&&d===2){e=i;i=f;f=H.guid("cue")}else{if(d===1){i=-1}else{if(h=this.getTrackEvent(f)){if(typeof f==="string"&&d===2){if(typeof i==="number"){e=h._natives.start}if(typeof i==="function"){e=i;i=h.start}}}else{if(d>=2){if(typeof i==="string"){try{c=H.util.toSeconds(i)}catch(j){}i=c}if(typeof i==="number"){e=H.nop()}if(typeof i==="function"){e=i;i=-1}}}}}H.addTrackEvent(this,{id:f,start:i,end:i+1,_running:false,_natives:{start:e||H.nop,end:H.nop,type:"cue"}});return this},mute:function(b){b=b==null||b===true?"muted":"unmuted";if(b==="unmuted"){this.media.muted=false;this.media.volume=this.data.state.volume}if(b==="muted"){this.data.state.volume=this.media.volume;this.media.muted=true}this.emit(b);return this},unmute:function(b){return this.mute(b==null?false:!b)},position:function(){return H.position(this.media)},toggle:function(b){return H[this.data.disabled[b]?"enable":"disable"](this,b)},defaults:function(b,c){if(H.isArray(b)){H.forEach(b,function(d){for(var e in d){this.defaults(e,d[e])}},this);return this}if(!this.options.defaults){this.options.defaults={}}this.options.defaults[b]||(this.options.defaults[b]={});H.extend(this.options.defaults[b],c);return this}});H.Events={UIEvents:"blur focus focusin focusout load resize scroll unload",MouseEvents:"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave click dblclick",Events:"loadstart progress suspend emptied stalled play pause error loadedmetadata loadeddata waiting playing canplay canplaythrough seeking seeked timeupdate ended ratechange durationchange volumechange"};H.Events.Natives=H.Events.UIEvents+" "+H.Events.MouseEvents+" "+H.Events.Events;g.events.apiTypes=["UIEvents","MouseEvents","Events"];(function(c,h){for(var e=g.events.apiTypes,d=c.Natives.split(/\s+/g),f=0,b=d.length;f<b;f++){h.hash[d[f]]=true}e.forEach(function(i){h.apis[i]={};for(var n=c[i].split(/\s+/g),m=n.length,j=0;j<m;j++){h.apis[i][n[j]]=true}})})(H.Events,g.events);H.events={isNative:function(b){return !!g.events.hash[b]},getInterface:function(h){if(!H.events.isNative(h)){return false}var i=g.events,e=i.apiTypes;i=i.apis;for(var f=0,c=e.length,d,b;f<c;f++){b=e[f];if(i[b][h]){d=b;break}}return d},all:H.Events.Natives.split(/\s+/g),fn:{trigger:function(c,d){var b;if(this.data.events[c]&&H.sizeOf(this.data.events[c])){if(b=H.events.getInterface(c)){b=t.createEvent(b);b.initEvent(c,true,true,l,1);this.media.dispatchEvent(b);return this}H.forEach(this.data.events[c],function(e){e.call(this,d)},this)}return this},listen:function(c,h){var e=this,d=true,f=H.events.hooks[c],b;if(!this.data.events[c]){this.data.events[c]={};d=false}if(f){f.add&&f.add.call(this,{},h);if(f.bind){c=f.bind}if(f.handler){b=h;h=function(i){f.handler.call(e,i,b)}}d=true;if(!this.data.events[c]){this.data.events[c]={};d=false}}this.data.events[c][h.name||h.toString()+H.guid()]=h;!d&&H.events.all.indexOf(c)>-1&&this.media.addEventListener(c,function(i){H.forEach(e.data.events[c],function(j){typeof j==="function"&&j.call(e,i)})},false);return this},unlisten:function(b,c){if(this.data.events[b]&&this.data.events[b][c]){delete this.data.events[b][c];return this}this.data.events[b]=null;return this}},hooks:{canplayall:{bind:"canplaythrough",add:function(c,d){var b=false;if(this.media.readyState){d.call(this,c);b=true}this.data.hooks.canplayall={fired:b}},handler:function(b,c){if(!this.data.hooks.canplayall.fired){c.call(this,b);this.data.hooks.canplayall.fired=true}}}}};H.forEach([["trigger","emit"],["listen","on"],["unlisten","off"]],function(b){H.p[b[0]]=H.p[b[1]]=H.events.fn[b[0]]});H.addTrackEvent=function(h,i){var e,f;if(i.id){e=h.getTrackEvent(i.id)}if(e){f=true;i=H.extend({},e,i);h.removeTrackEvent(i.id)}if(i&&i._natives&&i._natives.type&&h.options.defaults&&h.options.defaults[i._natives.type]){i=H.extend({},h.options.defaults[i._natives.type],i)}if(i._natives){i._id=i.id||i._id||H.guid(i._natives.type);h.data.history.push(i._id)}i.start=H.util.toSeconds(i.start,h.options.framerate);i.end=H.util.toSeconds(i.end,h.options.framerate);var c=h.data.trackEvents.byStart,d=h.data.trackEvents.byEnd,b;for(b=c.length-1;b>=0;b--){if(i.start>=c[b].start){c.splice(b+1,0,i);break}}for(c=d.length-1;c>=0;c--){if(i.end>d[c].end){d.splice(c+1,0,i);break}}if(i.end>h.media.currentTime&&i.start<=h.media.currentTime){i._running=true;h.data.running[i._natives.type].push(i);h.data.disabled[i._natives.type]||i._natives.start.call(h,null,i)}b<=h.data.trackEvents.startIndex&&i.start<=h.data.trackEvents.previousUpdateTime&&h.data.trackEvents.startIndex++;c<=h.data.trackEvents.endIndex&&i.end<h.data.trackEvents.previousUpdateTime&&h.data.trackEvents.endIndex++;this.timeUpdate(h,null,true);i._id&&H.addTrackEvent.ref(h,i);if(f){f=i._natives.type==="cue"?"cuechange":"trackchange";h.emit(f,{id:i.id,previousValue:{time:e.start,fn:e._natives.start},currentValue:{time:i.start,fn:i._natives.start}})}};H.addTrackEvent.ref=function(b,c){b.data.trackRefs[c._id]=c;return b};H.removeTrackEvent=function(e,n){for(var d,m,i=e.data.history.length,h=e.data.trackEvents.byStart.length,f=0,o=0,b=[],p=[],c=[],j=[];--h>-1;){d=e.data.trackEvents.byStart[f];m=e.data.trackEvents.byEnd[f];if(!d._id){b.push(d);p.push(m)}if(d._id){d._id!==n&&b.push(d);m._id!==n&&p.push(m);if(d._id===n){o=f;d._natives._teardown&&d._natives._teardown.call(e,d)}}f++}h=e.data.trackEvents.animating.length;f=0;if(h){for(;--h>-1;){d=e.data.trackEvents.animating[f];d._id||c.push(d);d._id&&d._id!==n&&c.push(d);f++}}o<=e.data.trackEvents.startIndex&&e.data.trackEvents.startIndex--;o<=e.data.trackEvents.endIndex&&e.data.trackEvents.endIndex--;e.data.trackEvents.byStart=b;e.data.trackEvents.byEnd=p;e.data.trackEvents.animating=c;for(h=0;h<i;h++){e.data.history[h]!==n&&j.push(e.data.history[h])}e.data.history=j;H.removeTrackEvent.ref(e,n)};H.removeTrackEvent.ref=function(b,c){delete b.data.trackRefs[c];return b};H.getTrackEvents=function(c){var f=[];c=c.data.trackEvents.byStart;for(var d=c.length,e=0,b;e<d;e++){b=c[e];b._id&&f.push(b)}return f};H.getTrackEvents.ref=function(b){return b.data.trackRefs};H.getTrackEvent=function(b,c){return b.data.trackRefs[c]};H.getTrackEvent.ref=function(b,c){return b.data.trackRefs[c]};H.getLastTrackEventId=function(b){return b.data.history[b.data.history.length-1]};H.timeUpdate=function(d,h){var o=d.media.currentTime,b=d.data.trackEvents.previousUpdateTime,p=d.data.trackEvents,c=p.endIndex,j=p.startIndex,q=p.byStart.length,i=p.byEnd.length,e=H.registryByName,f,m,n;if(b<=o){for(;p.byEnd[c]&&p.byEnd[c].end<=o;){f=p.byEnd[c];m=(b=f._natives)&&b.type;if(!b||e[m]||d[m]){if(f._running===true){f._running=false;n=d.data.running[m];n.splice(n.indexOf(f),1);if(!d.data.disabled[m]){b.end.call(d,h,f);d.emit("trackend",H.extend({},f,{plugin:m,type:"trackend"}))}}c++}else{H.removeTrackEvent(d,f._id);return}}for(;p.byStart[j]&&p.byStart[j].start<=o;){f=p.byStart[j];m=(b=f._natives)&&b.type;if(!b||e[m]||d[m]){if(f.end>o&&f._running===false){f._running=true;d.data.running[m].push(f);if(!d.data.disabled[m]){b.start.call(d,h,f);d.emit("trackstart",H.extend({},f,{plugin:m,type:"trackstart"}))}}j++}else{H.removeTrackEvent(d,f._id);return}}}else{if(b>o){for(;p.byStart[j]&&p.byStart[j].start>o;){f=p.byStart[j];m=(b=f._natives)&&b.type;if(!b||e[m]||d[m]){if(f._running===true){f._running=false;n=d.data.running[m];n.splice(n.indexOf(f),1);if(!d.data.disabled[m]){b.end.call(d,h,f);d.emit("trackend",H.extend({},f,{plugin:m,type:"trackend"}))}}j--}else{H.removeTrackEvent(d,f._id);return}}for(;p.byEnd[c]&&p.byEnd[c].end>o;){f=p.byEnd[c];m=(b=f._natives)&&b.type;if(!b||e[m]||d[m]){if(f.start<=o&&f._running===false){f._running=true;d.data.running[m].push(f);if(!d.data.disabled[m]){b.start.call(d,h,f);d.emit("trackstart",H.extend({},f,{plugin:m,type:"trackstart"}))}}c--}else{H.removeTrackEvent(d,f._id);return}}}}p.endIndex=c;p.startIndex=j;p.previousUpdateTime=o;p.byStart.length<q&&p.startIndex--;p.byEnd.length<i&&p.endIndex--};H.extend(H.p,{getTrackEvents:function(){return H.getTrackEvents.call(null,this)},getTrackEvent:function(b){return H.getTrackEvent.call(null,this,b)},getLastTrackEventId:function(){return H.getLastTrackEventId.call(null,this)},removeTrackEvent:function(b){H.removeTrackEvent.call(null,this,b);return this},removePlugin:function(b){H.removePlugin.call(null,this,b);return this},timeUpdate:function(b){H.timeUpdate.call(null,this,b);return this},destroy:function(){H.destroy.call(null,this);return this}});H.manifest={};H.registry=[];H.registryByName={};H.plugin=function(h,m,i){if(H.protect.natives.indexOf(h.toLowerCase())>=0){H.error("'"+h+"' is a protected function name")}else{var j=["start","end"],f={},e=typeof m==="function",d=["_setup","_teardown","start","end","frame"],c=function(p,o){p=p||H.nop;o=o||H.nop;return function(){p.apply(this,arguments);o.apply(this,arguments)}};H.manifest[h]=i=i||m.manifest||{};d.forEach(function(o){m[o]=z(m[o]||H.nop,h)});var b=function(s,o){if(!o){return this}if(o.ranges&&H.isArray(o.ranges)){H.forEach(o.ranges,function(x){x=H.extend({},o,x);delete x.ranges;this[h](x)},this);return this}var r=o._natives={},q="",p;H.extend(r,s);o._natives.type=h;o._running=false;r.start=r.start||r["in"];r.end=r.end||r.out;if(o.once){r.end=c(r.end,function(){this.removeTrackEvent(o._id)})}r._teardown=c(function(){var y=E.call(arguments),x=this.data.running[r.type];y.unshift(null);y[1]._running&&x.splice(x.indexOf(o),1)&&r.end.apply(this,y)},r._teardown);o.compose=o.compose&&o.compose.split(" ")||[];o.effect=o.effect&&o.effect.split(" ")||[];o.compose=o.compose.concat(o.effect);o.compose.forEach(function(x){q=H.compositions[x]||{};d.forEach(function(y){r[y]=c(r[y],q[y])})});o._natives.manifest=i;if(!("start" in o)){o.start=o["in"]||0}if(!o.end&&o.end!==0){o.end=o.out||Number.MAX_VALUE}if(!D.call(o,"toString")){o.toString=function(){var x=["start: "+o.start,"end: "+o.end,"id: "+(o.id||o._id)];o.target!=null&&x.push("target: "+o.target);return h+" ( "+x.join(", ")+" )"}}if(!o.target){p="options" in i&&i.options;o.target=p&&"target" in p&&p.target}if(o._natives){o._id=H.guid(o._natives.type)}o._natives._setup&&o._natives._setup.call(this,o);H.addTrackEvent(this,o);H.forEach(s,function(y,x){x!=="type"&&j.indexOf(x)===-1&&this.on(x,y)},this);return this};H.p[h]=f[h]=function(q,o){var p;if(q&&!o){o=q}else{if(p=this.getTrackEvent(q)){o=H.extend({},p,o);H.addTrackEvent(this,o);return this}else{o.id=q}}this.data.running[h]=this.data.running[h]||[];p=H.extend({},this.options.defaults&&this.options.defaults[h]||{},o);return b.call(this,e?m.call(this,p):m,p)};i&&H.extend(m,{manifest:i});var n={fn:f[h],definition:m,base:m,parents:[],name:h};H.registry.push(H.extend(f,n,{type:h}));H.registryByName[h]=n;return f}};H.plugin.errors=[];H.plugin.debug=H.version==="1.3";H.removePlugin=function(h,i){if(!i){i=h;h=H.p;if(H.protect.natives.indexOf(i.toLowerCase())>=0){H.error("'"+i+"' is a protected function name");return}var e=H.registry.length,f;for(f=0;f<e;f++){if(H.registry[f].name===i){H.registry.splice(f,1);delete H.registryByName[i];delete H.manifest[i];delete h[i];return}}}e=h.data.trackEvents.byStart;f=h.data.trackEvents.byEnd;var c=h.data.trackEvents.animating,d,b;d=0;for(b=e.length;d<b;d++){if(e[d]&&e[d]._natives&&e[d]._natives.type===i){e[d]._natives._teardown&&e[d]._natives._teardown.call(h,e[d]);e.splice(d,1);d--;b--;if(h.data.trackEvents.startIndex<=d){h.data.trackEvents.startIndex--;h.data.trackEvents.endIndex--}}f[d]&&f[d]._natives&&f[d]._natives.type===i&&f.splice(d,1)}d=0;for(b=c.length;d<b;d++){if(c[d]&&c[d]._natives&&c[d]._natives.type===i){c.splice(d,1);d--;b--}}};H.compositions={};H.compose=function(c,d,b){H.manifest[c]=b||d.manifest||{};H.compositions[c]=d};H.plugin.effect=H.effect=H.compose;var u=/^(?:\.|#|\[)/;H.dom={debug:false,find:function(c,e){var b=null;c=c.trim();e=e||t;if(c){if(!u.test(c)){b=t.getElementById(c);if(b!==null){return b}}try{b=e.querySelector(c)}catch(d){if(H.dom.debug){throw Error(d)}}}return b}};var a=/\?/,J={url:"",data:"",dataType:"",success:H.nop,type:"GET",async:true,xhr:function(){return new l.XMLHttpRequest}};H.xhr=function(b){b.dataType=b.dataType&&b.dataType.toLowerCase()||null;if(b.dataType&&(b.dataType==="jsonp"||b.dataType==="script")){H.xhr.getJSONP(b.url,b.success,b.dataType==="script")}else{b=H.extend({},J,b);b.ajax=b.xhr();if(b.ajax){if(b.type==="GET"&&b.data){b.url+=(a.test(b.url)?"&":"?")+b.data;b.data=null}b.ajax.open(b.type,b.url,b.async);b.ajax.send(b.data||null);return H.xhr.httpData(b)}}};H.xhr.httpData=function(c){var f,d=null,e,b=null;c.ajax.onreadystatechange=function(){if(c.ajax.readyState===4){try{d=JSON.parse(c.ajax.responseText)}catch(i){}f={xml:c.ajax.responseXML,text:c.ajax.responseText,json:d};if(!f.xml||!f.xml.documentElement){f.xml=null;try{e=new DOMParser;b=e.parseFromString(c.ajax.responseText,"text/xml");if(!b.getElementsByTagName("parsererror").length){f.xml=b}}catch(h){}}if(c.dataType){f=f[c.dataType]}c.success.call(c.ajax,f)}};return f};H.xhr.getJSONP=function(c,b,i){var j=t.head||t.getElementsByTagName("head")[0]||t.documentElement,m=t.createElement("script"),e=false,d=[];d=/(=)\?(?=&|$)|\?\?/;var f,h;if(!i){h=c.match(/(callback=[^&]*)/);if(h!==null&&h.length){d=h[1].split("=")[1];if(d==="?"){d="jsonp"}f=H.guid(d);c=c.replace(/(callback=[^&]*)/,"callback="+f)}else{f=H.guid("jsonp");if(d.test(c)){c=c.replace(d,"$1"+f)}d=c.split(/\?(.+)?/);c=d[0]+"?";if(d[1]){c+=d[1]+"&"}c+="callback="+f}window[f]=function(n){b&&b(n);e=true}}m.addEventListener("load",function(){i&&b&&b();e&&delete window[f];j.removeChild(m)},false);m.src=c;j.insertBefore(m,j.firstChild)};H.getJSONP=H.xhr.getJSONP;H.getScript=H.xhr.getScript=function(b,c){return H.xhr.getJSONP(b,c,true)};H.util={toSeconds:function(c,h){var e=/^([0-9]+:){0,2}[0-9]+([.;][0-9]+)?$/,d,f,b;if(typeof c==="number"){return c}typeof c==="string"&&!e.test(c)&&H.error("Invalid time format");e=c.split(":");d=e.length-1;f=e[d];if(f.indexOf(";")>-1){f=f.split(";");b=0;if(h&&typeof h==="number"){b=parseFloat(f[1],10)/h}e[d]=parseInt(f[0],10)+b}d=e[0];return{1:parseFloat(d,10),2:parseInt(d,10)*60+parseFloat(e[1],10),3:parseInt(d,10)*3600+parseInt(e[1],10)*60+parseFloat(e[2],10)}[e.length||1]}};H.p.cue=H.p.exec;H.protect={natives:function(b){return Object.keys?Object.keys(b):function(e){var c,d=[];for(c in e){D.call(e,c)&&d.push(c)}return d}(b)}(H.p).map(function(b){return b.toLowerCase()})};H.forEach({listen:"on",unlisten:"off",trigger:"emit",exec:"cue"},function(c,d){var b=H.p[d];H.p[d]=function(){if(typeof console!=="undefined"&&console.warn){console.warn("Deprecated method '"+d+"', "+(c==null?"do not use.":"use '"+c+"' instead."));H.p[d]=b}return H.p[c].apply(this,[].slice.call(arguments))}});l.Popcorn=H}else{l.Popcorn={isSupported:false};for(I="byId forEach extend effects error guid sizeOf isArray nop position disable enable destroyaddTrackEvent removeTrackEvent getTrackEvents getTrackEvent getLastTrackEventId timeUpdate plugin removePlugin compose effect xhr getJSONP getScript".split(/\s+/);I.length;){l.Popcorn[I.shift()]=function(){}}}})(window,window.document);(function(l,g){var d=l.document,j=l.location,k=/:\/\//,o=j.href.replace(j.href.split("/").slice(-1)[0],""),m=function(c,f,b){c=c||0;f=(f||c||0)+1;b=b||1;f=Math.ceil((f-c)/b)||0;var h=0,e=[];for(e.length=f;h<f;){e[h++]=c;c+=b}return e};g.sequence=function(b,c){return new g.sequence.init(b,c)};g.sequence.init=function(c,e){this.parent=d.getElementById(c);this.seqId=g.guid("__sequenced");this.queue=[];this.playlist=[];this.inOuts={ofVideos:[],ofClips:[]};this.dims={width:0,height:0};this.active=0;this.playing=this.cycling=false;this.times={last:0};this.events={};var b=this,f=0;g.forEach(e,function(p,n){var r=d.createElement("video");r.preload="auto";r.controls=true;r.style.display=n&&"none"||"";r.id=b.seqId+"-"+n;b.queue.push(r);var i=p["in"],h=p.out;b.inOuts.ofVideos.push({"in":i!==undefined&&i||1,out:h!==undefined&&h||0});b.inOuts.ofVideos[n].out=b.inOuts.ofVideos[n].out||b.inOuts.ofVideos[n]["in"]+2;r.src=!k.test(p.src)?o+p.src:p.src;r.setAttribute("data-sequence-owner",c);r.setAttribute("data-sequence-guid",b.seqId);r.setAttribute("data-sequence-id",n);r.setAttribute("data-sequence-clip",[b.inOuts.ofVideos[n]["in"],b.inOuts.ofVideos[n].out].join(":"));b.parent.appendChild(r);b.playlist.push(g("#"+r.id))});b.inOuts.ofVideos.forEach(function(h){h={"in":f,out:f+(h.out-h["in"])};b.inOuts.ofClips.push(h);f=h.out+1});g.forEach(this.queue,function(i,h){function n(){if(!h){b.dims.width=i.videoWidth;b.dims.height=i.videoHeight}i.currentTime=b.inOuts.ofVideos[h]["in"]-0.5;i.removeEventListener("canplaythrough",n,false);return true}i.addEventListener("canplaythrough",n,false);i.addEventListener("play",function(){b.playing=true},false);i.addEventListener("pause",function(){b.playing=false},false);i.addEventListener("timeupdate",function(p){p=p.srcElement||p.target;p=+(p.dataset&&p.dataset.sequenceId||p.getAttribute("data-sequence-id"));var q=Math.floor(i.currentTime);if(b.times.last!==q&&p===b.active){b.times.last=q;q===b.inOuts.ofVideos[p].out&&g.sequence.cycle.call(b,p)}},false)});return this};g.sequence.init.prototype=g.sequence.prototype;g.sequence.cycle=function(c){this.queue||g.error("Popcorn.sequence.cycle is not a public method");var h=this.queue,b=this.inOuts.ofVideos,i=h[c],f=0,e;if(h[c+1]){f=c+1}if(h[c+1]){h=h[f];b=b[f];g.extend(h,{width:this.dims.width,height:this.dims.height});e=this.playlist[f];i.pause();this.active=f;this.times.last=b["in"]-1;e.currentTime(b["in"]);e[f?"play":"pause"]();this.trigger("cycle",{position:{previous:c,current:f}});if(f){i.style.display="none";h.style.display=""}this.cycling=false}else{this.playlist[c].pause()}return this};var a=["timeupdate","play","pause"];g.extend(g.sequence.prototype,{eq:function(b){return this.playlist[b]},remove:function(){this.parent.innerHTML=null},clip:function(b){return this.inOuts.ofVideos[b]},duration:function(){for(var c=0,e=this.inOuts.ofClips,b=0;b<e.length;b++){c+=e[b].out-e[b]["in"]+1}return c-1},play:function(){this.playlist[this.active].play();return this},exec:function(c,e){var b=this.active;this.inOuts.ofClips.forEach(function(h,f){if(c>=h["in"]&&c<=h.out){b=f}});c+=this.inOuts.ofVideos[b]["in"]-this.inOuts.ofClips[b]["in"];g.addTrackEvent(this.playlist[b],{start:c-1,end:c,_running:false,_natives:{start:e||g.nop,end:g.nop,type:"exec"}});return this},listen:function(c,h){var b=this,i=this.playlist,f=i.length,e=0;if(!h){h=g.nop}if(g.Events.Natives.indexOf(c)>-1){g.forEach(i,function(n){n.listen(c,function(p){p.active=b;if(a.indexOf(c)>-1){h.call(n,p)}else{++e===f&&h.call(n,p)}})})}else{this.events[c]||(this.events[c]={});i=h.name||g.guid("__"+c);this.events[c][i]=h}return this},unlisten:function(){},trigger:function(c,e){var b=this;if(!(g.Events.Natives.indexOf(c)>-1)){this.events[c]&&g.forEach(this.events[c],function(f){f.call(b,{type:c},e)});return this}}});g.forEach(g.manifest,function(b,c){g.sequence.prototype[c]=function(i){var f={},e=[],u,n,h,p,t;for(u=0;u<this.inOuts.ofClips.length;u++){e=this.inOuts.ofClips[u];n=m(e["in"],e.out);h=n.indexOf(i.start);p=n.indexOf(i.end);if(h>-1){f[u]=g.extend({},e,{start:n[h],clipIdx:h})}if(p>-1){f[u]=g.extend({},e,{end:n[p],clipIdx:p})}}u=Object.keys(f).map(function(q){return +q});e=m(u[0],u[1]);for(u=0;u<e.length;u++){h={};p=e[u];var r=f[p];if(r){t=this.inOuts.ofVideos[p];n=r.clipIdx;t=m(t["in"],t.out);if(r.start){h.start=t[n];h.end=t[t.length-1]}if(r.end){h.start=t[0];h.end=t[n]}}else{h.start=this.inOuts.ofVideos[p]["in"];h.end=this.inOuts.ofVideos[p].out}this.playlist[p][c](g.extend({},i,h))}return this}})})(this,Popcorn);(function(a){document.addEventListener("DOMContentLoaded",function(){var b=document.querySelectorAll("[data-timeline-sources]");a.forEach(b,function(l,j){var k=b[j],g,f,d;if(!k.id){k.id=a.guid("__popcorn")}if(k.nodeType&&k.nodeType===1){d=a("#"+k.id);g=(k.getAttribute("data-timeline-sources")||"").split(",");g[0]&&a.forEach(g,function(c){f=c.split("!");if(f.length===1){f=c.match(/(.*)[\/\\]([^\/\\]+\.\w+)$/)[2].split(".");f[0]="parse"+f[1].toUpperCase();f[1]=c}g[0]&&d[f[0]]&&d[f[0]](f[1])});d.autoplay()&&d.play()}})},false)})(Popcorn);(function(d,e){function h(c){c=typeof c==="string"?c:[c.language,c.region].join("-");var b=c.split("-");return{iso6391:c,language:b[0]||"",region:b[1]||""}}var g=d.navigator,a=h(g.userLanguage||g.language);e.locale={get:function(){return a},set:function(b){a=h(b);e.locale.broadcast();return a},broadcast:function(j){var f=e.instances,c=f.length,b=0,i;for(j=j||"locale:changed";b<c;b++){i=f[b];j in i.data.events&&i.trigger(j)}}}})(this,this.Popcorn);(function(a){var b=Object.prototype.hasOwnProperty;a.parsers={};a.parser=function(g,f,c){if(a.protect.natives.indexOf(g.toLowerCase())>=0){a.error("'"+g+"' is a protected function name")}else{if(typeof f==="function"&&!c){c=f;f=""}if(!(typeof c!=="function"||typeof f!=="string")){var d={};d[g]=function(i,h){if(!i){return this}var e=this;a.xhr({url:i,dataType:f,success:function(j){var l,k,q=0;j=c(j).data||[];if(l=j.length){for(;q<l;q++){k=j[q];for(var n in k){b.call(k,n)&&e[n]&&e[n](k[n])}}h&&h()}}});return this};a.extend(a.p,d);return d}}}})(Popcorn);(function(a){var b=function(c,f){c=c||a.nop;f=f||a.nop;return function(){c.apply(this,arguments);f.apply(this,arguments)}},e=/^.*\.(ogg|oga|aac|mp3|wav)($|\?)/,d=/^.*\.(ogg|oga|aac|mp3|wav|ogg|ogv|mp4|webm)($|\?)/;a.player=function(c,g){if(!a[c]){g=g||{};var f=function(k,v,F){F=F||{};var r=new Date/1000,E=r,D=0,w=0,B=1,h=false,C={},z=typeof k==="string"?a.dom.find(k):k,n={};Object.prototype.__defineGetter__||(n=z||document.createElement("div"));for(var t in z){if(!(t in n)){if(typeof z[t]==="object"){n[t]=z[t]}else{if(typeof z[t]==="function"){n[t]=function(i){return"length" in z[i]&&!z[i].call?z[i]:function(){return z[i].apply(z,arguments)}}(t)}else{a.player.defineProperty(n,t,{get:function(i){return function(){return z[i]}}(t),set:a.nop,configurable:true})}}}}var u=function(){r=new Date/1000;if(!n.paused){n.currentTime+=r-E;n.dispatchEvent("timeupdate");setTimeout(u,10)}E=r};n.play=function(){this.paused=false;if(n.readyState>=4){E=new Date/1000;n.dispatchEvent("play");u()}};n.pause=function(){this.paused=true;n.dispatchEvent("pause")};a.player.defineProperty(n,"currentTime",{get:function(){return D},set:function(i){D=+i;n.dispatchEvent("timeupdate");return D},configurable:true});a.player.defineProperty(n,"volume",{get:function(){return B},set:function(i){B=+i;n.dispatchEvent("volumechange");return B},configurable:true});a.player.defineProperty(n,"muted",{get:function(){return h},set:function(i){h=+i;n.dispatchEvent("volumechange");return h},configurable:true});a.player.defineProperty(n,"readyState",{get:function(){return w},set:function(i){return w=i},configurable:true});n.addEventListener=function(i,j){C[i]||(C[i]=[]);C[i].push(j);return j};n.removeEventListener=function(m,j){var i,l=C[m];if(l){for(i=C[m].length-1;i>=0;i--){j===l[i]&&l.splice(i,1)}return j}};n.dispatchEvent=function(i){var l,j=i.type;if(!j){j=i;if(i=a.events.getInterface(j)){l=document.createEvent(i);l.initEvent(j,true,true,window,1)}}if(C[j]){for(i=C[j].length-1;i>=0;i--){C[j][i].call(this,l,this)}}};n.src=v||"";n.duration=0;n.paused=true;n.ended=0;F&&F.events&&a.forEach(F.events,function(i,j){n.addEventListener(j,i,false)});if(g._canPlayType(z.nodeName,v)!==false){if(g._setup){g._setup.call(n,F)}else{n.readyState=4;n.dispatchEvent("loadedmetadata");n.dispatchEvent("loadeddata");n.dispatchEvent("canplaythrough")}}else{setTimeout(function(){n.dispatchEvent("error")},0)}k=new a.p.init(n,F);if(g._teardown){k.destroy=b(k.destroy,function(){g._teardown.call(n,F)})}return k};f.canPlayType=g._canPlayType=g._canPlayType||a.nop;a[c]=a.player.registry[c]=f}};a.player.registry={};a.player.defineProperty=Object.defineProperty||function(c,g,f){c.__defineGetter__(g,f.get||a.nop);c.__defineSetter__(g,f.set||a.nop)};a.player.playerQueue=function(){var c=[],f=false;return{next:function(){f=false;c.shift();c[0]&&c[0]()},add:function(g){c.push(function(){f=true;g&&g()});!f&&c[0]()}}};a.smart=function(f,c,r){var q=["AUDIO","VIDEO"],n,h=a.dom.find(f),l;n=document.createElement("video");var k={ogg:"video/ogg",ogv:"video/ogg",oga:"audio/ogg",webm:"video/webm",mp4:"video/mp4",mp3:"audio/mp3"};if(h){if(q.indexOf(h.nodeName)>-1&&!c){if(typeof c==="object"){r=c}return a(h,r)}if(typeof c==="string"){c=[c]}f=0;for(srcLength=c.length;f<srcLength;f++){l=d.exec(c[f]);l=!l||!l[1]?false:n.canPlayType(k[l[1]]);if(l){c=c[f];break}for(var g in a.player.registry){if(a.player.registry.hasOwnProperty(g)){if(a.player.registry[g].canPlayType(h.nodeName,c[f])){return a[g](h,c[f],r)}}}}if(q.indexOf(h.nodeName)===-1){n=typeof c==="string"?c:c.length?c[0]:c;f=document.createElement(e.exec(n)?q[0]:q[1]);f.controls=true;h.appendChild(f);h=f}r&&r.events&&r.events.error&&h.addEventListener("error",r.events.error,false);h.src=c;return a(h,r)}else{a.error("Specified target "+f+" was not found.")}}})(Popcorn);(function(a){var b=function(d,c){var f=0,i=0,g;a.forEach(c.classes,function(h,e){g=[];if(h==="parent"){g[0]=document.querySelectorAll("#"+c.target)[0].parentNode}else{g=document.querySelectorAll("#"+c.target+" "+h)}f=0;for(i=g.length;f<i;f++){g[f].classList.toggle(e)}})};a.compose("applyclass",{manifest:{about:{name:"Popcorn applyclass Effect",version:"0.1",author:"@scottdowne",website:"scottdowne.wordpress.com"},options:{}},_setup:function(d){d.classes={};d.applyclass=d.applyclass||"";for(var c=d.applyclass.replace(/\s/g,"").split(","),f=[],i=0,g=c.length;i<g;i++){f=c[i].split(":");if(f[0]){d.classes[f[0]]=f[1]||""}}},start:b,end:b})})(Popcorn);(function(a){var b=/(?:http:\/\/www\.|http:\/\/|www\.|\.|^)(youtu|vimeo|soundcloud|baseplayer)/,e={},d={vimeo:false,youtube:false,soundcloud:false,module:false};Object.defineProperty(e,void 0,{get:function(){return d[void 0]},set:function(c){d[void 0]=c}});a.plugin("mediaspawner",{manifest:{about:{name:"Popcorn Media Spawner Plugin",version:"0.1",author:"Matthew Schranz, @mjschranz",website:"mschranz.wordpress.com"},options:{source:{elem:"input",type:"text",label:"Media Source","default":"http://www.youtube.com/watch?v=CXDstfD9eJ0"},caption:{elem:"input",type:"text",label:"Media Caption","default":"Popcorn Popping",optional:true},target:"mediaspawner-container",start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},autoplay:{elem:"input",type:"checkbox",label:"Autoplay Video",optional:true},width:{elem:"input",type:"number",label:"Media Width","default":400,units:"px",optional:true},height:{elem:"input",type:"number",label:"Media Height","default":200,units:"px",optional:true}}},_setup:function(g){function f(){function i(){if(c!=="HTML5"&&!window.Popcorn[c]){setTimeout(function(){i()},300)}else{g.id=g._container.id;g._container.style.width=g.width+"px";g._container.style.height=g.height+"px";g.popcorn=a.smart("#"+g.id,g.source);c==="HTML5"&&g.popcorn.controls(true);g._container.style.width="0px";g._container.style.height="0px";g._container.style.visibility="hidden";g._container.style.overflow="hidden"}}if(c!=="HTML5"&&!window.Popcorn[c]&&!e[c]){e[c]=true;a.getScript("http://popcornjs.org/code/players/"+c+"/popcorn."+c+".js",function(){i()})}else{i()}}function l(){window.Popcorn.player?f():setTimeout(function(){l()},300)}var k=document.getElementById(g.target)||{},c,h,n;if(h=b.exec(g.source)){c=h[1];if(c==="youtu"){c="youtube"}}else{c="HTML5"}g._type=c;g._container=document.createElement("div");h=g._container;h.id="mediaSpawnerdiv-"+a.guid();g.width=g.width||400;g.height=g.height||200;if(g.caption){n=document.createElement("div");n.innerHTML=g.caption;n.style.display="none";g._capCont=n;h.appendChild(n)}k&&k.appendChild(h);if(!window.Popcorn.player&&!e.module){e.module=true;a.getScript("http://popcornjs.org/code/modules/player/popcorn.player.js",l)}else{l()}},start:function(c,f){if(f._capCont){f._capCont.style.display=""}f._container.style.width=f.width+"px";f._container.style.height=f.height+"px";f._container.style.visibility="visible";f._container.style.overflow="visible";f.autoplay&&f.popcorn.play()},end:function(c,f){if(f._capCont){f._capCont.style.display="none"}f._container.style.width="0px";f._container.style.height="0px";f._container.style.visibility="hidden";f._container.style.overflow="hidden";f.popcorn.pause()},_teardown:function(c){c.popcorn&&c.popcorn.destory&&c.popcorn.destroy();document.getElementById(c.target)&&document.getElementById(c.target).removeChild(c._container)}})})(Popcorn,this);(function(a){a.plugin("code",function(e){var b=false,g=this,d=function(){var c=function(f){return function(i,h){var k=function(){b&&i.call(g,h);b&&f(k)};k()}};return window.webkitRequestAnimationFrame?c(window.webkitRequestAnimationFrame):window.mozRequestAnimationFrame?c(window.mozRequestAnimationFrame):c(function(f){window.setTimeout(f,16)})}();if(!e.onStart||typeof e.onStart!=="function"){e.onStart=a.nop}if(e.onEnd&&typeof e.onEnd!=="function"){e.onEnd=undefined}if(e.onFrame&&typeof e.onFrame!=="function"){e.onFrame=undefined}return{start:function(c,f){f.onStart.call(g,f);if(f.onFrame){b=true;d(f.onFrame,f)}},end:function(c,f){if(f.onFrame){b=false}f.onEnd&&f.onEnd.call(g,f)}}},{about:{name:"Popcorn Code Plugin",version:"0.1",author:"David Humphrey (@humphd)",website:"http://vocamus.net/dave"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},onStart:{elem:"input",type:"function",label:"onStart"},onFrame:{elem:"input",type:"function",label:"onFrame",optional:true},onEnd:{elem:"input",type:"function",label:"onEnd"}}})})(Popcorn);(function(a){var b=0;a.plugin("flickr",function(x){var w,u=document.getElementById(x.target),l,t,k,f,c=x.numberofimages||4,z=x.height||"50px",v=x.width||"50px",r=x.padding||"5px",d=x.border||"0px";w=document.createElement("div");w.id="flickr"+b;w.style.width="100%";w.style.height="100%";w.style.display="none";b++;u&&u.appendChild(w);var g=function(){if(l){setTimeout(function(){g()},5)}else{t="http://api.flickr.com/services/rest/?method=flickr.people.findByUsername&";t+="username="+x.username+"&api_key="+x.apikey+"&format=json&jsoncallback=flickr";a.getJSONP(t,function(e){l=e.user.nsid;y()})}},y=function(){t="http://api.flickr.com/services/feeds/photos_public.gne?";if(l){t+="id="+l+"&"}if(x.tags){t+="tags="+x.tags+"&"}t+="lang=en-us&format=json&jsoncallback=flickr";a.xhr.getJSONP(t,function(h){var e=document.createElement("div");e.innerHTML="<p style='padding:"+r+";'>"+h.title+"<p/>";a.forEach(h.items,function(i,j){if(j<c){k=document.createElement("a");k.setAttribute("href",i.link);k.setAttribute("target","_blank");f=document.createElement("img");f.setAttribute("src",i.media.m);f.setAttribute("height",z);f.setAttribute("width",v);f.setAttribute("style","border:"+d+";padding:"+r);k.appendChild(f);e.appendChild(k)}else{return false}});w.appendChild(e)})};if(x.username&&x.apikey){g()}else{l=x.userid;y()}return{start:function(){w.style.display="inline"},end:function(){w.style.display="none"},_teardown:function(e){document.getElementById(e.target)&&document.getElementById(e.target).removeChild(w)}}},{about:{name:"Popcorn Flickr Plugin",version:"0.2",author:"Scott Downe, Steven Weerdenburg, Annasob",website:"http://scottdowne.wordpress.com/"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},userid:{elem:"input",type:"text",label:"User ID",optional:true},tags:{elem:"input",type:"text",label:"Tags"},username:{elem:"input",type:"text",label:"Username",optional:true},apikey:{elem:"input",type:"text",label:"API Key",optional:true},target:"flickr-container",height:{elem:"input",type:"text",label:"Height","default":"50px",optional:true},width:{elem:"input",type:"text",label:"Width","default":"50px",optional:true},padding:{elem:"input",type:"text",label:"Padding",optional:true},border:{elem:"input",type:"text",label:"Border","default":"5px",optional:true},numberofimages:{elem:"input",type:"number","default":4,label:"Number of Images"}}})})(Popcorn);(function(a){a.plugin("footnote",{manifest:{about:{name:"Popcorn Footnote Plugin",version:"0.2",author:"@annasob, @rwaldron",website:"annasob.wordpress.com"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},text:{elem:"input",type:"text",label:"Text"},target:"footnote-container"}},_setup:function(b){var c=a.dom.find(b.target);b._container=document.createElement("div");b._container.style.display="none";b._container.innerHTML=b.text;c.appendChild(b._container)},start:function(b,c){c._container.style.display="inline"},end:function(b,c){c._container.style.display="none"},_teardown:function(b){var c=a.dom.find(b.target);c&&c.removeChild(b._container)}})})(Popcorn);(function(a){function b(c){return String(c).replace(/&(?!\w+;)|[<>"']/g,function(f){return d[f]||f})}function e(c,l){var h=c.container=document.createElement("div"),g=h.style,f=c.media,k=function(){var i=c.position();g.fontSize="18px";g.width=f.offsetWidth+"px";g.top=i.top+f.offsetHeight-h.offsetHeight-40+"px";g.left=i.left+"px";setTimeout(k,10)};h.id=l||"";g.position="absolute";g.color="white";g.textShadow="black 2px 2px 6px";g.fontWeight="bold";g.textAlign="center";k();c.media.parentNode.appendChild(h);return h}var d={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};a.plugin("text",{manifest:{about:{name:"Popcorn Text Plugin",version:"0.1",author:"@humphd"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},text:{elem:"input",type:"text",label:"Text","default":"Popcorn.js"},escape:{elem:"input",type:"checkbox",label:"Escape"},multiline:{elem:"input",type:"checkbox",label:"Multiline"}}},_setup:function(c){var h,g,f=c._container=document.createElement("div");f.style.display="none";if(c.target){if(h=a.dom.find(c.target)){if(["VIDEO","AUDIO"].indexOf(h.nodeName)>-1){h=e(this,c.target+"-overlay")}}else{h=e(this,c.target)}}else{h=this.container?this.container:e(this)}c._target=h;g=c.escape?b(c.text):c.text;g=c.multiline?g.replace(/\r?\n/gm,"<br>"):g;f.innerHTML=g||"";h.appendChild(f)},start:function(c,f){f._container.style.display="inline"},end:function(c,f){f._container.style.display="none"},_teardown:function(c){var f=c._target;f&&f.removeChild(c._container)}})})(Popcorn);var googleCallback;(function(l){function g(e,c,f){e=e.type?e.type.toUpperCase():"HYBRID";var b;if(e==="STAMEN-WATERCOLOR"||e==="STAMEN-TERRAIN"||e==="STAMEN-TONER"){b=e.replace("STAMEN-","").toLowerCase()}f=new google.maps.Map(f,{mapTypeId:b?b:google.maps.MapTypeId[e],mapTypeControlOptions:{mapTypeIds:[]}});b&&f.mapTypes.set(b,new google.maps.StamenMapType(b));f.getDiv().style.display="none";return f}var d=1,j=false,i=false,k,a;googleCallback=function(b){if(typeof google!=="undefined"&&google.maps&&google.maps.Geocoder&&google.maps.LatLng){k=new google.maps.Geocoder;l.getScript("//maps.stamen.com/js/tile.stamen.js",function(){i=true})}else{setTimeout(function(){googleCallback(b)},1)}};a=function(){if(document.body){j=true;l.getScript("//maps.google.com/maps/api/js?sensor=false&callback=googleCallback")}else{setTimeout(function(){a()},1)}};l.plugin("googlemap",function(f){var c,m,b,e=document.getElementById(f.target);f.type=f.type||"ROADMAP";f.zoom=f.zoom||1;f.lat=f.lat||0;f.lng=f.lng||0;j||a();c=document.createElement("div");c.id="actualmap"+d;c.style.width=f.width||"100%";c.style.height=f.height?f.height:e&&e.clientHeight?e.clientHeight+"px":"100%";d++;e&&e.appendChild(c);var h=function(){if(i){if(c){if(f.location){k.geocode({address:f.location},function(o,n){if(c&&n===google.maps.GeocoderStatus.OK){f.lat=o[0].geometry.location.lat();f.lng=o[0].geometry.location.lng();b=new google.maps.LatLng(f.lat,f.lng);m=g(f,b,c)}})}else{b=new google.maps.LatLng(f.lat,f.lng);m=g(f,b,c)}}}else{setTimeout(function(){h()},5)}};h();return{start:function(p,q){var o=this,r,n=function(){if(m){q._map=m;m.getDiv().style.display="block";google.maps.event.trigger(m,"resize");m.setCenter(b);if(q.zoom&&typeof q.zoom!=="number"){q.zoom=+q.zoom}m.setZoom(q.zoom);if(q.heading&&typeof q.heading!=="number"){q.heading=+q.heading}if(q.pitch&&typeof q.pitch!=="number"){q.pitch=+q.pitch}if(q.type==="STREETVIEW"){m.setStreetView(r=new google.maps.StreetViewPanorama(c,{position:b,pov:{heading:q.heading=q.heading||0,pitch:q.pitch=q.pitch||0,zoom:q.zoom}}));var x=function(A,z){var B=google.maps.geometry.spherical.computeHeading;setTimeout(function(){var E=o.media.currentTime;if(typeof q.tween==="object"){for(var D=0,C=A.length;D<C;D++){var G=A[D];if(E>=G.interval*(D+1)/1000&&(E<=G.interval*(D+2)/1000||E>=G.interval*C/1000)){y.setPosition(new google.maps.LatLng(G.position.lat,G.position.lng));y.setPov({heading:G.pov.heading||B(G,A[D+1])||0,zoom:G.pov.zoom||0,pitch:G.pov.pitch||0})}}x(A,A[0].interval)}else{D=0;for(C=A.length;D<C;D++){G=q.interval;if(E>=G*(D+1)/1000&&(E<=G*(D+2)/1000||E>=G*C/1000)){t.setPov({heading:B(A[D],A[D+1])||0,zoom:q.zoom,pitch:q.pitch||0});t.setPosition(s[D])}}x(s,q.interval)}},z)};if(q.location&&typeof q.tween==="string"){var t=r,s=[],v=new google.maps.DirectionsService,u=new google.maps.DirectionsRenderer(t);v.route({origin:q.location,destination:q.tween,travelMode:google.maps.TravelMode.DRIVING},function(C,D){if(D==google.maps.DirectionsStatus.OK){u.setDirections(C);for(var B=C.routes[0].overview_path,z=0,A=B.length;z<A;z++){s.push(new google.maps.LatLng(B[z].lat(),B[z].lng()))}q.interval=q.interval||1000;x(s,10)}})}else{if(typeof q.tween==="object"){var y=r;v=0;for(var w=q.tween.length;v<w;v++){q.tween[v].interval=q.tween[v].interval||1000;x(q.tween,10)}}}}q.onmaploaded&&q.onmaploaded(q,m)}else{setTimeout(function(){n()},13)}};n()},end:function(){if(m){m.getDiv().style.display="none"}},_teardown:function(o){var n=document.getElementById(o.target);n&&n.removeChild(c);c=m=b=null;o._map=null}}},{about:{name:"Popcorn Google Map Plugin",version:"0.1",author:"@annasob",website:"annasob.wordpress.com"},options:{start:{elem:"input",type:"start",label:"Start"},end:{elem:"input",type:"start",label:"End"},target:"map-container",type:{elem:"select",options:["ROADMAP","SATELLITE","STREETVIEW","HYBRID","TERRAIN","STAMEN-WATERCOLOR","STAMEN-TERRAIN","STAMEN-TONER"],label:"Map Type",optional:true},zoom:{elem:"input",type:"text",label:"Zoom","default":0,optional:true},lat:{elem:"input",type:"text",label:"Lat",optional:true},lng:{elem:"input",type:"text",label:"Lng",optional:true},location:{elem:"input",type:"text",label:"Location","default":"Toronto, Ontario, Canada"},heading:{elem:"input",type:"text",label:"Heading","default":0,optional:true},pitch:{elem:"input",type:"text",label:"Pitch","default":1,optional:true}}})})(Popcorn);(function(a){function b(g){function f(){var l=g.getBoundingClientRect(),i=j.getBoundingClientRect();if(i.left!==l.left){j.style.left=l.left+"px"}if(i.top!==l.top){j.style.top=l.top+"px"}}var c=-1,j=document.createElement("div"),h=getComputedStyle(g).zIndex;j.setAttribute("data-popcorn-helper-container",true);j.style.position="absolute";j.style.zIndex=isNaN(h)?e:h+1;document.body.appendChild(j);return{element:j,start:function(){c=setInterval(f,d)},stop:function(){clearInterval(c);c=-1},destroy:function(){document.body.removeChild(j);c!==-1&&clearInterval(c)}}}var e=2000,d=10;a.plugin("image",{manifest:{about:{name:"Popcorn image Plugin",version:"0.1",author:"Scott Downe",website:"http://scottdowne.wordpress.com/"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},src:{elem:"input",type:"url",label:"Image URL","default":"http://mozillapopcorn.org/wp-content/themes/popcorn/images/for_developers.png"},href:{elem:"input",type:"url",label:"Link","default":"http://mozillapopcorn.org/wp-content/themes/popcorn/images/for_developers.png",optional:true},target:"image-container",text:{elem:"input",type:"text",label:"Caption","default":"Popcorn.js",optional:true}}},_setup:function(c){var g=document.createElement("img"),f=document.getElementById(c.target);c.anchor=document.createElement("a");c.anchor.style.position="relative";c.anchor.style.textDecoration="none";c.anchor.style.display="none";if(f){if(["VIDEO","AUDIO"].indexOf(f.nodeName)>-1){c.trackedContainer=b(f);c.trackedContainer.element.appendChild(c.anchor)}else{f&&f.appendChild(c.anchor)}}g.addEventListener("load",function(){g.style.borderStyle="none";c.anchor.href=c.href||c.src||"#";c.anchor.target="_blank";var j,h;g.style.height=f.style.height;g.style.width=f.style.width;c.anchor.appendChild(g);if(c.text){j=g.height/12+"px";h=document.createElement("div");a.extend(h.style,{color:"black",fontSize:j,fontWeight:"bold",position:"relative",textAlign:"center",width:g.style.width||g.width+"px",zIndex:"10"});h.innerHTML=c.text||"";h.style.top=(g.style.height.replace("px","")||g.height)/2-h.offsetHeight/2+"px";c.anchor.insertBefore(h,g)}},false);g.src=c.src},start:function(c,f){f.anchor.style.display="inline";f.trackedContainer&&f.trackedContainer.start()},end:function(c,f){f.anchor.style.display="none";f.trackedContainer&&f.trackedContainer.stop()},_teardown:function(c){if(c.trackedContainer){c.trackedContainer.destroy()}else{c.anchor.parentNode&&c.anchor.parentNode.removeChild(c.anchor)}}})})(Popcorn);(function(a){var b=1,c=false;a.plugin("googlefeed",function(e){var f=function(){var h=false,n=0,q=document.getElementsByTagName("link"),r=q.length,l=document.head||document.getElementsByTagName("head")[0],i=document.createElement("link");if(window.GFdynamicFeedControl){c=true}else{a.getScript("//www.google.com/uds/solutions/dynamicfeed/gfdynamicfeedcontrol.js",function(){c=true})}for(;n<r;n++){if(q[n].href==="//www.google.com/uds/solutions/dynamicfeed/gfdynamicfeedcontrol.css"){h=true}}if(!h){i.type="text/css";i.rel="stylesheet";i.href="//www.google.com/uds/solutions/dynamicfeed/gfdynamicfeedcontrol.css";l.insertBefore(i,l.firstChild)}};window.google?f():a.getScript("//www.google.com/jsapi",function(){google.load("feeds","1",{callback:function(){f()}})});var d=document.createElement("div"),j=document.getElementById(e.target),g=function(){if(c){e.feed=new GFdynamicFeedControl(e.url,d,{vertical:e.orientation.toLowerCase()==="vertical"?true:false,horizontal:e.orientation.toLowerCase()==="horizontal"?true:false,title:e.title=e.title||"Blog"})}else{setTimeout(function(){g()},5)}};if(!e.orientation||e.orientation.toLowerCase()!=="vertical"&&e.orientation.toLowerCase()!=="horizontal"){e.orientation="vertical"}d.style.display="none";d.id="_feed"+b;d.style.width="100%";d.style.height="100%";b++;j&&j.appendChild(d);g();return{start:function(){d.setAttribute("style","display:inline")},end:function(){d.setAttribute("style","display:none")},_teardown:function(h){document.getElementById(h.target)&&document.getElementById(h.target).removeChild(d);delete h.feed}}},{about:{name:"Popcorn Google Feed Plugin",version:"0.1",author:"David Seifried",website:"dseifried.wordpress.com"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},target:"feed-container",url:{elem:"input",type:"url",label:"Feed URL","default":"http://planet.mozilla.org/rss20.xml"},title:{elem:"input",type:"text",label:"Title","default":"Planet Mozilla",optional:true},orientation:{elem:"select",options:["Vertical","Horizontal"],label:"Orientation","default":"Vertical",optional:true}}})})(Popcorn);(function(a){var b=0,c=function(l,d){var k=l.container=document.createElement("div"),g=k.style,f=l.media,e=function(){var h=l.position();g.fontSize="18px";g.width=f.offsetWidth+"px";g.top=h.top+f.offsetHeight-k.offsetHeight-40+"px";g.left=h.left+"px";setTimeout(e,10)};k.id=d||a.guid();g.position="absolute";g.color="white";g.textShadow="black 2px 2px 6px";g.fontWeight="bold";g.textAlign="center";e();l.media.parentNode.appendChild(k);return k};a.plugin("subtitle",{manifest:{about:{name:"Popcorn Subtitle Plugin",version:"0.1",author:"Scott Downe",website:"http://scottdowne.wordpress.com/"},options:{start:{elem:"input",type:"text",label:"Start"},end:{elem:"input",type:"text",label:"End"},target:"subtitle-container",text:{elem:"input",type:"text",label:"Text"}}},_setup:function(e){var d=document.createElement("div");d.id="subtitle-"+b++;d.style.display="none";!this.container&&(!e.target||e.target==="subtitle-container")&&c(this);e.container=e.target&&e.target!=="subtitle-container"?document.getElementById(e.target)||c(this,e.target):this.container;document.getElementById(e.container.id)&&document.getElementById(e.container.id).appendChild(d);e.innerContainer=d;e.showSubtitle=function(){e.innerContainer.innerHTML=e.text||""}},start:function(e,d){d.innerContainer.style.display="inline";d.showSubtitle(d,d.text)},end:function(e,d){d.innerContainer.style.display="none";d.innerContainer.innerHTML=""},_teardown:function(d){d.container.removeChild(d.innerContainer)}})})(Popcorn);(function(a){var b=false;a.plugin("twitter",{manifest:{about:{name:"Popcorn Twitter Plugin",version:"0.1",author:"Scott Downe",website:"http://scottdowne.wordpress.com/"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},src:{elem:"input",type:"text",label:"Tweet Source (# or @)","default":"@popcornjs"},target:"twitter-container",height:{elem:"input",type:"number",label:"Height","default":"200",optional:true},width:{elem:"input",type:"number",label:"Width","default":"250",optional:true}}},_setup:function(l){if(!window.TWTR&&!b){b=true;a.getScript("//widgets.twimg.com/j/2/widget.js")}var c=document.getElementById(l.target);l.container=document.createElement("div");l.container.setAttribute("id",a.guid());l.container.style.display="none";c&&c.appendChild(l.container);var m=l.src||"";c=l.width||250;var k=l.height||200,g=/^@/.test(m),f={version:2,id:l.container.getAttribute("id"),rpp:30,width:c,height:k,interval:6000,theme:{shell:{background:"#ffffff",color:"#000000"},tweets:{background:"#ffffff",color:"#444444",links:"#1985b5"}},features:{loop:true,timestamp:true,avatars:true,hashtags:true,toptweets:true,live:true,scrollbar:false,behavior:"default"}},d=function(e){if(window.TWTR){if(g){f.type="profile";(new TWTR.Widget(f)).render().setUser(m).start()}else{f.type="search";f.search=m;f.subject=m;(new TWTR.Widget(f)).render().start()}}else{setTimeout(function(){d(e)},1)}};d(this)},start:function(d,c){c.container.style.display="inline"},end:function(d,c){c.container.style.display="none"},_teardown:function(c){document.getElementById(c.target)&&document.getElementById(c.target).removeChild(c.container)}})})(Popcorn);(function(a){a.plugin("webpage",{manifest:{about:{name:"Popcorn Webpage Plugin",version:"0.1",author:"@annasob",website:"annasob.wordpress.com"},options:{id:{elem:"input",type:"text",label:"Id",optional:true},start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},src:{elem:"input",type:"url",label:"Webpage URL","default":"http://mozillapopcorn.org"},target:"iframe-container"}},_setup:function(b){var c=document.getElementById(b.target);b.src=b.src.replace(/^(https?:)?(\/\/)?/,"//");b._iframe=document.createElement("iframe");b._iframe.setAttribute("width","100%");b._iframe.setAttribute("height","100%");b._iframe.id=b.id;b._iframe.src=b.src;b._iframe.style.display="none";c&&c.appendChild(b._iframe)},start:function(b,c){c._iframe.src=c.src;c._iframe.style.display="inline"},end:function(b,c){c._iframe.style.display="none"},_teardown:function(b){document.getElementById(b.target)&&document.getElementById(b.target).removeChild(b._iframe)}})})(Popcorn);var wikiCallback;(function(a){a.plugin("wikipedia",{manifest:{about:{name:"Popcorn Wikipedia Plugin",version:"0.1",author:"@annasob",website:"annasob.wordpress.com"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},lang:{elem:"input",type:"text",label:"Language","default":"english",optional:true},src:{elem:"input",type:"url",label:"Wikipedia URL","default":"http://en.wikipedia.org/wiki/Cat"},title:{elem:"input",type:"text",label:"Title","default":"Cats",optional:true},numberofwords:{elem:"input",type:"number",label:"Number of Words","default":"200",optional:true},target:"wikipedia-container"}},_setup:function(b){var e,d=a.guid();if(!b.lang){b.lang="en"}b.numberofwords=b.numberofwords||200;window["wikiCallback"+d]=function(c){b._link=document.createElement("a");b._link.setAttribute("href",b.src);b._link.setAttribute("target","_blank");b._link.innerHTML=b.title||c.parse.displaytitle;b._desc=document.createElement("p");e=c.parse.text["*"].substr(c.parse.text["*"].indexOf("<p>"));e=e.replace(/((<(.|\n)+?>)|(\((.*?)\) )|(\[(.*?)\]))/g,"");e=e.split(" ");b._desc.innerHTML=e.slice(0,e.length>=b.numberofwords?b.numberofwords:e.length).join(" ")+" ...";b._fired=true};b.src&&a.getScript("//"+b.lang+".wikipedia.org/w/api.php?action=parse&props=text&redirects&page="+b.src.slice(b.src.lastIndexOf("/")+1)+"&format=json&callback=wikiCallback"+d)},start:function(b,e){var d=function(){if(e._fired){if(e._link&&e._desc){if(document.getElementById(e.target)){document.getElementById(e.target).appendChild(e._link);document.getElementById(e.target).appendChild(e._desc);e._added=true}}}else{setTimeout(function(){d()},13)}};d()},end:function(b,c){if(c._added){document.getElementById(c.target).removeChild(c._link);document.getElementById(c.target).removeChild(c._desc)}},_teardown:function(b){if(b._added){b._link.parentNode&&document.getElementById(b.target).removeChild(b._link);b._desc.parentNode&&document.getElementById(b.target).removeChild(b._desc);delete b.target}}})})(Popcorn);(function(a){a.plugin("mustache",function(o){var g,r,b,q;a.getScript("http://mustache.github.com/extras/mustache.js");var m=!!o.dynamic,l=typeof o.template,k=typeof o.data,d=document.getElementById(o.target);o.container=d||document.createElement("div");if(l==="function"){if(m){b=o.template}else{q=o.template(o)}}else{q=l==="string"?o.template:""}if(k==="function"){if(m){g=o.data}else{r=o.data(o)}}else{r=k==="string"?JSON.parse(o.data):k==="object"?o.data:""}return{start:function(f,e){var c=function(){if(window.Mustache){if(g){r=g(e)}if(b){q=b(e)}var h=Mustache.to_html(q,r).replace(/^\s*/mg,"");e.container.innerHTML=h}else{setTimeout(function(){c()},10)}};c()},end:function(e,c){c.container.innerHTML=""},_teardown:function(){g=r=b=q=null}}},{about:{name:"Popcorn Mustache Plugin",version:"0.1",author:"David Humphrey (@humphd)",website:"http://vocamus.net/dave"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},target:"mustache-container",template:{elem:"input",type:"text",label:"Template"},data:{elem:"input",type:"text",label:"Data"},dynamic:{elem:"input",type:"checkbox",label:"Dynamic","default":true}}})})(Popcorn);(function(a){function b(e,d){if(e.map){e.map.div.style.display=d}else{setTimeout(function(){b(e,d)},10)}}var c=1;a.plugin("openmap",function(e){var f,d,t,s,r,k,n,l,g=document.getElementById(e.target);f=document.createElement("div");f.id="openmapdiv"+c;f.style.width="100%";f.style.height="100%";c++;g&&g.appendChild(f);l=function(){if(window.OpenLayers&&window.OpenLayers.Layer.Stamen){if(e.location){location=new OpenLayers.LonLat(0,0);a.getJSONP("//tinygeocoder.com/create-api.php?q="+e.location+"&callback=jsonp",function(i){d=new OpenLayers.LonLat(i[1],i[0])})}else{d=new OpenLayers.LonLat(e.lng,e.lat)}e.type=e.type||"ROADMAP";switch(e.type){case"SATELLITE":e.map=new OpenLayers.Map({div:f,maxResolution:0.28125,tileSize:new OpenLayers.Size(512,512)});var h=new OpenLayers.Layer.WorldWind("LANDSAT","//worldwind25.arc.nasa.gov/tile/tile.aspx",2.25,4,{T:"105"});e.map.addLayer(h);s=new OpenLayers.Projection("EPSG:4326");t=new OpenLayers.Projection("EPSG:4326");break;case"TERRAIN":s=new OpenLayers.Projection("EPSG:4326");t=new OpenLayers.Projection("EPSG:4326");e.map=new OpenLayers.Map({div:f,projection:t});h=new OpenLayers.Layer.WMS("USGS Terraserver","//terraserver-usa.org/ogcmap.ashx?",{layers:"DRG"});e.map.addLayer(h);break;case"STAMEN-TONER":case"STAMEN-WATERCOLOR":case"STAMEN-TERRAIN":h=e.type.replace("STAMEN-","").toLowerCase();h=new OpenLayers.Layer.Stamen(h);s=new OpenLayers.Projection("EPSG:4326");t=new OpenLayers.Projection("EPSG:900913");d=d.transform(s,t);e.map=new OpenLayers.Map({div:f,projection:t,displayProjection:s,controls:[new OpenLayers.Control.Navigation,new OpenLayers.Control.PanPanel,new OpenLayers.Control.ZoomPanel]});e.map.addLayer(h);break;default:t=new OpenLayers.Projection("EPSG:900913");s=new OpenLayers.Projection("EPSG:4326");d=d.transform(s,t);e.map=new OpenLayers.Map({div:f,projection:t,displayProjection:s});h=new OpenLayers.Layer.OSM;e.map.addLayer(h)}if(e.map){e.map.setCenter(d,e.zoom||10);e.map.div.style.display="none"}}else{setTimeout(function(){l()},50)}};l();return{_setup:function(h){window.OpenLayers||a.getScript("//openlayers.org/api/OpenLayers.js",function(){a.getScript("//maps.stamen.com/js/tile.stamen.js")});var i=function(){if(h.map){h.zoom=h.zoom||2;if(h.zoom&&typeof h.zoom!=="number"){h.zoom=+h.zoom}h.map.setCenter(d,h.zoom);if(h.markers){var q=OpenLayers.Util.extend({},OpenLayers.Feature.Vector.style["default"]),p=function(u){clickedFeature=u.feature;if(clickedFeature.attributes.text){n=new OpenLayers.Popup.FramedCloud("featurePopup",clickedFeature.geometry.getBounds().getCenterLonLat(),new OpenLayers.Size(120,250),clickedFeature.attributes.text,null,true,function(){k.unselect(this.feature)});clickedFeature.popup=n;n.feature=clickedFeature;h.map.addPopup(n)}},v=function(u){feature=u.feature;if(feature.popup){n.feature=null;h.map.removePopup(feature.popup);feature.popup.destroy();feature.popup=null}},j=function(u){a.getJSONP("//tinygeocoder.com/create-api.php?q="+u.location+"&callback=jsonp",function(x){x=(new OpenLayers.Geometry.Point(x[1],x[0])).transform(s,t);var y=OpenLayers.Util.extend({},q);if(!u.size||isNaN(u.size)){u.size=14}y.pointRadius=u.size;y.graphicOpacity=1;y.externalGraphic=u.icon;x=new OpenLayers.Feature.Vector(x,null,y);if(u.text){x.attributes={text:u.text}}r.addFeatures([x])})};r=new OpenLayers.Layer.Vector("Point Layer",{style:q});h.map.addLayer(r);for(var w=0,m=h.markers.length;w<m;w++){var o=h.markers[w];if(o.text){if(!k){k=new OpenLayers.Control.SelectFeature(r);h.map.addControl(k);k.activate();r.events.on({featureselected:p,featureunselected:v})}}if(o.location){j(o)}else{var z=(new OpenLayers.Geometry.Point(o.lng,o.lat)).transform(s,t),B=OpenLayers.Util.extend({},q);if(!o.size||isNaN(o.size)){o.size=14}B.pointRadius=o.size;B.graphicOpacity=1;B.externalGraphic=o.icon;z=new OpenLayers.Feature.Vector(z,null,B);if(o.text){z.attributes={text:o.text}}r.addFeatures([z])}}}}else{setTimeout(function(){i()},13)}};i()},start:function(h,i){b(i,"block")},end:function(h,i){b(i,"none")},_teardown:function(){g&&g.removeChild(f);f=map=d=t=s=r=k=n=null}}},{about:{name:"Popcorn OpenMap Plugin",version:"0.3",author:"@mapmeld",website:"mapadelsur.blogspot.com"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},target:"map-container",type:{elem:"select",options:["ROADMAP","SATELLITE","TERRAIN"],label:"Map Type",optional:true},zoom:{elem:"input",type:"number",label:"Zoom","default":2},lat:{elem:"input",type:"text",label:"Lat",optional:true},lng:{elem:"input",type:"text",label:"Lng",optional:true},location:{elem:"input",type:"text",label:"Location","default":"Toronto, Ontario, Canada"},markers:{elem:"input",type:"text",label:"List Markers",optional:true}}})})(Popcorn);document.addEventListener("click",function(a){a=a.target;if(a.nodeName==="A"||a.parentNode&&a.parentNode.nodeName==="A"){Popcorn.instances.forEach(function(b){b.options.pauseOnLinkClicked&&b.pause()})}},false);(function(a){var u={},k=0,w=document.createElement("span"),x=["webkit","Moz","ms","O",""],v=["Transform","TransitionDuration","TransitionTimingFunction"],t={},q;document.getElementsByTagName("head")[0].appendChild(w);for(var s=0,d=v.length;s<d;s++){for(var l=0,g=x.length;l<g;l++){q=x[l]+v[s];if(q in w.style){t[v[s].toLowerCase()]=q;break}}}document.getElementsByTagName("head")[0].appendChild(w);a.plugin("wordriver",{manifest:{about:{name:"Popcorn WordRiver Plugin"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},target:"wordriver-container",text:{elem:"input",type:"text",label:"Text","default":"Popcorn.js"},color:{elem:"input",type:"text",label:"Color","default":"Green",optional:true}}},_setup:function(c){c._duration=c.end-c.start;var b;if(!(b=u[c.target])){b=c.target;u[b]=document.createElement("div");var e=document.getElementById(b);e&&e.appendChild(u[b]);u[b].style.height="100%";u[b].style.position="relative";b=u[b]}c._container=b;c.word=document.createElement("span");c.word.style.position="absolute";c.word.style.whiteSpace="nowrap";c.word.style.opacity=0;c.word.style.MozTransitionProperty="opacity, -moz-transform";c.word.style.webkitTransitionProperty="opacity, -webkit-transform";c.word.style.OTransitionProperty="opacity, -o-transform";c.word.style.transitionProperty="opacity, transform";c.word.style[t.transitionduration]="1s, "+c._duration+"s";c.word.style[t.transitiontimingfunction]="linear";c.word.innerHTML=c.text;c.word.style.color=c.color||"black"},start:function(c,b){b._container.appendChild(b.word);b.word.style[t.transform]="";b.word.style.fontSize=~~(30+20*Math.random())+"px";k%=b._container.offsetWidth-b.word.offsetWidth;b.word.style.left=k+"px";k+=b.word.offsetWidth+10;b.word.style[t.transform]="translateY("+(b._container.offsetHeight-b.word.offsetHeight)+"px)";b.word.style.opacity=1;setTimeout(function(){b.word.style.opacity=0},(b.end-b.start-1||1)*1000)},end:function(c,b){b.word.style.opacity=0},_teardown:function(c){var b=document.getElementById(c.target);c.word.parentNode&&c._container.removeChild(c.word);u[c.target]&&!u[c.target].childElementCount&&b&&b.removeChild(u[c.target])&&delete u[c.target]}})})(Popcorn);(function(a){var b=1;a.plugin("timeline",function(d){var c=document.getElementById(d.target),f=document.createElement("div"),i,g=true;if(c&&!c.firstChild){c.appendChild(i=document.createElement("div"));i.style.width="inherit";i.style.height="inherit";i.style.overflow="auto"}else{i=c.firstChild}f.style.display="none";f.id="timelineDiv"+b;d.direction=d.direction||"up";if(d.direction.toLowerCase()==="down"){g=false}if(c&&i){g?i.insertBefore(f,i.firstChild):i.appendChild(f)}b++;f.innerHTML="<p><span id='big' style='font-size:24px; line-height: 130%;' >"+d.title+"</span><br /><span id='mid' style='font-size: 16px;'>"+d.text+"</span><br />"+d.innerHTML;return{start:function(h,e){f.style.display="block";if(e.direction==="down"){i.scrollTop=i.scrollHeight}},end:function(){f.style.display="none"},_teardown:function(){i&&f&&i.removeChild(f)&&!i.firstChild&&c.removeChild(i)}}},{about:{name:"Popcorn Timeline Plugin",version:"0.1",author:"David Seifried @dcseifried",website:"dseifried.wordpress.com"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},target:"feed-container",title:{elem:"input",type:"text",label:"Title"},text:{elem:"input",type:"text",label:"Text"},innerHTML:{elem:"input",type:"text",label:"HTML Code",optional:true},direction:{elem:"select",options:["DOWN","UP"],label:"Direction",optional:true}}})})(Popcorn);(function(a,b){var c={};a.plugin("documentcloud",{manifest:{about:{name:"Popcorn Document Cloud Plugin",version:"0.1",author:"@humphd, @ChrisDeCairos",website:"http://vocamus.net/dave"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},target:"documentcloud-container",width:{elem:"input",type:"text",label:"Width",optional:true},height:{elem:"input",type:"text",label:"Height",optional:true},src:{elem:"input",type:"url",label:"PDF URL","default":"http://www.documentcloud.org/documents/70050-urbina-day-1-in-progress.html"},preload:{elem:"input",type:"checkbox",label:"Preload","default":true},page:{elem:"input",type:"number",label:"Page Number",optional:true},aid:{elem:"input",type:"number",label:"Annotation Id",optional:true}}},_setup:function(g){function f(){function o(q){g._key=q.api.getId();g._changeView=function(s){g.aid?s.pageSet.showAnnotation(s.api.getAnnotation(g.aid)):s.api.setCurrentPage(g.page)}}function p(){c[g._key]={num:1,id:g._containerId};m.loaded=true}m.loaded=false;var n=g.url.replace(/\.html$/,".js"),r=g.target,B=b.getElementById(r),h=b.createElement("div"),D=a.position(B),w=g.width||D.width;D=g.height||D.height;var i=g.sidebar||true,E=g.text||true,C=g.pdf||true,j=g.showAnnotations||true,z=g.zoom||700,v=g.search||true;if(!function(q){var s=false;a.forEach(m.viewers,function(t){if(t.api.getSchema().canonicalURL===q){o(t);t=c[g._key];g._containerId=t.id;t.num+=1;s=true;m.loaded=true}});return s}(g.url)){h.id=g._containerId=a.guid(r);r="#"+h.id;B.appendChild(h);k.trigger("documentready");m.load(n,{width:w,height:D,sidebar:i,text:E,pdf:C,showAnnotations:j,zoom:z,search:v,container:r,afterLoad:g.page||g.aid?function(q){o(q);g._changeView(q);h.style.visibility="hidden";q.elements.pages.hide();p()}:function(q){o(q);p();h.style.visibility="hidden";q.elements.pages.hide()}})}}function e(){window.DV.loaded?f():setTimeout(e,25)}var m=window.DV=window.DV||{},k=this;if(m.loading){e()}else{m.loading=true;m.recordHit="//www.documentcloud.org/pixel.gif";var d=b.createElement("link"),l=b.getElementsByTagName("head")[0];d.rel="stylesheet";d.type="text/css";d.media="screen";d.href="//s3.documentcloud.org/viewer/viewer-datauri.css";l.appendChild(d);m.loaded=false;a.getScript("http://s3.documentcloud.org/viewer/viewer.js",function(){m.loading=false;f()})}},start:function(g,d){var f=b.getElementById(d._containerId),e=DV.viewers[d._key];(d.page||d.aid)&&e&&d._changeView(e);if(f&&e){f.style.visibility="visible";e.elements.pages.show()}},end:function(f,d){var e=b.getElementById(d._containerId);if(e&&DV.viewers[d._key]){e.style.visibility="hidden";DV.viewers[d._key].elements.pages.hide()}},_teardown:function(e){var d=b.getElementById(e._containerId);if((e=e._key)&&DV.viewers[e]&&--c[e].num===0){for(DV.viewers[e].api.unload();d.hasChildNodes();){d.removeChild(d.lastChild)}d.parentNode.removeChild(d)}}})})(Popcorn,window.document);(function(a){a.parser("parseJSON","JSON",function(b){var c={title:"",remote:"",data:[]};a.forEach(b.data,function(d){c.data.push(d)});return c})})(Popcorn);(function(a){a.parser("parseSBV",function(v){var q={title:"",remote:"",data:[]},d=[],g=0,b=0,u=function(e){e=e.split(":");var c=e.length-1,f;try{f=parseInt(e[c-1],10)*60+parseFloat(e[c],10);if(c===2){f+=parseInt(e[0],10)*3600}}catch(h){throw"Bad cue"}return f},t=function(c,f){var e={};e[c]=f;return e};v=v.text.split(/(?:\r\n|\r|\n)/gm);for(b=v.length;g<b;){var s={},k=[],r=v[g++].split(",");try{s.start=u(r[0]);for(s.end=u(r[1]);g<b&&v[g];){k.push(v[g++])}s.text=k.join("<br />");d.push(t("subtitle",s))}catch(l){for(;g<b&&v[g];){g++}}for(;g<b&&!v[g];){g++}}q.data=d;return q})})(Popcorn);(function(a){function b(f,d){var e={};e[f]=d;return e}function c(f){f=f.split(":");try{var d=f[2].split(",");if(d.length===1){d=f[2].split(".")}return parseFloat(f[0],10)*3600+parseFloat(f[1],10)*60+parseFloat(d[0],10)+parseFloat(d[1],10)/1000}catch(e){return 0}}a.parser("parseSRT",function(r){var d={title:"",remote:"",data:[]},q=[],n=0,l=0,k,e,g,f;r=r.text.split(/(?:\r\n|\r|\n)/gm);for(n=r.length-1;n>=0&&!r[n];){n--}g=n+1;for(n=0;n<g;n++){f={};e=[];f.id=parseInt(r[n++],10);k=r[n++].split(/[\t ]*--\>[\t ]*/);f.start=c(k[0]);l=k[1].indexOf(" ");if(l!==-1){k[1]=k[1].substr(0,l)}for(f.end=c(k[1]);n<g&&r[n];){e.push(r[n++])}f.text=e.join("\\N").replace(/\{(\\[\w]+\(?([\w\d]+,?)+\)?)+\}/gi,"");f.text=f.text.replace(/</g,"&lt;").replace(/>/g,"&gt;");f.text=f.text.replace(/&lt;(\/?(font|b|u|i|s))((\s+(\w|\w[\w\-]*\w)(\s*=\s*(?:\".*?\"|'.*?'|[^'\">\s]+))?)+\s*|\s*)(\/?)&gt;/gi,"<$1$3$7>");f.text=f.text.replace(/\\N/gi,"<br />");q.push(b("subtitle",f))}d.data=q;return d})})(Popcorn);(function(a){function b(f,c){var r=f.substr(10).split(","),q;q={start:e(r[c.start]),end:e(r[c.end])};if(q.start===-1||q.end===-1){throw"Invalid time"}var n=g.call(l,/\{(\\[\w]+\(?([\w\d]+,?)+\)?)+\}/gi,""),h=n.replace,l;l=r.length;g=[];for(var k=c.text;k<l;k++){g.push(r[k])}l=g.join(",");var g=l.replace;q.text=h.call(n,/\\N/gi,"<br />");return q}function e(c){var f=c.split(":");if(c.length!==10||f.length<3){return -1}return parseInt(f[0],10)*3600+parseInt(f[1],10)*60+parseFloat(f[2],10)}function d(c,g){var f={};f[c]=g;return f}a.parser("parseSSA",function(f){var c={title:"",remote:"",data:[]},t=[],s=0,r;f=f.text.split(/(?:\r\n|\r|\n)/gm);for(r=f.length;s<r&&f[s]!=="[Events]";){s++}var k=f[++s].substr(8).split(", "),n={},l,h;h=0;for(l=k.length;h<l;h++){if(k[h]==="Start"){n.start=h}else{if(k[h]==="End"){n.end=h}else{if(k[h]==="Text"){n.text=h}}}}for(;++s<r&&f[s]&&f[s][0]!=="[";){try{t.push(d("subtitle",b(f[s],n)))}catch(g){}}c.data=t;return c})})(Popcorn);(function(l){function g(e,c,f){var b=e.firstChild;e=d(e,f);f=[];for(var h;b;){if(b.nodeType===1){if(b.nodeName==="p"){f.push(j(b,c,e))}else{if(b.nodeName==="div"){h=i(b.getAttribute("begin"));if(h<0){h=c}f.push.apply(f,g(b,h,e))}}}b=b.nextSibling}return f}function d(c,b){var e=c.getAttribute("region");return e!==null?e:b||""}function j(e,c,f){var b={};b.text=(e.textContent||e.text).replace(k,"").replace(a,"<br />");b.id=e.getAttribute("xml:id")||e.getAttribute("id");b.start=i(e.getAttribute("begin"),c);b.end=i(e.getAttribute("end"),c);b.target=d(e,f);if(b.end<0){b.end=i(e.getAttribute("duration"),0);if(b.end>=0){b.end+=b.start}else{b.end=Number.MAX_VALUE}}return{subtitle:b}}function i(e,c){var f;if(!e){return -1}try{return l.util.toSeconds(e)}catch(b){for(var h=e.length-1;h>=0&&e[h]<="9"&&e[h]>="0";){h--}f=h;h=parseFloat(e.substring(0,f));f=e.substring(f);return h*({h:3600,m:60,s:1,ms:0.001}[f]||-1)+(c||0)}}var k=/^[\s]+|[\s]+$/gm,a=/(?:\r\n|\r|\n)/gm;l.parser("parseTTML",function(c){var b={title:"",remote:"",data:[]};if(!c.xml||!c.xml.documentElement){return b}c=c.xml.documentElement.firstChild;if(!c){return b}for(;c.nodeName!=="body";){c=c.nextSibling}if(c){b.data=g(c,0)}return b})})(Popcorn);(function(a){a.parser("parseTTXT",function(m){var k={title:"",remote:"",data:[]},b=function(c){c=c.split(":");var e=0;try{return parseFloat(c[0],10)*60*60+parseFloat(c[1],10)*60+parseFloat(c[2],10)}catch(f){e=0}return e},d=function(c,e){var f={};f[c]=e;return f};m=m.xml.lastChild.lastChild;for(var l=Number.MAX_VALUE,j=[];m;){if(m.nodeType===1&&m.nodeName==="TextSample"){var g={};g.start=b(m.getAttribute("sampleTime"));g.text=m.getAttribute("text");if(g.text){g.end=l-0.001;j.push(d("subtitle",g))}l=g.start}m=m.previousSibling}k.data=j.reverse();return k})})(Popcorn);(function(a){function b(g){var d=g.split(":");g=g.length;var f;if(g!==12&&g!==9){throw"Bad cue"}g=d.length-1;try{f=parseInt(d[g-1],10)*60+parseFloat(d[g],10);if(g===2){f+=parseInt(d[0],10)*3600}}catch(e){throw"Bad cue"}return f}function c(f,d){var e={};e[f]=d;return e}a.parser("parseVTT",function(v){var d={title:"",remote:"",data:[]},u=[],t=0,r=0,n,g;v=v.text.split(/(?:\r\n|\r|\n)/gm);r=v.length;if(r===0||v[0]!=="WEBVTT"){return d}for(t++;t<r;){n=[];try{for(var l=t;l<r&&!v[l];){l++}t=l;var k=v[t++];l=void 0;var f={};if(!k||k.indexOf("-->")===-1){throw"Bad cue"}l=k.replace(/--\>/," --> ").split(/[\t ]+/);if(l.length<2){throw"Bad cue"}f.id=k;f.start=b(l[0]);f.end=b(l[2]);for(g=f;t<r&&v[t];){n.push(v[t++])}g.text=n.join("<br />");u.push(c("subtitle",g))}catch(e){for(t=t;t<r&&v[t];){t++}t=t}}d.data=u;return d})})(Popcorn);(function(a){a.parser("parseXML","XML",function(o){var g={title:"",remote:"",data:[]},r={},b=function(c){c=c.split(":");if(c.length===1){return parseFloat(c[0],10)}else{if(c.length===2){return parseFloat(c[0],10)+parseFloat(c[1]/12,10)}else{if(c.length===3){return parseInt(c[0]*60,10)+parseFloat(c[1],10)+parseFloat(c[2]/12,10)}else{if(c.length===4){return parseInt(c[0]*3600,10)+parseInt(c[1]*60,10)+parseFloat(c[2],10)+parseFloat(c[3]/12,10)}}}}},q=function(p){for(var i={},c=0,h=p.length;c<h;c++){var e=p.item(c).nodeName,f=p.item(c).nodeValue,n=r[f];if(e==="in"){i.start=b(f)}else{if(e==="out"){i.end=b(f)}else{if(e==="resourceid"){for(var j in n){if(n.hasOwnProperty(j)){if(!i[j]&&j!=="id"){i[j]=n[j]}}}}else{i[e]=f}}}}return i},m=function(f,e){var c={};c[f]=e;return c},l=function(h,f,e){var c={};a.extend(c,f,q(h.attributes),{text:h.textContent||h.text});f=h.childNodes;if(f.length<1||f.length===1&&f[0].nodeType===3){if(e){r[c.id]=c}else{g.data.push(m(h.nodeName,c))}}else{for(h=0;h<f.length;h++){f[h].nodeType===1&&l(f[h],c,e)}}};o=o.documentElement.childNodes;for(var k=0,d=o.length;k<d;k++){if(o[k].nodeType===1){o[k].nodeName==="manifest"?l(o[k],{},true):l(o[k],{},false)}}return g})})(Popcorn);(function(){var a=false,b=false;Popcorn.player("soundcloud",{_canPlayType:function(d,c){return/(?:http:\/\/www\.|http:\/\/|www\.|\.|^)(soundcloud)/.test(c)&&d.toLowerCase()!=="video"},_setup:function(g){function v(){a=true;SC.initialize({client_id:"PRaNFlda6Bhf5utPjUsptg"});SC.get("/resolve",{url:x.src},function(e){x.width=x.style.width?""+x.offsetWidth:"560";x.height=x.style.height?""+x.offsetHeight:"315";t.scrolling="no";t.frameborder="no";t.id="soundcloud-"+Popcorn.guid();t.src="http://w.soundcloud.com/player/?url="+e.uri+"&show_artwork=false&buying=false&liking=false&sharing=false";t.width="100%";t.height="100%";g.loadListener=function(){g.widget=c=SC.Widget(t.id);c.bind(SC.Widget.Events.FINISH,function(){x.pause();x.dispatchEvent("ended")});c.bind(SC.Widget.Events.PLAY_PROGRESS,function(h){w=h.currentPosition/1000;x.dispatchEvent("timeupdate")});c.bind(SC.Widget.Events.PLAY,function(){y=r=false;x.dispatchEvent("play");x.dispatchEvent("playing");x.currentTime=w;u.next()});c.bind(SC.Widget.Events.PAUSE,function(){y=r=true;x.dispatchEvent("pause");u.next()});c.bind(SC.Widget.Events.READY,function(){c.getDuration(function(h){f=h/1000;x.style.visibility="visible";x.dispatchEvent("durationchange");x.readyState=4;x.dispatchEvent("readystatechange");x.dispatchEvent("loadedmetadata");x.dispatchEvent("loadeddata");x.dispatchEvent("canplaythrough");x.dispatchEvent("load");!x.paused&&x.play()});c.getVolume(function(h){k=h/100})})};t.addEventListener("load",g.loadListener,false);x.appendChild(t)})}function d(){if(b){(function e(){setTimeout(function(){a?v():e()},100)})()}else{b=true;Popcorn.getScript("http://w.soundcloud.com/player/api.js",function(){Popcorn.getScript("http://connect.soundcloud.com/sdk.js",function(){v()})})}}var x=this,t=document.createElement("iframe"),k=1,w=0,y=true,r=true,c,f=0,l=false,u=Popcorn.player.playerQueue();g._container=t;x.style.visibility="hidden";x.play=function(){y=false;u.add(function(){if(r){c&&c.play()}else{u.next()}})};x.pause=function(){y=true;u.add(function(){if(r){u.next()}else{c&&c.pause()}})};Object.defineProperties(x,{muted:{set:function(e){if(e){c&&c.getVolume(function(h){k=h/100});c&&c.setVolume(0);l=true}else{c&&c.setVolume(k*100);l=false}x.dispatchEvent("volumechange")},get:function(){return l}},volume:{set:function(e){c&&c.setVolume(e*100);k=e;x.dispatchEvent("volumechange")},get:function(){return l?0:k}},currentTime:{set:function(e){w=e;c&&c.seekTo(e*1000);x.dispatchEvent("seeked");x.dispatchEvent("timeupdate")},get:function(){return w}},duration:{get:function(){return f}},paused:{get:function(){return y}}});a?v():d()},_teardown:function(d){var c=d.widget,f=SC.Widget.Events,i=d._container;d.destroyed=true;if(c){for(var g in f){c&&c.unbind(f[g])}}else{i.removeEventListener("load",d.loadEventListener,false)}}})})();(function(){function a(g){var f=a.options;g=f.parser[f.strictMode?"strict":"loose"].exec(g);for(var c={},d=14;d--;){c[f.key[d]]=g[d]||""}c[f.q.name]={};c[f.key[12]].replace(f.q.parser,function(i,h,e){if(h){c[f.q.name][h]=e}});return c}function b(d,c){return/player.vimeo.com\/video\/\d+/.test(c)||/vimeo.com\/\d+/.test(c)}a.options={strictMode:false,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}};Popcorn.player("vimeo",{_canPlayType:b,_setup:function(v){function z(e,g){var i=c.src.split("?")[0],h=JSON.stringify({method:e,value:g});if(i.substr(0,2)==="//"){i=window.location.protocol+i}c.contentWindow?c.contentWindow.postMessage(h,i):t.unload()}function k(e){if(e.origin==="http://player.vimeo.com"){var g;try{g=JSON.parse(e.data)}catch(h){console.warn(h)}if(g.player_id==G){g.method&&D[g.method]&&D[g.method](g);g.event&&E[g.event]&&E[g.event](g)}}}function H(){d||(d=setInterval(function(){t.dispatchEvent("timeupdate")},w));B||(B=setInterval(function(){z("getCurrentTime")},u))}function r(){if(d){clearInterval(d);d=0}if(B){clearInterval(B);B=0}}var w=250,u=16,l={MEDIA_ERR_ABORTED:1,MEDIA_ERR_NETWORK:2,MEDIA_ERR_DECODE:3,MEDIA_ERR_SRC_NOT_SUPPORTED:4},G,t=this,F={q:[],queue:function(e){this.q.push(e);this.process()},process:function(){if(f){for(;this.q.length;){this.q.shift()()}}}},B,d,f,c=document.createElement("iframe"),C={error:null,src:t.src,NETWORK_EMPTY:0,NETWORK_IDLE:1,NETWORK_LOADING:2,NETWORK_NO_SOURCE:3,networkState:0,HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4,readyState:0,seeking:false,currentTime:0,duration:NaN,paused:true,ended:false,autoplay:false,loop:false,volume:1,muted:false,width:0,height:0};Popcorn.forEach("error networkState readyState seeking duration paused ended".split(" "),function(e){Object.defineProperty(t,e,{get:function(){return C[e]}})});Object.defineProperties(t,{src:{get:function(){return C.src},set:function(e){C.src=e;t.load()}},currentTime:{get:function(){return C.currentTime},set:function(e){F.queue(function(){z("seekTo",e)});C.seeking=true;t.dispatchEvent("seeking")}},autoplay:{get:function(){return C.autoplay},set:function(e){C.autoplay=!!e}},loop:{get:function(){return C.loop},set:function(e){C.loop=!!e;F.queue(function(){z("setLoop",loop)})}},volume:{get:function(){return C.volume},set:function(e){C.volume=e;F.queue(function(){z("setVolume",C.muted?0:C.volume)});t.dispatchEvent("volumechange")}},muted:{get:function(){return C.muted},set:function(e){C.muted=!!e;F.queue(function(){z("setVolume",C.muted?0:C.volume)});t.dispatchEvent("volumechange")}},width:{get:function(){return c.width},set:function(e){c.width=e}},height:{get:function(){return c.height},set:function(e){c.height=e}}});var D={getCurrentTime:function(e){C.currentTime=parseFloat(e.value)},getDuration:function(e){C.duration=parseFloat(e.value);if(!isNaN(C.duration)){C.readyState=4;t.dispatchEvent("durationchange");t.dispatchEvent("loadedmetadata");t.dispatchEvent("loadeddata");t.dispatchEvent("canplay");t.dispatchEvent("canplaythrough")}},getVolume:function(e){C.volume=parseFloat(e.value)}},E={ready:function(){z("addEventListener","loadProgress");z("addEventListener","playProgress");z("addEventListener","play");z("addEventListener","pause");z("addEventListener","finish");z("addEventListener","seek");z("getDuration");f=true;F.process();t.dispatchEvent("loadstart")},loadProgress:function(e){t.dispatchEvent("progress");C.duration=parseFloat(e.data.duration)},playProgress:function(e){C.currentTime=parseFloat(e.data.seconds)},play:function(){if(C.seeking){C.seeking=false;t.dispatchEvent("seeked")}C.paused=false;C.ended=false;H();t.dispatchEvent("play")},pause:function(){C.paused=true;r();t.dispatchEvent("pause")},finish:function(){C.ended=true;r();t.dispatchEvent("ended")},seek:function(e){C.currentTime=parseFloat(e.data.seconds);C.seeking=false;C.ended=false;t.dispatchEvent("timeupdate");t.dispatchEvent("seeked")}};t.load=function(){f=false;G=Popcorn.guid();var e=a(C.src),h={},j=[],i={api:1,player_id:G};if(b(t.nodeName,e.source)){Popcorn.extend(h,v);Popcorn.extend(h,e.queryKey);Popcorn.extend(h,i);e="http://player.vimeo.com/video/"+/\d+$/.exec(e.path)+"?";for(var g in h){h.hasOwnProperty(g)&&j.push(encodeURIComponent(g)+"="+encodeURIComponent(h[g]))}e+=j.join("&");C.loop=!!e.match(/loop=1/);C.autoplay=!!e.match(/autoplay=1/);c.width=t.style.width?t.style.width:500;c.height=t.style.height?t.style.height:281;c.frameBorder=0;c.webkitAllowFullScreen=true;c.mozAllowFullScreen=true;c.allowFullScreen=true;c.src=e;t.appendChild(c)}else{e=C.MEDIA_ERR_SRC_NOT_SUPPORTED;C.error={};Popcorn.extend(C.error,l);C.error.code=e;t.dispatchEvent("error")}};t.unload=function(){r();window.removeEventListener("message",k,false)};t.play=function(){F.queue(function(){z("play")})};t.pause=function(){F.queue(function(){z("pause")})};setTimeout(function(){window.addEventListener("message",k,false);t.load()},0)},_teardown:function(){this.unload&&this.unload()}})})();(function(a,b){a.onYouTubePlayerAPIReady=function(){onYouTubePlayerAPIReady.ready=true;for(var d=0;d<onYouTubePlayerAPIReady.waiting.length;d++){onYouTubePlayerAPIReady.waiting[d]()}};if(a.YT){a.quarantineYT=a.YT;a.YT=null}onYouTubePlayerAPIReady.waiting=[];var c=false;b.player("youtube",{_canPlayType:function(e,d){return typeof d==="string"&&/(?:http:\/\/www\.|http:\/\/|www\.|\.|^)(youtu)/.test(d)&&e.toLowerCase()!=="video"},_setup:function(e){if(!a.YT&&!c){c=true;b.getScript("//youtube.com/player_api")}var t=this,w=false,g=document.createElement("div"),d=0,v=true,n=false,r=0,l=false,x=100,f=b.player.playerQueue(),u=function(){b.player.defineProperty(t,"currentTime",{set:function(h){if(!e.destroyed){n=true;d=Math.round(+h*100)/100}},get:function(){return d}});b.player.defineProperty(t,"paused",{get:function(){return v}});b.player.defineProperty(t,"muted",{set:function(h){if(e.destroyed){return h}if(e.youtubeObject.isMuted()!==h){h?e.youtubeObject.mute():e.youtubeObject.unMute();l=e.youtubeObject.isMuted();t.dispatchEvent("volumechange")}return e.youtubeObject.isMuted()},get:function(){if(e.destroyed){return 0}return e.youtubeObject.isMuted()}});b.player.defineProperty(t,"volume",{set:function(h){if(e.destroyed){return h}if(e.youtubeObject.getVolume()/100!==h){e.youtubeObject.setVolume(h*100);x=e.youtubeObject.getVolume();t.dispatchEvent("volumechange")}return e.youtubeObject.getVolume()/100},get:function(){if(e.destroyed){return 0}return e.youtubeObject.getVolume()/100}});t.play=function(){if(!e.destroyed){v=false;f.add(function(){if(e.youtubeObject.getPlayerState()!==1){n=false;e.youtubeObject.playVideo()}else{f.next()}})}};t.pause=function(){if(!e.destroyed){v=true;f.add(function(){e.youtubeObject.getPlayerState()!==2?e.youtubeObject.pauseVideo():f.next()})}}};g.id=t.id+b.guid();e._container=g;t.appendChild(g);var k=function(){var s,h,y,q,o=true,p=function(){if(!e.destroyed){if(n){if(d===e.youtubeObject.getCurrentTime()){n=false;t.dispatchEvent("seeked");t.dispatchEvent("timeupdate")}else{e.youtubeObject.seekTo(d)}}else{d=e.youtubeObject.getCurrentTime();t.dispatchEvent("timeupdate")}setTimeout(p,250)}},m=function(A){var z=e.youtubeObject.getDuration();if(isNaN(z)||z===0){setTimeout(function(){m(A*2)},A*1000)}else{t.duration=z;t.dispatchEvent("durationchange");t.dispatchEvent("loadedmetadata");t.dispatchEvent("loadeddata");t.readyState=4;p();t.dispatchEvent("canplaythrough")}};e.controls=+e.controls===0||+e.controls===1?e.controls:1;e.annotations=+e.annotations===1||+e.annotations===3?e.annotations:1;s=/^.*(?:\/|v=)(.{11})/.exec(t.src)[1];h=(t.src.split("?")[1]||"").replace(/v=.{11}/,"");h=h.replace(/&t=(?:(\d+)m)?(?:(\d+)s)?/,function(z,B,A){B|=0;A|=0;r=+A+B*60;return""});h=h.replace(/&start=(\d+)?/,function(A,z){z|=0;r=z;return""});w=/autoplay=1/.test(h);h=h.split(/[\&\?]/g);y={wmode:"transparent"};for(var j=0;j<h.length;j++){q=h[j].split("=");y[q[0]]=q[1]}e.youtubeObject=new YT.Player(g.id,{height:"100%",width:"100%",wmode:"transparent",playerVars:y,videoId:s,events:{onReady:function(){x=t.volume;l=t.muted;i();v=t.paused;u();e.youtubeObject.playVideo();t.currentTime=r},onStateChange:function(z){if(!(e.destroyed||z.data===-1)){if(z.data===2){v=true;t.dispatchEvent("pause");f.next()}else{if(z.data===1&&!o){v=false;t.dispatchEvent("play");t.dispatchEvent("playing");f.next()}else{if(z.data===0){t.dispatchEvent("ended")}else{if(z.data===1&&o){o=false;if(w||!t.paused){v=false}v&&e.youtubeObject.pauseVideo();m(0.025)}}}}}},onError:function(z){if([2,100,101,150].indexOf(z.data)!==-1){t.error={customCode:z.data};t.dispatchEvent("error")}}}});var i=function(){if(!e.destroyed){if(l!==e.youtubeObject.isMuted()){l=e.youtubeObject.isMuted();t.dispatchEvent("volumechange")}if(x!==e.youtubeObject.getVolume()){x=e.youtubeObject.getVolume();t.dispatchEvent("volumechange")}setTimeout(i,250)}}};onYouTubePlayerAPIReady.ready?k():onYouTubePlayerAPIReady.waiting.push(k)},_teardown:function(e){e.destroyed=true;var d=e.youtubeObject;if(d){d.stopVideo();d.clearVideo&&d.clearVideo()}this.removeChild(document.getElementById(e._container.id))}})})(window,Popcorn);